/*
RequireJS
-------------------------------------------------
MIT
(c) 2010-2011, The Dojo Foundation All Rights Reserved.

jQuery.js
-------------------------------------------------
MIT
(c) 2009 John Resig

Backbone
Underscore.js
-------------------------------------------------
MIT
(c) 2009-2011 Jeremy Ashkenas, DocumentCloud Inc.

Handlebars.js
------------------------------------------------
MIT
(c) Yehuda Katz

json2.js
------------------------------------------------
Public Domain.
NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.

Lawnchair
------------------------------------------------
MIT
(c) 2009, 2010, 2011 Brian LeRoux

easyXDM
------------------------------------------------
MIT
(c) 2009-2011, Ã˜yvind Sean Kinsey

Moment.js
------------------------------------------------
MIT
(c) Tim R Wood

Boilerplate-Boilerplate
------------------------------------------------
MIT
(c) 2011 - Adam Sontag

Cohorts
------------------------------------------------
MIT
(c) 2010 James Yu

parseUri 1.2.2
------------------------------------------------
MIT
(c) Steven Levithan <stevenlevithan.com>

FitText.js 1.1
------------------------------------------------
WTFPL
(c) 2011 Dave Rupert http://daverupert.com

usertiming.js
------------------------------------------------
MIT
(c) 2013 Nic Jansma http://nicj.net

asEvented
------------------------------------------------
MIT
(c) 2012, Michal Kuklis
*/

(function(){if(window.BV&&window.BV.serverRender)return;typeof window.BV=="undefined"&&(window.BV={}),!window.BV.serverRender&&window.BV.performance&&window.BV.performance.mark&&(window.BV.performance.mark("primaryStart"),window.BV._internal.primaryStartTime=new Date);var requirejs,require,define;(function(global){function isFunction(e){return ostring.call(e)==="[object Function]"}function isArray(e){return ostring.call(e)==="[object Array]"}function each(e,t){if(e){var n;for(n=0;n<e.length;n+=1)if(e[n]&&t(e[n],n,e))break}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1;n-=1)if(e[n]&&t(e[n],n,e))break}}function hasProp(e,t){return hasOwn.call(e,t)}function eachProp(e,t){var n;for(n in e)if(e.hasOwnProperty(n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){if(n||!hasProp(e,i))r&&typeof t!="string"?(e[i]||(e[i]={}),mixin(e[i],t,n,r)):e[i]=t}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function d(e){var t,n;for(t=0;e[t];t+=1){n=e[t];if(n===".")e.splice(t,1),t-=1;else if(n===".."){if(t===1&&(e[2]===".."||e[0]===".."))break;t>0&&(e.splice(t-1,2),t-=2)}}}function v(e,t,n){var r,i,s,u,a,f,l,c,h,p,v,m=t&&t.split("/"),g=m,y=o.map,b=y&&y["*"];e&&e.charAt(0)==="."&&(t?(o.pkgs[t]?g=m=[t]:g=m.slice(0,m.length-1),e=g.concat(e.split("/")),d(e),i=o.pkgs[r=e[0]],e=e.join("/"),i&&e===r+"/"+i.main&&(e=r)):e.indexOf("./")===0&&(e=e.substring(2)));if(n&&(m||b)&&y){u=e.split("/");for(a=u.length;a>0;a-=1){l=u.slice(0,a).join("/");if(m)for(f=m.length;f>0;f-=1){s=y[m.slice(0,f).join("/")];if(s){s=s[l];if(s){c=s,h=a;break}}}if(c)break;!p&&b&&b[l]&&(p=b[l],v=a)}!c&&p&&(c=p,h=v),c&&(u.splice(0,h,c),e=u.join("/"))}return e}function m(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===r.contextName)return t.parentNode.removeChild(t),!0})}function g(e){var t=o.paths[e];if(t&&isArray(t)&&t.length>1)return m(e),t.shift(),r.require.undef(e),r.require([e]),!0}function y(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function b(e,t,n,i){var s,o,u,a,f=null,c=t?t.name:null,d=e,m=!0,g="";return e||(m=!1,e="_@r"+(h+=1)),a=y(e),f=a[0],e=a[1],f&&(f=v(f,c,i),o=l[f]),e&&(f?o&&o.normalize?g=o.normalize(e,function(e){return v(e,c,i)}):g=v(e,c,i):(g=v(e,c,i),a=y(g),f=a[0],g=a[1],n=!0,s=r.nameToUrl(g))),u=f&&!o&&!n?"_unnormalized"+(p+=1):"",{prefix:f,name:g,parentMap:t,unnormalized:!!u,url:s,originalName:d,isDefine:m,id:(f?f+"!"+g:g)+u}}function w(e){var t=e.id,n=u[t];return n||(n=u[t]=new r.Module(e)),n}function E(e,t,n){var r=e.id,i=u[r];hasProp(l,r)&&(!i||i.defineEmitComplete)?t==="defined"&&n(l[r]):w(e).on(t,n)}function S(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=u[t];n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function x(){globalDefQueue.length&&(apsp.apply(f,[f.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function T(e){delete u[e]}function N(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var s=r.id,o=u[s];o&&!e.depMatched[i]&&!n[s]&&(t[s]?(e.defineDep(i,l[s]),e.check()):N(o,t,n))}),n[r]=!0)}function C(){var e,n,i,a,f=o.waitSeconds*1e3,l=f&&r.startTime+f<(new Date).getTime(),c=[],h=[],p=!1,d=!0;if(t)return;t=!0,eachProp(u,function(t){e=t.map,n=e.id;if(!t.enabled)return;e.isDefine||h.push(t);if(!t.error)if(!t.inited&&l)g(n)?(a=!0,p=!0):(c.push(n),m(n));else if(!t.inited&&t.fetched&&e.isDefine){p=!0;if(!e.prefix)return d=!1}});if(l&&c.length)return i=makeError("timeout","Load timeout for modules: "+c,null,c),i.contextName=r.contextName,S(i);d&&each(h,function(e){N(e,{},{})}),(!l||a)&&p&&(isBrowser||isWebWorker)&&!s&&(s=setTimeout(function(){s=0,C()},50)),t=!1}function k(e){w(b(e[0],null,!0)).init(e[1],e[2])}function L(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function A(e){var t=e.currentTarget||e.srcElement;return L(t,r.onScriptLoad,"load","onreadystatechange"),L(t,r.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function O(){var e;x();while(f.length){e=f.shift();if(e[0]===null)return S(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));k(e)}}var t,n,r,i,s,o={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},map:{},config:{}},u={},a={},f=[],l={},c={},h=1,p=1;return i={require:function(e){return e.require?e.require:e.require=r.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?e.exports:e.exports=l[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return o.config&&o.config[e.map.id]||{}},exports:l[e.map.id]}}},n=function(e){this.events=a[e.id]||{},this.map=e,this.shim=o.shim[e.id],this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},n.prototype={init:function(e,t,n,r){r=r||{};if(this.inited)return;this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check()},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(this.fetched)return;this.fetched=!0,r.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();r.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))},load:function(){var e=this.map.url;c[e]||(c[e]=!0,r.load(this.map.id,e))},check:function(){if(!this.enabled||this.enabling)return;var e,t,n=this.map.id,i=this.depExports,s=this.exports,o=this.factory;if(!this.inited)this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error)try{s=r.execCb(n,o,i,s)}catch(a){e=a}else s=r.execCb(n,o,i,s);this.map.isDefine&&(t=this.module,t&&t.exports!==undefined&&t.exports!==this.exports?s=t.exports:s===undefined&&this.usingExports&&(s=this.exports));if(e)return e.requireMap=this.map,e.requireModules=[this.map.id],e.requireType="define",S(this.error=e)}else s=o;this.exports=s,this.map.isDefine&&!this.ignore&&(l[n]=s,req.onResourceLoad&&req.onResourceLoad(r,this.map,this.depMaps)),delete u[n],this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}},callPlugin:function(){var e=this.map,t=e.id,n=b(e.prefix);this.depMaps.push(n),E(n,"defined",bind(this,function(n){var i,s,a,f=this.map.name,l=this.map.parentMap?this.map.parentMap.name:null,c=r.makeRequire(e.parentMap,{enableBuildCallback:!0,skipMap:!0});if(this.map.unnormalized){n.normalize&&(f=n.normalize(f,function(e){return v(e,l,!0)})||""),s=b(e.prefix+"!"+f,this.map.parentMap),E(s,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),a=u[s.id],a&&(this.depMaps.push(s),this.events.error&&a.on("error",bind(this,function(e){this.emit("error",e)})),a.enable());return}i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(u,function(e){e.map.id.indexOf(t+"_unnormalized")===0&&T(e.map.id)}),S(e)}),i.fromText=bind(this,function(t,n){var s=e.name,o=b(s),u=useInteractive;n&&(t=n),u&&(useInteractive=!1),w(o);try{req.exec(t)}catch(a){throw new Error("fromText eval for "+s+" failed: "+a)}u&&(useInteractive=!0),this.depMaps.push(o),r.completeLoad(s),c([s],i)}),n.load(e.name,c,i,o)})),r.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,s,o;if(typeof e=="string"){e=b(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,o=i[e.id];if(o){this.depExports[t]=o(this);return}this.depCount+=1,E(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&E(e,"error",this.errback)}n=e.id,s=u[n],!i[n]&&s&&!s.enabled&&r.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=u[e.id];t&&!t.enabled&&r.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),e==="error"&&delete this.events[e]}},r={config:o,contextName:e,registry:u,defined:l,urlFetched:c,defQueue:f,Module:n,makeModuleMap:b,nextTick:req.nextTick,configure:function(e){e.baseUrl&&e.baseUrl.charAt(e.baseUrl.length-1)!=="/"&&(e.baseUrl+="/");var t=o.pkgs,n=o.shim,i={paths:!0,config:!0,map:!0};eachProp(e,function(e,t){i[t]?t==="map"?mixin(o[t],e,!0,!0):mixin(o[t],e,!0):o[t]=e}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),e.exports&&!e.exportsFn&&(e.exportsFn=r.makeShimExports(e)),n[t]=e}),o.shim=n),e.packages&&(each(e.packages,function(e){var n;e=typeof e=="string"?{name:e}:e,n=e.location,t[e.name]={name:e.name,location:n||e.name,main:(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),o.pkgs=t),eachProp(u,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=b(t))}),(e.deps||e.callback)&&r.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||getGlobal(e.exports)}return t},makeRequire:function(t,n){function s(o,a,f){var c,h,p;return n.enableBuildCallback&&a&&isFunction(a)&&(a.__requireJsBuild=!0),typeof o=="string"?isFunction(a)?S(makeError("requireargs","Invalid require call"),f):t&&i[o]?i[o](u[t.id]):req.get?req.get(r,o,t):(h=b(o,t,!1,!0),c=h.id,hasProp(l,c)?l[c]:S(makeError("notloaded",'Module name "'+c+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(O(),r.nextTick(function(){O(),p=w(b(null,t)),p.skipMap=n.skipMap,p.init(o,a,f,{enabled:!0}),C()}),s)}return n=n||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var n=e.lastIndexOf("."),i=null;return n!==-1&&(i=e.substring(n,e.length),e=e.substring(0,n)),r.nameToUrl(v(e,t&&t.id,!0),i)},defined:function(e){return hasProp(l,b(e,t,!1,!0).id)},specified:function(e){return e=b(e,t,!1,!0).id,hasProp(l,e)||hasProp(u,e)}}),t||(s.undef=function(e){x();var n=b(e,t,!0),r=u[e];delete l[e],delete c[n.url],delete a[e],r&&(r.events.defined&&(a[e]=r.events),T(e))}),s},enable:function(e,t){var n=u[e.id];n&&w(e).enable()},completeLoad:function(e){var t,n,r,i=o.shim[e]||{},s=i.exports;x();while(f.length){n=f.shift();if(n[0]===null){n[0]=e;if(t)break;t=!0}else n[0]===e&&(t=!0);k(n)}r=u[e];if(!t&&!l[e]&&r&&!r.inited){if(o.enforceDefine&&(!s||!getGlobal(s))){if(g(e))return;return S(makeError("nodefine","No define call for "+e,null,[e]))}k([e,i.deps||[],i.exportsFn])}C()},nameToUrl:function(e,t){var n,r,i,s,u,a,f,l,c;if(req.jsExtRegExp.test(e))l=e+(t||"");else{n=o.paths,r=o.pkgs,u=e.split("/");for(a=u.length;a>0;a-=1){f=u.slice(0,a).join("/"),i=r[f],c=n[f];if(c){isArray(c)&&(c=c[0]),u.splice(0,a,c);break}if(i){e===i.name?s=i.location+"/"+i.main:s=i.location,u.splice(0,a,s);break}}l=u.join("/"),l+=t||(/\?/.test(l)?"":".js"),l=(l.charAt(0)==="/"||l.match(/^[\w\+\.\-]+:/)?"":o.baseUrl)+l}return o.urlArgs?l+((l.indexOf("?")===-1?"?":"&")+o.urlArgs):l},load:function(e,t){req.load(r,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if(e.type==="load"||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=A(e);r.completeLoad(t.id)}},onScriptError:function(e){var t=A(e);if(!g(t.id))return S(makeError("scripterror","Script error",e,[t.id]))}},r.require=r.makeRequire(),r}function getInteractiveScript(){return interactiveScript&&interactiveScript.readyState==="interactive"?interactiveScript:(eachReverse(scripts(),function(e){if(e.readyState==="interactive")return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.1",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,aps=ap.slice,apsp=ap.splice,isBrowser=typeof window!="undefined"&&!!navigator&&!!document,isWebWorker=!isBrowser&&typeof importScripts!="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(typeof define!="undefined")return;if(typeof requirejs!="undefined"){if(isFunction(requirejs))return;cfg=requirejs,requirejs=undefined}typeof require!="undefined"&&!isFunction(require)&&(cfg=require,require=undefined),req=requirejs=function(e,t,n,r){var i,s,o=defContextName;return!isArray(e)&&typeof e!="string"&&(s=e,isArray(t)?(e=t,t=n,n=r):e=[]),s&&s.context&&(o=s.context),i=contexts[o],i||(i=contexts[o]=req.s.newContext(o)),s&&i.configure(s),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=typeof setTimeout!="undefined"?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=function(e){throw e},req.load=function(e,t,n){var r=e&&e.config||{},i;if(isBrowser)return i=r.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),i.type=r.scriptType||"text/javascript",i.charset="utf-8",i.async=!0,i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),i.attachEvent&&!(i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0)&&!isOpera?(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)):(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;isWebWorker&&(importScripts(n),e.completeLoad(t))},isBrowser&&(typeof BV=="undefined"||BV._internal&&BV._internal.samplePage||BV.options&&!BV.options.build)&&eachReverse(scripts(),function(e){head||(head=e.parentNode),dataMain=e.getAttribute("data-main");if(dataMain)return cfg.baseUrl||(src=dataMain.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath,dataMain=mainScript),dataMain=dataMain.replace(jsSuffixRegExp,""),cfg.deps=cfg.deps?cfg.deps.concat(dataMain):[dataMain],!0}),define=function(e,t,n){var r,i;typeof e!="string"&&(n=t,t=e,e=null),isArray(t)||(n=t,t=[]),!t.length&&isFunction(n)&&n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(n.length===1?["require"]:["require","exports","module"]).concat(t)),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)})(this),BV.requirejs=requirejs,BV.require=require,BV.define=define})(),function(){typeof window.BV=="undefined"&&(window.BV={}),BV.define("staticAssets",[],function(){var e={jquery:"jquery-bv@1.11.1",lodash:"lodash-bv@1.2.0"},t={};return{load:function(n,r,i,s){if(t[n]){i(t[n]);return}window.BV._staticAssetRegistry.require([e[n]],function(e){t[n]=e,i(e)})}}}),BV.define("window",[],function(){return window}),BV.define("jquery",["staticAssets!jquery","window"],function(e,t){if(t.BV&&t.BV.serverRender){var n=function(){return[{}]};return n.Deferred=t.BV.ud.Deferred,n.when=t.BV.ud.when,n.fn={},n.event={special:{}},n._bvjquery=!0,n}return e}),BV.define("vendor/jquery/importantizer",["jquery"],function(e){function r(t,r){return{set:function(i,s){r&&r.call(this,i,s);var o=n[t]||t,u=i.style.cssText.replace(new RegExp(o+": [^;]+[;$]","i"),""),a=u+"; "+o+": "+s+" !important;";e(i).css("cssText",a)}}}var t=["top","overflow","z-index","position","display","right","left","bottom","width","height","padding","margin","overflowY","fontSize","visibility","maxHeight","maxWidth"],n={fontSize:"font-size",overflowY:"overflow-y",zIndex:"z-index",maxHeight:"max-height",maxWidth:"max-width"},i=e.Deferred();return e.importantizer=i.promise(),e(function(){e.each(t,function(t,n){e.cssHooks[n]=e.cssHooks[n]||{};var i=e.cssHooks[n].set;e.extend(e.cssHooks[n],r(n,i))}),i.resolve()}),e}),BV.define("underscore",["staticAssets!lodash"],function(e){return function(e){var t=String.prototype.trim,n=String.prototype.trimRight,r=String.prototype.trimLeft,i=function(e){return e==null?"\\s":e.source?e.source:"["+s.escapeRegExp(e)+"]"},s={escapeRegExp:function(e){return e==null?"":String(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},capitalize:function(e){return e=e==null?"":String(e),e.charAt(0).toUpperCase()+e.slice(1)},trim:function(e,n){return e==null?"":!n&&t?t.call(e):(n=i(n),String(e).replace(new RegExp("^"+n+"+|"+n+"+$","g"),""))},ltrim:function(e,t){return e==null?"":!t&&r?r.call(e):(t=i(t),String(e).replace(new RegExp("^"+t+"+"),""))},rtrim:function(e,t){return e==null?"":!t&&n?n.call(e):(t=i(t),String(e).replace(new RegExp(t+"+$"),""))},prune:function(e,t,n){if(e==null)return"";e=String(e),t=~~t,n=n!=null?String(n):"...";if(e.length<=t)return e;var r=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},i=e.slice(0,t+1).replace(/.(?=\W*\w*$)/g,r);return i.slice(i.length-2).match(/\w\w/)?i=i.replace(/\s*\S+$/,""):i=s.rtrim(i.slice(0,i.length-1)),(i+n).length>e.length?e:e.slice(0,i.length)+n},stripTags:function(e){return e==null?"":String(e).replace(/<\/?[^>]+>/g,"")}};e.string=e.str=s}(e),e}),function(e){function o(t){return typeof s[t]=="function"&&(s[t]=s[t](e,r,i)),s[t]}function u(t,n,o){s[t]=o?n(e,r,i):n}function a(e,t){var r=!1,i=e.charAt(0).toUpperCase()+e.slice(1),s=n.length,o=t.style;if(typeof o[e]=="string")r=!0;else while(s--)if(typeof o[n[s]+i]=="string"){r=!0;break}return r}function f(e){if(e)while(e.lastChild)e.removeChild(e.lastChild);return e}function l(e,n){var r=typeof e[n];return r=="object"?!!e[n]:!t[r]}var t={"boolean":1,number:1,string:1,"undefined":1},n=["Webkit","Moz","O","ms","Khtml"],r=l(e,"document")&&e.document,i=r&&l(r,"createElement")&&r.createElement("DiV"),s={};o.add=u,o.clearElement=f,o.cssprop=a,o.isHostType=l,o._tests=s,o.add("dom",function(e,t,n){return t&&n&&l(e,"location")&&l(t,"documentElement")&&l(t,"getElementById")&&l(t,"getElementsByName")&&l(t,"getElementsByTagName")&&l(t,"createComment")&&l(t,"createElement")&&l(t,"createTextNode")&&l(n,"appendChild")&&l(n,"insertBefore")&&l(n,"removeChild")&&l(n,"getAttribute")&&l(n,"setAttribute")&&l(n,"removeAttribute")&&l(n,"style")&&typeof n.style.cssText=="string"});try{document.execCommand("BackgroundImageCache",!1,!0)}catch(c){}BV.define("util/has",[],function(){return o})}(this),BV.define("BV",["window"],function(e){return e.BV}),BV.define("util/checksum",[],function(){return function(e,t,n,r,i){for(t=n=r=0;i=e.charCodeAt(r++);n=(n+t)%255)t=(t+i)%255;return n<<8|t}}),BV.define("bv/util/grammr",["underscore"],function(e){return function(t){function n(n,r,i){var s=n.toLowerCase(),o;e(t).forEach(function(e){s===e[0]?o=r?e[1]:s:s===e[1]&&(o=r?s:e[0])});if(o)return i?e.string.capitalize(o):o;throw new Error("Unknown type: "+n)}return{noun:e.memoize(function(e){return n(e)}),nouns:e.memoize(function(e){return n(e,!0)}),Noun:e.memoize(function(e){return n(e,!1,!0)}),Nouns:e.memoize(function(e){return n(e,!0,!0)}),NOUN:e.memoize(function(e){return n(e).toUpperCase()}),NOUNS:e.memoize(function(e){return n(e,!0).toUpperCase()})}}}),BV.define("client",{load:function(e,t,n,r){r.isServerRender?n({}):t([e],function(e){n(e)})}}),BV.define("util/url",["client!window","underscore"],function(e,t){function n(e,t){var n=e.indexOf(t),r=e.substring(0,n),i=e.substring(n+1);return[r,i]}e.location||(e.location={protocol:"http:"});var r={protocol:e.location.protocol==="https:"?"https:":"http:",host:e.location.host,origin:e.location.origin||e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:""),join:function(){var e=t(arguments).toArray();return e.length===0?"":t(e).map(function(t,n){return t=t.toString(),n===0?t.replace(/\/$/g,""):n===e.length-1?t.replace(/^\//g,""):t.replace(/^\/|\/$/g,"")}).join("/")},splice:function(e,t){var n=this.withoutHash(e),r=this.hash(e),i=n.split("?");if(i.length<2)return e;if(t==="*")return i[0]+r;var s=encodeURIComponent(t)+"=",o=i[1].split(/[&;]/g);for(var u=o.length;u-->0;)if(o[u].lastIndexOf("bvdata=",0)===0){var a=o[u].split("=")[1],f=decodeURIComponent(a),l=f.split(/[&;]/g);for(var c=l.length;c-->0;)l[c].lastIndexOf(s,0)!==-1&&l.splice(c,1);o[u]="bvdata="+encodeURIComponent(l.join("&"))}else o[u].lastIndexOf(s,0)!==-1&&o.splice(u,1);return i[0]+"?"+o.join("&")+r},getParam:function(e,t){var r=this.withoutHash(e),i=r.split("?");if(i.length<2)return null;var s=encodeURIComponent(t)+"=",o=i[1].split(/[&;]/g);for(var u=o.length;u-->0;)if(o[u].lastIndexOf(s,0)!==-1){var a=n(o[u],"=")[1];return decodeURIComponent(a)}return null},push:function(e,t,n){var r=this.withoutHash(e),i=encodeURIComponent(t)+"="+encodeURIComponent(n),s=this.caboose(r)+i+this.hash(e);return s},caboose:function(e){if(!e)return null;e=this.withoutHash(e);var t=e.indexOf("?");return t===e.length-1?e:e+(t>0?"&":"?")},stringifyObject:function(e){var n=[];return t(e).forEach(function(e,r){t(e).isUndefined()||n.push(encodeURIComponent(r)+"="+encodeURIComponent(e))}),n.join("&")},toQueryParams:function(e,r){var i=e.match(/([^?#]*)(#.*)?$/);return i?t(i[1].split(r||"&")).reduce(function(e,r){if((r=n(r,"="))[0]){var i=decodeURIComponent(r.shift()),s=r.length>1?r.join("="):r[0];t.isUndefined(s)||(s=decodeURIComponent(s)),i in e?(t.isArray(e[i])||(e[i]=[e[i]]),e[i].push(s)):e[i]=s}return e},{}):{}},hash:function(e){var t=e.indexOf("#");return t===-1?"":e.slice(t)},withoutHash:function(e){return e.replace(/#.*?$/,"")}};return r}),BV.define("bv/api",["underscore","util/checksum","bv/util/grammr","util/url"],function(e,t,n,r){var i=this,s={_config:{format:"json",normalize:!0,apiversion:"5.5",timeKey:"LastModeratedTime"}},o={">":"gt",">=":"gte","<":"lt","<=":"lte","=":"eq","!=":"neq"},u={"+":"asc","-":"desc"},a=[["review","reviews","with"],["question","questions"],["answer","answers"],["story","stories"],["comment","comments","with"],["reviewcomment","reviewcomments","with"],["author","authors","from"],["photo","photos","with"],["video","videos","with"],["product","products"],["category","categories","in"],["clientresponse","clientresponses"],["statistic","statistics"]],f=function(e,t,n){return new f.fn.init(e,t,n)},l={offset:function(e){return this.mods.offset=e,this},limit:function(e){return this.mods.limit=e,this},sortBy:function(e,t){return typeof t=="undefined"&&(t=e,e="desc"),this.mods.sorts.push({dir:(""+e).toLowerCase(),key:(""+t).toLowerCase()}),this},_forSubmission:function(){return this.self._data.contentType.indexOf("submit")===0},filterBy:function(e,t,n,r){return typeof t=="undefined"&&typeof n=="undefined"?(t="=",n="true"):typeof n=="undefined"&&(n=t,t="="),this.mods.filters.push({key:(""+e).toLowerCase(),operator:(""+t).toLowerCase(),value:r?""+n:(""+n).toLowerCase()}),this},end:function(e){return this.self._get.call(this.self,this.type,this.mods,e)}};e.extend(s,{get:f,config:function(t){return s._config=e.extend(s._config,t),this},warn:function(e,t){i.console&&i.console.log&&i.console.log("bvapiclient warning: "+e,t)}}),e(a).forEach(function(t){s[t[0]]=s[t[1]]=function(n){return n&&!e.isArray(n)&&(n=e.toArray(arguments)),this.get(t[1],n)}}),f.fn=f.prototype={constructor:f,init:function(t,n,r){return this.config=e.extend({},s._config),this._data={contentType:t},e(["batch","products","categories","authors"]).contains(t)||e(this.config.contentLocales).forEach(function(e){this.filterBy("contentlocale_default_filters","=",e,!0)},this),n?this.filterBy("id","=",n):(t==="batch"&&(this._data.apiBatch=r,this.limit(null),this.serialize=this.serializeBatch),this)},as:function(e){return this.config.format=e,this},_label:function(e){return this.config._label=e,this},withPasskey:function(e){return this.config.passkey=e,this},withBaseUrl:function(e){return this.config.baseUrl=e,this},withUser:function(e){return this.config.user=e,this},withContentType:function(e){return this.config.contentType=e,this},withRandomParameter:function(){return this.config.randomParameter=Math.floor(1e7*Math.random()),this},withHasSubmitted:function(){return this.config.hasSubmitted=!0,this},inLocale:function(e){return this.config.locale=e,this},locale:function(e){return this.inLocale(e)},include:function(t){return arguments.length>1?t=e.toArray(arguments):t&&!e.isArray(t)&&(t=[t]),t=e(t).map(function(e){return e.toLowerCase()}),this.config.include=e.union(this.config.include||[],t||[]),e(t).forEach(function(t){if(e(["products","categories","authors"]).contains(t))return;e(this.config.contentLocales).forEach(function(e){this.filterIncluded(t).by("contentlocale_default_filters","=",e,!0)},this)},this),this},withoutContentLocaleFilter:function(){return delete this._data.filters.contentlocale_default_filters,e(this._data.subfilters).forEach(function(t,n){delete this._data.subfilters[n].contentlocale_default_filters,e(this._data.subfilters[n]).size()||delete this._data.subfilters[n]},this),this},offset:function(e){return this.config.offset=e,this},offsetBy:function(e){return this.offset(e)},limit:function(e){return this.config.limit=e,this},limitTo:function(e){return this.limit(e)},page:function(e){var t=this;return this.config.limit||(s.warn("You are calling `page` without setting the number per page. Using 10 as your `limit`."),t=this.limit(10)),t.offset(e*this.config.limit-this.config.limit)},onPage:function(e){return this.page(e)},_get:function(t,n,r){var i=this;return!t||!n?(s.warn("Invalid use of _get private function.",arguments),this):(t=t.toLowerCase(),i._data.subfilters=i._data.subfilters||{},e(n.filters).forEach(function(e){e.operator=o[e.operator]||e.operator,i._data.subfilters[t]=i._data.subfilters[t]||{},i._data.subfilters[t][e.key]=i._data.subfilters[t][e.key]||{},i._data.subfilters[t][e.key][e.operator]=i._data.subfilters[t][e.key][e.operator]||[],i._data.subfilters[t][e.key][e.operator].push(e.value)}),e(n.sorts).forEach(function(e){e.dir=u[e.dir]||e.dir,i._data.subsorts=i._data.subsorts||{},i._data.subsorts[t]=i._data.subsorts[t]||[],i._data.subsorts[t].push(e)}),n.limit&&(i._data.sublimits=i._data.sublimits||{},i._data.sublimits[t]=n.limit),n.offset&&(i._data.suboffsets=i._data.suboffsets||{},i._data.suboffsets[t]=n.offset),!e(this.config.include).contains(t)&&!r?this.include(t):this)},get:function(e,t){var n={filters:[],sorts:[]},r=function(){},i;return r.prototype=l,i=new r,i.mods=n,i.type=e,i.self=this,i.config=this.config,this._data.subcontents=this._data.subcontents||[],this._data.subcontents.push(e),t?i.filterBy("id","=",t):i},filterIncluded:function(e,t){var n=this;return{by:function(r,i,s,o){return n.get.call(n,e).filterBy(r,i,s,o).end(t)}}},sortIncluded:function(e){var t=this;return{by:function(n,r){return t.get.call(t,e).sortBy(n,r).end()}}},offsetIncluded:function(e){var t=this;return{by:function(n){return t.get.call(t,e).offset(n).end()}}},limitIncluded:function(t){var n=this;return{to:function(e){return n.get.call(n,t).limit(e).end()},by:function(){return this.by.apply(this,e.toArray(arguments))}}},withStatsOn:function(t){return arguments.length>1?t=e.toArray(arguments):t&&!e.isArray(t)&&(t=[t]),this.config.stats=e.union(this.config.stats||[],t),t=e(t).map(function(e){return s.nouns(e)}),t=e(t).union(e(t).contains("questions")?["answers"]:[],e(t).contains("reviews")?["reviewcomments"]:[]),e(t).forEach(function(t){if(e(["products","categories","authors"]).contains(t))return;e(this.config.contentLocales).forEach(function(e){this.filterIncluded(t,!0).by("contentlocale_default_filters","=",e,!0)},this)},this),this},stats:function(){return this.withStatsOn.apply(this,arguments)},sortBy:function(e,t){return t||(t=e,e="desc"),e=u[e]||e,this._data.sorts=this._data.sorts||[],this._data.sorts.push({key:(""+t).toLowerCase(),dir:(""+e).toLowerCase()}),this},_forSubmission:function(){return this._data.contentType.indexOf("submit")===0},withSubject:function(e,t){var n=this;return this._data.subjects=this._data.subjects||{},this._data.subjects[e]=t,n},filterBy:function(t,n,r){var i=this;return t=t.toLowerCase(),typeof r=="undefined"&&(n?(r=n,n="="):(n="=",r="true")),r=""+r,o[n]&&(n=o[n]),this._data.filters=this._data.filters||{},this._data.filters[t]=this._data.filters[t]||{},this._data.filters[t][n]=this._data.filters[t][n]||[],e.isArray(r)||(r=[r]),e(r).forEach(function(e){i._data.filters[t][n].push(e)}),this},searchFor:function(e){var t=this._data.contentType;return this._data.searches=this._data.searches||{},this._data.searches["search_"+t]=this._data.searches["search_"+t]||[],this._data.searches["search_"+t].push(e),this},checksum:function(e){return t(this.serialize()+(e||""))},serialize:function(t){var n=this._data,s="",o="",u=this.buildQueryArray(n,this.config);return s+=n.contentType,s+="."+this.config.format,u=e(u).map(function(e){return t?e.key+"="+e.val:i.encodeURIComponent(e.key)+"="+i.encodeURIComponent(e.val)}).join("&"),this.config.baseUrl?(this.config.baseUrl.indexOf("//")===0&&(o=r.protocol),o+this.config.baseUrl+s+"?"+u):s+"?"+u},serializeBatch:function(t){var n=this._data,s="",o=this.buildQueryArray(n,this.config),u="",a="";return s+=n.contentType,s+="."+this.config.format,o=e(o).map(function(e){return t?e.key+"="+e.val:i.encodeURIComponent(e.key)+"="+i.encodeURIComponent(e.val)}),e(n.apiBatch).forEach(function(n,r){var s="q"+r,u="resource."+s+"="+n._data.contentType,a=n.buildQueryArray(n._data,n.config,!0),f=[u];f=f.concat(e(a).map(function(e){return t?e.key+"."+s+"="+e.val:i.encodeURIComponent(e.key+"."+s)+"="+i.encodeURIComponent(e.val)})),o=o.concat(f)}),u=o.join("&"),this.config.baseUrl?(this.config.baseUrl.indexOf("//")===0&&(a=r.protocol),a+this.config.baseUrl+s+"?"+u):s+"?"+u},buildQueryArray:function(t,n,r){var i=[];r||(i.push({key:"passkey",val:n.passkey}),i.push({key:"apiversion",val:n.apiversion}),n.displaycode&&i.push({key:"displaycode",val:n.displaycode}),n.virtualEnvironment&&i.push({key:"ve",val:n.virtualEnvironment})),t.filters&&(!t.filters.contentlocale&&t.filters.contentlocale_default_filters&&(t.filters.contentlocale=t.filters.contentlocale_default_filters),delete t.filters.contentlocale_default_filters),t.subfilters&&e(t.subfilters).forEach(function(e){!e.contentlocale&&e.contentlocale_default_filters&&(e.contentlocale=e.contentlocale_default_filters),delete e.contentlocale_default_filters}),e(t.filters).forEach(function(t,n){e(t).forEach(function(t,r){t.length&&i.push({key:"filter",val:n+":"+r+":"+e(t).uniq().join(",")})})}),t.sorts&&t.sorts.length&&i.push({key:"sort",val:e(t.sorts).chain().uniq(!1,function(e){return e.key}).map(function(e){return e.key+":"+e.dir}).value().join(",")}),e(t.searches).forEach(function(t,n){t.length&&i.push({key:"search",val:e(t).uniq().join(",").replace(/\"/g,'\\"')})});if(n.stats&&n.stats.length){var s=e(n.stats).chain().map(function(e){return e.toLowerCase()}).uniq().value().join(",");i.push({key:"stats",val:s}),this._data.contentType!=="statistics"&&this._data.contentType!=="authors"&&i.push({key:"filteredstats",val:s})}return n.include&&n.include.length&&i.push({key:"include",val:e(n.include).chain().map(function(e){return e.toLowerCase()}).uniq().value().join(",")}),e(t.subfilters).forEach(function(t,n){e(t).forEach(function(t,r){e(t).forEach(function(t,s){t.length&&i.push({key:"filter_"+n,val:r+":"+s+":"+e(t).uniq().join(",")})})})}),e(t.subsorts).forEach(function(t,n){i.push({key:"sort_"+n,val:e(t).chain().uniq(!1,function(e){return e.key}).map(function(e){return e.key+":"+e.dir}).value().join(",")})}),(n.limit||n.limit===0)&&i.push({key:"limit",val:n.limit}),(n.offset||n.offset===0)&&i.push({key:"offset",val:n.offset}),e(t.sublimits).forEach(function(e,t){i.push({key:"limit_"+t,val:e})}),e(t.suboffsets).forEach(function(e,t){i.push({key:"offset_"+t,val:e})}),n.locale&&i.push({key:"locale",val:n.locale}),n.contentType&&i.push({key:"ContentType",val:n.contentType}),n.user&&i.push({key:"user",val:n.user}),n._label&&i.push({key:"_label",val:n._label}),n.randomParameter&&i.push({key:"rand",val:n.randomParameter}),n.hasSubmitted&&i.push({key:"hasSubmitted",val:"1"}),t.subjects&&e(t.subjects).forEach(function(e,t){i.push({key:t,val:e})}),i}},e(a).forEach(function(t){var n=t[0].substr(0,1).toUpperCase()+t[0].substr(1),r=t[1].substr(0,1).toUpperCase()+t[1].substr(1),i=["for"];t[2]&&i.push(t[2]),e(i).forEach(function(i){f.fn[i+r]=l[i+r]=function(n){return n?(n&&!e.isArray(n)&&(n=e.toArray(arguments)),this._forSubmission()?this.withSubject(t[0]+"id",n[0]):this.filterBy(t[0]+"id","=",n)):this},f.fn[i+n]=l[i+n]=function(e){return e?this[i+r]([e]):this}})});var c={before:function(e,t){return this.filterBy(this.config.timeKey,t===!1?"<":"<=",e)},after:function(e,t){return this.filterBy(this.config.timeKey,t?">=":">",e)}};return e.extend(f.fn,c),e.extend(l,c),f.fn.init.prototype=f.fn,l.constructor=f.fn.get,s.get=f,e.extend(s,n(a)),s.typePairs=a,s}),BV.define("bv/api/util/referenceCache",["underscore","jquery","window","bv/api"],function(e,t,n,r){function s(t,n){var r=e.extend({Id:t},n);return e(["Content","PrimaryContent"]).forEach(function(e){delete r[e]}),r}function o(e,r){var i=t.Deferred();return n.BV.require(["ENV","util/url","bv/api/fetch"],function(t,n,o){var u=o.get(o.nouns(e),r).limitTo(1);u.fetch("reference").done(function(e){e=e.data;var t=e.Results[0];i.resolve(s(r,t))})}),i}var i={};return{get:function(e,t){var n=r.noun(e)+"/"+t,s=i[n]=i[n]||o(e,t);return s},set:function(e,n,o){var u=r.noun(e)+"/"+n;i[u]=i[u]||t.Deferred(),i[u].resolve(s(n,o))}}}),BV.define("backbone",["underscore","jquery"],function(e,t){var n={jQuery:t,_:e};return function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"&&typeof process!="undefined"&&process.versions&&process.versions.node?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=e._;!u&&typeof require!="undefined"&&(u=BV.require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(n),n.Backbone}),BV.define("ENV",["window","BV","bv/api/util/referenceCache","backbone"],function(e,t,n,r){var i=new r.Model({components:{},mappings:{},uniq:{view:0},classPrefix:"bv-",config:e.BV.options,initPage:1,keyboardMode:!1,references:n});return i.isContainer=function(){return Boolean(t._internal.container)},i}),BV.define("bv/clientAPISetup",["ENV","bv/api"],function(e,t){return function(){var n=e.get("config"),r=n.apiconfig;n.displaycode&&n.displaycode!=="default"&&(r.displaycode=n.displaycode+"-"+n.locale.toLowerCase()),t.config(r)}}),function(window){function captureJSON(){JSON={stringify:JSON.stringify,parse:JSON.parse}}var JSON=window.JSON||{};try{if(JSON.stringify([])!=="[]"||JSON.stringify(0)==="{}")throw"Bad JSON.stringify";if(JSON.parse(null)!==null)throw"Bad JSON.parse";captureJSON()}catch(e){JSON={}}(function(){function f(e){return e<10?"0"+e:e}function toString(e){return _toString.call(e)}function kind(e){var t=toString(e),n=t.indexOf(" ")+1,r=t.indexOf("]");return t.slice(n,r).toLowerCase()}function isBuiltin(e){return kind(e)in TYPE_MAP}function defaultToJSON(e){return this.valueOf()}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&isBuiltin(a)?a=TYPE_MAP[kind(a)].call(a,e):a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}var _toString=Object.prototype.toString,TYPE_MAP={date:function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},array:function(e){return this},string:defaultToJSON,number:defaultToJSON,"boolean":defaultToJSON},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})})(),BV.define("vendor/json2",[],function(){return JSON})}.call(this,this),BV.define("components",["underscore","vendor/json2"],function(e,t){var n={},r="@components";return{}}),BV.define("components!",{bvRouter1:{componentId:"bvRouter1",type:"bvRouter",routes:[{name:"submit",paths:[":contentType/submit/:campaignId"],params:["contentType","campaignId"],actions:[{component:"reviewSubmission1",scope:"rr",action:"submit_review"}]},{name:"page",paths:[":displayCode/:contentType/:subjectType/:pageNum/:product.htm"],params:["displayCode","contentType","subjectType","pageNum","product"],actions:[{component:"reviewContentList1",event:"pageto"}]},{name:"bvstateRR",paths:["bvstate/review/:pageNum"],params:["pageNum"],actions:[{component:"reviewContentList1",event:"pageto"}]},{name:"bvstateQA",paths:["bvstate/question/:pageNum"],params:["pageNum"],actions:[{component:"questionContentList1",event:"pageto"}]},{name:"deeplink",paths:[":contentType/:id"],params:["contentType","id"],actions:[{component:"reviewContentList1",event:"deeplink"},{component:"questionContentList1",event:"deeplink"}]},{name:"bvdata",paths:["bvdata/:urlData"],params:["urlData"],actions:[{bvdata:"bvdata"}]},{name:"sort",paths:[":contentType/sort/:key/:dir"],params:["contentType","key","dir"],actions:[{component:"reviewContentList1",event:"sort"}]},{name:"showHelpfulPositive",paths:[":contentType/showHelpfulPositive"],params:["contentType"],actions:[{component:"reviewContentList1",event:"showhelpfulpositive"}]},{name:"showHelpfulCritical",paths:[":contentType/showHelpfulCritical"],params:["contentType"],actions:[{component:"reviewContentList1",event:"showhelpfulcritical"}]}],viewUniq:0,views:{}},fullProfilePopup1:{container:"BVContainer",subjectType:"Authors",contentType:"Authors",type:"fullProfile",pageview:{bvProduct:"Profiles"},features:{self:["sidebar","tabs"],sidebar:[],tabs:["profileContentList<Reviews>","profileContentList<Questions>","profileContentList<Answers>"],profileContentList:["contentItemCollection","ugcCount","pagination"],contentItem:{contentTypes:{Reviews:{features:["has:stars","has:productImage","has:prosCons","has:contentBadges","has:secondarySubmission"]},Questions:{features:["has:secondaryContentLink","secondaryContentList","has:secondarySubmission","has:secondaryContentBtn"]},Answers:{features:["has:secondaryContentLink","has:secondarySubmission"]}}},secondaryContentList:{contentTypes:{Comments:{features:["secondaryContentItemCollection"]},Answers:{features:["secondaryContentItemCollection"]}}},secondaryContentItem:{contentTypes:{Comments:{features:["has:userBadges"]}}}},outlets:{showmediaviewer:[{component:"mediaViewer1",event:"open"}],showanswersubmission:[{component:"answerSubmission1_inline",scope:"qa",action:"submit_answer"}]},componentId:"fullProfilePopup1",createOnce:!0,viewUniq:0,views:{}},mediaViewer1:{container:"BVContainer",subjectType:"Products",contentType:"Products",coverageContentTypes:["Reviews","Questions"],type:"mediaViewer",componentId:"mediaViewer1",createOnce:!0,viewUniq:0,views:{}},reviewGenericSubmission1:{type:"genericSubmission",subjectType:"Products",contentType:"Reviews",container:"BVGRSContainer",autoload:!0,features:{self:["searchBar","categorySelect","ugcCount:filtered","ugcCount:unfiltered","productItemCollection:filtered","productItemCollection:unfiltered","loadMore:filtered","loadMore:unfiltered"],searchBar:["has:searchOnKeyup"],loadMore:{instances:{filtered:{features:["has:infiniteScroll","has:instanceNameScope"]},unfiltered:{features:["has:infiniteScroll","has:instanceNameScope"]}}},productItemCollection:{instances:{filtered:{features:["has:filterByCategory","has:instanceNameScope"]},unfiltered:{features:["has:filterWithoutCategory","has:searchOnly","has:instanceNameScope"]}}},ugcCount:{instances:{filtered:{features:["has:instanceNameScope"]},unfiltered:{features:["has:instanceNameScope"]}}}},outlets:{},componentId:"reviewGenericSubmission1",grsSearchEnabled:!0,productsPerRow:4,viewUniq:0,views:{}},inlineRatingList1:{subjectType:"Products",contentType:"Statistics",containerPrefix:"BVRRInlineRating",type:"ratingList",features:{self:["ratingItemCollection"],ratingItem:["has:stars","has:overallRating","has:reviewCount"]},componentId:"inlineRatingList1",autoload:!0,viewUniq:0,views:{}},reviewSummary1:{serverRender:!0,container:"BVRRSummaryContainer",subjectType:"Products",contentType:"Products",coverageContentTypes:["Reviews","Questions"],type:"summary",features:{self:["has:stars","has:overallRating","has:aggregateRatingTag","histogram","has:writeReviews","has:askQuestions","has:minimalistHorizontal","has:minimalist"],histogram:["has:filterButton"]},outlets:{showreviewsubmission:[{component:"reviewSubmission1",scope:"rr",action:"submit_review"}],showreviews:[{component:"reviewContentList1",event:"scrolltocontent",scope:"rr",fallback:"doShowContent"}],filtercontent:[{component:"reviewContentList1",event:"filtercontent"}],showquestions:[{component:"questionContentList1",event:"scrolltocontent",scope:"qa",fallback:"doShowContent"}],showquestionsubmission:[{component:"questionSubmission1",scope:"qa",action:"submit_question"}]},componentId:"reviewSummary1",autoload:!0,priority:!0,viewUniq:0,views:{}},reviewContentList1:{subjectType:"Products",type:"contentList",features:{self:["contentItemCollection","contentFilter","pagination","ugcCount","has:contentSort","relevancyLink","has:writeReviews","headToHead","inlineHistogram","secondaryRatingSummary"],pagination:["ugcCount"],contentItem:["has:stars","has:secondaryRatings","has:reviewPhotos","has:reviewVideos","has:tags","has:prosCons","has:userBadges","has:contentBadges","secondaryContentList","feedback","has:recommended","has:reviewAttribution","has:productFamiliesAttribution"],secondaryContentList:["secondaryContentItemCollection<ClientResponses>"],secondaryContentItem:["has:userBadges","feedback"],contentFilter:["has:filterButton"]},outlets:{showmediaviewer:[{component:"mediaViewer1",event:"open"}],showfullprofile:[{component:"fullProfilePopup1",event:"launchprofile"}],showsubmission:[{component:"reviewSubmission1",scope:"rr",action:"submit_review"}],filterresults:[{component:"reviewContentList1",event:"filterresults"}],filtercontent:[{component:"reviewContentList1",event:"filtercontent"}],linkSort:[{component:"reviewContentSort1",event:"setupsort"}],showhelpfulpositive:[{component:"reviewContentList1",event:"showhelpfulpositive"}],showhelpfulcritical:[{component:"reviewContentList1",event:"showhelpfulcritical"}]},serverRender:!0,container:"BVRRContainer",contentType:"Reviews",secondaryContentType:"Comments",pageview:{bvProduct:"RatingsAndReviews"},monitorVisibility:!0,componentId:"reviewContentList1",autoload:!0,viewUniq:0,views:{}},reviewSubmission1:{type:"submission",preload:!0,inline:!1,features:{self:["thankYouPage","dropdownable","has:starHoverHeatMap","has:submissionPreview","has:reviewHelperText"],thankYouPage:["has:mbox"],photoupload:["dropdownable"],videoupload:["dropdownable"]},outlets:{previewcontent:[{component:"reviewContentList1",event:"previewcontent"}]},container:"BVRRContainer",subjectType:"Products",contentType:"Reviews",pageview:{bvProduct:"RatingsAndReviews"},componentId:"reviewSubmission1",viewUniq:0,views:{}},reviewContentSort1:{serverRender:!0,subjectType:"Products",type:"contentSort",sortDefault:"mostRecent",sortTypes:["relevancy","mostHelpful","positive","negative","mostRecent"],features:{self:["has:hoverDropdown"]},outlets:{setupme:[{component:"reviewContentList1",event:"setupcontentsort"}],sortcontent:[{component:"reviewContentList1",event:"sortcontent"}]},container:"BVRRContainer",contentType:"Reviews",componentId:"reviewContentSort1",viewUniq:0,views:{}},questionContentList1:{subjectType:"Products",type:"contentList",features:{self:["contentItemCollection","pagination","ugcCount","has:contentSort","has:askQuestions","has:inlineSubmission"],pagination:["ugcCount"],contentItem:["secondaryContentList","has:secondaryContentLink","has:secondarySubmission","has:secondaryContentBtn","avatar","has:socialAvatar"],secondaryContentList:["secondaryContentItemCollection"],secondaryContentItem:["feedback","crowdSourcedAnswerBadge","avatar","has:socialAvatar"],avatar:["has:socialAvatar","has:hoverProfile","has:fullProfileLink"]},outlets:{showmediaviewer:[{component:"mediaViewer1",event:"open"}],showfullprofile:[{component:"fullProfilePopup1",event:"launchprofile"}],linkSort:[{component:"questionContentSort1",event:"setupsort"}],showsubmission:[{component:"questionSubmission1",scope:"qa",action:"submit_question"}],showanswersubmission:[{component:"answerSubmission1_inline",scope:"qa",action:"submit_answer"}]},serverRender:!0,container:"BVQAContainer",contentType:"Questions",secondaryContentType:"Answers",pageview:{bvProduct:"AskAndAnswer"},monitorVisibility:!0,componentId:"questionContentList1",autoload:!0,viewUniq:0,views:{}},questionSubmission1:{type:"submission",preload:!1,inline:!0,features:{self:["thankYouPage","has:submissionPreview"],thankYouPage:["has:mbox"]},outlets:{previewcontent:[{component:"questionContentList1",event:"previewcontent"}],showanswersubmission:[{component:"answerSubmission1_inline",scope:"qa",action:"submit_answer"}]},container:"BVQAContainer",subjectType:"Products",contentType:"Questions",componentId:"questionSubmission1",viewUniq:0,views:{}},questionContentSort1:{serverRender:!0,subjectType:"Products",type:"contentSort",sortDefault:"recentAnswersFirst",sortTypes:["recentQuestionsFirst"],features:{self:["has:hoverDropdown"]},outlets:{setupme:[{component:"questionContentList1",event:"setupcontentsort"}],sortcontent:[{component:"questionContentList1",event:"sortcontent"}]},container:"BVQAContainer",contentType:"Questions",componentId:"questionContentSort1",viewUniq:0,views:{}},answerSubmission1_inline:{type:"submission",preload:!1,inline:!1,features:{self:["thankYouPage","has:submissionPreview"],thankYouPage:["has:mbox"]},outlets:{previewsecondarycontent:[{component:"questionContentList1",event:"previewsecondarycontent"}]},container:"BVQAContainer",subjectType:"Products",contentType:"Answers",componentId:"answerSubmission1_inline",viewUniq:0,views:{}},questionSubmission2_inline:{type:"submission",preload:!1,inline:!0,features:{self:["has:submissionPreview"],thankYouPage:[]},outlets:{previewcontent:[{component:"questionContentList1",event:"previewcontent"}]},container:"BVContainer",subjectType:"Products",contentType:"Questions",componentId:"questionSubmission2_inline",viewUniq:0,views:{}}}),BV.define("framework/util/featureHelper",["underscore"],function(e){function t(e){var t=e.replace("has:",""),n=t.match(/^(\w+)(:\w+)?(<(\w+)>)?$/),r=[];return r[0]=n[1]||undefined,r[1]=n[2]?n[2].replace(":",""):undefined,r[2]=n[3]?n[3].replace("<","").replace(">",""):undefined,r}return{getType:function(e){return t(e)[2]},getInstanceName:function(e){return t(e)[1]},getName:function(e){return t(e)[0]},isHas:function(e){return e.split("has:")[1]?!0:!1},getFullName:function(e,t,n){return n&&(e=e+":"+n),t?e+"<"+t+">":e},match:function(e,t){var n=new RegExp("^"+e+"<(\\w+)>$");return n.test(t)},getFeatures:function(t){var n=[];return e(t).forEach(function(t){e(t).isArray()?n=e.union(n,t):e(t).isObject()&&(n=e.union(n,this.getFeatures(t)))},this),n},getFeaturesForInstance:function(t,n,r){t=t||[];if(e(t).isArray())return t;if(t.instances&&t.instances[r])return t.instances[r].features;var i=t.contentTypes;return i&&i[n]?i[n].features:[]}}}),BV.define("mappings",["underscore","framework/util/featureHelper"],function(e,t){return{}}),BV.define("$BV",["client!window"],function(e){return e.$BV}),BV.define("framework/util/scoped",["underscore"],function(e){return function(t,n){if(e(t).isObject()){var r={};return e(t).each(function(e,t){r[n+":"+t]=e}),r}return n+":"+t}}),BV.define("framework/util/ie",["BV"],function(e){return function(){return e._internal.ie}}),BV.define("document",["window"],function(e){return e.document}),BV.define("util/cookie",["document","window"],function(e,t){return{create:function(t,n,r,i){if(r){var s=new Date;s.setTime(s.getTime()+r*24*60*60*1e3);var o="; expires="+s.toGMTString()}else var o="";e.cookie=t+"="+n+o+";path=/"+(i?";domain="+i:"")},read:function(t){var n=t+"=",r=e.cookie.split(";");for(var i=0;i<r.length;i++){var s=r[i];while(s.charAt(0)==" ")s=s.substring(1,s.length);if(s.indexOf(n)==0)return s.substring(n.length,s.length)}return null},erase:function(e){this.create(e,"",-1)}}}),BV.define("bv/util/isDev",["window","client!util/cookie","underscore"],function(e,t,n){var r=t.read&&t.read("_bvfb_debug"),i=e.location&&e.location.host==="localhost.bazaarvoice.com",s={};return r?(n(r.split(",")).each(function(e){e=e.split(":"),s[e[0]]=e[1]}),{debugCookie:s}):i?{debugCookie:!1}:!1}),BV.define("framework/util/bvreporter",["underscore","client!window","framework/util/ie","bv/util/isDev"],function(e,t,n,r){function o(i,s){if(!r)return;if(!t.console)return;s=[].slice.call(s),e(s[0]).isFunction()&&(s=s[0]());if(n){console.log(s);return}try{(console[i]||console.log).apply(console,s)}catch(o){}}n=n();var i,s;r&&r.debugCookie?i=r.debugCookie.logLevel:i=t.BV&&t.BV._options&&t.BV._options.logLevel,i=i||1;var u={DEBUG:-1,LOG:0,INFO:1,WARN:2,ERROR:3,setLogLevel:function(e){i=e||0,o("log",["Log level set to",i])},debug:function(){i<0&&o("log",arguments)},log:function(){i<1&&o("log",arguments)},info:function(){i<2&&o("info",arguments)},warn:function(){i<3&&o("warn",arguments)},error:function(){i<4&&o("error",arguments)},count:function(){i<1&&o("count",arguments)},time:function(){i<2&&o("time",arguments)},timeEnd:function(){i<2&&o("timeEnd",arguments)},group:function(t){var n=e.rest(arguments);i<=t&&(o("group",n),o("time",n))},groupEnd:function(t){var n=e.rest(arguments);i<=t&&(o("groupEnd",n),o("timeEnd",n))},assert:function(t,n){if(!r)return;if(e(t).isFunction()){u.assert.apply(null,t());return}if(!t)throw new Error("Assertion failed: "+n)}};return u}),BV.define("framework/bevented",["underscore","framework/util/scoped","framework/util/bvreporter"],function(e,t,n){function r(e){return e.isCollection?"Collection":"Model"}return{_scopeArgs:function(e){return e.length&&(e[0]=t(e[0],this.getContentType?this.getContentType():this.model.getContentType())),e},publish:function(e,t){n.assert(e,"events is defined");var i=this._scopeArgs([].slice.call(arguments)),s=this.getComponent();n.log(r(this),this.getScope()+this.name,"publishing",i),s.trigger.apply(s,i)},subscribe:function(e,t,n){var r=this.getComponent(),i=[].slice.call(arguments);return i=this._subscribeArgs.apply(this,i),r.on.apply(r,i)},subscribeOnce:function(e,t,n){var r=this.getComponent(),i=[].slice.call(arguments);return i=this._subscribeArgs.apply(this,i),r.once.apply(r,i)},_subscribeArgs:function(t,i,s){n.assert(t,"events is defined");var o=[].slice.call(arguments);return e(t).isString()&&n.assert(function(){return[e(i).isFunction(),"callback is a function"]}),(o.length===2||o.length===1&&e(o[0]).isObject())&&o.push(this),o=this._scopeArgs(o),n.log(r(this),this.getScope()+this.name,"subscribing to",o),o},unsubscribe:function(e,t,i){var s=this.getComponent(),o=[].slice.call(arguments);return o.length===2&&o.push(this),o=this._scopeArgs(o),n.log(r(this),this.getScope()+this.name,"unsubscribing",o),s.off.apply(s,o)}}}),BV.define("framework/bdata",["underscore","jquery","framework/util/bvreporter"],function(e,t,n){function r(t,n,r){return n?t.promise().then(r?e.bind(n,r):n):t.promise()}function i(e){return e.isCollection?"Collection":"Model"}var s={_initDeferreds:function(){this._initializedDfd=t.Deferred(),this._dataReadyDfd=t.Deferred(),this._dataProcessedDfd=t.Deferred()},initialized:function(e){return n.debug(i(this),this.getScope(),"is initialized."),this._initializedDfd.resolve(e||this)},dataReady:function(e){return n.debug(i(this),this.getScope(),"data is ready."),this._dataReadyDfd.resolve(e)},dataProcessed:function(e){return n.debug(i(this),this.getScope(),"data is processed."),this._dataProcessedDfd.resolve(e)},dataReadyPromise:function(){return this._dataReadyDfd.promise()},dataProcessedPromise:function(){return this._dataProcessedDfd.promise()},initializedPromise:function(){return this._initializedDfd.promise()},resetDataReady:function(){return n.log(i(this),this.getScope(),"resetting data ready dfd"),this._dataReadyDfd=t.Deferred(),this._dataReadyDfd.promise()},onDataReady:function(e,t){return n.debug(i(this),this.getScope(),"registering dataReady handler"),r(this._dataReadyDfd,e,t)},onDataProcessed:function(e,t){return n.debug(i(this),this.getScope(),"registering dataProcessed handler"),r(this._dataProcessedDfd,e,t)},onInitialized:function(e,t){return r(this._initializedDfd,e,t)}};return s}),BV.define("framework/util/bvtrackerqueue",[],function(){var e=[];return{push:function(t){e.push(t)},get:function(){return e},override:function(e){this.push=function(){e.apply(null,arguments)}}}}),BV.define("framework/util/bvtracker",["backbone","underscore","jquery","framework/util/bvreporter","framework/util/bvtrackerqueue"],function(e,t,n,r,i){function f(e){var t=e.shift();s[t].apply(s,e)}var s={};t.forEach(["optIn","optOut"],function(e){s[e]=function(){var t="//network.bazaarvoice.com/"+e.toLowerCase()+".json?callback=?";return n.getJSON(t)}}),t(["error","pageview","conversion","event","impression","rendered","loaded","completed","waited","feature","inView","viewedUGC","performance"]).each(function(e){s[e]=function(){var t=[].slice.call(arguments);t=[e].concat(t),this.trigger.apply(this,t),e==="error"&&r.error(t)}}),t.extend(s,e.Events);var o=i.get(),u,a;while(o.length)f(o.shift());return i.override(f),s}),BV.define("bv/strings",{errors:{IMPLEMENTATION:"Implementation Error",API:"API Error",FORM:"Form Error",UNCAUGHT:"Uncaught Exception",CONFIG:"Configuration Error",THIRD_PARTY:"Third Party Service Error",TIMEOUT:"Request Timeout",UI:"User Interface Error",FRAMEWORK:"Framework Error",BV_LOCAL_API_ERROR:"BV Local API error",BV_LOCAL_API_FAILURE:"BV Local API failure"},rpc:{postCallback:"parent.rpc.returnSubmissionResponse",localCallback:"returnSubmissionResponse"}}),BV.define("framework/bmodelbase",["underscore","backbone","framework/util/bvreporter","framework/util/bvtracker","framework/util/scoped","bv/strings"],function(e,t,n,r,i,s){var o={getScope:function(){var e=this.getContentType(),t;return this.isCollection?this.parent?this.parent.getScope():(r.error({name:s.errors.FRAMEWORK,detail1:"Missing parent in collection: "+this.name}),this.getComponent().getScope(e)):(t=this.getComponent(),t?e?t.getScope(e):(n.warn("Did not find content type for",this.name||this.get("name")),"unknown"):(n.warn("Did not find component for",this.name||this.get("name")),"unknown"))},getStatsTypes:function(){if(!this.statsTypes||e(this.statsTypes).isEmpty())return[];var t=this.getComponent(),n=[].concat(t.contentType,t.coverageContentTypes);return e(n).chain().compact().intersection(this.statsTypes).value()},hasFeature:function(e,t){return this.getComponent().hasFeature(this.getRefName(),e,this.getContentType(),this.getInstanceName(),t)},componentSet:function(t,r){n.assert(t,"componentSet must be called with at least one argument"),(e.isUndefined(r)||r===null)&&n.assert(function(){return[e(t).isObject(),"componentSet requires an object when called with only one argument"]});var s=this.getComponent(),o=[].slice.call(arguments);return o[0]=i(o[0],this.getContentType()),s.set.apply(s,o)},componentGet:function(e){n.assert(e,"componentGet must be called with a key");var t=this.getComponent(),r=[].slice.call(arguments);return r[0]=i(r[0],this.getContentType()),t.get.apply(t,r)},_getOtherProps:function(t){var n=t||this;try{while(!e(n.getParent()).isEmpty())n=n.getParent()}catch(i){r.error({name:s.errors.FRAMEWORK,detail1:"Unable to get parent model information"})}return{topModel:n,refName:n===this?"self":this.name}},_getProps:function(){var t={};return this.getComponent()?(e(["componentId","features","subjectType","contentType","secondaryContentType","outlets"]).forEach(function(e){t[e]=this.getComponent()[e]},this),e(["autoload","pageview","preload"]).forEach(function(e){t[e]=this.getComponent()[e]||!1},this),e(t).extend(this._getOtherProps()),t):t},_getParentProps:function(t,n){function s(e){return t.isCollection?t[e]:t.get(e)}if(!t)return{};var r=this.isCollection?this.contentType:this.get("contentType"),i={contentType:n.featureType||r||s("contentType")};return e(["subjectType","secondaryContentType"]).forEach(function(e){i[e]=(this.isCollection?this[e]:this.get(e))||s(e)},this),e(["component","componentId","coverageContentTypes","submissionContentTypes","clientAPIConfig"]).forEach(function(e){i[e]=s(e)}),e(i).extend(this._getOtherProps(t)),i},getClosestAncestor:function(t){function o(t){var n=!0;return e.each(i,function(e){e(t)||(n=!1)}),n}n.assert(function(){return[!t||e(t).isObject(),"options is object"]});var i={};t&&t.modelType&&(i.modelType=function(e){return e instanceof t.modelType}),t&&t.hasFeature&&(i.hasFeature=function(e){return!e.isCollection&&e.getFeatureModel(t.hasFeature)});var u=this.getParent();try{while(!e(u).isEmpty()&&!o(u))u=u.getParent()}catch(a){r.error({name:s.errors.FRAMEWORK,detail1:"Exception caught while looking for closest ancestor model."})}return u},destroy:function(r){return n.group(n.DEBUG,"Destroy Model/Collection",this.getScope()),this.getComponent().unset(),this.unsubscribe(),this.stopListening(),e(this.subModels).each(function(e){e&&e.destroy()}),n.groupEnd(n.DEBUG,"Destroy Model/Collection"),this.isCollection?this.reset([],{silent:!0}):t.Model.prototype.destroy.apply(this,arguments)},trigger:function(){var e,n;this.getRefName()==="self"&&(n=[].slice.call(arguments),n[0]="outlet:"+n[0],e=this.getComponent(),e.trigger.apply(e,n)),t.Model.prototype.trigger.apply(this,arguments)}};return e(["contentType","parent","component","topModel","refName","instanceName"]).each(function(e){var t="get"+e.charAt(0).toUpperCase()+e.slice(1);o[t]=function(){return this.isCollection?this[e]:this.get(e)}}),o}),BV.define("dimsumFields",["underscore","vendor/json2"],function(e,t){return{}}),BV.define("dimsumFields!displayedFieldKeys",[],{Pro:!0,BestUsesPharmacyHealth:!0,BestUsesPets:!0,BestUsesBeauty:!0,BestUsesB2BElectronics:!0,BestUsesCleaningSuppliesCPG:!0,BestUsesBooks:!0,BestUsesFood:!0,BestUsesSoftware:!0,LengthOfOwnership:!0,BestUsesFlowersGifts:!0,BestUsesGames:!0,BestUsesTelecom:!0,BestUsesEducation:!0,BestUsesSportingGoods:!0,BestUsesConsumerElectronics:!0,BestUsesToysHobbies:!0,BestUsesCooking:!0,BestUsesMusic:!0,BestUsesTravel:!0,DomainExpertise:!0,BestUsesHomeGoods:!0,BestUsesApparel:!0,Con:!0,BestUsesOfficeSupplies:!0,IntendedUse:!0,BestUsesEntertainment:!0,BestUsesDVDs:!0,IncentivizedReview:!0,BodyType:!0,Age:!0,Occupation:!0,FashionStyle:!0,Gender:!0,Value:!0,Quality:!0,Fit_22:!0,Width:!0,Width_1:!0,Appearance1:!0,Comfort:!0}),BV.define("vendor/messageformat",["vendor/json2"],function(e){function t(e){return String.prototype.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function n(e,t){var r;e&&t&&(n.locale[e]=t),r=e=e||"en",t=t||n.locale[r=n.Utils.getFallbackLocale(e)];if(!t)throw new Error("Plural Function not found for locale: "+e);this.pluralFunc=t,this.locale=e,this.fallbackLocale=r}return n.locale={en:function(e){return e===1?"one":"other"}},n.SafeString=function(e){this.string=e},n.SafeString.prototype.toString=function(){return this.string.toString()},n.Utils={numSub:function(e,t,n){return e.replace(/^#|[^\\]#/g,function(e){var r=e&&e.length===2?e.charAt(0):"";return r+'" + (function(){ var x = '+t+';\nif( isNaN(x) ){\nthrow new Error("MessageFormat: `"+lastkey_'+n+'+"` isnt a number.");\n}\nreturn x;\n})() + "'})},escapeExpression:function(e){var t={"\n":"\\n",'"':'\\"'},r=/[\n"]/g,i=/[\n"]/,s=function(e){return t[e]||"&amp;"};return e instanceof n.SafeString?e.toString():e===null||e===!1?"":i.test(e)?e.replace(r,s):e},getFallbackLocale:function(e){var t=e.indexOf("-")>=0?"-":"_";while(!n.locale.hasOwnProperty(e)){e=e.substring(0,e.lastIndexOf(t));if(e.length===0)return null}return e}},n}),BV.define("mf",[],function(){return{load:function(e,t,n,r){},write:function(e,t,n){}}}),BV.define("mf!bv/c2013/messages/common",["vendor/messageformat","framework/util/bvtrackerqueue"],function(e,t){return{display_answertext:function(e){try{return function(e){var t="";return t+="Answer",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `display_answertext`: "+n.toString())]),""}},placeholder_answertext:function(e){try{return function(e){var t="";return t+="Answer this question...",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `placeholder_answertext`: "+n.toString())]),""}},writeReview:function(e){try{return function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");var n="Gender",r=e[n],i=0,s={other:function(e){var t="";return t+="Write a review ",t}};return t+=(s[r]||s.other)(e),t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `writeReview`: "+n.toString())]),""}},offscreen_writeReviewModalNotice:function(e){try{return function(e){var t="";return t+="This action will open a modal dialog.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_writeReviewModalNotice`: "+n.toString())]),""}},offscreen_showMediaModalNotice:function(e){try{return function(e){var t="";return t+="This action will open a modal dialog.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_showMediaModalNotice`: "+n.toString())]),""}},readReviews:function(n){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="Gender",i=t[r],s=0,o={other:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalCount",i=t[r],s=0,o={one:function(e){var t="";return t+="Read a Review",t},other:function(e){var t="";t+="Read ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalCount,t+=" Reviews",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}};return n+=(o[i]||o.other)(t),n}(n||{})}catch(r){return t.push(["error",new Error("MF error on `readReviews`: "+r.toString())]),""}},askQuestion:function(e){try{return function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");var n="Gender",r=e[n],i=0,s={other:function(e){var t="";return t+="Ask a question ",t}};return t+=(s[r]||s.other)(e),t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `askQuestion`: "+n.toString())]),""}},offscreen_summaryStars:function(e){try{return function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.AverageOverallRating,t+=" out of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.OverallRatingRange,t+=" stars. Read reviews.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_summaryStars`: "+n.toString())]),""}},offscreen_ratingSummaryText:function(e){try{return function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.AverageOverallRating,t+=" out of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.OverallRatingRange,t+=" rating.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_ratingSummaryText`: "+n.toString())]),""}},offscreen_ratingStars:function(e){try{return function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.Rating,t+=" out of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.RatingRange,t+=" stars.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_ratingStars`: "+n.toString())]),""}},offscreen_value_of_one_means:function(e){try{return function(e){var t="";return t+="Rating of 1 means",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_value_of_one_means`: "+n.toString())]),""}},offscreen_value_max_means:function(e){try{return function(e){var t="";t+="Rating of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.sliderSize,t+=" means",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_value_max_means`: "+n.toString())]),""}},wait_feedback:function(e){try{return function(e){var t="";return t+="Loading",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `wait_feedback`: "+n.toString())]),""}},autocomplete_available:function(e){try{return function(e){var t="";return t+="Autocomplete available, press the down arrow to hear options",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `autocomplete_available`: "+n.toString())]),""}},ProductIsRecommended:function(e){try{return function(e){var t="";return t+="Yes",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `ProductIsRecommended`: "+n.toString())]),""}},ProductIsNotRecommended:function(e){try{return function(e){var t="";return t+="No",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `ProductIsNotRecommended`: "+n.toString())]),""}},logoSource:function(e){try{return function(e){var t="";return t+="Source:",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `logoSource`: "+n.toString())]),""}},deeplinkModalTitle:function(e){try{return function(e){var t="";return t+="Content Dialog",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `deeplinkModalTitle`: "+n.toString())]),""}},geoLocationNoResults:function(e){try{return function(e){var t="";return t+="No results",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `geoLocationNoResults`: "+n.toString())]),""}},geoLocationResults:function(n){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="NumResults",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.NumResults,t+=" result",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.NumResults,t+=" results",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}(n||{})}catch(r){return t.push(["error",new Error("MF error on `geoLocationResults`: "+r.toString())]),""}},close:function(e){try{return function(e){var t="";return t+="Close",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `close`: "+n.toString())]),""}},actionBarHeader_v2:function(e){try{return function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");var n="Type",r=e[n],i=0,s={review:function(e){var t="";return t+="Reviews",t},question:function(e){var t="";return t+="Questions",t},answer:function(e){var t="";return t+="Answers",t},other:function(e){var t="";return t+="Content",t}};return t+=(s[r]||s.other)(e),t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `actionBarHeader_v2`: "+n.toString())]),""}},anonymous:function(e){try{return function(e){var t="";return t+="Anonymous",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `anonymous`: "+n.toString())]),""}}}}),BV.define("bv/api/normalizer/typeMap",["mf!bv/c2013/messages/common"],function(e){function t(e){return e.ModerationStatus==="APPROVED"}function n(e){return!t(e)}var r={reviewstatistics:{add:[{key:"Type",val:"reviewstatistics"}],change:[{from:"FeaturedReviewCount",to:"FeaturedCount"},{from:"TotalReviewCount",to:"TotalCount"},{from:"RatingsOnlyReviewCount",to:"RatingsOnlyCount"}],sum:[{add1:"NotRecommendedCount",add2:"RecommendedCount",sum:"TotalRecommendedCount"},{add1:"HelpfulVoteCount",add2:"NotHelpfulVoteCount",sum:"TotalHelpfulVoteCount"}],ensure:[{firstKey:"RatingDistribution",secondKey:"RatingValue",defaultTo:[{Count:0,RatingValue:1},{Count:0,RatingValue:2},{Count:0,RatingValue:3},{Count:0,RatingValue:4},{Count:0,RatingValue:5}]}],round:[{key:"AverageOverallRating"},{root:"SecondaryRatingsAverages",key:"AverageRating"}]},questionstatistics:{add:[{key:"Type",val:"questionstatistics"}],change:[{from:"HelpfulVoteCount",to:"DELETEME"},{from:"FeaturedQuestionCount",to:"FeaturedCount"},{from:"TotalQuestionCount",to:"TotalCount"},{from:"FirstQuestionTime",to:"FirstSubmissionTime"},{from:"LastQuestionTime",to:"LastSubmissionTime"},{from:"QuestionHelpfulVoteCount",to:"HelpfulVoteCount"},{from:"QuestionNotHelpfulVoteCount",to:"NotHelpfulVoteCount"},{from:"TotalAnswerCount",to:"TotalSecondaryCount"}],remove:["DELETEME","FirstAnswerTime","LastAnswerTime"]},answerstatistics:{add:[{key:"Type",val:"answerstatistics"}],change:[{from:"HelpfulVoteCount",to:"DELETEME"},{from:"FeaturedAnswerCount",to:"FeaturedCount"},{from:"TotalAnswerCount",to:"TotalCount"},{from:"FirstAnswerTime",to:"FirstSubmissionTime"},{from:"LastAnswerTime",to:"LastSubmissionTime"},{from:"AnswerHelpfulVoteCount",to:"HelpfulVoteCount"},{from:"AnswerNotHelpfulVoteCount",to:"NotHelpfulVoteCount"},{from:"BestAnswerCount",to:"BestCount"}],remove:["DELETEME","FirstQuestionTime","LastQuestionTime","QuestionHelpfulVoteCount","QuestionNotHelpfulVoteCount","FeaturedQuestionCount","TotalQuestionCount","LastQuestionAnswerTime"]},statistics:{add:[{key:"Type",val:"statistics"}],copy:[{from:"ProductStatistics.ReviewStatistics",to:"Product.Reviews.Statistics"},{from:"ProductStatistics.FilteredReviewStatistics",to:"Product.Reviews.Statistics"},{from:"ProductStatistics.ReviewStatistics.TotalReviewCount",to:"Product.Reviews.Statistics.TotalCount"},{from:"ProductStatistics.FilteredReviewStatistics.TotalReviewCount",to:"Product.Reviews.Statistics.TotalCount"},{from:"ProductStatistics.NativeReviewStatistics",to:"Product.Reviews.NativeStatistics"},{from:"ProductStatistics.NativeReviewStatistics.TotalReviewCount",to:"Product.Reviews.NativeStatistics.TotalCount"},{from:"ProductStatistics.ProductId",to:"Product.Id"}],remove:["ProductStatistics","ProductStatistics.ReviewStatistics","ProductStatistics.FilteredReviewStatistics","ProductStatistics.NativeReviewStatistics","Product.Reviews.Statistics.TotalReviewCount","Product.Reviews.NativeStatistics.TotalReviewCount"],round:[{key:"Product.Reviews.Statistics.AverageOverallRating"},{key:"Product.Reviews.NativeStatistics.AverageOverallRating"}]},products:{add:[{key:"Type",val:"product"}],change:[{from:"ProductPageUrl",to:"Url"}],copy:[{from:"ReviewStatistics",to:"Content.Reviews.Statistics",mapTo:"ReviewStatistics"},{from:"ReviewStatistics",to:"Content.Reviews.RawStatistics",mapTo:"ReviewStatistics"},{from:"FilteredReviewStatistics",to:"Content.Reviews.Statistics",mapTo:"ReviewStatistics"},{from:"FilteredReviewStatistics",to:"Content.Reviews.FilteredStatistics",mapTo:"ReviewStatistics"},{from:"QAStatistics",to:"Content.Questions.Statistics",mapTo:"QuestionStatistics"},{from:"FilteredQAStatistics",to:"Content.Questions.Statistics",mapTo:"QuestionStatistics"},{from:"QAStatistics",to:"Content.Answers.Statistics",mapTo:"AnswerStatistics"},{from:"FilteredQAStatistics",to:"Content.Answers.Statistics",mapTo:"AnswerStatistics"},{from:"Content.Questions.Statistics.TotalQuestionCount",to:"TotalQuestionCount"},{from:"Content.Questions.Statistics.TotalAnswerCount",to:"TotalAnswerCount"},{from:"Content.Reviews.Statistics.TotalReviewCount",to:"TotalReviewCount"}],remove:["ReviewIds","StoryIds","QuestionIds","AnswerIds","QAStatistics","FilteredQAStatistics","ReviewStatistics","FilteredReviewStatistics"]},authors:{add:[{key:"Type",val:"author"}],change:[{from:"ProductPageUrl",to:"Url"}],merge:[{first:"UserNickname",second:"DisplayName",into:"DisplayName"}],replace:[{key:"DisplayName",val:e.anonymous(),condition:n}],copy:[{from:"ReviewStatistics",to:"Content.Reviews.Statistics",mapTo:"ReviewStatistics"},{from:"QAStatistics",to:"Content.Questions.Statistics",mapTo:"QuestionStatistics"},{from:"QAStatistics",to:"Content.Answers.Statistics",mapTo:"AnswerStatistics"},{from:"Content.Questions.Statistics.TotalQuestionCount",to:"TotalQuestionCount"},{from:"Content.Questions.Statistics.TotalAnswerCount",to:"TotalAnswerCount"},{from:"Content.Reviews.Statistics.TotalReviewCount",to:"TotalReviewCount"}],remove:["ReviewIds","StoryIds","QuestionIds","AnswerIds","QAStatistics","FilteredQAStatistics","ReviewStatistics","UserNickname","FilteredReviewStatistics"]},categories:{add:[{key:"Type",val:"category"}],change:[{from:"CategoryPageUrl",to:"Url"}],copy:[{from:"ReviewStatistics",to:"Content.Reviews.Statistics",mapTo:"ReviewStatistics"},{from:"ReviewStatistics",to:"Content.Reviews.RawStatistics",mapTo:"ReviewStatistics"},{from:"FilteredReviewStatistics",to:"Content.Reviews.Statistics",mapTo:"ReviewStatistics"},{from:"FilteredReviewStatistics",to:"Content.Reviews.FilteredStatistics",mapTo:"ReviewStatistics"},{from:"QAStatistics",to:"Content.Questions.Statistics",mapTo:"QuestionStatistics"},{from:"FilteredQAStatistics",to:"Content.Questions.Statistics",mapTo:"QuestionStatistics"},{from:"QAStatistics",to:"Content.Answers.Statistics",mapTo:"AnswerStatistics"},{from:"FilteredQAStatistics",to:"Content.Answers.Statistics",mapTo:"AnswerStatistics"},{from:"Content.Questions.Statistics.TotalQuestionCount",to:"TotalQuestionCount"},{from:"Content.Questions.Statistics.TotalAnswerCount",to:"TotalAnswerCount"},{from:"Content.Reviews.Statistics.TotalReviewCount",to:"TotalReviewCount"}],remove:["ReviewIds","StoryIds","QuestionIds","AnswerIds","QAStatistics","FilteredQAStatistics","ReviewStatistics","FilteredReviewStatistics"]},reviews:{add:[{key:"Type",val:"review"},{key:"SecondaryType",val:"comment"}],change:[{from:"ReviewText",to:"Text"},{from:"ProductId",to:"ReferenceId",ifValueExists:!0},{from:"Product",to:"Reference"},{from:"TotalCommentCount",to:"TotalSecondaryContentCount"}],copy:[],remove:["Pros","Cons","UserNickname"]},questions:{add:[{key:"Type",val:"question"},{key:"SecondaryType",val:"answer"}],change:[{from:"CategoryId",to:"ReferenceId",ifValueExists:!0},{from:"Category",to:"Reference"},{from:"ProductId",to:"ReferenceId",ifValueExists:!0},{from:"Product",to:"Reference"},{from:"QuestionSummary",to:"Title"},{from:"TotalAnswerCount",to:"TotalSecondaryContentCount"}],remove:["UserNickname"]},answers:{add:[{key:"Type",val:"answer"}],change:[{from:"QuestionId",to:"ReferenceId"},{from:"Question",to:"Reference"},{from:"AnswerText",to:"Text"}],remove:["UserNickname"]},stories:{add:[{key:"Type",val:"story"}],change:[{from:"CategoryId",to:"ReferenceId",ifValueExists:!0},{from:"ProductId",to:"ReferenceId",ifValueExists:!0},{from:"StoryText",to:"Text"}]},comments:{add:[{key:"Type",val:"comment"}],change:[{from:"ReviewId",to:"ReferenceId",ifValueExists:!0},{from:"StoryId",to:"ReferenceId",ifValueExists:!0},{from:"CommentText",to:"Text"}],remove:["UserNickname"]},reviewcomments:{add:[{key:"Type",val:"comment"}],change:[{from:"ReviewId",to:"ReferenceId",ifValueExists:!0},{from:"StoryId",to:"ReferenceId",ifValueExists:!0},{from:"CommentText",to:"Text"}],remove:["UserNickname"]},clientresponses:{add:[{key:"Type",val:"clientresponse"}],change:[{from:"Response",to:"Text"},{from:"Date",to:"SubmissionTime"},{from:"Name",to:"Author.DisplayName"},{from:"Department",to:"Author.Department"}]}};return r}),BV.define("bv/api/normalizer/actions",["underscore","framework/util/bvreporter"],function(e,t){function n(t,n,r){var i=n.split("."),s=t;return i.pop(),e(i).forEach(function(e){r?s=s[e]=s[e]||{}:s=s[e]||{}}),s}return{change:function(e,t){var r=n(t,e.from,!0),i=e.from.split(".").pop();if(i in r&&r.hasOwnProperty(i)){if(e.ifValueExists&&!r[i])return;n(t,e.to,!0)[e.to.split(".").pop()]=r[i],delete r[i]}},add:function(e,t){t[e.key]=e.val},sum:function(e,t){t[e.sum]=t[e.add1]+t[e.add2]},copy:function(t,r,i){var s=n(r,t.from,!1),o=t.from.split(".").pop();if(o in s){var u=e(s[o]).clone();n(r,t.to,!0)[t.to.split(".").pop()]=u;var a=t.mapTo||t.to;i.push(u,a)}},clone:function(e,t){e.from in t&&(t[e.to]=t[e.from])},ensure:function(t,n){var r=t.firstKey.split("."),i=n,s;e(r).forEach(function(e,t){t<r.length-1?i[e]?i=i[e]:(i[e]={},i=i[e]):s=e});if(!t.secondKey)i[s]||(i[s]=t.defaultTo);else{var o=t.secondKey,u=i[s],a=e(u).pluck(o),f=e(t.defaultTo).filter(function(t){return!e(a).include(t[o])}),l=e.union(f,u);i[s]=e(l).sortBy(function(e){return e[o]})}},merge:function(t,n){var r=t.into.split("."),i=t.first.split("."),s=t.second.split("."),o=n,u,a=n,f=n;e(r).forEach(function(e,t){t<r.length-1?o[e]?o=o[e]:(o[e]={},o=o[e]):u=e}),e(i).forEach(function(e){a&&(a=a[e])}),a?o[u]=a:(e(s).forEach(function(e){f&&(f=f[e])}),f&&(o[u]=f))},remove:function(e,t){delete t[e]},replace:function(n,r){t.assert(e(n).isObject(),"replace requires the first argument to be an object."),t.assert(e(n.key).isString(),"replaces requires a key string."),t.assert(e(n.val).isString()||e(n.val).isNumber(),"replaces requires a val string or number."),t.assert(e(r).isObject(),"replaces requires the second argument to be an object.");if(e(n.condition).isFunction()&&!n.condition(r))return;r[n.key]=n.val},round:function(t,r){function i(e,t,n){var r=10*n;t[e]&&(t[e]=Math.round(t[e]*r)/r)}var s=t.decimalPlaces||1,o=r,u=t.key.split(".").pop();if(!t.root){var a=n(r,t.key,!1);i(u,a,s);return}o=n(r,t.root,!1)[t.root],e(o).forEach(function(e){i(u,e,s)})}}}),BV.define("bv/api/normalizer",["underscore","bv/api","dimsumFields!displayedFieldKeys","bv/api/normalizer/typeMap","bv/api/normalizer/actions"],function(e,t,n,r,i){function a(n,r,i){return e(r).forEach(function(s){if(!s||!i)return r;s.Content=s.Content||{};if(s[n+"Id"])s[n]=i[s[n+"Id"]];else if(s[n+"Ids"]){var o={List:[],Statistics:{TotalCount:0,TotalSecondaryCount:0}};e.forEach(s[n+"Ids"],function(e){o.List.push(i[e])}),o.Statistics.TotalCount=s["Total"+t.Noun(n)+"Count"],s[t.Nouns(n)]=o,s.Content[t.Nouns(n)]=o}}),r}function f(t){return e(t).forEach(function(t){e(o).forEach(function(r){var i,s;t&&t[r+"Order"]&&t[r+"Order"].length&&(i=t[r+"Order"],t[r+"Ordered"]=s=[],r==="ContextDataValues"&&(i=e(i).filter(function(e){return e in n}),t[r+"Order"]=i),e(i).forEach(function(e){s.push(t[r][e])}))})}),t}function l(t){return e(t).forEach(function(n,r){if(e.isObject(n)&&e.isEmpty(n)){t[r]=null;return}e.isObject(n)&&e(n).forEach(function(t,r){e.isObject(t)&&e.isEmpty(t)&&(n[r]=null)})}),t}function c(n,s){var o;return!s||!n?n:(s=s.toLowerCase(),r[s]?(e.isArray(n)?e(n).each(function(n){n&&(c(n,s),n.Content&&e(n.Content).forEach(function(e,n){n=n.toLowerCase(),r[n]&&(e.List=e.List||[],e.Type=t.noun(n),c(e.List,n))}))}):(o=h(n),e(i).each(function(t,i){e(r[s][i]).forEach(function(r){n.List?e(n.List).forEach(function(e){t(r,e,o)}):t(r,n,o)})}),o.each(function(e,t){c(e,t)})),n):n)}function h(t){function s(e){var t=e.toLowerCase();return t=u[t]||t,t}var n=[],i;return i={push:function(e,t){if(!e||typeof e!="object")return this;var i=s(t);return r[i]?(n.push({contentType:i,entity:e}),this):this},each:function(t){return e(n).each(function(e){t(e.entity,e.contentType)}),this}},e(t).each(function(e,t){i.push(e,t)}),i}function p(t){return!t||t.length===0?t:e(t).map(function(t){return e(t).isObject()?(t.Id.toLowerCase(),t):t.toLowerCase()})}function d(t){e(t).forEach(function(n,r){e(r).isString()&&(r.search(/Id$/)>-1&&(t[r]=e(t[r]).isString()?t[r].toLowerCase():t[r]),r.search(/Ids$/)>-1&&(t[r]=p(t[r])))})}function v(t){t.Includes&&e(t.Includes).forEach(function(n,r){e(r).isString()&&(r.search(/Order$/)>-1?t.Includes[r]=p(n):e(n).forEach(function(e,t){delete n[t],n[t.toLowerCase()]=e,d(e)}))}),e(t.Results).forEach(function(e){d(e)})}var s=[["Author","Authors"],["Comment","Comments"],["Product","Products"],["Category","Categories"],["Review","Reviews"],["Question","Questions"],["Answer","Answers"],["Story","Stories"],["ClientResponse","ClientResponses"]],o=["SecondaryRatings","ContextDataValues","TagDimensions","Badges"],u={product:"products",category:"categories",author:"authors",filteredreviewstatistics:"reviewstatistics",filteredqastatistics:"questionstatistics"};return{normalize:function(t,n,r){if(!t)return[];n=e.extend({},n);var i=e.clone(t),o=i.Results;if(i.Form)return i;if(i.Includes){var u=r.Nouns(n.contentType);i.Includes[u]=i.Includes[u]||{},e(i.Results).forEach(function(e){i.Includes[u][e.Id]=e}),e(s).forEach(function(t){e(s).forEach(function(e){i.Includes[t[1]]&&(i.Includes[t[1]]=a(e[0],i.Includes[t[1]],i.Includes[e[1]]),i.Includes[t[1]]=l(i.Includes[t[1]]),i.Includes[t[1]]=f(i.Includes[t[1]]))}),o=a(t[0],o,i.Includes[t[1]])})}return o=f(o),o=l(o),n.disableUniversal||(o=c(o,(n.contentType||"").toLowerCase())),n.contentType==="products"&&o.length===0&&(o=[{Type:"product",Content:{}}],e(n.api._data.subcontents).forEach(function(e){o[0].Content[e]={List:[],Type:r.noun(e),Statistics:{TotalCount:0,TotalSecondaryCount:0}}})),{Includes:i.Includes,Results:o,TotalResults:t.TotalResults}},getInternalsForTestingUseOnly:function(){return{typeMap:r,synonyms:u,actions:i}}}}),BV.define("util/array",["underscore"],function(e){function t(t,n){if(!e(t).isArray()||t.length===0||n<=0)return[];var r=[],i=Math.floor((t.length-1)/n)+1,s;for(var o=0;o<i;o++)s=e(e(t).rest(o*n)).first(n),r.push(s);return r}function n(r,i,s,o){var u=[],a=t(r,i);return o?(e(a).forEach(function(t,r){var a=0,f=[],l=[];e(t).forEach(function(e,t){s=s||function(e){return e.toString().length},a+=s(e),a<o?f.push(e):l.push(e)}),u.push(f);if(l.length>0){var c=n(l,i,s,o);u=Array.prototype.concat.call(u,c)}}),u):a}return{chunk:t,chunkWithLimit:n}}),BV.define("bv/prefetch",["ENV","underscore","jquery","util/url","require","util/array","bv/strings","framework/util/ie","framework/util/bvtracker"],function(e,t,n,r,i,s,o,u,a){return u=u(),e.on("firstUI",function(e){function s(e){return r.protocol+e.replace(/___PRODUCTIDTOKEN___/g,i).toLowerCase()}var i=e.productId;if(!i)return;var o=BV.options.prefetchConfigs||[],u=t(o).some(function(e){return!!e.promise});if(!u)return;t(o).each(function(e){if(!e.promise)return;var r=e.subQueries;t(r).each(function(e){var t=s(e);BV._internal.apiCache[t]=n.Deferred()}),e.promise.done(function(e){e&&e.BatchedResults&&t(r).each(function(t,n){var r=s(t);BV._internal.apiCache[r].resolve(e.BatchedResults["q"+n])})})})}),{_isPrefetch:!1,_batchLimit:10,subQueries:{},subQueryDfds:{},setAPI:function(e){this._api=e},startPrefetch:function(e){this._isPrefetch=!0,this.cacheIndex=e,this.subQueries[e]=[],this.subQueryDfds[e]={}},endPrefetch:function(e){if(!this._api){var n="API is not configured correctly";throw a.error({name:o.errors.CONFIG,detail1:n}),new Error(n)}var r=this,i=this.subQueries[e],f=this.subQueryDfds[e],l=[],c;if(!this.isPrefetch())return;this._isPrefetch=!1;if(i.length){i=t(i).sortBy(function(e){return e.serialize().toLowerCase()});var h=u&&u<9?2e3:null,p=s.chunkWithLimit(i,this._batchLimit,function(e){return e.serialize().length},h);return t(p).forEach(function(e){var n=r._api.get("batch",null,e),i=[];t(e).forEach(function(e){i.push(e.serialize())}),n.fetch("prefetch").done(function(n){t(n).forEach(function(t,n){var r=e[n].serialize().toLowerCase();f[r].resolve(t)})}),l.push({url:n.serialize(),subQueries:i})}),l}},isPrefetch:function(){return this._isPrefetch},prefetch:function(e){var r,i,s,o,u=this.subQueries[this.cacheIndex],a=this.subQueryDfds[this.cacheIndex];if(!this.isPrefetch())throw new Error("Error: Prefetch has not been started");return e._data.contentType==="batch"?(i=n.Deferred(),r=e._data.apiBatch,s=[],t(r).forEach(function(e){o=e.serialize().toLowerCase(),a[o]||(a[o]=n.Deferred(),u.push(e)),s.push(a[o])}),n.when.apply(n,s).done(function(){var e=t(arguments).toArray();i.resolve(e)}),i.promise()):(o=e.serialize().toLowerCase(),a[o]||(a[o]=n.Deferred(),u.push(e)),a[o].promise())}}}),BV.define("framework/util/extensionsRegistry",["window"],function(e){return e&&e.BV&&e.BV._internal&&e.BV._internal.extensionsRegistry||{}}),BV.define("serverFetch",{load:function(e,t,n,r){r.isServerRender?t(["bv/api/serverFetch"],function(e){n(e)}):n({})}}),BV.define("bv/api/util/jsonpCallback",["jquery"],function(e){var t=e.fn.jquery?e.fn.jquery.split(" ")[0]:"",n=/\W+/ig;return{generate:function(e){e=e||Math.floor(Math.random()*1e6);var r="bv_"+t+"_"+e;return r.replace(n,"")}}}),BV.define("bv/api/fetch",["underscore","jquery","bv/api","bv/api/normalizer","bv/prefetch","bv/strings","framework/util/extensionsRegistry","client!window","vendor/json2","serverFetch!","framework/util/bvtracker","bv/api/util/jsonpCallback"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=o["data.bvapi"];return h&&(h.sanitize=function(e){return{contentType:e.contentType,results:n.normalize(e.results,e.options)}}),u.BV&&u.BV.serverRender?f:(n.normalize=function(e,t){return r.normalize(e,t,n)},n.get.fn.fetch=function(o,u){var f=this,p=f.serialize(),d=p.toLowerCase(),v,m,g=new Date,y=[],b=[],w,E=function(t){t&&t.HasErrors&&e(t.Errors).forEach(function(e){e.Code!=="ERROR_DUPLICATE_SUBMISSION"&&l.error({name:s.errors.API,detail1:e.Code,detail2:p})})};if(!n._config.baseUrl)throw l.error({name:s.errors.CONFIG,detail1:"Incomplete API Config",detail2:a.stringify(n._config)}),new Error("Incomplete API Config - "+p);if(i.isPrefetch())return i.prefetch(f);try{v=BV._internal.apiCache[d]}catch(S){}f._data.contentType==="batch"&&(w=f._data.apiBatch,e(w).forEach(function(e){var n=e.serialize().toLowerCase(),r;try{r=BV._internal.apiCache[n]}catch(i){}r||(y.push(e),r=BV._internal.apiCache[n]=t.Deferred(),r.done(E)),b.push(r)}),y.length?(f._data.apiBatch=y,p=f.serialize()):v=t.Deferred().resolve());if(!v||v.state()==="rejected")v=t.ajax({url:p,dataType:"jsonp",cache:!0,timeout:2e4,jsonpCallback:c.generate(f.checksum(o+u))}),v.done(E),f.config.user||(BV._internal.apiCache[d]=v);return n._config.normalize?(m=t.Deferred(),v.done(function(r){var i,s,o=[];f._data.contentType==="batch"?(e(y).forEach(function(e,t){var n=e.serialize().toLowerCase(),i=r.BatchedResults["q"+t];i&&BV._internal.apiCache[n].resolve(i)}),t.when.apply(t,b).done(function(){var r=e(arguments).toArray();e(r).forEach(function(e,r){var u=w[r],a=u._data.contentType,f=t.Deferred();i={contentType:a,api:u},s=n.normalize(e,i),s.Includes=e.Includes,o.push(f.promise()),h&&h.sendData({contentType:a,results:e,options:i}),f.resolve({contentType:a,data:s})}),t.when.apply(t,o).then(function(){var t=e(arguments).toArray();m.resolve(t)})})):(f._data.contentType.indexOf("related")>-1&&(f._data.contentType=f._data.contentType.replace("related","")),i={contentType:f._data.contentType,api:f},s=n.normalize(r,i),s.Includes=r.Includes,h&&h.sendData({contentType:f._data.contentType,results:r,options:i}),m.resolve({contentType:f._data.contentType,data:s}))}).fail(function(){m.reject.call(m,g,new Date)}),m.promise()):v},n)}),BV.define("framework/polyfill/user-timing",["window","underscore","framework/util/bvreporter"],function(e,t,n){function f(e){u.push(e),e.entryType==="measure"&&(a=!0)}function l(){if(!a)return;u.sort(function(e,t){return e.startTime-t.startTime}),a=!1}function c(e,t){var n=0;while(n<u.length){if(u[n].entryType!==e){n++;continue}if(t!==void undefined&&u[n].name!==t){n++;continue}u.splice(n,1)}}var r=e.BV,i=e.performance||{},s,o;r.performance=r.performance||{};var u=r.performance._timeline||[],a=!1;r.performance.getEntries=function(){return l(),u.slice(0)},r.performance.getEntriesByType=function(e){if(e!=="mark"&&e!=="measure")return[];e==="measure"&&l();var t=[];for(var n=0;n<u.length;n++)u[n].entryType===e&&t.push(u[n]);return t},r.performance.getEntriesByName=function(e,t){if(t&&t!=="mark"&&t!=="measure")return[];t!=="mark"&&l();var n=[];for(var r=0;r<u.length;r++){if(t!==void undefined&&u[r].entryType!==t)continue;u[r].name===e&&n.push(u[r])}return n};var h={navigationStart:1,unloadEventStart:1,unloadEventEnd:1,redirectStart:1,redirectEnd:1,fetchStart:1,domainLookupStart:1,domainLookupEnd:1,connectStart:1,connectEnd:1,secureConnectionStart:1,requestStart:1,responseStart:1,responseEnd:1,domLoading:1,domInteractive:1,domContentLoadedEventStart:1,domContentLoadedEventEnd:1,domComplete:1,loadEventStart:1,loadEventEnd:1},p=r.performance._marks||{};return r.performance.mark=function(e){typeof i.mark=="function"&&i.mark(e);var t=r.performance.now();if(e===void undefined)throw new SyntaxError("Mark name must be specified");if(e in h)throw new SyntaxError('Mark name "'+e+'" is not allowed');p[e]||(p[e]=[]),p[e].push(t),f({entryType:"mark",name:e,startTime:t,duration:0})},r.performance.clearMarks=function(e){e?p[e]=[]:p={},c("mark",e)},r.performance.measure=function(e,t,s){var o=r.performance.now();if(!e)throw new Error("Measure must be specified");if(!t){f({entryType:"measure",name:e,startTime:0,duration:o});return}var u=0,a=i.timing||{};if(t in a||t in h){if(t!=="navigationStart"&&a[t]===0){n.warn(t+" has a timing of 0");return}t in a?u=a[t]-a.navigationStart:u=0}else{if(!(t in p)){n.warn(t+" mark not found");return}u=p[t][p[t].length-1]}var l=o;if(s){l=0;if(s in a||s in h){if(s!=="navigationStart"&&a[s]===0){n.warn(s+" has a timing of 0");return}s in a?l=a[s]-a.navigationStart:l=u}else{if(!(s in p)){n.warn(s+" mark not found");return}l=p[s][p[s].length-1]}}var c=l-u;f({entryType:"measure",name:e,startTime:u,duration:c})},r.performance.clearMeasures=function(e){c("measure",e)},r.performance}),BV.define("framework/performance",["window","underscore","framework/util/bvtracker","framework/polyfill/user-timing"],function(e,t,n,r){function s(e,n,r,o){if(arguments.length<1)throw new SyntaxError('The "name" parameter is required');if(arguments.length<2||!n)n="scoutStart";t.isNumber(o)||(o=s.SEVERITY.WARN),r?i.performance.measure(e,n,r):i.performance.measure(e,n);var u=i.performance.getEntriesByName(e).pop();u&&o<=s.level&&i.performance.track(u)}function o(e){n.performance({name:e.name,elapsedMs:e.duration,startTime:e.startTime,endTime:e.startTime+e.duration})}var i=e.BV;return s.SEVERITY={DEBUG:3,INFO:2,WARN:1,ERROR:0},s.level=s.SEVERITY.WARN,s.debug=function(e,t,n){i.performance.log(e,t,n,s.SEVERITY.DEBUG)},s.info=function(e,t,n){i.performance.log(e,t,n,s.SEVERITY.INFO)},s.warn=function(e,t,n){i.performance.log(e,t,n,s.SEVERITY.WARN)},s.error=function(e,t,n){i.performance.log(e,t,n,s.SEVERITY.ERROR)},i.performance.track=o,i.performance.log=s,i.performance}),BV.define("framework/async-queue",["underscore","framework/performance","framework/util/bvreporter"],function(e,t,n){var r=[],i={running:!1,delay:5,debug:!1,onError:function(t,r){n.error("Error running task",r,t)}};i.push=function(){var n=e.toArray(arguments);n=e.map(n,function(e){if(typeof e!="object"||"fn"in e){if(typeof e!="object"&&typeof e!="function")throw new Error("Tasks must be functions or objects");return e=typeof e=="function"?{fn:e}:e,e}throw new Error('Task objects must implement an "fn" method')}),r.push.apply(r,n),i.running||(i.running=!0,setTimeout(s,this.delay))};var s=e.bind(function(){this.running=!0;var n=r.shift();i.debug&&t.getEntriesByName("tick-wait-start").length>0&&t.measure("tick-wait","tick-wait-start"),i.debug&&t.mark("tick-start");try{n.fn()}catch(o){this.onError(o,n)}i.debug&&t.measure("tick-run","tick-start"),r.length>0?(i.debug&&t.mark("tick-wait-start"),setTimeout(s,this.delay)):this.running=!1},i);return i}),BV.define("framework/bmodel",["ENV","backbone","underscore","$BV","framework/bevented","framework/bdata","framework/bmodelbase","jquery","bv/api/fetch","framework/async-queue","framework/util/featureHelper","framework/util/bvreporter","framework/util/bvtracker"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=t.Model.extend(i);return p=p.extend(s),p=p.extend(o),p.extend({initialize:function(t,r){c.assert(function(){return[n(t).isObject(),"config is object"]}),c.assert(function(){return[n(r).isObject()||n(r).isUndefined(),"options is object or empty"]}),c.debug("Model",this.name,"initializing");var i=this.get("parent"),s=this;this.subModels={},this._initDeferreds(),e.on("bv:initReady",this._initReady,this),i?(this.set(this._getParentProps(i,t)),this.api=i.api||a):this.set(this._getProps());var o=this.getComponent();this.readOnly=!!o.readOnly,this._initializeAPI(t,r)},_initializeAPI:function(e,t){this.api=this.api||a,this._initialize(e,t)},_initialize:function(t,r){var i=e.get("componentManager"),s=this.get("componentId"),o=i.find(s);c.assert(o,"model "+this.name+" has associated component"),t.name&&(this.name=t.name);if(n.isFunction(this.init)){var u=this.init.apply(this,arguments);if(u===null)return null}this._initSubmodels(o),this.setupDataProcessing(),this.onDataReady(this._dataReady,this)},isAsyncDataProcessing:function(){return this.getComponent().isAsyncDataProcessing()},_initSubmodels:function(t){if(!t||!t.features)return;var r=e.get("mappings");c.debug("Model",this.getScope(),"initializing feature models");var i=this.get("parent"),s=i?this.name:"self",o=t.features[this.name]||t.features[s]||[];o=l.getFeaturesForInstance(o,this.getContentType(),this.getInstanceName()),n(o).forEach(function(e){var t=l.getName(e),n=r[t],i={parent:this,featureType:l.getType(e),instanceName:l.getInstanceName(e)},s;if(!n)return;if(n.has||!n.model&&!n.collection)return;n.model?s=new n.model(i):n.collection&&(s=new n.collection(undefined,i),s.parent=this),this.subModels[e]=s},this)},setupDataProcessing:function(){c.debug("Model",this.getScope(),"setting up data processing");var e=this.get("parent");e?e.onDataReady(this.invokeProcessData,this):this.invokeProcessData()},invokeProcessData:function(e){this.isAsyncDataProcessing()?(c.info("Model",this.name,"calling processData asynchronously"),f.push(n(function(){this.processData(e)}).bind(this))):this.processData(e)},processData:function(e){return c.debug("Model",this.getScope(),"processing data"),this.dataReady(e)},_initReady:function(){e.off("bv:initReady",this._initReady,this),this.initReady(this)},initReady:function(e){c.debug("Model",this.getScope(),"initReady"),this.initialized()},_dataReady:function(e){var t=this,r=n.values(this.subModels);if(r.length){var i=n.invoke(r,"dataProcessedPromise");u.when.apply(u,i).done(function(){t.dataProcessed()})}else this.dataProcessed()},getFeatureModel:function(e){var t=this.getFeatureModels(e);return n(t).isEmpty()?null:t[0]},getFeatureModels:function(e){if(n(this.subModels).has(e))return[this.subModels[e]];var t=n(this.subModels).filter(function(t,n){return l.match(e,n)});return n(t).isEmpty()?null:t}})}),BV.define("hbs",[],function(){return{}}),function(){var e={};(function(e,t){e.VERSION="1.0.0-rc.3",e.COMPILER_REVISION=2,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:">= 1.0.0-rc.3"},e.helpers={},e.partials={},e.registerHelper=function(e,t,n){n&&(t.not=n),this.helpers[e]=t},e.registerPartial=function(e,t){this.partials[e]=t},e.registerHelper("helperMissing",function(e){if(arguments.length===2)return t;throw new Error("Could not find property '"+e+"'")});var n=Object.prototype.toString,r="[object Function]";e.registerHelper("blockHelperMissing",function(t,i){var s=i.inverse||function(){},o=i.fn,u=n.call(t);return u===r&&(t=t.call(this)),t===!0?o(this):t===!1||t==null?s(this):u==="[object Array]"?t.length>0?e.helpers.each(t,i):s(this):o(t)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(t,n){if(e.logger.level<=t){var r=e.logger.methodMap[t];typeof console!="undefined"&&console[r]&&console[r].call(console,n)}}},e.log=function(t,n){e.logger.log(t,n)},e.registerHelper("each",function(t,n){var r=n.fn,i=n.inverse,s=0,o="",u;n.data&&(u=e.createFrame(n.data));if(t&&typeof t=="object")if(t instanceof Array)for(var a=t.length;s<a;s++)u&&(u.index=s),o+=r(t[s],{data:u});else for(var f in t)t.hasOwnProperty(f)&&(u&&(u.key=f),o+=r(t[f],{data:u}),s++);return s===0&&(o=i(this)),o}),e.registerHelper("if",function(t,i){var s=n.call(t);return s===r&&(t=t.call(this)),!t||e.Utils.isEmpty(t)?i.inverse(this):i.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn})}),e.registerHelper("with",function(t,n){if(!e.Utils.isEmpty(t))return n.fn(t)}),e.registerHelper("log",function(t,n){var r=n.data&&n.data.level!=null?parseInt(n.data.level,10):1;e.log(r,t)});var i=["description","fileName","lineNumber","message","name","number","stack"];e.Exception=function(e){var t=Error.prototype.constructor.apply(this,arguments);for(var n=0;n<i.length;n++)this[i[n]]=t[i[n]]},e.Exception.prototype=new Error,e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()};var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},o=/[&<>"'`]/g,u=/[&<>"'`]/,a=function(e){return s[e]||"&amp;"};e.Utils={escapeExpression:function(t){return t instanceof e.SafeString?t.toString():t==null||t===!1?"":u.test(t)?t.replace(o,a):t},isEmpty:function(e){return!e&&e!==0?!0:n.call(e)==="[object Array]"&&e.length===0?!0:!1}},e.VM={template:function(t){var n={escapeExpression:e.Utils.escapeExpression,invokePartial:e.VM.invokePartial,programs:[],program:function(t,n,r){var i=this.programs[t];return r?e.VM.program(n,r):i?i:(i=this.programs[t]=e.VM.program(n),i)},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(r,i){i=i||{};var s=t.call(n,e,r,i.helpers,i.partials,i.data),o=n.compilerInfo||[],u=o[0]||1,a=e.COMPILER_REVISION;if(u!==a){if(u<a){var f=e.REVISION_CHANGES[a],l=e.REVISION_CHANGES[u];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+f+") or downgrade your runtime to an older version ("+l+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+o[1]+")."}return s}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,2);return function(n,i){return i=i||{},e.apply(this,[n,i.data||t].concat(r))}},program:function(e,t){return function(n,r){return r=r||{},e(n,r.data||t)}},noop:function(){return""},invokePartial:function(n,r,i,s,o,u){var a={helpers:s,partials:o,data:u};if(n===t)throw new e.Exception("The partial "+r+" could not be found");if(n instanceof Function)return n(i,a);if(!e.compile)throw new e.Exception("The partial "+r+" could not be compiled when running in runtime-only mode");return o[r]=e.compile(n,{data:u!==t}),o[r](i,a)}},e.template=e.VM.template})(e,undefined),typeof BV.define=="function"&&BV.define.amd?BV.define("vendor/handlebars/runtime",[],function(){return e}):module.exports=e}(),BV.define("hbs!modestboxLoader",["hbs","vendor/handlebars/runtime"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div id="bv-mbox-loading"> <div class="bv-mbox-spinner"></div> </div> '});return t.registerPartial("modestboxLoader",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!ariaStatus",["hbs","vendor/handlebars/runtime"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<div class="bv-cleanslate bv-aria-status"> <div role="status" aria-live="polite" aria-relevant="additions" class="',(o=n.containerClass)?o=o.call(t,{hash:{}}):(o=t.containerClass,o=typeof o===u?o.apply(t):o),s+=a(o)+' bv-aria-polite"> <div class="bv-off-screen"></div> </div> <div role="status" aria-live="assertive" aria-relevant="additions" class="',(o=n.containerClass)?o=o.call(t,{hash:{}}):(o=t.containerClass,o=typeof o===u?o.apply(t):o),s+=a(o)+' bv-aria-assertive"> <div class="bv-off-screen"></div> </div> </div> ',s});return t.registerPartial("ariaStatus",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("body",["document"],function(e){var t;return function(){return t=t||e.body||e.getElementsByTagName("body")[0],t}}),BV.define("bv/util/ariaStatus",["jquery","underscore","hbs!ariaStatus","ENV","window","body"],function(e,t,n,r,i,s){function f(){o=e(n({containerClass:"bv-core-container-"+r.get("config").version})).appendTo(s()),u=o.find(".bv-aria-assertive .bv-off-screen"),a=o.find(".bv-aria-polite .bv-off-screen")}if(i.BV&&i.BV.serverRender)return;var o,u,a;return{add:function(n,r){o||f();var i=e('<div class="bv-aria-status-message" />');return i[t(n).isString()?"html":"append"](n),i.appendTo(r==="polite"?a:u)}}}),BV.define("bv/util/loadingOverlay",["underscore","jquery","hbs!modestboxLoader","bv/util/ariaStatus","mf!bv/c2013/messages/common","body"],function(e,t,n,r,i,s){function l(){if(o)return;o=t(n())}var o,u,a,f=i.wait_feedback(),c={show:function(t){l(),this._clear(),o.appendTo(s()),this._showing||(u=r.add(f)),t||(a=e(this.hide).chain().bind(this).delay(2e4)),this._showing=!0},hide:function(){l(),this._clear(),o.remove(),u&&u.remove(),this._showing=!1},_clear:function(){a&&window.clearTimeout(a)}};return c}),BV.define("bv/c2013/model/fullProfile",["framework/bmodel","underscore","bv/util/loadingOverlay","jquery"],function(e,t,n,r){return e.extend({name:"fullProfile",init:function(e,t){e.dimsumConfig&&this.set("coverageContentTypes",e.dimsumConfig.coverageContentTypes),this.subscribe("launchprofile",this.launchProfile),this.subscribe("pageto",this.fetchPage)},setupDataProcessing:function(){this.subscribe("authorresponse",this.processData)},fetchPage:function(e,t){var n=this.get("clientAPIConfig");if(!n.profileId)return;this.set({autoload:!0,renderSidebar:!0}),this.launchProfile({Id:n.profileId})},launchProfile:function(e){if(!e||!e.Id)return;var t=this.get("clientAPIConfig");t&&!t.silentMode&&n.show(),this.set("Author",e);var r=this.getFeatureModel("tabs");r&&r.fetchPage(1,e)},processData:function(e){this.set("Author",e);var t=this.getFeatureModel("sidebar");t&&t.set("Author",e),this.dataReady(e),n.hide(),this.get("autoload")||(this.set("renderSidebar",!1),this.trigger("showfullprofile"))},getSubject:function(){return{type:"author",id:this.get("clientAPIConfig").profileId,contentType:this.get("contentType")}}})}),BV.define("util/highContrast",["jquery","body","util/has"],function(e,t,n){function r(){var n=e('<div style="background-color: blue !important"></div>');n.appendTo(t());var r=n.css("background-color");return n.remove(),r==="rgb(0, 0, 255)"?!1:r==="blue"?!1:!0}return n.add("high-contrast",r),n}),BV.define("util/specialKeys",[],function(){return{DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,RIGHT:39,SPACE:32,TAB:9,UP:38}}),BV.define("framework/beventmanager",["underscore","jquery","framework/util/bvreporter","framework/util/bvtracker","bv/strings"],function(e,t,n,r,i){function s(s){function c(){f={},u={},a={},l=t.Deferred(),u[s.uniq]=s}function h(e){return e.name+"<"+e.contentType+">"}function p(e){var t=h(e);t in a||(a[t]=[]),a[t].push(e)}function d(t){var n=h(t),r=a[n];return r?(a[n]=e(r).without(t),a[n].length):0}function v(e){return f[e]||(f[e]={}),f[e]}function m(e){delete f[e]}function g(e){var t=e.attr("data-bv-v"),n=u[t];return n||null}function y(e,t){if(!e)return!1;var n=v(h(e));return t in n}function b(e,t){var n=".delegateSubviewEvents"+s.cid,r=n+h(t);return e+n+r}function w(e){return e.name+":"+e.uniq}function E(o,u,a,f){return function(l){n.group(n.DEBUG,"Responding to event:",o),n.debug("(event manager:",h(s),")"),n.debug("(responder for view name:",a,")");var c=t(l.currentTarget),p=[],d=c.parents("[data-bv-v]").toArray();c.is("[data-bv-v]")&&d.unshift(c[0]),e.each(d,function(e,n){var r=g(t(e));y(r,o)&&p.push(r)}),n.debug("Views interested in this event:",e(p).map(h));for(var v=0,m=p.length,b;v<m;v++){b=p[v];if(h(b)!==a){n.debug("Skipping",h(b),"because it's of the wrong type.");continue}try{n.debug("Calling method",f,"on view",h(b)),u.call(b,l)}catch(w){r.error({name:i.errors.FRAMEWORK,detail1:w})}if(l.isPropagationStopped())break}n.groupEnd(n.DEBUG,"Responding to event:",o)}}var o=/^(\S+)\s*(.*)$/,u,a,f,l;return c(),s.on("attach",function(){l.resolve()}),s.on("detach",function(){s.$el.undelegate(".delegateSubviewEvents"+s.cid),c()}),{delegateSubviewEvents:function(t){var r=t.events;if(!r)return;var i=this,s=w(t);u[s]=t,p(t);var a=v(h(t));e(r).each(function(e,r){n.debug("Handling signature:",r);if(r in a){n.debug("Signature already exists:",r);return}!(e in t);var s=r.match(o),u=s[1],f=s[2];u=b(u,t);var c=t[e];l.done(function(){var n=E(r,c,h(t),e);i.$el.delegate(f,u,n)}),a[r]=!0})},undelegateSubviewEvents:function(e){var t=w(e);delete u[t];var n=d(e);if(n===0){var r=".delegateSubviewEvents"+this.cid+h(e);this.$el.undelegate(r),m(h(e))}},detachEvents:function(e){e.off("attach"),e.off("detach")}}}return s}),BV.define("hbs!ariaAlert",["hbs","vendor/handlebars/runtime"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<p class="bv-off-screen" role="alert">',(o=n.message)?o=o.call(t,{hash:{}}):(o=t.message,o=typeof o===u?o.apply(t):o),s+=a(o)+"</p>",s});return t.registerPartial("ariaAlert",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("framework/bview",["ENV","backbone","underscore","jquery","window","util/highContrast","util/specialKeys","framework/util/featureHelper","framework/bevented","framework/util/bvreporter","framework/beventmanager","framework/async-queue","hbs!ariaAlert"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p,d=t.View.extend(a);d.config=e.get("config");var v=d.extend({events:{'click button, input[type="submit"]':"_preventSubmit","keydown .bv-focusable":"_keyboardNavigate"},name:null,msgpacks:null,template:function(){f.assert(!1,"No template defined for view "+this.name+"!")},isEventManager:!1,constructor:function(e){return this.el&&e.el&&delete e.el,t.View.prototype.constructor.call(this,e)},initialize:function(t){f.assert(function(){return[n.isObject(t),"opts is object"]}),f.debug("View",this.name,"initializing");var r=this,i=u.getFullName(this.name,t.featureType,t.instanceName);this.parent=t.parent||{},this.containerPrefix=this.parent.containerPrefix,this.classPrefix=e.get("classPrefix"),this.componentId=t.componentId,this.classList=(this.classList||[]).concat(t.classList||[]),this.seoTagList=(this.seoTagList||[]).concat(t.seoTagList||[]),this.viewAlias=t.viewAlias,this.instanceName=t.instanceName,this.tag=t.tag,this._assignModel(i),this._loadPropertiesFromModel(),f.assert(this.componentId,"View "+this.name+" must have componentId"),this.isTopView=t.isTopView;var o;this.model&&(this.isTopView||this.model===this.getTopModel()?o="self":this.model.get("parent")||this.model.isCollection?o=u.getName(i):f.assert(!1,"can't derive model name for view:",this.name)),this.model&&(this.readOnly=!!this.getComponent().readOnly),this.isEventManager&&this._actAsEventManager(!0),this.isTopView&&(this._actAsEventManager(),this.getComponent().setTopView(this),s("high-contrast")&&this.on("attach",function(e){e.$viewEl.closest(".bv-cleanslate").addClass("bv-highcontrast")})),this._setupSubviews(t,o),this.getComponent().registerView(this),n.isFunction(this.init)&&this.init.apply(this,arguments)},createFeatureViews:function(e,t,r){f.assert(function(){return[n(e).isObject(),"features is object"]}),f.assert(function(){return[n(t).isString(),"featureName is string"]}),f.assert(function(){return[n(r).isObject(),"mappings is object"]}),f.debug("View",this.name,"creating feature views");var i=[],s=u.getFeaturesForInstance(e[t],this.contentType,this.instanceName);return n(s).each(function(e){var t=u.getType(e),n=u.getInstanceName(e),s=r[u.getName(e)],o;s.view&&(o=s.view,i.push(new o({parent:this,featureType:t,instanceName:n,componentId:this.componentId})))},this),i},formSetup:function(e){n(this.views).invoke("formSetup",e)},modelDataReady:r.noop,hasFeature:function(e,t){var n=this.getComponent();return n.hasFeature(this.getRefName(),e,this.contentType,this.instanceName,t)},getFeatureView:function(e){if(this.name===e)return this;if(n.isEmpty(this.views))return null;var t;for(t=0;t<this.views.length;t++)if(this.views[t].name===e)return this.views[t];for(t=0;t<this.views.length;t++){var r=this.views[t].getFeatureView(e);if(r)return r}return null},delegateEvents:r.noop,getComponent:function(){if(this.model)return this.model.getComponent();if(this.componentId)return this._component||(this._component=e.get("componentManager").find(this.componentId)),this._component;f.assert(!1,"cannot get component; no model or componentId")},getTopModel:function(){return f.assert(this.model,"model property is required to get top model"),this.model.getTopModel()},getRefName:function(){return f.assert(this.model,"model property is required to get ref name"),this.model.getRefName()},serializeSubviews:function(e,t){f.debug("View",this.name,"serializing subviews"),n.isObject(e)||(e={});var i=e.viewList||[],s=e._subview||{},o=this,u={};this.collection?u=this.collection.toJSON():this.model?u=this.model.toJSON():f.log("no collection or model found",this),n(u).extend(e),u._bview=this._getViewMetadata();var a=n(this.views).map(function(e){i.push({viewIndex:e.cid,viewName:e.viewAlias||e.name,viewInstanceName:e.instanceName,component:e.componentId,contentType:e.contentType});var n=r.Deferred(),o=e.toHTML(null,t);return r.when(o).done(function(t){s[e.cid]=t,n.resolve()}),n.promise()}),l=r.Deferred();return r.when.apply(r,a).done(function(){n.extend(s,e._subview||{}),u._subview=s,u.viewList=i,u.viewName=o.templateName||o.name,o.subviewsInitialized=!0,l.resolve(u)}),l.promise()},$:function(e){return f.assert(this.viewEl,"View must be attached to use $ method!"),this.$viewEl.find(e)},toHTML:function(e,t){f.debug("View",this.name,"doing toHTML",t?"(async)":""),t&&f.info("View",this.name,"rendering asynchronously");var i=this;e=e||{};var s={};if(this.msgpacks)for(var o=0,u=this.msgpacks.length;o<u;o++)n.extend(s,this.msgpacks[o]);n.isEmpty(s)||(e.msgpack=s),e.viewTag=this.tag;var a=this.serializeSubviews(e,t),l=r.Deferred();r.when(a).done(function(e){var n=function(){var t=i.template(e);l.resolve(t)};n.displayName="Template for "+this.name+" "+this.uniq,t?c.push(n):n()});if(arguments.length<2){var h;return l.done(function(e){h=e}),h}return l.promise()},selector:function(){var e="data-"+this.classPrefix+"v",t=this.name+":"+this.uniq;return"["+e+'="'+t+'"]'},renderAsync:function(){return this._render(!0)},render:function(){var e;return this._render(!1).done(function(t){e=t}),e},attach:function(t){if(!e.get("cssIsLoaded")){f.warn("View",this.name,"tried to attach before CSS loaded!");return}t&&f.assert(n.isElement(t),"element must be a DOM element"),f.group(f.LOG,"View",this.name,"attaching"),t&&this.setElement(t);var r=this.$el.find(this.selector());r.length||f.warn("View",this.name,"could not find a content element. A view might be rendering before its parents are ready."),this.$viewEl=r,this.viewEl=r[0];var i=n.clone(v.prototype.events);this.events=n(i).extend(this.events);var s=this.getEventManager();return s.delegateSubviewEvents(this),n(this.views).each(function(e){e.isEventManager||e.attach(this.viewEl)},this),this.isEventManager&&this._setButtonOnclickReturnFalse(),this.trigger("attach",this),f.groupEnd(f.LOG,"View",this.name,"attaching"),this},detach:function(){f.debug("View",this.name,"detaching");var e=this.getEventManager();return e.undelegateSubviewEvents(this),this.$viewEl=this.viewEl=null,n.invoke(this.views,"detach"),this.trigger("detach",this),this},remove:function(){return this.isTopView&&f.group(f.DEBUG,"Removing top view"+this.getScope()),this.$viewEl&&this.$viewEl.remove(),this.detach(),this.stopListening(),this.off("attach"),this.off("detach"),n(this.views).invoke("remove"),this.isTopView&&f.groupEnd(f.DEBUG),this},getEventManager:function(){if(this.isEventManager)return f.log("View",this.name,"is acting as its own event manager."),this;var e=this;while(e){e=e.parent;if(e&&e.isEventManager)return f.log("View",this.name,"found an event manager:",e.getScope()),e}return f.log("View",this.name,"found no event manager, so it is becoming an event manager."),this._actAsEventManager(),this},getScope:function(){return this.getComponent().getScope(this.contentType)},showAriaAlert:function(e){var t=r(h({message:e}));return this.$viewEl.append(t),t},_render:function(t){var n=r.Deferred(),i=this;return e.get("cssIsLoaded")?(this.isTopView&&f.group(f.INFO,"Rendering top view",this.getScope()),this.toHTML(null,t).done(function(e){if(!i.$viewEl||!i.$viewEl.closest("html").length)i.$viewEl=i.$el.find(i.selector());i.$viewEl.length>0?i.$viewEl.replaceWith(e):i.$el.append(e);var t=i.attach();i.isEventManager||i._setButtonOnclickReturnFalse(),i.isTopView&&f.groupEnd(f.INFO,"Rendering top view"),n.resolve(t)}),n.promise()):(f.warn("View",this.name,"tried to render before CSS loaded!"),n.resolve(),n.promise())},_ensureElement:function(){this.setElement(this.el)},_preventSubmit:function(e){r(e.target).is(".bv-submit")||e.preventDefault()},_keyboardNavigate:function(t){(t.keyCode===o.ENTER||t.keyCode===o.TAB)&&e.set("keyboardMode",!0)},_actAsEventManager:function(e){if(this.isEventManager&&!e)return;this.isEventManager=!0,n.extend(this,l(this))},_assignModel:function(e){if(this.model)return;if(!this.parent.model||!this.parent.model.subModels)return;var t=this.parent.model.subModels[e];if(!t)return;this.model=t},_loadPropertiesFromModel:function(){if(!this.model)return;var e=this.model.isCollection;n(["subjectType","componentId","contentType","secondaryContentType","coverageContentTypes","submissionContentTypes","clientAPIConfig","component","outlets","dimsumConfig"]).each(function(t){this[t]=e?this.model[t]:this.model.get(t)},this),this.model.onDataProcessed(this.modelDataReady,this)},_setupSubviews:function(t,n){var r=this.getComponent(),i=e.get("mappings"),s;this.uniq=++r.viewUniq,t.views?this.views=t.views:r&&r.features&&r.features[n]&&(this.views=[],s=this.createFeatureViews(r.features,n,i),s.length>0?this.views=this.views.concat(s):this.views=p)},_getViewMetadata:function(){var e={viewId:this.uniq,classList:this.classList,name:this.name,component:this.getComponent(),contentType:this.contentType,refName:this.getRefName(),seoTagList:this.seoTagList,instanceName:this.instanceName};return this.parent&&this.parent.uniq&&(e.parentViewId=this.parent.uniq),e},_setButtonOnclickReturnFalse:function(){n.defer(function(e){e.find('button, input[type="submit"]').not(".bv-submit").attr("onclick","return false;")},this.$el)}});return v}),BV.define("_i18n_anonymousContentAuthorPreview",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";return t+="you",t}(e)}catch(t){return r.push(["error",new Error("MF error on `anonymousContentAuthorPreview`: "+t.toString())]),""}}return t.registerHelper("_i18n_anonymousContentAuthorPreview",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("_i18n_anonymousContentAuthor",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";return t+="Anonymous",t}(e)}catch(t){return r.push(["error",new Error("MF error on `anonymousContentAuthor`: "+t.toString())]),""}}return t.registerHelper("_i18n_anonymousContentAuthor",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("hbs!contentAuthorInner",["hbs","vendor/handlebars/runtime","template/helpers/notEqual","template/helpers/schemaType","template/helpers/equals","template/helpers/ifHasFeature","template/helpers/mountView","_i18n_anonymousContentAuthorPreview","_i18n_anonymousContentAuthor"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i,s;r+=" ",s=n["if"].call(e,(i=e.Author,i==null||i===!1?i:i.DisplayName),{hash:{},inverse:h.program(16,x,t),fn:h.program(2,d,t)});if(s||s===0)r+=s;r+=" ",s=n["if"].call(e,(i=e.Author,i==null||i===!1?i:i.Department),{hash:{},inverse:h.noop,fn:h.program(21,C,t)});if(s||s===0)r+=s;return r+=" ",r}function d(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:h.program(5,m,t),fn:h.program(3,v,t)},s=(i=n.equals,i?i.call(e,e.Type,"clientresponse",o):f.call(e,"equals",e.Type,"clientresponse",o));if(s||s===0)r+=s;return r+=" ",r}function v(e,t){var r="",i,s;return r+=' <span class="bv-author bv-content-author-name" itemprop="',s={hash:{comment:"creator",def:"author"}},r+=l((i=n.schemaType,i?i.call(e,e.Type,s):f.call(e,"schemaType",e.Type,s)))+'">'+l((i=(i=e.Author,i==null||i===!1?i:i.DisplayName),typeof i===c?i.apply(e):i))+"</span> ",r}function m(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:h.program(8,y,t),fn:h.program(6,g,t)},s=(i=n.ifHasFeature,i?i.call(e,"avatar",e,o):f.call(e,"ifHasFeature","avatar",e,o));if(s||s===0)r+=s;return r+=" ",r}function g(e,t){var r="",i,s,o;r+=" ",o={hash:{}},s=(i=n.mountView,i?i.call(e,"avatar",e,o):f.call(e,"mountView","avatar",e,o));if(s||s===0)r+=s;return r+=" ",r}function y(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:h.program(14,S,t),fn:h.program(9,b,t)},s=(i=n.ifHasFeature,i?i.call(e,"fullProfileLink",e,o):f.call(e,"ifHasFeature","fullProfileLink",e,o));if(s||s===0)r+=s;return r+=" ",r}function b(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:h.program(12,E,t),fn:h.program(10,w,t)},s=(i=n.notEqual,i?i.call(e,e.viewName,"avatarPopup",o):f.call(e,"notEqual",e.viewName,"avatarPopup",o));if(s||s===0)r+=s;return r+=" ",r}function w(e,t){var r="",i,s;return r+=' <button type="button" class="bv-author bv-fullprofile-popup-target bv-focusable" itemprop="',s={hash:{comment:"creator",def:"author"}},r+=l((i=n.schemaType,i?i.call(e,e.Type,s):f.call(e,"schemaType",e.Type,s)))+'"> <h3>'+l((i=(i=e.Author,i==null||i===!1?i:i.DisplayName),typeof i===c?i.apply(e):i))+"</h3> </button> ",r}function E(e,t){var r="",i,s;return r+=' <span class="bv-author bv-fullprofile-popup-target" itemprop="',s={hash:{comment:"creator",def:"author"}},r+=l((i=n.schemaType,i?i.call(e,e.Type,s):f.call(e,"schemaType",e.Type,s)))+'"> <h3>'+l((i=(i=e.Author,i==null||i===!1?i:i.DisplayName),typeof i===c?i.apply(e):i))+"</h3> </span> ",r}function S(e,t){var r="",i,s;return r+=' <h3 class="bv-author" itemprop="',s={hash:{comment:"creator",def:"author"}},r+=l((i=n.schemaType,i?i.call(e,e.Type,s):f.call(e,"schemaType",e.Type,s)))+'"> '+l((i=(i=e.Author,i==null||i===!1?i:i.DisplayName),typeof i===c?i.apply(e):i))+" </h3> ",r}function x(e,t){var r="",i,s,o;r+=' <span class="bv-author bv-content-author-name-anonymous" itemprop="',o={hash:{comment:"creator",def:"author"}},r+=l((i=n.schemaType,i?i.call(e,e.Type,o):f.call(e,"schemaType",e.Type,o)))+'"> ',s=n["if"].call(e,e._isPreview,{hash:{},inverse:h.program(19,N,t),fn:h.program(17,T,t)});if(s||s===0)r+=s;return r+=" </span> ",r}function T(e,t){var r="",i;r+="  ",(i=n._i18n_anonymousContentAuthorPreview)?i=i.call(e,{hash:{}}):(i=e._i18n_anonymousContentAuthorPreview,i=typeof i===c?i.apply(e):i);if(i||i===0)r+=i;return r+=" ",r}function N(e,t){var r="",i;r+="  ",(i=n._i18n_anonymousContentAuthor)?i=i.call(e,{hash:{}}):(i=e._i18n_anonymousContentAuthor,i=typeof i===c?i.apply(e):i);if(i||i===0)r+=i;return r+=" ",r}function C(e,t){var n="",r;return n+=' <span class="bv-author bv-content-author-department">&nbsp;<span>&middot;</span> '+l((r=(r=e.Author,r==null||r===!1?r:r.Department),typeof r===c?r.apply(e):r))+"</span> ",n}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;a={hash:{},inverse:h.noop,fn:h.program(1,p,i)},u=(o=n.notEqual,o?o.call(t,t.ResponseSource,"Review Response",a):f.call(t,"notEqual",t.ResponseSource,"Review Response",a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("contentAuthorInner",n),n.deps=[],n.tplMountedViews=["avatar"],n}),BV.define("template/helpers/notEqual",["vendor/handlebars/runtime"],function(e){function t(e,t,n){return e!==t?n.fn(this):n.inverse(this)}return e.registerHelper("notEqual",t),t}),BV.define("template/helpers/schemaType",["vendor/handlebars/runtime"],function(e){function t(e,t){return t.hash[e]?t.hash[e]:t.hash.def?t.hash.def:""}return e.registerHelper("schemaType",t),t}),function(){function e(e,t,n){return e===t?n.fn(this):n.inverse(this)}BV.define("template/helpers/equals",["vendor/handlebars/runtime"],function(t){return t.registerHelper("equals",e),e})}(),BV.define("template/helpers/ifHasFeature",["underscore","vendor/handlebars/runtime"],function(e,t){function n(){var n=[].slice.call(arguments),r=n[n.length-1],i=n[0],s=n.length===2?this:n[1];e(r.hash).isEmpty()||e(s).extend(r.hash);var o=!t.Utils.isEmpty(i)&&s._bview.component.hasFeature(s._bview.refName,i,s._bview.contentType,s._bview.instanceName);return o?r.fn(s):r.inverse(s)}return t.registerHelper("ifHasFeature",n),n}),BV.define("template/helpers/mountView",["vendor/handlebars/runtime"],function(e){function t(){var t=[].slice.call(arguments),n=t[t.length-1],r=t[0].split(":"),i=r[1],s=r[0],o=t.length===2?this:t[1],u="",a,f;if(o.viewList&&o._subview){for(a=0;a<o.viewList.length;a++){f=o.viewList[a];if(f.viewName===s&&(i&&i===f.viewInstanceName||!i&&!f.viewInstanceName)){u=o._subview[f.viewIndex];break}}return new e.SafeString(u)}return""}return e.registerHelper("mountView",t),t}),BV.define("hbs!contentAuthor",["hbs","vendor/handlebars/runtime","hbs!contentAuthorInner"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u=this;s+='<div class="bv-content-author-name" role="presentation"> ',o=u.invokePartial(r.contentAuthorInner,"contentAuthorInner",t,n,r);if(o||o===0)s+=o;return s+=" </div> ",s});return t.registerPartial("contentAuthor",n),n.deps=["contentAuthorInner"],n.tplMountedViews=[],n}),BV.define("template/helpers/withIf",["vendor/handlebars/runtime"],function(e){function t(t,n){var r=!e.Utils.isEmpty(t);return r?n.fn(t):n.inverse(this)}return e.registerHelper("withIf",t),t}),BV.define("hbs!contentAuthorLocation",["hbs","vendor/handlebars/runtime","template/helpers/withIf"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i;r+=' <dd class="bv-author-location" role="presentation"> ',i=n["if"].call(e,e.Location,{hash:{},inverse:c.noop,fn:c.program(2,d,t)});if(i||i===0)r+=i;return r+=" </dd> ",r}function d(e,t){var r="",i;return r+=" <span> ",(i=n.Location)?i=i.call(e,{hash:{}}):(i=e.Location,i=typeof i===f?i.apply(e):i),r+=l(i)+" </span> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;a={hash:{},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.withIf,o?o.call(t,t.Author,a):h.call(t,"withIf",t.Author,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("contentAuthorLocation",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("template/helpers/view",["vendor/handlebars/runtime","underscore"],function(e,t){function n(e,n){var r="",i=this._bview.classList,s=n.hash.classList?n.hash.classList.split(/\s+/):null,o=n.hash,u="",a=this._bview.seoTagList,f=n.hash.seoTagList?n.hash.seoTagList.split(/\s+/):null,l=this._bview.viewId,c=e.viewTag||n.hash.tag||"div",h={id:o.id,role:o.role,type:o.elemType,tabindex:o.tabindex,"aria-labelledby":o.ariaLabelledBy,"data-content-id":o.dataContentId&&e.Id&&e.contentType?e.contentType+"-"+e.Id:null,"data-product-id":o.dataProductId&&e.Product&&e.Product.Id?e.Product.Id:null},p=n.fn(e);if(n.hash.alwaysRender!==!0&&t.string.trim(p)==="")return"";s&&(i=t.union(s,i||[])),!h.tabindex&&t(i).contains("focusable")&&(h.tabindex="0"),i&&(r=' class="'+(i&&i.length?"bv-"+i.join(" bv-"):"")+'"'),f&&(a=t.union(f,a||[])),a&&(u=" "+a.join(" "));var d=[];return t(h).each(function(e,n){if(e===null||t.isUndefined(e))return;var r=n+'="'+e+'"';d.push(r)}),"<"+c+' data-bv-v="'+this._bview.name+":"+l+'"'+r+u+d.join(" ")+">"+"\n"+p+"\n"+"</"+c+">"}return e.registerHelper("view",n),n}),BV.define("hbs!fullProfile",["hbs","vendor/handlebars/runtime","hbs!contentAuthor","hbs!contentAuthorLocation","template/helpers/view","template/helpers/mountView"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){var i="",s,o;i+=" <tr> ",s=n["if"].call(e,e.renderSidebar,{hash:{},inverse:c.noop,fn:c.program(2,p,t)});if(s||s===0)i+=s;i+=' <td class="bv-popup-profull bv-author-profile"> <dl class="bv-author-profile-content" role="presentation"> ',s=c.invokePartial(r.contentAuthor,"contentAuthor",e,n,r);if(s||s===0)i+=s;i+=" ",s=c.invokePartial(r.contentAuthorLocation,"contentAuthorLocation",e,n,r);if(s||s===0)i+=s;return i+=" ",o={hash:{}},i+=l((s=n.mountView,s?s.call(e,"tabs",o):f.call(e,"mountView","tabs",o)))+" </dl> </td> </tr> ",i}function p(e,t){var r="",i,s;return r+=' <td class="bv-profull-sidebar"> ',s={hash:{}},r+=l((i=n.mountView,i?i.call(e,"sidebar",s):f.call(e,"mountView","sidebar",s)))+" </td> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this;s+=' <div class="bv-cleanslate"> <div class="bv-shared"> ',a={hash:{tag:"table",classList:"shared table-full-width",role:"presentation"},inverse:c.noop,fn:c.program(1,h,i)},u=(o=n.view,o?o.call(t,t,a):f.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" </div> </div> ",s});return t.registerPartial("fullProfile",n),n.deps=["contentAuthor","contentAuthorLocation"],n.tplMountedViews=["sidebar","tabs"],n}),BV.define("vendor/jquery/fittext",["jquery"],function(e){return e.fn.fitText=function(t,n){var r=t||1,i=e.extend({minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY},n);return this.each(function(){var t=e(this),n=function(){t.css("font-size",Math.max(Math.min(t.width()/(r*10),parseFloat(i.maxFontSize)),parseFloat(i.minFontSize)))};n(),e(window).on("resize",n)})},e}),BV.define("bv/util/productInfo",[],function(){return{RATINGSANDREVIEWS:"RatingsAndReviews",ASKANDANSWER:"AskAndAnswer",PROFILES:"Profiles",STORIES:"Stories",SEARCH:"UniversalSearch",PRODUCT:null,getCategoryId:function(e){var t,n,r,i=null;return e.model&&typeof e.model.getTopModel=="function"&&(r=e.model.getTopModel()),r&&typeof r.getSubject=="function"&&(n=r.getSubject()),n&&n.type==="product"&&(t=r.toJSON().Product,i=t.CategoryId),typeof i=="undefined"?null:i},getId:function(e){var t=e.clientAPIConfig||e.model&&e.model.get("clientAPIConfig")||null;if(!t)return null;var n=t.productId;return n},getType:function(e){var t=e.model?e.model.getContentType():null;return this.getTypeByContentType(t)},getTypeByContentType:function(e){if(e){e=e.toLowerCase();var t={reviews:this.RATINGSANDREVIEWS,review:this.RATINGSANDREVIEWS,comments:this.RATINGSANDREVIEWS,comment:this.RATINGSANDREVIEWS,reviewcomment:this.RATINGSANDREVIEWS,reviewcomments:this.RATINGSANDREVIEWS,question:this.ASKANDANSWER,questions:this.ASKANDANSWER,answers:this.ASKANDANSWER,story:this.STORIES,stories:this.STORIES,author:this.PROFILES,authors:this.PROFILES}[e];return t||null}return null}}}),BV.define("bv/util/focusManager",["ENV","underscore","jquery","document","body","util/specialKeys","framework/util/bvreporter"],function(e,t,n,r,i,s,o){var u=0,a={focus:[],layer:-1,keyboardNavigationSetup:!1,init:function(){e.on("init:viewsRendered",function(){this.registerBaseFocusableLayer(n(r),".bv-focusable")},this)},rescanFocusLayer:function(){var e,t,n,r;if(this.focus.length){e=this._getLayer();if(!e){o.error("FocusManager: rescanFocusLayer: Invalid layer returned");return}n=e.index,delete e.oldIndex,n>-1&&(t=e.$els[n]),e.$els=e.$layerRoot.find(e.focusSelector),e.index=-1,t&&(r=e.$els.index(t),e.index=r)}},setupKeyboardNavigation:function(){if(this.keyboardNavigationSetup)return;this.keyboardNavigationSetup=!0;var u=this,a=n(i()),f=[];e.get("componentManager").forEach(function(e){e.inject&&f.push("#"+e.container)}),f.push(".bv-mboxzone"),f.push(".bv-popup-container"),f.push(".bv-dropdown"),f=t(f).unique().join(",");var l={},c={};t(["ENTER","UP","DOWN"]).each(function(e){l[s[e]]=1}),t(["LEFT","UP","RIGHT","DOWN"]).each(function(e){c[s[e]]=1}),a.off("keydown.bvkb").on("keydown.bvkb",f,function(e){var t=n(e.target),r=e.keyCode,i,a,f;if(e._bvkbFocusManaged)return;if(t.is(".bv-dropdown button")&&!n(e.currentTarget).is(".bv-dropdown"))return;var h=n.Event("focusManagerBlur",{originalEvent:e});t.triggerHandler(h);if(h.isDefaultPrevented()){e.preventDefault(),e._bvkbFocusManaged=!0;return}if(r===s.TAB){if(!e.shiftKey){f=u._getLayer();if(u.layer===0&&!f){o.error("FocusManager: tab on bottom layer: Invalid layer returned");return}if(u.layer===0&&f.index>=f.$els.length-1)return;u.nextFocusable()}else if(e.shiftKey){f=u._getLayer();if(u.layer===0&&!f){o.error("FocusManager: shift-tab on bottom layer: Invalid layer returned");return}if(u.layer===0&&f.index<=0)return;u.prevFocusable()}i=!0}else r in l&&t.is(".bv-dropdown-target button, .bv-dropdown li")?r===s.ENTER?(t.click(),e.preventDefault()):r===s.UP?(u.prevFocusable(),i=!0):(u.nextFocusable(),i=!0):r in c&&t.is("[role=radiogroup] [role=radio]")&&(r===37||r===38?i=u.prevFocusableRadio():i=u.nextFocusableRadio(),i&&(a=!0));if(i){f=u._getLayer();if(!f){o.error("FocusManager: keydown handler: Invalid layer returned");return}var p=f.index,d=f.oldIndex,v=f.$els,m=v[p],g=v[d],y=n(m),b=n(g);if(!m){o.error("FocusManager: Focus element does not exist");return}if(typeof d!="undefined"&&d>-1&&!g){o.error("FocusManager: Prior focus element does not exist");return}if(m===g){o.debug("FocusManager: Cannot find valid next focusable, not handling event");return}if(g&&y.parents(".bv-cleanslate").last()[0]!==b.parents(".bv-cleanslate").last()[0]){o.debug("FocusManager: Moving out of one container, not handling event"),f.index=d;return}e._bvkbFocusManaged=!0,e.preventDefault(),n.contains(f.$layerRoot[0],m)||u.rescanFocusLayer(),y.focus(),y.triggerHandler(new n.Event("focusManagerFocus",{target:m,relatedTarget:e.target,keyEvent:e})),a&&y.click()}});var h=[];h.push(".bv-fieldset"),h.push(".bv-focusable"),h=t(h).unique().join(","),a.off("click.bvkb").on("click.bvkb",h,function(e){if(e.metaKey)return;var t=u._getLayer();if(!t){o.error("FocusManager: click to move focus: Invalid layer returned");return}var n=t.$els,i=n.index(e.target||r.activeElement);i>-1&&(t.index=i,delete t.oldIndex)}),a.off("focusin.bvkb").on("focusin.bvkb",function(e){var t=u._getLayer();if(!t){o.error("FocusManager: Element focused: Invalid layer returned");return}var i="FocusManager: Element focused";o.group(o.DEBUG,i);var s=t.focusSelector,a=n(e.target||r.activeElement);if(!a.is(s)){o.debug("Focused element does not match current focus selector, ignoring event"),o.groupEnd(o.DEBUG,i);return}var f=t.$els.index(a);o.debug("Index of focused element: "+f);if(f===-1){o.warn("FocusManager: An element received focus that was not in the current focus layer - potential for odd focus behavior upon next user navigation"),o.groupEnd(o.DEBUG,i);return}f!==t.index&&(o.debug("FocusManager layer index out of sync, adjusting"),t.index=f,delete t.oldIndex),o.groupEnd(o.DEBUG,i)})},registerBaseFocusableLayer:function(e,t){var n="FocusManager: registerBaseFocusableLayer";o.group(o.DEBUG,n);var r=this;if(this.focus&&this.focus.length){var i=this.focus[0],s=i.$layerRoot[0];if(s!==e[0]){o.error("Trying to register a new base focusable layer when one is already in effect, refusing to do so."),o.groupEnd(o.DEBUG,n);return}o.debug("FocusManager: registerBaseFocusableLayer invoked on the same layer again, rescanning"),i.focusSelector=t,this.rescanFocusLayer(),o.groupEnd(o.DEBUG,n);return}this.setupKeyboardNavigation();var a=e.find(t);this.focus=[{$layerRoot:e,focusSelector:t,$els:a,index:-1,cycleTabs:!1,id:++u}],this.layer=0},registerFocusableLayer:function(e,t,n,r){var i="FocusManager: registerFocusableLayer";o.group(o.DEBUG,i),this.setupKeyboardNavigation();var s=e.find(t);if(!s.length){o.error("No focusable elements found in new registered layer"),o.groupEnd(o.DEBUG,i);return}var a;return n?(a=0,s[a].focus()):a=-1,r=!!r,this.focus.push({$layerRoot:e,focusSelector:t,$els:s,index:a,cycleTabs:r,id:++u}),this.layer++,o.groupEnd(o.DEBUG,i),u},deregisterFocusableLayer:function(e,t){this._backupFocusables();var n=this._getLayer();if(!n){o.error("FocusManager: deregisterFocusableLayer: Invalid layer returned");return}if(this.focus[0].index===-1)return;if(t)return;e&&this.nextFocusable();var r=n.$els,i=n.index;if(i<0)return;var s=r[i];s&&s.focus()},deregisterFocusableLayerById:function(e,n,r){var i=this._findLayerById(e);if(!i){o.error("Couldn't find layer with ID: "+e);return}o.debug("Removing focusable layer with ID:",e,i);if(t(this.focus).last()===i)return this.deregisterFocusableLayer(n,r);var s=this._getLayer();if(!s){o.error("FocusManager: deregisterFocusableLayerById: Invalid layer returned");return}this.focus=t.without(this.focus,i),this.layer=t.indexOf(this.focus,s)},_findLayerById:function(e){return t.detect(this.focus,function(t){return t.id===e})},addFocusables:function(e,t){if(e.length===0)return;t=t.first();var n=this._getLayer();if(!n){o.error("FocusManager: addFocusables: Invalid layer returned");return}var r=n.$els,i=r.index(t[0])+1;i!==0&&e.each(function(e,t){r.splice(i+e,0,t)})},addFocusablesInline:function(e){var t=this._getLayer();if(!t){o.error("FocusManager: addFocusablesInline: Invalid layer returned");return}var r=t.$els,i=t.index+1,s=r.splice(i);t.$els=n(r.toArray().concat(e.toArray()).concat(s)),t.index=i,t.$els[i].focus()},removeFocusables:function(e){if(e.length===0)return;var t=this._getLayer();if(!t){o.error("FocusManager: removeFocusables: Invalid layer returned");return}var n=t.$els,r=n.index(e[0]);r!==-1&&n.splice(r,e.length)},moveFocus:function(e){e=e.first();var t=this._getLayer();if(!t){o.error("FocusManager: moveFocus: Invalid layer returned");return}var n=t.$els,r=n.index(e[0]);r!==-1&&(t.index=r),e.focus()},refocusLayer:function(){var e,t=this._getLayer();if(!t){o.error("FocusManager: refocusLayer: Invalid layer returned");return}var n=t.index;if(n===-1)return;e=t.$els,e[n].focus()},_backupFocusables:function(){var t="FocusManager: _backupFocusables";o.group(o.DEBUG,t);if(this.layer>0){var r=this.focus.pop();this.layer--;var i=n.Event("focusLayerRemoved",{focusLayer:r});return e.trigger("focusLayerRemoved",i),o.debug("Focus layer moved from "+(this.layer+1)+" to "+this.layer),o.groupEnd(o.DEBUG,t),!0}return o.debug("Trying to _backupFocusables on the base layer, no action taken"),o.groupEnd(o.DEBUG,t),!1},_focus:function(e){var t=this._getLayer();if(!t){o.error("FocusManager: _focus: Invalid layer returned");return}if(t.index===-1)return;var n;switch(e){case 1:n="nextFocusable";break;case-1:n="prevFocusable";break;default:return}var r;do this[n](),r=t.$els.eq(t.index);while(r.is(":hidden"));r.focus()},focusNext:function(){this._focus(1)},focusPrev:function(){this._focus(-1)},nextFocusable:function(){var e=this._getLayer();if(!e){o.error("FocusManager: nextFocusable: Invalid layer returned");return}var t="FocusManager: nextFocusable";o.group(o.DEBUG,t);var n=this.layer,r=e.$els,i=r?r.length:0,s=e.index,u=r.eq(s),a;e.oldIndex=s;do s++,a=r.eq(s),a.length||(a=null);while(a&&!this._validFocusable(u,a));if(s===r.length){o.debug("index hit array length, ran out of elements to check");if(!e.cycleTabs){this._backupFocusables()&&this.nextFocusable(),o.groupEnd(o.DEBUG,t);return}s=0}o.debug("Layer "+n+" focus index moving from "+e.oldIndex+" to "+s),e.index=s,o.groupEnd(o.DEBUG,t)},prevFocusable:function(){var e=this._getLayer();if(!e){o.error("FocusManager: prevFocusable: Invalid layer returned");return}var t="FocusManager: prevFocusable";o.group(o.DEBUG,t);var n=this,i=this.layer,s=e.$els,u=s?s.length:0,a=e.index,f=s.eq(a),l,c,h;e.oldIndex=a;do{if(a===-1){this.layer>0&&!e.cycleTabs&&(c=this.focus[this.layer-1],h=c.$els.eq(c.index),h[0]===r.activeElement&&(this._backupFocusables(),this.prevFocusable())),a=s.length-1;if(this._validFocusable(f,s.eq(a))){o.debug("Layer "+i+" focus index moving from "+e.oldIndex+" to "+a),e.index=a,o.groupEnd(o.DEBUG,t);return}}if(a===0){if(!e.cycleTabs){this._backupFocusables()&&this.prevFocusable();return}a=s.length-1;if(this._validFocusable(f,s.eq(a))){o.debug("Layer "+i+" focus index moving from "+e.oldIndex+" to "+a),e.index=a,o.groupEnd(o.DEBUG,t);return}}a--,l=a>=0?s.eq(a):null;if(!l||!l.length)l=null}while(l&&!this._validFocusable(f,l));o.debug("Layer "+i+" focus index moving from "+e.oldIndex+" to "+a),e.index=a,o.groupEnd(o.DEBUG,t)},nextFocusableRadio:function(){var e=this.layer,r=this._getLayer();if(!r){o.error("FocusManager: nextFocusableRadio: Invalid layer returned");return}var i=r.$els,s=r.index,u=i.eq(s),a=u[0],f=u.closest("[role=radiogroup]"),l=f.attr("aria-owns");if(!l)return!1;r.oldIndex=s,l=l.split(" ");var c=t(l).indexOf(a.id);if(c===l.length-1)return;var h=n("#"+l[c+1]),p=i.index(h[0]);return p!==-1?(r.index=p,!0):!1},prevFocusableRadio:function(){var e=this.layer,r=this._getLayer();if(!r){o.error("FocusManager: prevFocusableRadio: Invalid layer returned");return}var i=r.$els,s=r.index,u=i.eq(s),a=u[0],f=u.closest("[role=radiogroup]"),l=f.attr("aria-owns");if(!l)return!1;r.oldIndex=s,l=l.split(" ");var c=t(l).indexOf(a.id);if(c===0)return;var h=n("#"+l[c-1]),p=i.index(h[0]);return p!==-1?(r.index=p,!0):!1},_getLayer:function(){var e=this.focus[this.layer];return e?e:(o.error("FocusManager: Layer index returned invalid layer. Index: "+this.layer+", layer count: "+this.focus.length),null)},_validFocusable:function(e,t){var n="FocusManager: _validFocusable";o.group(o.DEBUG,n),o.debug("Current element: ",e&&e[0]),o.debug("New element: ",t&&t[0]);var r,i,s,u,a,f;if(!t||!t.length)return o.warn("No element received, invalid use of _validFocusable"),o.groupEnd(o.DEBUG,n),!1;if(t.is(":hidden"))return o.debug("New element is hidden, not valid"),o.groupEnd(o.DEBUG,n),!1;if(t.is("[disabled]"))return o.debug("New element is disabled, not valid"),o.groupEnd(o.DEBUG,n),!1;if(t.is("[role=radio]")){r=e.closest("[role=radiogroup]"),i=t.closest("[role=radiogroup]"),u=i.find("[aria-checked=true], :checked");if(e.is("[role=radio]")&&r[0]===i[0])return o.debug("Current and new elements are both radio buttons in the same radio group, not valid"),o.groupEnd(o.DEBUG,n),!1;if(u.length){if(u[0]!==t[0])return o.debug("New element is a radio and is in a different group, but is not the selected radio in its group, not valid"),o.groupEnd(o.DEBUG,n),!1}else{s=i.find("[role=radio]").first();if(s[0]!==t[0])return o.debug("New element is a radio in a new group with no selection, and is not the first item, not valid"),o.groupEnd(o.DEBUG,n),!1}}if(t.is("[role=tab]")){a=t.closest("[role=tablist]"),f=a.find("[aria-selected=true]");if(t[0]!==f[0])return o.debug("New element is a tab, but is not the active tab, not valid"),o.groupEnd(o.DEBUG,n),!1}return o.debug("Found a valid focusable: ",t),o.groupEnd(o.DEBUG,n),!0}};return a}),BV.define("bv/c2013/view/fullProfile",["ENV","underscore","framework/bview","hbs!fullProfile","vendor/jquery/fittext","framework/util/bvtracker","bv/util/productInfo","bv/util/focusManager"],function(e,t,n,r,i,s,o,u){return n.extend({name:"fullProfile",template:r,classList:["core-container-"+n.config.version],init:function(){this.listenTo(this.model,"showfullprofile",this.showFullProfile)},showFullProfile:function(){var n=this;BV.require(["secondary"],function(r){var i=r.ModestBox.get("lightbox"),s=n.getFeatureView("sidebar")||null;i.pushOrOpen({view:n,autoFocus:!1,sidebar:s,classList:["fullprofile"],beforeShow:function(){s.subViewContainer&&s.subViewContainer.find(".bv-author-no-avatar").fitText(.1)},afterShow:function(){n.moveInitialFocus()},afterDetach:function(n){var r=t(n.views).pluck("component");e.get("componentManager").restore(r)}})})},moveInitialFocus:function(){var e=i(this.viewEl),t=e.find("a.bv-fullpro-tab-link.bv-focusable.bv-active, button.bv-mbox-close.bv-focusable").eq(0);t.length&&setTimeout(function(){u.moveFocus(t)},0)},render:function(){this.model.get("pageview")&&this.triggerPageView(),n.prototype.render.apply(this,arguments)},triggerPageView:function(){var e=this.model.get("pageview");if(!e)return;var t=o.getId(this);t?s.pageview({type:"Product",label:"Default",bvProduct:e.bvProduct,productId:t},this.model):s.pageview({type:"Misc",pageName:e.bvProduct},this.model)}})}),BV.define("bv/util/contentType",["bv/util/grammr","underscore","bv/api/fetch"],function(e,t,n){var r=t.flatten(t.union([n.typePairs]),!0),i=e(r);return i}),BV.define("bv/c2013/model/sidebar",["ENV","framework/bmodel","underscore","bv/util/contentType"],function(e,t,n,r){return t.extend({name:"sidebar",init:function(e,t){n.extend(this.options,t)},processData:function(e){this.set(r.Noun(this.get("subjectType")),e),this.dataReady(e)}})}),BV.define("_i18n_avatarIconContentAuthor",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";return t+="Avatar image",t}(e)}catch(t){return r.push(["error",new Error("MF error on `avatarIconContentAuthor`: "+t.toString())]),""}}return t.registerHelper("_i18n_avatarIconContentAuthor",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("_i18n_avatarIconMale",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";return t+="Avatar image",t}(e)}catch(t){return r.push(["error",new Error("MF error on `avatarIconMale`: "+t.toString())]),""}}return t.registerHelper("_i18n_avatarIconMale",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("_i18n_avatarIconFemale",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";return t+="Avatar image",t}(e)}catch(t){return r.push(["error",new Error("MF error on `avatarIconFemale`: "+t.toString())]),""}}return t.registerHelper("_i18n_avatarIconFemale",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("_i18n_avatarIconGeneric",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";return t+="Avatar image",t}(e)}catch(t){return r.push(["error",new Error("MF error on `avatarIconGeneric`: "+t.toString())]),""}}return t.registerHelper("_i18n_avatarIconGeneric",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("hbs!contentAuthorIcon",["hbs","vendor/handlebars/runtime","template/helpers/exists","template/helpers/renderIcon","template/helpers/equals","_i18n_avatarIconContentAuthor","_i18n_avatarIconMale","_i18n_avatarIconFemale","_i18n_avatarIconGeneric"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i;r+=" <img ",i=n["if"].call(e,e.lazyLoad,{hash:{},inverse:f.noop,fn:f.program(2,d,t)});if(i||i===0)r+=i;r+='src="',(i=n._avatarImage)?i=i.call(e,{hash:{}}):(i=e._avatarImage,i=typeof i===l?i.apply(e):i),r+=c(i)+'" alt="',(i=n._i18n_avatarIconContentAuthor)?i=i.call(e,{hash:{}}):(i=e._i18n_avatarIconContentAuthor,i=typeof i===l?i.apply(e):i);if(i||i===0)r+=i;return r+='" class="bv-author-thumb"/> ',r}function d(e,t){return"data-"}function v(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:f.program(8,y,t),fn:f.program(5,m,t)},s=(i=n.equals,i?i.call(e,(i=(i=e.ContextDataValues,i==null||i===!1?i:i.Gender),i==null||i===!1?i:i.Value),"Male",o):h.call(e,"equals",(i=(i=e.ContextDataValues,i==null||i===!1?i:i.Gender),i==null||i===!1?i:i.Value),"Male",o));if(s||s===0)r+=s;return r+=" ",r}function m(e,t){var r="",i,s,o;r+=' <span title="',(i=n._i18n_avatarIconMale)?i=i.call(e,{hash:{}}):(i=e._i18n_avatarIconMale,i=typeof i===l?i.apply(e):i);if(i||i===0)r+=i;r+='" class="bv-author-no-avatar bv-author-gender-Male" aria-hidden="true"> ',o={hash:{},inverse:f.noop,fn:f.program(6,g,t)},s=(i=n.renderIcon,i?i.call(e,"bv-sprite-author-gender-Male",o):h.call(e,"renderIcon","bv-sprite-author-gender-Male",o));if(s||s===0)r+=s;return r+=" </span> ",r}function g(e,t){return"&#x2642;"}function y(e,t){var r="",i,s,o;r+=' <span title="',(i=n._i18n_avatarIconFemale)?i=i.call(e,{hash:{}}):(i=e._i18n_avatarIconFemale,i=typeof i===l?i.apply(e):i);if(i||i===0)r+=i;r+='" class="bv-author-no-avatar bv-author-gender-Female" aria-hidden="true"> ',o={hash:{},inverse:f.noop,fn:f.program(9,b,t)},s=(i=n.renderIcon,i?i.call(e,"bv-sprite-author-gender-Female",o):h.call(e,"renderIcon","bv-sprite-author-gender-Female",o));if(s||s===0)r+=s;return r+=" </span> ",r}function b(e,t){return"&#x2640;"}function w(e,t){var r="",i,s,o;r+=' <span title="',(i=n._i18n_avatarIconGeneric)?i=i.call(e,{hash:{}}):(i=e._i18n_avatarIconGeneric,i=typeof i===l?i.apply(e):i);if(i||i===0)r+=i;r+='" class="bv-author-no-avatar bv-author-gender-Male" aria-hidden="true"> ',o={hash:{},inverse:f.noop,fn:f.program(6,g,t)},s=(i=n.renderIcon,i?i.call(e,"bv-sprite-author-gender-Male",o):h.call(e,"renderIcon","bv-sprite-author-gender-Male",o));if(s||s===0)r+=s;return r+=" </span> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=this,l="function",c=this.escapeExpression,h=n.helperMissing;o=n["if"].call(t,t._avatarImage,{hash:{},inverse:f.noop,fn:f.program(1,p,i)});if(o||o===0)s+=o;s+=" ",a={hash:{},inverse:f.program(11,w,i),fn:f.program(4,v,i)},u=(o=n.exists,o?o.call(t,(o=t.ContextDataValues,o==null||o===!1?o:o.Gender),a):h.call(t,"exists",(o=t.ContextDataValues,o==null||o===!1?o:o.Gender),a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("contentAuthorIcon",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("template/helpers/exists",["vendor/handlebars/runtime"],function(e){function t(e,t){var n=e!==null&&e!==undefined;return n?t.fn(this):t.inverse(this)}return e.registerHelper("exists",t),t}),BV.define("bv/util/envConfig",["window"],function(e){return e.BV&&e.BV.options}),BV.define("template/helpers/renderIcon",["vendor/handlebars/runtime","bv/util/envConfig"],function(e,t){function n(n,r){var i=r.hash.classList||"",s=r.hash.ariaHidden?'aria-hidden="true"':"",o=r.hash.role?'role="'+r.hash.role+'"':"",u=r.hash.style?'style="'+r.hash.style+'"':"",a=[];return r.hash.classList&&a.push(r.hash.classList),t&&t.display&&t.display.sprite?(a.push(e.Utils.escapeExpression(n)),a='class="'+a.join(" ")+'"',"<!--[if !IE]> -->"+r.fn(this)+"<!-- <![endif]-->"+"<!--[if lte IE 9]>"+"<div "+a+"></div>"+"<!-- <![endif]-->"):(a=a.length?'class="'+a.join(" ")+'"':"",a&&a.length||s||o||u?"<span "+a+" "+s+" "+o+"  "+u+">"+r.fn(this)+"</span>":r.fn(this))}return e.registerHelper("renderIcon",n),n}),BV.define("_i18n_avatarStatsReviewCount_v2",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(t){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalReviewCount",i=t[r],s=0,o={one:function(e){var t="";t+='<span class="bv-author-userstats-data">Review</span> <span class="bv-author-userstats-value">';if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalReviewCount,t+="</span>",t},other:function(e){var t="";t+='<span class="bv-author-userstats-data">Reviews</span> <span class="bv-author-userstats-value">';if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalReviewCount,t+="</span>",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}(t)}catch(n){return r.push(["error",new Error("MF error on `avatarStatsReviewCount_v2`: "+n.toString())]),""}}return t.registerHelper("_i18n_avatarStatsReviewCount_v2",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("_i18n_avatarStatsQuestionCount_v2",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(t){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalQuestionCount",i=t[r],s=0,o={one:function(e){var t="";t+='<span class="bv-author-userstats-data"> Question </span> <span class="bv-author-userstats-value">';if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalQuestionCount,t+="</span>",t},other:function(e){var t="";t+='<span class="bv-author-userstats-data"> Questions </span> <span class="bv-author-userstats-value">';if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalQuestionCount,t+="</span>",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}(t)}catch(n){return r.push(["error",new Error("MF error on `avatarStatsQuestionCount_v2`: "+n.toString())]),""}}return t.registerHelper("_i18n_avatarStatsQuestionCount_v2",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("_i18n_avatarStatsAnswerCount_v2",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(t){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalAnswerCount",i=t[r],s=0,o={one:function(e){var t="";t+='<span class="bv-author-userstats-data"> Answer </span> <span class="bv-author-userstats-value">';if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalAnswerCount,t+="</span>",t},other:function(e){var t="";t+='<span class="bv-author-userstats-data"> Answers </span> <span class="bv-author-userstats-value">';if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalAnswerCount,t+="</span>",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}(t)}catch(n){return r.push(["error",new Error("MF error on `avatarStatsAnswerCount_v2`: "+n.toString())]),""}}return t.registerHelper("_i18n_avatarStatsAnswerCount_v2",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("_i18n_avatarStatsHelpfulCount_v2",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(t){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="HelpfulVoteCount",i=t[r],s=0,o={one:function(e){var t="";t+='<span class="bv-author-userstats-data"> Vote </span> <span class="bv-author-userstats-value">';if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.HelpfulVoteCount,t+="</span>",t},other:function(e){var t="";t+='<span class="bv-author-userstats-data"> Votes </span> <span class="bv-author-userstats-value">';if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.HelpfulVoteCount,t+="</span>",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}(t)}catch(n){return r.push(["error",new Error("MF error on `avatarStatsHelpfulCount_v2`: "+n.toString())]),""}}return t.registerHelper("_i18n_avatarStatsHelpfulCount_v2",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("hbs!contentAuthorStats",["hbs","vendor/handlebars/runtime","template/helpers/withIf","template/helpers/conditionalContainer","template/helpers/exists","_i18n_avatarStatsReviewCount_v2","_i18n_avatarStatsQuestionCount_v2","_i18n_avatarStatsAnswerCount_v2","_i18n_avatarStatsHelpfulCount_v2"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var r="",i,s,o;r+=" ",o={hash:{tag:"dd",classList:"author-userstats",role:"presentation"},inverse:l.noop,fn:l.program(2,h,t)},s=(i=n.conditionalContainer,i?i.call(e,e,o):f.call(e,"conditionalContainer",e,o));if(s||s===0)r+=s;return r+=" ",r}function h(e,t){var r="",i,s,o;r+=" ",o={hash:{tag:"ul",classList:"author-userstats-list",role:"presentation"},inverse:l.noop,fn:l.program(3,p,t)},s=(i=n.conditionalContainer,i?i.call(e,e,o):f.call(e,"conditionalContainer",e,o));if(s||s===0)r+=s;return r+=" ",r}function p(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:l.noop,fn:l.program(4,d,t)},s=(i=n.exists,i?i.call(e,e.TotalReviewCount,o):f.call(e,"exists",e.TotalReviewCount,o));if(s||s===0)r+=s;r+=" ",o={hash:{},inverse:l.noop,fn:l.program(6,v,t)},s=(i=n.exists,i?i.call(e,e.TotalQuestionCount,o):f.call(e,"exists",e.TotalQuestionCount,o));if(s||s===0)r+=s;r+=" ",o={hash:{},inverse:l.noop,fn:l.program(8,m,t)},s=(i=n.exists,i?i.call(e,e.TotalAnswerCount,o):f.call(e,"exists",e.TotalAnswerCount,o));if(s||s===0)r+=s;r+=" ",o={hash:{},inverse:l.noop,fn:l.program(10,g,t)},s=(i=n.withIf,i?i.call(e,e.TotalStatistics,o):f.call(e,"withIf",e.TotalStatistics,o));if(s||s===0)r+=s;return r+=" ",r}function d(e,t){var r="",i,s,o;r+=' <li class="bv-author-userstats-reviews">  ',o={hash:{}},s=(i=n._i18n_avatarStatsReviewCount_v2,i?i.call(e,e,o):f.call(e,"_i18n_avatarStatsReviewCount_v2",e,o));if(s||s===0)r+=s;return r+=" </li> ",r}function v(e,t){var r="",i,s,o;r+=' <li class="bv-author-userstats-questions">  ',o={hash:{}},s=(i=n._i18n_avatarStatsQuestionCount_v2,i?i.call(e,e,o):f.call(e,"_i18n_avatarStatsQuestionCount_v2",e,o));if(s||s===0)r+=s;return r+=" </li> ",r}function m(e,t){var r="",i,s,o;r+=' <li class="bv-author-userstats-answers">  ',o={hash:{}},s=(i=n._i18n_avatarStatsAnswerCount_v2,i?i.call(e,e,o):f.call(e,"_i18n_avatarStatsAnswerCount_v2",e,o));if(s||s===0)r+=s;return r+=" </li> ",r}function g(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:l.noop,fn:l.program(11,y,t)},s=(i=n.exists,i?i.call(e,e.HelpfulVoteCount,o):f.call(e,"exists",e.HelpfulVoteCount,o));if(s||s===0)r+=s;return r+=" ",r}function y(e,t){var r="",i,s,o;r+=' <li class="bv-author-userstats-votes">  ',o={hash:{}},s=(i=n._i18n_avatarStatsHelpfulCount_v2,i?i.call(e,e,o):f.call(e,"_i18n_avatarStatsHelpfulCount_v2",e,o));if(s||s===0)r+=s;return r+=" </li> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this;a={hash:{},inverse:l.noop,fn:l.program(1,c,i)},u=(o=n.withIf,o?o.call(t,t.Author,a):f.call(t,"withIf",t.Author,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("contentAuthorStats",n),n.deps=[],n.tplMountedViews=[],n}),function(){function s(e,t){var n=t.hash.tag||"div",r=t.hash.classList?t.hash.classList.split(/\s+/):[],s=t.hash.id?' id="'+t.hash.id+'"':"",o=t.hash.role?' role="'+t.hash.role+'"':"",u="",a=t.fn(e),f=i(a.replace(/&nbsp;/gi,"")),l=f===""||f==="&nbsp;";return l?"":(r.length&&(u=' class="bv-'+r.join(" bv-")+'"'),"<"+n+s+u+o+">"+a+"</"+n+">")}var e,t=String.prototype.trim,n=/^\s+/,r=/\s+$/,i=t?function(e){return e===null?"":t.call(e)}:function(e){return e===null?"":e.toString().replace(n,"").replace(r,"")};BV.define("template/helpers/conditionalContainer",["vendor/handlebars/runtime","underscore"],function(t,n){return e=n,t.registerHelper("conditionalContainer",s),s})}(),BV.define("badges",["underscore","vendor/json2"],function(e,t){var n="";return{load:function(r,i,s,o){var u=o.badges,a=o.configBadgeApiBaseUrl,f=o.badgeExtensionMap||{},l="{{baseUrl}}/images/badgeImages",c={},h={},p=o.locale;e(u).forEach(function(e){var t,n;e.customImage&&(t=a.replace("{{imageName}}",e.badgeImageName),n=l+"/"+e.id+f[e.id]),c[e.id]={badgeImageUrl:t,badgeDescription:e.description,badgeTitle:e.title,badgeDisplayLabel:e.displayLabel},h[e.id]={badgeImageUrl:n,badgeDescription:e.description,badgeTitle:e.title,badgeDisplayLabel:e.displayLabel}}),n="BV.define("+t.stringify(h)+");\n",i([],function(){s(c)})},write:function(e,t,r){r.asModule(e+"!"+t,n)}}}),BV.define("badges!",{}),BV.define("template/helpers/ifBadgeImage",["vendor/handlebars/runtime","badges!","BV","underscore"],function(e,t,n,r){function s(e,s,o){var u,a;if(s.match(i)){var f=s.split("_")[1];s="top"+f}if(!e||!e[s])return;var l=e[s];a=l.Id.toLowerCase();var c=t[a];if(c)return u=r({}).extend(l),u.description=c.badgeDescription,u.title=c.badgeTitle,u.displayLabel=c.badgeDisplayLabel,c.badgeImageUrl?(u.imageUrl=c.badgeImageUrl.replace("{{baseUrl}}",n._internal.baseUrl),o.fn(u)):o.inverse(u);return}var i=/TOP_\d+/;return e.registerHelper("ifBadgeImage",s),s}),BV.define("dimsumFields!localeMapping",[],{avatarStatsQuestionCount_v2:'{TotalQuestionCount, plural, one {<span class="bv-author-userstats-data"> Question </span> <span class="bv-author-userstats-value"> {TotalQuestionCount} </span>} other {<span class="bv-author-userstats-data"> Questions </span> <span class="bv-author-userstats-value"> {TotalQuestionCount} </span>} }',add_photo_dialog:"Add Photo. dialog.",anonymousContentAuthorPreview:"you",featuredQuestionsFirst:"Featured questions first",contentHelpfulStatement:"helpful",submit_answer:"Post Answer",contentReportedBtn:"Reported",ProductIsRecommended:"Yes",content_filter_button_clear:"Clear All",display_commenttext:"Comment",contentReportBtn:"Report",display_usernickname:"Nickname",submit_comment:"Post Comment",display_hostedauthentication_authenticationemail:"Email",offscreen_play_media:"Play Video",categoryGalleryReviewCount:"{TotalCount, plural, one { {TotalCount} review } other { {TotalCount} reviews } }",content_sort_link:"Sort",reviewPhotoMaxCount:"{maxPhotos, plural, one {Add up to {maxPhotos} photo} other {Add up to {maxPhotos} photos} }",remove_confirm_photo:"{Gender, select, other {Are you sure you want to remove this photo?} }",error_ERROR_FORM_INVALID_OPTION:"invalid value",display_title:"Review Title",moreCriticalLink_Reviews:"See more 1, 2, and 3 star reviews",error_ERROR_FORM_SUBMITTED_NICKNAME:"nickname already used",error_ERROR_FORM_IMAGE_PARSE:"invalid image",featured:"Featured",content_filter_show_all_label:"Show All",avatar_rank_TOP_25:"Top 25 Contributor",avatarIconFemale:"Avatar image",offscreen_summaryStars:"{AverageOverallRating} out of {OverallRatingRange} stars. Read reviews.",userUnsubscribed:"You have successfully unsubscribed from these emails.",placeholder_title:"Example:Â  Great Price!",error_ERROR_FORM_DUPLICATE_NICKNAME:"nickname already used",offscreen_sort_label:"Sort by",error_ERROR_PRIVATE_BROWSING_MODE:"Sorry, writing reviews is disabled in private browsing mode. Please disable private browsing mode and try again.",reviewPhotoRemainingCount:"({remainingPhotos, plural, one { {remainingPhotos} remaining } other { {remainingPhotos} remaining } })",firstToAskQuestion:"{ Gender, select, other {Be the first to ask a question} }",recentQuestionsLast:"Oldest questions",error_message_maxlength:"{difference, plural, one { {difference} character too long } other { {difference} characters too long } }",headToHeadSummary:"Review by {authorDisplayName}. Written {submissionTimeAgo}. {Rating} out of {RatingRange} stars.",recommendationCount:"{RecommendedCount} out of {TotalRecommendedCount} ({percentage}%) reviewers recommend this product",contentPreview_Questions:"Thank you for submitting a question! Your question is being moderated and may take up to a few days to appear.",helpfulnessAnswersFirst:"Most helpful answers",avatar_rank_NONE:"",error_ERROR_FORM_IMAGE_WIDTH_TOO_SMALL:"image too narrow",contentItem_defaultPhotoCaption:"{ContentType, select, review { Review photo {ItemNumber} } comment { Comment photo {ItemNumber} } clientresponse { Comment photo {ItemNumber} } question { Question photo {ItemNumber} } answer { Answer photo {ItemNumber} } other { Content photo {ItemNumber} } }",offscreen_histogram_stars:"stars",submission_yes:"Yes",header_review:"My Review",video_upload_success:"The video was successfully linked.",next_media:"Next",avatarIconSocialConnect:"Avatar image",allCategories:"All Categories",autocomplete_available:"Autocomplete available, press the down arrow to hear options",actionBarHeader_v2:"{ Type, select, review {Reviews} question {Questions} answer {Answers} other {Content} }",display_casltext:"You may receive emails regarding this submission. Any emails will include the ability to opt-out of future communications.",avatar_badge_brand:"Brand",content_secondary_btn_Reviews:"Comment",avatar_badge_staff:"Staff",socialConnectThankYou:"Thanks! You've posted your content on Facebook.",error_message_required_aria:"Required.",content_filter_list_title:"Active Filters",product_item_collection_other_categories:"in all categories",offscreen_remove_filter:"Remove Filter",error_message_required:"Required",error_ERROR_FORM_REQUIRED_NICKNAME:"required",placeholder_netpromoterscore:"Rate from 0 to 10 where 0 is never and 10 is definitely.",message_characters_used_minlength:"{count} out of a minimum {minlength} characters used",offscreen_value_max_means:"Rating of {sliderSize} means ",display_questionsummary:"Question",ratingSnapshotHeader:"Rating Snapshot",avatar_rank_TOP_100:"Top 100 Contributor",add_photo:"Add Photo",show_full_Review:"Show Full Review",markAsNotHelpful:"No, {contentSelectType} by {authorDisplayName} is not helpful.",content_filter_locale:"Locale",histogram_readReviews:"{Gender, select, other {{TotalCount, plural, one {Read a Review} other {Read {TotalCount} Reviews}}}}",offscreen_secondary_rating_summary:"average rating value is {AverageRating} of {RatingRange}.",offscreen_ugc_arrow:"Menu, press enter to show options",offscreen_value_of_one_means:"Rating of 1 means ",avatarStatsAnswerCount_v2:'{TotalAnswerCount, plural, one {<span class="bv-author-userstats-data"> Answer </span> <span class="bv-author-userstats-value"> {TotalAnswerCount} </span>} other {<span class="bv-author-userstats-data"> Answers </span> <span class="bv-author-userstats-value"> {TotalAnswerCount} </span>} }',contentConsLabel:"Cons:",offscreen_filter_label:"Filter by",display_userlocation:"Location",contentIsHelpful:"Yes",error_ERROR_FORM_REQUIRED_EITHER:"required",recommendsProduct:"{Gender, select, other {I recommend this product.} }",responseFrom_reviewresponse:"Response from {Department}:",error_ERROR_FORM_TOO_LOW:"too low",markAsInappropriate:"{hasTitle, select, true { Mark {Title} by {authorDisplayName} as inappropriate. } other { {contentSelectType, select, review { Mark this review by {authorDisplayName} as inappropriate. } comment { Mark this comment by {authorDisplayName} as inappropriate. } clientresponse { Mark this response by {authorDisplayName} as inappropriate. } question { Mark this question by {authorDisplayName} as inappropriate. } answer { Mark this answer by {authorDisplayName} as inappropriate. } other { Mark this content by {authorDisplayName} as inappropriate. } } } }",helpertext_photourl_1:"<h2>  Photo guidelines</h2> <p>  When submitting images, please follow these guidelines:</p> <ul>  <li>   Images must be in BMP, PNG, GIF or JPEG format.</li>  <li>   File size must be 5 MB or less.</li>  <li>   Image must be at least 60 pixels tall.</li>  <li>   Image must be at least 60 pixels wide.</li>  <li>   If you are not the copyright holder, you may not submit copyrighted images.</li>  <li>   Objectionable images will be rejected.</li>  <li>   Uploaded images become the property of the Company.</li> </ul> ",socialConnectFieldLabel:"Post your review on Facebook",oldest:"Oldest",product_item_collection_no_results:"No products found",paginationLoadMore:"Load More",error_ERROR_FORM_DUPLICATE:"nickname already used",display_rememberemail:"Remember me",contentItem_defaultVideoCaption:"{ContentType, select, review { Review video {ItemNumber} } comment { Comment video {ItemNumber} } clientresponse { Comment video {ItemNumber} } question { Question video {ItemNumber} } answer { Answer video {ItemNumber} } other { Content video {ItemNumber} } }",add_video:"Add Video",paginationPrevious:"Previous",title_rating_3:"Average",error_message_maxlength_aria:"{difference, plural, one { Value is {difference} character too long } other { Value is {difference} characters too long } }",helper_netpromoterscore_1:"Never",deeplinkModalTitle:"Content Dialog",contentSubmitted_comment:"Your comment was submitted!",display_rating:"Overall Rating",contentListPageInfoSimple:"{orphanEnd, select, true {{total, plural, one {{lastPageSize} of {total}} other {{lastPageSize} of {total}} }} other {{total, plural, one {{pageSize} of {total}} other {{pageSize} of {total}} }} }",display_agreedtotermsandconditions:'I agree to the <a href="\\#" class="bv-text-link bv-focusable">terms &amp; conditions</a>',negative:"Lowest to Highest Rating",facebookAvatarButton:"Add Profile Photo",contentPreview_Reviews:"Thank you for submitting a review! Your review is being moderated and may take up to a few days to appear. You will be receiving an email shortly to validate the review.",askQuestion:"{ Gender, select, other { Ask a question } }",error_ERROR_FORM_TOO_SHORT:"too short",aria_alert_voted_positive:"Your vote was successful. The number of positive helpfulness votes is now {Count}.",media_dialog_label:"Media Viewer",submit_review:"Post Review",placeholder_questionsummary:"Please keep questions relative to the product.Â  If you have questions regarding Availability (Back Order , In Stock, Pricing, etc) please contact SG Customer Service at custserv@sportsmansguide.com",mostAnsweredQuestionsLast:"Answers needed",recentAnswersFirst:"Newest answers",firstToWriteReview:"{ Gender, select, other {Be the first to review this product} }",display_isrecommended:"{Gender, select, other {Would you recommend this product to a friend?} }",janrain_error_try_again:"We're sorry, something went wrong. Please try again.",close:"Close",placeholder_usernickname:"Example: Mike111",header_question:"Ask a Question",offscreen_ratingSummaryText:"{AverageOverallRating} out of {OverallRatingRange} rating.",anonymousContentAuthor:"Anonymous",mostRecent:"Most Recent",error_ERROR_FORM_FILE_TOO_LARGE:"file too large",placeholder_videocaption_1:"Example: How to Install",offscreen_secondary_rating_summary_value_max_means:"Rating of {RatingRange} means ",mostUnhelpful:"Least Helpful",responseFrom:"Response from {clientName}:",error_ERROR_FORM_REQUIRED_FAKE:"required",offscreen_histogram_ratingDistribution:"{Count, plural, one {{RatingValue, plural, one {{Count} review with {RatingValue} star.} other {{Count} review with {RatingValue} stars.} } } other { {RatingValue, plural, one {{Count} reviews with {RatingValue} star.} other {{Count} reviews with {RatingValue} stars.} } } }",offscreen_secondary_rating_summary_stars:"{AverageRating} out of {RatingRange} stars.",display_videourl_1:"Link to YouTube Video",appTotalContentCount:"{TotalCount, plural, one { {TotalCount} Review } other { {TotalCount} Reviews } }",searchStatsTotalQuestionCount:'{TotalCount, plural, one {<span class="bv-content-title">{TotalCount}</span> <span class="bv-content-data-label">Question</span>} other {<span class="bv-content-title">{TotalCount}</span> <span class="bv-content-data-label">Questions</span>} }',content_filter_ratings:"Rating",searchStatsTotalAnswerCount:'{TotalSecondaryCount, plural, one {<span class="bv-content-title">{TotalSecondaryCount}</span> <span class="bv-content-data-label">Answer</span>} other {<span class="bv-content-title">{TotalSecondaryCount}</span> <span class="bv-content-data-label">Answers</span>} }',field_required:"Required field",contentPreview_Comments:"Thank you for submitting a comment! Your comment is being moderated and may take up to a few days to appear.",avatarStatsHelpfulCount_v2:'{HelpfulVoteCount, plural, one {<span class="bv-author-userstats-data"> Vote </span> <span class="bv-author-userstats-value"> {HelpfulVoteCount} </span>} other {<span class="bv-author-userstats-data"> Votes </span> <span class="bv-author-userstats-value"> {HelpfulVoteCount} </span>} }',answerRequestActionBarHeader:"Can you answer the following questions?",content_search_button:"Search",product_item_collection_in_category:"in",placeholder_reviewtext:"Please keep all content within the review relative to the product.",error_ERROR_FORM_PATTERN_MISMATCH:"only use letters and numbers",title_rating_1:"Poor",helpfulnessAnswersLast:"Least helpful answers",avatar_rank_TOP_50:"Top 50 Contributor",error_unknown:"error",error_ERROR_FORM_TOO_FEW:"too few",offscreen_content_secondary_value_of_one_means:"Rating of 1 means ",error_AN_ERROR_OCCURRED:"An error occurred. Please try again.",show_full_offscreen_Review:"This action will open a modal dialog.",totalAAStats:'{TotalCount, plural, one { {TotalSecondaryCount, plural, one {<a href="\\#" class="bv-qa-stats bv-qa-stats-questions bv-focusable"> {TotalCount} question </a> and <a href="\\#" class="bv-qa-stats bv-qa-stats-answers bv-focusable"> {TotalSecondaryCount} answer </a> for this product} other {<a href="\\#" class="bv-qa-stats bv-qa-stats-questions bv-focusable"> {TotalCount} question </a> and <a href="\\#" class="bv-qa-stats bv-qa-stats-answers bv-focusable"> {TotalSecondaryCount} answers </a> for this product} } } other { {TotalSecondaryCount, plural, one {<a href="\\#" class="bv-qa-stats bv-qa-stats-questions bv-focusable"> {TotalCount} questions </a> and <a href="\\#" class="bv-qa-stats bv-qa-stats-answers bv-focusable"> {TotalSecondaryCount} answer </a> for this product} other {<a href="\\#" class="bv-qa-stats bv-qa-stats-questions bv-focusable"> {TotalCount} questions </a> and <a href="\\#" class="bv-qa-stats bv-qa-stats-answers bv-focusable"> {TotalSecondaryCount} answers </a> for this product} } } }',secondaryRatingSummaryOverallRatingLabel:"Overall",notRecommendProduct:"{Gender, select, other {I do not recommend this product.} }",content_share_button:"Share",geoLocationNoResults:"No results",offscreen_showMediaModalNotice:"This action will open a modal dialog.",recentQuestionsFirst:"Newest questions",selectCategory:"More Categories",error_ERROR_FORM_TOO_LONG:"too long",error_ERROR_FORM_REQUIRES_TRUE:"required",avatarIconMale:"Avatar image",error_ERROR_FORM_INVALID_IPADDRESS:"invalid IP",avatar_rank_TOP_250:"Top 250 Contributor",contentIsNotHelpful:"No",offscreen_ratingStars:"{Rating} out of {RatingRange} stars.",cancel:"Cancel",display_photocaption_1:"Caption",header_comment:"My Comment",postSubmission_unknownError:"Something went wrong. Please try again later.",goBackCategory:"Back to {lastCategoryName}",error_ERROR_FORM_REQUIRED:"required",display_photourl_1:"Photo",helper_netpromoterscore_2:"Definitely",helpertext_reviewtext:'<h2>  Writing guidelines</h2> <p>  &nbsp;</p> <p>  When writing your review, please consider the following guidelines:</p> <ul>  <li>   Use the product before reviewing it</li>  <li>   Focus on the product and your individual experience using it</li>  <li>   Provide details about why you liked or disliked a product</li>  <li>   All submitted reviews are subject to the terms set forth in our Terms of Use</li> </ul> <p>  Please avoid:</p> <ul>  <li>   Info that changes, such as price and promotional details</li>  <li>   Info about other companies and websites</li>  <li>   Inappropriate language and attitude</li> </ul> <p>  We reserve the right not to post your review if it contains any of the following types of content or violates other guidelines:</p> <ul>  <li>   Obscenities, discriminatory language, or other language not suitable for a public forum</li>  <li>   Advertisements, "spam" content, or references to other products, offers, or web sites</li>  <li>   Email addresses, URLs, phone numbers, physical addresses or other forms of contact/personal information - we want to protect your privacy!</li>  <li>   Critical or spiteful comments on other reviews posted on the page or their authors</li> </ul> <p>  In addition, please do not submit any feedback other than for product reviews. If you wish to share feedback with us about product selection, pricing, ordering, delivery or other customer service issues, please <a href="http://www.sportsmansguide.com/customerservice/contactus" target="_blank">contact us</a> directly.</p> ',product_picker_title:"Select a Product to Review",userAlreadyVerified:"This email address has already been verified.",error_message_minlength:"{difference, plural, one { {difference} character too short } other { {difference} characters too short }}",offscreen_photo:"Photo",error_ERROR_FORM_IMAGE_TOO_LARGE:"image too large",selectOne:"Select",message_characters_used_maxlength:"{count} of a possible {maxlength} characters used",placeholder_useremail:"Example: yourname@example.com",error_message_invalid_url_video:"Invalid YouTube URL",avatarIconSubmissionForm:"Avatar image",placeholder_photocaption_1:"Example: My new shirt",questionCloseForAnswers:"This question is closed for new answers!",avatarIconContentAuthor:"Avatar image",error_ERROR_FORM_FILE_PARSE:"error",error_message_require_url_video:"YouTube URL is required",mostHelpful:"Most Helpful",placeholder_answertext:"Answer this question...",submission_video_added:"The video was successfully added.",content_search_placeholder:"Search topics and reviews",writeReview:"{ Gender, select, other { Write a review } }",authorProfileArchiveTabReviews:"Reviews",placeholder_userlocation:"Example: St Paul, MN",remove_confirm_video:"Are you sure you want to remove this video?",productFamilyText:'Originally posted on <a href="{Url}" class="bv-focusable">{Name}</a>',error_ERROR_FORM_TOO_HIGH:"too high",offscreen_content_secondary_value_max_means:"Rating of {ValueRange} means ",avatar_rank_TOP_1000:"Top 1000 Contributor",markAsHelpful:"Yes, {contentSelectType} by {authorDisplayName} is helpful.",content_type_display:"{ type, select, review { { total, plural, one {Review} other {Reviews} } } question { { total, plural, one {Question} other {Questions} } } answer { { total, plural, one {Answer} other {Answers} } } product { { total, plural, one {Product} other {Products} } } other { { total, plural, one {Content} other {Content} } } }",error_ERROR_FORM_PROFANITY:"profanity",logoSource:"Source:",title_rating_4:"Good",avatarFieldLabel:"Complete your profile",content_search_no_results:"Your search returned no results.",productFamilyTextNoLink:"Originally posted on {Name}",contentProsLabel:"Pros:",error_ERROR_FORM_REJECTED:"Does not meet moderation guidelines",relevancyPopup:"<strong>Relevancy sort</strong> puts the best reviews at the top. We look at things like helpfulness votes, latest reviews, pictures and other traits that readers look for in their reviews.",error_ERROR_FORM_IMAGE_HEIGHT_TOO_SMALL:"image too short",readReviews:"{Gender, select, other {{TotalCount, plural, one {Read a Review} other {Read {TotalCount} Reviews}}}}",previous_media:"Previous",unavailableSubmission:"We're sorry, submission is currently unavailable.",geoLocationResults:"{NumResults, plural, one {{NumResults} result} other {{NumResults} results} }",mostAnsweredQuestionsFirst:"Most answered",offscreenNotHelpful:"{Gender, select, other {{contentSelectType, select, review {{TotalNegativeFeedbackCount, plural, one {{TotalNegativeFeedbackCount} person did not find this review helpful. Click to agree.} other {{TotalNegativeFeedbackCount} people did not find this review helpful. Click to agree.} }} comment {{TotalNegativeFeedbackCount, plural, one {{TotalNegativeFeedbackCount} person did not find this comment helpful. Click to agree.} other {{TotalNegativeFeedbackCount} people did not find this comment helpful. Click to agree.} }} clientresponse {{TotalNegativeFeedbackCount, plural, one {{TotalNegativeFeedbackCount} person did not find this response helpful. Click to agree.} other {{TotalNegativeFeedbackCount} people did not find this response helpful. Click to agree.} }} question {{TotalNegativeFeedbackCount, plural, one {{TotalNegativeFeedbackCount} person did not find this question helpful. Click to agree.} other {{TotalNegativeFeedbackCount} people did not find this question helpful. Click to agree.} }} answer {{TotalNegativeFeedbackCount, plural, one {{TotalNegativeFeedbackCount} person did not find this answer helpful. Click to agree.} other {{TotalNegativeFeedbackCount} people did not find this answer helpful. Click to agree.} }} other {{TotalNegativeFeedbackCount, plural, one {{TotalNegativeFeedbackCount} person did not find this content helpful. Click to agree.} other {{TotalNegativeFeedbackCount} people did not find this content helpful. Click to agree.} }} }} }",morePositiveLink_Reviews:"See more 4 and 5 star reviews",error_ERROR_FORM_INVALID_EMAILADDRESS:"invalid email",helper_rating_1:"Click to rate!",negativeFeedback:"{ Type, select, review {{ TotalNegativeFeedbackCount, plural, one {{TotalNegativeFeedbackCount} person did not find this review helpful.} other {{TotalNegativeFeedbackCount} people did not find this review helpful.}}} answer {{ TotalNegativeFeedbackCount, plural, one {{TotalNegativeFeedbackCount} person did not find this answer helpful.} other {{TotalNegativeFeedbackCount} people did not find this answer helpful.}}} comment {{ TotalNegativeFeedbackCount, plural, one {{TotalNegativeFeedbackCount} person did not find this comment helpful.} other {{TotalNegativeFeedbackCount} people did not find this comment helpful.}}}}",syndicationTextNoLink:"Originally posted on {Name}",offscreen_histogram_count:"reviews",recentAnswersLast:"Oldest answers",content_secondary_btn_Questions:"Answer this Question",offscreen_secondary_rating_summary_value_of_one_means:"Rating of 1 means ",paginationNext:"Next",avatar_rank_TOP_1:"Top Contributor",submission_no:"No",avatar_rank_TOP_500:"Top 500 Contributor",helpfulStats:"{TotalPositiveFeedbackCount, plural, one {{TotalPositiveFeedbackCount} of {TotalFeedbackCount} people found this helpful} other {{TotalPositiveFeedbackCount} of {TotalFeedbackCount} people found this helpful} }",avatarThankYou:"Thanks! You've added your avatar to your content.",placeholder_hostedauthentication_authenticationemail:"Example: youremail@example.com",error_ERROR_FORM_RESTRICTED:"too young",max_length_message:"Maximum of {maxlength} characters.",content_follow_button:"Follow",fullProfileLink:"See My Profile",product_sharing:"Share",offscreen_secondary_rating:"{Value} out of {ValueRange}",acceptTCButton:"Accept",content_filter_clear_label:"Clear All",contentSubmitted_answer:"Your answer was submitted!",positiveFeedback:"{ Type, select, review {{ TotalPositiveFeedbackCount, plural, one {{TotalPositiveFeedbackCount} person found this review helpful.} other {{TotalPositiveFeedbackCount} people found this review helpful.}}} answer {{ TotalPositiveFeedbackCount, plural, one {{TotalPositiveFeedbackCount} person found this answer helpful.} other {{TotalPositiveFeedbackCount} people found this answer helpful.}}} comment {{ TotalPositiveFeedbackCount, plural, one {{TotalPositiveFeedbackCount} person found this comment helpful.} other {{TotalPositiveFeedbackCount} people found this comment helpful.}}}}",ariaTitle_answer:"Answer this Question",duplicateContent:"{Gender, select, other {You already submitted a review. Thanks!} }",contentHelpfulQuestion:"Helpful?",wait_feedback:"Loading",error_ERROR_FORM_STORAGE_PROVIDER_FAILED:"upload failed",aria_alert_voted_negative:"Your vote was successful. The number of negative votes is now {Count}.",offscreen_content_secondary_btn_Questions:"Answer this question by {authorDisplayName}.",mediaViewerCollectionSummary:"{currentItem} of {totalItems}",title_rating_5:"Excellent",remove_photo:"Remove Photo",content_search_placeholder_reviewGenericSubmission1:"Search {categoryName}",authorProfileArchiveTabQuestions:"Questions",add_facebookphoto:"Add Photo",mostHelpfulFavorable_Reviews:"Most Helpful Favorable Review",authorProfileArchiveTabAnswers:"Answers",display_reviewtext:"Review",helpertext_videourl_1:"<h2>  Video guidelines</h2> <p>  When submitting videos, please follow these guidelines:</p> <ul>  <li>   Make sure your video is related to the product.</li>  <li>   Try to submit videos of you using the product.</li>  <li>   Inappropriate videos will be rejected along with your review.</li>  <li>   If you are not the copyright holder, you may not submit copyrighted videos.</li> </ul> ",relevancy:"Most Relevant",display_videocaption_1:"Caption",contentVerifiedPurchaserBadge:"Verified Purchaser",syndicationText:'Originally posted on <a href="{ContentLink}" class="bv-focusable">{Name}</a>',offscreen_writeReviewModalNotice:"This action will open a modal dialog.",error_ERROR_FORM_UPLOAD_IO:"upload failed",display_useremail:"Email",avatarFieldDescription:"Display your Facebook or Gravatar profile photo with your submission.",photo_upload_success:"The photo was uploaded successfully.",answersWithAffiliationStaffFirst:"Staff answers",socialConnectFieldDescription:"Share your opinion with friends on Facebook.",placeholder_commenttext:"Write a comment...",mostHelpfulCritical_Reviews:"Most Helpful Critical Review",avatar_rank_TOP_10:"Top 10 Contributor",add_video_dialog:"Add Video. dialog.",searchStatsTotalReviewCount:'{TotalCount, plural, one {<span class="bv-content-title">{TotalCount}</span> <span class="bv-content-data-label">Review</span>} other {<span class="bv-content-title">{TotalCount}</span> <span class="bv-content-data-label">Reviews</span>} }',avatar_badge_expert:"Expert",positive:"Highest to Lowest Rating",title_rating_2:"Fair",offscreen_content_secondary_btn_Reviews:"Comment on review by {authorDisplayName}.",secondaryContentCommentLink:"comments",facebookShareButton:"Share on Facebook",authorDetailsOffscreenHeader:"User Details for {DisplayName}",avatarStatsReviewCount_v2:'{TotalReviewCount, plural, one {<span class="bv-author-userstats-data">Review</span> <span class="bv-author-userstats-value"> {TotalReviewCount} </span>} other {<span class="bv-author-userstats-data">Reviews</span> <span class="bv-author-userstats-value"> {TotalReviewCount} </span>} }',aria_header_review:"My Review for {productName}",searchActionBarHeader:"Search Results",photo_upload_preview_placeholder:"Uploading photo.",contentFeaturedBadgeAltText:"Featured review",content_filter_star_ratings:"{rating, plural, one {{rating} star} other {{rating} stars} }",offscreen_clear_all_filters:"Clear All Filters",submit_question:"Post Question",placeholder_rating:"Rate from 1 to 5 where 1 is poor and 5 is excellent.",secondaryContentAnswerLink:"{TotalSecondaryContentCount, plural, one {answer} other {answers} }",ProductIsNotRecommended:"No",header_answer:"My Answer",contentVerifiedPurchaserBadgeAltText:"Verified purchaser",photo_upload_preview:"This is a preview of the photo that was uploaded.",display_netpromotercomment:"Please tell us why <em>(will not appear on our site)</em>",userVerified:"{Gender, select, other {Thanks! You have successfully authenticated your content.} }",aria_alert_voted_inappropriate:"You have successfully reported this content as inappropriate.",offscreen_sort_arrow:"Menu, press enter to show options",offscreen_category_select_arrow:"Menu, press enter to show options",contentListPageInfo:"{orphanEnd, select, true {{total, plural, one {{start} of {total}} other {{start} of {total}} }} other {{total, plural, one {{start} of {total}} other {{start}&ndash;{end} of {total}} }} }",display_netpromoterscore:"{Gender, select, other {Would you recommend {clientName} to a friend?} }",contentFeaturedBadge:"Featured",avatar_badge_verified_purchaser:"Verified Purchaser",display_answertext:"Answer",avatarIconGeneric:"Avatar image",secondaryRatingSummaryHeader:"Average Customer Ratings",video_upload_preview_placeholder:"Loading video.",video_upload_preview:"This is a preview of the video that was linked.",submission_photo_added:"The photo was successfully added.",header_termsandconditions:"Terms and Conditions",contentSubmitted_question:"Your question was submitted!",offscreenHelpful:"{Gender, select, other {{contentSelectType, select, review {{TotalPositiveFeedbackCount, plural, one {{TotalPositiveFeedbackCount} person found this review helpful. Click to agree.} other {{TotalPositiveFeedbackCount} people found this review helpful. Click to agree.} }} comment {{TotalPositiveFeedbackCount, plural, one {{TotalPositiveFeedbackCount} person found this comment helpful. Click to agree.} other {{TotalPositiveFeedbackCount} people found this comment helpful. Click to agree.} }} clientresponse {{TotalPositiveFeedbackCount, plural, one {{TotalPositiveFeedbackCount} person found this response helpful. Click to agree.} other {{TotalPositiveFeedbackCount} people found this response helpful. Click to agree.} }} question {{TotalPositiveFeedbackCount, plural, one {{TotalPositiveFeedbackCount} person found this question helpful. Click to agree.} other {{TotalPositiveFeedbackCount} people found this question helpful. Click to agree.} }} answer {{TotalPositiveFeedbackCount, plural, one {{TotalPositiveFeedbackCount} person found this answer helpful. Click to agree.} other {{TotalPositiveFeedbackCount} people found this answer helpful. Click to agree.} }} other {{TotalPositiveFeedbackCount, plural, one {{TotalPositiveFeedbackCount} person found this content helpful. Click to agree.} other {{TotalPositiveFeedbackCount} people found this content helpful. Click to agree.} }} }} }",categoryTotalReviewCount:"{TotalCount, plural, one {({TotalCount})} other {({TotalCount})} }",contentSubmitted_review:"Your review was submitted!",noReviewsYet:"No reviews have been submitted yet.",remove_video:"Remove Video",error_message_minlength_aria:"{difference, plural, one { Value is {difference} character too short } other { Value is {difference} characters too short } }",content_filter_expand_label:"Filter {contentType}",unsubscribe_unknownError:"Something went wrong. Please try again later.",postSubmission_errorOffScreenText:"Press Escape to return to the form.",postSubmission_unrecoverableErrorOffScreenText:"Press Escape to close this message",add_file:"Add File",add_facebookphoto_1:"Facebook",contentIncentivizedReviewBadge:"Received Free Product",error_ERROR_DUPLICATE_SUBMISSION:"{Gender, select, other {You already submitted a review. Thanks!} }",trustmarkPopupText:"These reviews are managed by Bazaarvoice and comply with the Bazaarvoice Authenticity Policy, which is supported by anti-fraud technology and human analysis.<br />Details at {url}",valid_field_input:"Field input is valid.",authentic_reviews:"Authentic Reviews",error_invalid_email:"Invalid email",error_invalid_email_aria:"The email address is invalid.",ratingsOnly_contentListCount:"{count, plural, one {{count} Ratings-Only Review} other {{count} Ratings-Only Reviews}}",otherLocales_contentListCount:"{count, plural, one {{count} Review in Another Language} other {{count} Reviews in Other Languages}}",offscreen_relevancy_link_description:"Display a popup with information about Relevancy Sort.",histogram_filter:"{RatingValue, plural, one {Select to filter reviews with {RatingValue} star.} other {Select to filter reviews with {RatingValue} stars.} }",histogram_select_to_filter:"Select a row below to filter reviews.",max_length_reached_message:"Reached maximum of {maxlength} characters.",anonymous:"Anonymous",displaytext_review:"Reviews Tab Panel",displaytext_question:"Questions Tab Panel",displaytext_answer:"Answers Tab Panel",spotlights_readMoreAboutProduct:"Read more about this product",spotlights_reviewReadMore:"read more",spotlights_spotlightReviewsCount:'{TotalReviewCountNumber, plural, one {{TotalReviewCount}&nbsp;<span class="bv-rating-count-label">Review</span>} other {{TotalReviewCount}&nbsp;<span class="bv-rating-count-label">Reviews</span>} }',spotlights_spotlightAvgRating:"({SpotlightRating} / {SpotlightRatingRange})",spotlights_spotlightAverage:"Average rating for {SpotlightName}",spotlights_anonymousContentAuthor:"Anonymous",spotlights_productReviewsCount:'{ProductReviewCount, plural, one {{ReviewCount}&nbsp;<span class="bv-rating-count-label">Review</span>} other {{ReviewCount}&nbsp;<span class="bv-rating-count-label">Reviews</span>} }',error_ERROR_FORM_REJECTED_HEADER:"Your review cannot be approved at this time because it:",error_ERROR_FORM_REJECTED_CR:"mentions a competitor",error_ERROR_FORM_REJECTED_DBA:"directs business away",error_ERROR_FORM_REJECTED_PII:"includes personally identifiable information",error_ERROR_FORM_REJECTED_SI:"mentions shipping complaints",error_ERROR_FORM_REJECTED_IMG:"includes inappropriate media",error_ERROR_FORM_REJECTED_URL:"contains a URL",error_ERROR_FORM_REJECTED_VAC:"is vacuous or needs more detail",error_ERROR_FORM_REJECTED_PRF:"includes profanity",spotlights_incentivized:"This person received an incentive to write a review.",error_ERROR_FORM_REJECTED_SENTENCE:"This field {errorCodeMessage}",error_ERROR_FORM_REJECTED_VID:"includes inappropriate media",error_ERROR_FORM_REJECTED_PRI:"mentions the specific price",error_ERROR_FORM_REJECTED_CS:"mentions customer service issues",error_ERROR_FORM_REJECTED_LI:"contains legally sensitive content",error_ERROR_FORM_REJECTED_FL:"does not match the site's language",error_ERROR_FORM_REJECTED_SPM:"looks like duplicate content",error_ERROR_FORM_REJECTED_GIU:"contains inappropriate content",error_ERROR_FORM_REJECTED_WP:"applies to a different product",error_ERROR_FORM_REJECTED_UA:"was written by a reviewer younger than 13",error_ERROR_FORM_REJECTED_PUX:"was written lacking personal experience",contentListPageInfoSearch:"Showing {orphanEnd, select, true {{end} of {end}} other {{total, plural, one {{total} of {total}} other {{start}&ndash;{end}} }}}",spotlights_reviewTruncatedSymbol:"...",spotlights_ay_reviewReadMore:'Click to read full text of review titled "{ReviewTitle}".',spotlights_ay_chevronBack:"Click here for the previous set of products.",spotlights_ay_chevronNext:"Click here for the next set of products.",spotlights_syndicated:"This review was originally posted to {Name}.",spotlights_ay_spotlightAvgRating:"{SpotlightRating} out of {RatingRange} stars.",spotlights_ay_productAvgRating:"{ProductRating} out of {RatingRange} stars.",spotlights_ay_reviewRating:"This reviewer rated product {Rating} out of {RatingRange} stars.",spotlights_ay_productImgAltText:"Display product reviews for {ProductName}",sellerRatings_viewAll:"View {TotalReviewCount, plural, one {{TotalReviewCount} review} other {all {TotalReviewCount} reviews}}",sellerRatings_postedBy:"Posted by {Author} {SubmissionTimeAgo}",sellerRatings_customersRated:"Customers rate us {Stars} {Rating} / {MaxRating}",sellerRatings_poweredBy:"Powered by {BazaarvoiceLabel}",sellerRatings_logoTitle:"Bazaarvoice is the leading consumer insights network.",sellerRatings_ratingFraction:"{Rating} / {MaxRating}",display_termsAndConditions:"<p>  <strong>CUSTOMER RATINGS AND REVIEWS TERMS OF USE</strong></p> <div>  These Terms of Use govern your conduct associated with the Customer Ratings and Review service offered by<strong> </strong>Sportsman's Guide (the \"CRR Service\"). To the extent of any conflict between Sportsman's Guide's Privacy Policy and these Terms of Use, these Terms of Use shall control with respect to the CRR Service.</div> <div>  &nbsp;</div> <div>  By submitting any content to Sportsman's Guide you represent and warrant that:</div> <ul>  <li>   You are the sole author and owner of the intellectual property rights thereto;</li>  <li>   All \"moral rights\" that you may have in such content have been voluntarily waived by you;</li>  <li>   All content that you post is accurate;</li>  <li>   You are at least 16 years old;</li>  <li>   Use of the content you supply does not violate these Terms of Use and will not cause injury to any person or entity.</li> </ul> <div>  You further agree and warrant that you shall not submit any content:</div> <ul>  <li>   That is known by you to be false, inaccurate or misleading;</li>  <li>   That infringes any third party's copyright, patent, trademark, trade secret or other proprietary rights or rights of publicity or privacy;</li>  <li>   That violates any law, statute, ordinance or regulation (including, but not limited to, those governing export control, consumer protection, unfair competition, anti-discrimination or false advertising);</li>  <li>   That is, or may reasonably be considered to be, defamatory, libelous, hateful, racially or religiously biased or offensive, unlawfully threatening or unlawfully harassing to any individual, partnership or corporation;</li>  <li>   For which you were compensated or granted any consideration by any third party;</li>  <li>   That includes any information that references other websites, addresses, email addresses,&nbsp;contact information or phone numbers;</li>  <li>   That contains any computer viruses, worms or other potentially damaging computer programs or files.</li> </ul> <div>  You agree to indemnify and hold Sportsman's Guide (and its officers, directors, agents, subsidiaries, joint ventures, employees and third-party service providers, including but not limited to Sportsman's Guide, Inc.), harmless from all claims, demands, and damages (actual and consequential) of every kind and nature, known and unknown including reasonable attorneys' fees, arising out of a breach of your representations and warranties set forth above, or your violation of any law or the rights of a third party.</div> <div>  &nbsp;</div> <div>  For any content that you submit, you grant Sportsman's Guide a perpetual, irrevocable, royalty-free, transferable right and license to use, copy, modify, delete in its entirety, adapt, publish, translate, create derivative works from and/or sell and/or distribute such content and/or incorporate such content into any form, medium or technology throughout the world without compensation to you.</div> <div>  &nbsp;</div> <div>  All content that you submit may be used at Sportsman's Guide sole discretion. The Sportsman's Guide reserves the right to change, condense or delete any content on Sportsman's Guide website that Sportsman's Guide deems, in its sole discretion, to violate the content guidelines or any other provision of these Terms of Use. Sportsman's Guide does not guarantee that you will have any recourse through Sportsman's Guide to edit or delete any content you have submitted. Ratings and written comments are generally posted within two to four business days. However, Sportsman's Guide reserves the right to remove or to refuse to post any submission for any reason. You acknowledge that you, not The Sportsman's Guide, are responsible for the contents of your submission. None of the content that you submit shall be subject to any obligation of confidence on the part of Sportsman's Guide, its agents, subsidiaries, affiliates, partners or third party service providers and their respective directors, officers and employees.</div> <div>  &nbsp;</div> <div>  By submitting your email address in connection with your rating and review, you agree that Sportsman's Guide and its third party service providers may use your email address to contact you about the status of your review and other administrative purposes.</div> ",display_qaTermsAndConditions:"<div class=\"BVQADocumentationHeader BVQATermsAndConditionsDocumentationHeader\" id=\"BVQATermsAndConditionsDocumentationHeaderID\">  QUESTION & ANSWER TERMS OF USE</div> <p>  These Terms of Use govern your conduct associated with the Question & Answer service offered by Sportsman's Guide (the \"Q&A Service\"). To the extent of any conflict between Sportsman's Guide Privacy Policy and these Terms of Use, these Terms of Use shall control with respect to the Q&A Service.</p> <p>  By submitting any content through Q&A, you represent and warrant that:</p> <ul>  <li>   you are the sole author and owner of the intellectual property rights thereto;</li>  <li>   all \"moral rights\" that you may have in such content have been voluntarily waived by you;</li>  <li>   all content that you post is accurate;</li>  <li>   you are at least 16 years old;</li>  <li>   use of the content you supply does not violate these Terms of Use and will not cause injury to any person or entity.</li> </ul> <p>  You further agree and warrant that you shall not submit any content:</p> <ul>  <li>   that is known by you to be false, inaccurate or misleading;</li>  <li>   that infringes any third party's copyright, patent, trademark, trade secret or other proprietary rights or rights of publicity or privacy;</li>  <li>   that violates any law, statute, ordinance or regulation (including, but not limited to, those governing export control, consumer protection, unfair competition, anti-discrimination or false advertising);</li>  <li>   that is, or may reasonably be considered to be, defamatory, libelous, hateful, racially or religiously biased or offensive, unlawfully threatening or unlawfully harassing to any individual, partnership or corporation;</li>  <li>   for which you were compensated or granted any consideration by any third party;</li>  <li>   that includes any information that references other websites, addresses, email addresses, contact information or phone numbers;</li>  <li>   that contains any computer viruses, worms or other potentially damaging computer programs or files.</li> </ul> <p>  You agree to indemnify and hold Sportsman's Guide (and its officers, directors, agents, subsidiaries, joint ventures, employees and third-party service providers, including but not limited to Sportsman's Guide, Inc.), harmless from all claims, demands, and damages (actual and consequential) of every kind and nature, known and unknown including reasonable attorneys' fees, arising out of a breach of your representations and warranties set forth above, or your violation of any law or the rights of a third party.</p> <p>  For any content that you submit, you grant Sportsman's Guide a, perpetual, irrevocable, royalty-free, transferable right and license to use, copy, modify, delete in its entirety, adapt, publish, translate, create derivative works from and/or sell and/or distribute such content and/or incorporate such content into any form, medium or technology throughout the world without compensation to you.</p> <p>  All content that you submit may be used at Sportsman's Guides' sole discretion. Sportsman's Guide reserves the right to change, condense or delete any content on Sportsman's Guides'&nbsp; website that Sportsman's Guide deems, in its sole discretion, to violate the content guidelines or any other provision of these Terms of Use. Sportsman's Guide does not guarantee that you will have any recourse through Sportsman's Guide to edit or delete any content you have submitted. Questions and answers are generally posted within one to two business days. However, Sportsman's Guide reserves the right to remove or to refuse to post any submission for any reason. You acknowledge that you, not Sportsman's Guide, are responsible for the contents of your submission. None of the content that you submit shall be subject to any obligation of confidence on the part of Sportsman's Guide, its agents, subsidiaries, affiliates, partners or third party service providers and their respective directors, officers and employees.</p> <p>  By submitting your email address in connection with your question or answer, you agree that Sportsman's Guide and its third party service providers may use your email address to contact you about the status of your question or answer and other administrative purposes.</p> <p>  &nbsp;</p> <p>  Sportsman's Guide</p> <p>  &nbsp;</p> <p>  ATTN: Legal</p> <p>  411 Farwell Ave</p> <p>  South St. Paul, MN&nbsp; 55372</p> <div>  E-mail us at: <a class=\"blue\" href=\"mailto:custserv@sportsmansguide.com\" title=\"custserv@sportsmansguide.com\">custserv@sportsmansguide.com</a></div> <div class=\"note\">  Your e-mail address is 100% safe and secure...we will never sell, trade or share it with anyone.</div> <p>  Call us at: <strong>1-888-844-0667</strong> (Monday-Friday 7am-7pm CST)</p> ",rating_Value:"Value of Product",display_rating_Value:"How would you rate the value of this product?",rating_Quality:"Quality of Product",display_rating_Quality:"How would you rate the quality of this product?",rating_Fit_22:"Size",display_rating_Fit_22:"How would you rate the size of this product?",rating_Fit_22_valueLabel1:"Full Size Smaller",rating_Fit_22_valueLabel2:"Half Size Smaller",rating_Fit_22_valueLabel3:"True To Size",rating_Fit_22_valueLabel4:"Half Size Larger",rating_Fit_22_valueLabel5:"Full Size Larger",slider_dimension_1_rating_Fit_22:"Full Size Smaller",slider_dimension_2_rating_Fit_22:"Full Size Larger",rating_Width_1:"Width",display_rating_Width_1:"How would you rate the width of this product?",rating_Width_1_valueLabel1:"Felt Narrower Than Marked",rating_Width_1_valueLabel2:"Felt True To Width",rating_Width_1_valueLabel3:"Felt Wider Than Marked",slider_dimension_1_rating_Width_1:"Narrow",slider_dimension_2_rating_Width_1:"Wide",tag_IntendedUse:"Best Use / Intended Use",display_tag_IntendedUse:"Best Use / Intended Use - Select Option Below",tag_IntendedUse_CasualLesisure:"Casual / Lesisure",tag_IntendedUse_FitnessTraining:"Fitness / Training",tag_IntendedUse_DutyService:"Duty / Service",tag_IntendedUse_FarmRanch:"Farm / Ranch",tag_IntendedUse_Warehouse:"Warehouse",tag_IntendedUse_Office:"Office",tag_IntendedUse_Hunting:"Hunting",tag_IntendedUse_Bowhunting:"Bowhunting",tag_IntendedUse_WaterfowlHunting:"Waterfowl Hunting",tag_IntendedUse_UplandBirdHunting:"Upland / Bird Hunting",tag_IntendedUse_Fishing:"Fishing",tag_IntendedUse_FlyFishing:"Fly Fishing",tag_IntendedUse_IceFishing:"Ice Fishing",tag_IntendedUse_Hiking:"Hiking",tag_IntendedUse_Camping:"Camping",tag_IntendedUse_Landscaping:"Landscaping",tag_IntendedUse_Gardening:"Gardening",tag_IntendedUse_Construction:"Construction",tag_IntendedUse_FoodService:"Food Service",tag_IntendedUse_HealthService:"Health Service",tag_IntendedUse_Outfitter:"Outfitter",tag_IntendedUse_Backpacking:"Backpacking",tag_IntendedUse_Other:"Other",tag_IntendedUse_OutdoorNinja:"Outdoor Ninja",tag_IntendedUse_StudentSchool:"Student / School"}),BV.define("template/helpers/extmsg",["vendor/handlebars/runtime","underscore","dimsumFields!localeMapping"],function(e,t,n){function s(e){return t(e).isEmpty()?e:e.replace(new RegExp(i,"g"),function(e){return r[e]})}function o(r,i,o,u){u=u||{},u.hash=u.hash||{};var a=u.hash.prefix;if(u.hash.prefixNum){var f;for(f=1;f<u.hash.prefixNum;f++){var l="prefix"+f;a+=u.hash[l]}}var c=a?a+r:r,h;u.hash.includeComponentId&&(h=a?a+r+"_"+o.componentId:r+"_"+o.componentId);var p=u.hash.defaultDisplay||"",d;if(!c&&!h||!i&&t(n).isEmpty())return new e.SafeString(p);var v;return i&&u.hash.includeComponentId&&(v=i[h]),!v&&i&&(v=i[c]),!v&&n&&(v=n[c]),v?(d=t(v).isFunction()?v(o):v,t(d).isEmpty()?new e.SafeString(p):new e.SafeString(u.hash.protectString?s(d):d)):new e.SafeString(p)}var r={'"':"&quot;","<":"&lt;",">":"&gt;","&":"&amp;"},i=function(){var e="";for(var t in r)e+=t;return"["+e+"]"}();return e.registerHelper("extmsg",o),o}),BV.define("hbs!userBadge",["hbs","vendor/handlebars/runtime","template/helpers/ifBadgeImage","template/helpers/renderIcon","template/helpers/extmsg","template/helpers/equals"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t,r){var i="",s,o,u;i+=' <li class="bv-badge-image',u={hash:{},inverse:c.noop,fn:c.program(2,d,t)},o=(s=n.equals,s?s.call(e,e.badgeType,e.user,u):h.call(e,"equals",e.badgeType,e.user,u));if(o||o===0)i+=o;i+=" "+l((s=r.badgeClassName,typeof s===f?s.apply(e):s))+'"> <img ',o=n["if"].call(e,e.description,{hash:{},inverse:c.noop,fn:c.program(4,v,t)});if(o||o===0)i+=o;return i+=' src="',(o=n.imageUrl)?o=o.call(e,{hash:{}}):(o=e.imageUrl,o=typeof o===f?o.apply(e):o),i+=l(o)+'"/> </li> ',i}function d(e,t){return" bv-badge-user"}function v(e,t){var r="",i;return r+='title="',(i=n.description)?i=i.call(e,{hash:{}}):(i=e.description,i=typeof i===f?i.apply(e):i),r+=l(i)+'" alt="',(i=n.description)?i=i.call(e,{hash:{}}):(i=e.description,i=typeof i===f?i.apply(e):i),r+=l(i)+'"',r}function m(e,t,r){var i="",s,o,u;i+=" <li ",s=n["if"].call(e,e.description,{hash:{},inverse:c.noop,fn:c.program(7,g,t)});if(s||s===0)i+=s;i+=' class="bv-badge bv-badge-user '+l((s=r.badgeClassName,typeof s===f?s.apply(e):s))+'"> ',u={hash:{classList:"bv-badge-icon",ariaHidden:"true"},inverse:c.noop,fn:c.programWithDepth(y,t,r)},o=(s=n.renderIcon,s?s.call(e,r.badgeClassName,u):h.call(e,"renderIcon",r.badgeClassName,u));if(o||o===0)i+=o;return i+=' <span class="bv-badge-label">',u={hash:{prefix:r.msgPrefix}},i+=l((s=n.extmsg,s?s.call(e,r.msgKey,r.msgPack,r,u):h.call(e,"extmsg",r.msgKey,r.msgPack,r,u)))+"</span> </li> ",i}function g(e,t){var r="",i;return r+='title="',(i=n.description)?i=i.call(e,{hash:{}}):(i=e.description,i=typeof i===f?i.apply(e):i),r+=l(i)+'"',r}function y(e,t,n){var r="",i,s;r+=" ",s=(i=n.iconChar,typeof i===f?i.apply(e):i);if(s||s===0)r+=s;return r+=" ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;a={hash:{},inverse:c.programWithDepth(m,i,t),fn:c.programWithDepth(p,i,t)},u=(o=n.ifBadgeImage,o?o.call(t,t.badges,t.badgeId,a):h.call(t,"ifBadgeImage",t.badges,t.badgeId,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("userBadge",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!badge",["hbs","vendor/handlebars/runtime","template/helpers/ifBadgeImage","template/helpers/renderIcon","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t,r){var i="",s,o;i+=' <dd title="',s=n["if"].call(e,e.description,{hash:{},inverse:c.program(4,v,t),fn:c.program(2,d,t)});if(s||s===0)i+=s;i+='" class="bv-badge-image '+l((s=r.badgeClassName,typeof s===f?s.apply(e):s))+'" role="presentation"> <img src="',(o=n.imageUrl)?o=o.call(e,{hash:{}}):(o=e.imageUrl,o=typeof o===f?o.apply(e):o),i+=l(o)+'" alt="',o=n["if"].call(e,e.description,{hash:{},inverse:c.program(4,v,t),fn:c.program(2,d,t)});if(o||o===0)i+=o;return i+='"> </dd> ',i}function d(e,t){var r;return(r=n.description)?r=r.call(e,{hash:{}}):(r=e.description,r=typeof r===f?r.apply(e):r),l(r)}function v(e,t){var r;return(r=n.displayLabel)?r=r.call(e,{hash:{}}):(r=e.displayLabel,r=typeof r===f?r.apply(e):r),l(r)}function m(e,t,r){var i="",s;i+=" ",s=n["if"].call(e,e.displayLabel,{hash:{},inverse:c.programWithDepth(b,t,r),fn:c.programWithDepth(g,t,r)});if(s||s===0)i+=s;return i+=" ",i}function g(e,t,r){var i="",s,o,u;i+=' <dd title="',s=n["if"].call(e,e.description,{hash:{},inverse:c.program(4,v,t),fn:c.program(2,d,t)});if(s||s===0)i+=s;i+='" class="bv-badge bv-badge-'+l((s=r.badgeType,typeof s===f?s.apply(e):s))+" "+l((s=r.badgeClassName,typeof s===f?s.apply(e):s))+'" role="presentation"> ',u={hash:{classList:"bv-badge-icon",ariaHidden:"true"},inverse:c.noop,fn:c.programWithDepth(y,t,r)},o=(s=n.renderIcon,s?s.call(e,e.badgeClassName,u):h.call(e,"renderIcon",e.badgeClassName,u));if(o||o===0)i+=o;return i+=' <span class="bv-badge-label">',(o=n.displayLabel)?o=o.call(e,{hash:{}}):(o=e.displayLabel,o=typeof o===f?o.apply(e):o),i+=l(o)+"</span> </dd> ",i}function y(e,t,n){var r="",i,s;r+=" ",s=(i=n.iconChar,typeof i===f?i.apply(e):i);if(s||s===0)r+=s;return r+=" ",r}function b(e,t,r){var i="",s,o,u;i+="  <dd ",s=n["if"].call(e,e.description,{hash:{},inverse:c.noop,fn:c.program(11,w,t)});if(s||s===0)i+=s;i+=' class="bv-badge bv-badge-'+l((s=r.badgeType,typeof s===f?s.apply(e):s))+" "+l((s=r.badgeClassName,typeof s===f?s.apply(e):s))+'" role="presentation"> ',u={hash:{classList:"bv-badge-icon",ariaHidden:"true"},inverse:c.noop,fn:c.programWithDepth(y,t,r)},o=(s=n.renderIcon,s?s.call(e,e.badgeClassName,u):h.call(e,"renderIcon",e.badgeClassName,u));if(o||o===0)i+=o;return i+=' <span class="bv-badge-label"> ',u={hash:{prefix:r.msgPrefix}},i+=l((s=n.extmsg,s?s.call(e,r.msgKey,r.msgpack,r,u):h.call(e,"extmsg",r.msgKey,r.msgpack,r,u)))+" </span> </dd> ",i}function w(e,t){var r="",i;return r+='title="',(i=n.description)?i=i.call(e,{hash:{}}):(i=e.description,i=typeof i===f?i.apply(e):i),r+=l(i)+'"',r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+='<dl class="bv-badge-summary" role="presentation"> ',a={hash:{},inverse:c.programWithDepth(m,i,t),fn:c.programWithDepth(p,i,t)},u=(o=n.ifBadgeImage,o?o.call(t,t.badges,t.badgeId,a):h.call(t,"ifBadgeImage",t.badges,t.badgeId,a));if(u||u===0)s+=u;return s+=" </dl>",s});return t.registerPartial("badge",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("ratingIconCharMap",["underscore","vendor/json2"],function(e,t){var n="";return{}}),BV.define("ratingIconCharMap!",{}),BV.define("template/helpers/renderBadge",["vendor/handlebars/runtime","hbs!userBadge","hbs!badge","ratingIconCharMap!"],function(e,t,n,r){function i(i,s){var o=s.hash,u=o.badgeType,a=o.badgeId,f=u==="contributor",l=o.asUserBadge,c=f?"rank":o.badgeId.toLowerCase(),h;o.badges=i,o.badgeClassName="bv-badge-"+u+"-"+c,o.msgKey||(o.msgKey=f?a:c),f&&(h=r["rating-stars-on"]||"9733",h="&#"+h+";",o.iconChar=h),o.iconChar||(o.iconChar="*");var p=l?t:n,d=p(o);return new e.SafeString(d)}return e.registerHelper("renderBadge",i),i}),BV.define("hbs!userBadges",["hbs","vendor/handlebars/runtime","template/helpers/equals","template/helpers/withIf","template/helpers/renderBadge","template/helpers/notEqual","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:a.program(3,p,t),fn:a.program(2,h,t)},s=(i=n.equals,i?i.call(e,(i=e.Author,i==null||i===!1?i:i.ContributorRank),"NONE",o):f.call(e,"equals",(i=e.Author,i==null||i===!1?i:i.ContributorRank),"NONE",o));if(s||s===0)r+=s;return r+=" ",r}function h(e,t){var r="",i,s;r+=" ",s=n["if"].call(e,(i=e.Author,i==null||i===!1?i:i.Badges),{hash:{},inverse:a.noop,fn:a.program(3,p,t)});if(s||s===0)r+=s;return r+=" ",r}function p(e,t){return' <div class="bv-content-author-badges" role="presentation"> <ul class="bv-content-author-badges-list" role="presentation"> '}function d(e,t){var r="",i,s;return r+=' <div class="bv-author-profile-crowdSourcedAnswerBadge-outter"> <div class="bv-crowdSourcedAnswerBadge-icon bv-author-profile-crowdSourcedAnswerBadge-icon" aria-hidden="true">&#x2139;</div> <div class="bv-author-profile-crowdSourcedAnswerBadge-text bv-focusable" tabindex="-1"> ',s={hash:{prefix:"display_",defaultDisplay:"Answer provided by third party; accuracy not guaranteed."}},r+=l((i=n.extmsg,i?i.call(e,"crowdSourcedAnswerText",e.msgpack,e,s):f.call(e,"extmsg","crowdSourcedAnswerText",e.msgpack,e,s)))+" </div> </div> ",r}function v(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:a.noop,fn:a.programWithDepth(m,t,e)},s=(i=n.withIf,i?i.call(e,(i=e.Author,i==null||i===!1?i:i.Badges),o):f.call(e,"withIf",(i=e.Author,i==null||i===!1?i:i.Badges),o));if(s||s===0)r+=s;r+=" ",s=n["if"].call(e,(i=e.Author,i==null||i===!1?i:i.ContributorRank),{hash:{},inverse:a.noop,fn:a.program(10,g,t)});if(s||s===0)r+=s;r+=" ",o={hash:{},inverse:a.noop,fn:a.programWithDepth(b,t,e)},s=(i=n.withIf,i?i.call(e,(i=e.Author,i==null||i===!1?i:i.Badges),o):f.call(e,"withIf",(i=e.Author,i==null||i===!1?i:i.Badges),o));if(s||s===0)r+=s;return r+=" ",r}function m(e,t,r){var i="",s,o;return i+=" ",o={hash:{asUserBadge:!0,badgeId:"Brand",badgeType:"user",iconChar:"&#x2642",msgPack:r.msgpack,msgPrefix:"avatar_badge_"}},i+=l((s=n.renderBadge,s?s.call(e,e,o):f.call(e,"renderBadge",e,o)))+" ",o={hash:{asUserBadge:!0,badgeId:"Staff",badgeType:"user",iconChar:"&#x2642;",msgPack:r.msgpack,msgPrefix:"avatar_badge_"}},i+=l((s=n.renderBadge,s?s.call(e,e,o):f.call(e,"renderBadge",e,o)))+" ",i}function g(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:a.noop,fn:a.programWithDepth(y,t,e)},s=(i=n.notEqual,i?i.call(e,(i=e.Author,i==null||i===!1?i:i.ContributorRank),"NONE",o):f.call(e,"notEqual",(i=e.Author,i==null||i===!1?i:i.ContributorRank),"NONE",o));if(s||s===0)r+=s;return r+=" ",r}function y(e,t,r){var i="",s,o;return i+=" ",o={hash:{asUserBadge:!0,badgeId:(s=e.Author,s==null||s===!1?s:s.ContributorRank),badgeType:"contributor",msgPack:r.msgpack,msgPrefix:"avatar_rank_"}},i+=l((s=n.renderBadge,s?s.call(e,(s=e.Author,s==null||s===!1?s:s.Badges),o):f.call(e,"renderBadge",(s=e.Author,s==null||s===!1?s:s.Badges),o)))+" ",i}function b(e,t,r){var i="",s,o;return i+=" ",o={hash:{asUserBadge:!0,badgeId:"Expert",badgeType:"user",iconChar:"&infin;",msgPack:r.msgpack,msgPrefix:"avatar_badge_"}},i+=l((s=n.renderBadge,s?s.call(e,e,o):f.call(e,"renderBadge",e,o)))+" "+" ",i}function w(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:a.program(17,S,t),fn:a.program(16,E,t)},s=(i=n.equals,i?i.call(e,(i=e.Author,i==null||i===!1?i:i.ContributorRank),"NONE",o):f.call(e,"equals",(i=e.Author,i==null||i===!1?i:i.ContributorRank),"NONE",o));if(s||s===0)r+=s;return r+=" ",r}function E(e,t){var r="",i,s;r+=" ",s=n["if"].call(e,(i=e.Author,i==null||i===!1?i:i.Badges),{hash:{},inverse:a.noop,fn:a.program(17,S,t)});if(s||s===0)r+=s;return r+=" ",r}function S(e,t){return" </ul> </div> "}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a=this,f=n.helperMissing,l=this.escapeExpression;s+=" ",u=n["if"].call(t,(o=t.Author,o==null||o===!1?o:o.ContributorRank),{hash:{},inverse:a.program(2,h,i),fn:a.program(1,c,i)});if(u||u===0)s+=u;s+=" ",u=n["if"].call(t,(o=t.Author,o==null||o===!1?o:o.communityAnswer),{hash:{},inverse:a.program(7,v,i),fn:a.program(5,d,i)});if(u||u===0)s+=u;s+=" ",u=n["if"].call(t,(o=t.Author,o==null||o===!1?o:o.ContributorRank),{hash:{},inverse:a.program(16,E,i),fn:a.program(15,w,i)});if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("userBadges",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("template/helpers/foreach",["vendor/handlebars/runtime","underscore"],function(e,t){function n(n,r){var i=!0,s="",o=e.createFrame(r.data||null);if(t(n).isArray())t(n).forEach(function(e,t){o&&(o.index=t,o.first=t===0,o.last=t===n.length-1,o.length=n.length),s+=r.fn(e,{data:o}),i=!1});else if(t(n).isObject()){var u=t(n).size(),a=0;t(n).forEach(function(e,t){o&&(o.key=t,o.first=a===0,o.last=a===u-1,o.length=u),s+=r.fn(e,{data:o}),i=!1,a++})}return i&&(s=r.inverse(this)),s}return e.registerHelper("foreach",n),n}),BV.define("hbs!contentAuthorCDVs",["hbs","vendor/handlebars/runtime","template/helpers/renderIcon","template/helpers/foreach","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var r="",i,s,o;r+=' <ul role="presentation"> ',o={hash:{},inverse:a.noop,fn:a.program(2,h,t),data:t},s=(i=n.foreach,i?i.call(e,(i=e.Author,i==null||i===!1?i:i.ContextDataValuesOrdered),o):f.call(e,"foreach",(i=e.Author,i==null||i===!1?i:i.ContextDataValuesOrdered),o));if(s||s===0)r+=s;return r+=" </ul> ",r}function h(e,t){var r="",i,s;r+=' <li class="bv-author-cdv ',i=n["if"].call(e,t.first,{hash:{},inverse:a.noop,fn:a.program(3,p,t),data:t});if(i||i===0)r+=i;r+=" ",i=n["if"].call(e,t.last,{hash:{},inverse:a.noop,fn:a.program(5,d,t),data:t});if(i||i===0)r+=i;return r+='"> <span class="bv-author-userinfo-data">',s={hash:{prefix:"contextdatavalue_",defaultDisplay:e.DimensionLabel},data:t},r+=l((i=n.extmsg,i?i.call(e,e.Id,e.msgpack,e,s):f.call(e,"extmsg",e.Id,e.msgpack,e,s)))+'</span> <span class="bv-author-userinfo-value">',s={hash:{prefixNum:3,prefix:"contextdatavalue_",prefix1:e.Id,prefix2:"_",defaultDisplay:e.ValueLabel},data:t},r+=l((i=n.extmsg,i?i.call(e,e.Value,e.msgpack,e,s):f.call(e,"extmsg",e.Value,e.msgpack,e,s)))+"</span> </li> ",r}function p(e,t){return"bv-first"}function d(e,t){return"bv-last"}function v(e,t){var r="",i,s,o;r+=" ",o={hash:{classList:"bv-no-userinfo",ariaHidden:"true"},inverse:a.noop,fn:a.program(8,m,t),data:t},s=(i=n.renderIcon,i?i.call(e,"bv-no-userinfo-icon",o):f.call(e,"renderIcon","bv-no-userinfo-icon",o));if(s||s===0)r+=s;return r+=" ",r}function m(e,t){return"&#8230;"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a=this,f=n.helperMissing,l=this.escapeExpression;s+='<dd class="bv-author-userinfo" role="presentation"> ',u=n["if"].call(t,(o=t.Author,o==null||o===!1?o:o.ContextDataValuesOrdered),{hash:{},inverse:a.program(7,v,i),fn:a.program(1,c,i),data:i});if(u||u===0)s+=u;return s+=" </dd> ",s});return t.registerPartial("contentAuthorCDVs",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!sidebar",["hbs","vendor/handlebars/runtime","hbs!contentAuthorIcon","hbs!contentAuthorStats","hbs!userBadges","hbs!contentAuthorCDVs","template/helpers/view","template/helpers/extmsg","template/helpers/ifHasFeature"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.Author,{hash:{},inverse:f.noop,fn:f.program(2,p,t)});if(i||i===0)r+=i;return r+=" ",r}function p(e,t){var i="",s,o,u;i+=' <div class="bv-off-screen"> <h4>',u={hash:{}},i+=c((s=n.extmsg,s?s.call(e,"authorDetailsOffscreenHeader",e.msgpack,e.Author,u):l.call(e,"extmsg","authorDetailsOffscreenHeader",e.msgpack,e.Author,u)))+"</h4> </div> ",u={hash:{},inverse:f.noop,fn:f.program(3,d,t)},o=(s=n.ifHasFeature,s?s.call(e,"socialAvatar",u):l.call(e,"ifHasFeature","socialAvatar",u));if(o||o===0)i+=o;i+=' <dl class="bv-author-profile-userinfo" role="presentation"> ',o=f.invokePartial(r.contentAuthorStats,"contentAuthorStats",e,n,r);if(o||o===0)i+=o;i+=" ",o=f.invokePartial(r.userBadges,"userBadges",e,n,r);if(o||o===0)i+=o;i+=" ",o=f.invokePartial(r.contentAuthorCDVs,"contentAuthorCDVs",e,n,r);if(o||o===0)i+=o;return i+=" </dl> ",i}function d(e,t){var i="",s;i+=' <div class="bv-author-avatar"> ',s=f.invokePartial(r.contentAuthorIcon,"contentAuthorIcon",e.Author,n,r);if(s||s===0)i+=s;return i+=" </div> ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=this,l=n.helperMissing,c=this.escapeExpression;s+=" ",a={hash:{tag:"div",classList:"sidebar"},inverse:f.noop,fn:f.program(1,h,i)},u=(o=n.view,o?o.call(t,t,a):l.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("sidebar",n),n.deps=["contentAuthorIcon","contentAuthorStats","userBadges","contentAuthorCDVs"],n.tplMountedViews=[],n}),BV.define("mf!bv/c2013/messages/avatar",["vendor/messageformat","framework/util/bvtrackerqueue"],function(e,t){return{avatar_rank_TOP_1:function(e){try{return function(e){var t="";return t+="Top Contributor",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `avatar_rank_TOP_1`: "+n.toString())]),""}},avatar_rank_TOP_10:function(e){try{return function(e){var t="";return t+="Top 10 Contributor",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `avatar_rank_TOP_10`: "+n.toString())]),""}},avatar_rank_TOP_25:function(e){try{return function(e){var t="";return t+="Top 25 Contributor",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `avatar_rank_TOP_25`: "+n.toString())]),""}},avatar_rank_TOP_50:function(e){try{return function(e){var t="";return t+="Top 50 Contributor",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `avatar_rank_TOP_50`: "+n.toString())]),""}},avatar_rank_TOP_100:function(e){try{return function(e){var t="";return t+="Top 100 Contributor",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `avatar_rank_TOP_100`: "+n.toString())]),""}},avatar_rank_TOP_250:function(e){try{return function(e){var t="";return t+="Top 250 Contributor",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `avatar_rank_TOP_250`: "+n.toString())]),""}},avatar_rank_TOP_500:function(e){try{return function(e){var t="";return t+="Top 500 Contributor",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `avatar_rank_TOP_500`: "+n.toString())]),""}},avatar_rank_TOP_1000:function(e){try{return function(e){var t="";return t+="Top 1000 Contributor",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `avatar_rank_TOP_1000`: "+n.toString())]),""}},avatar_rank_NONE:function(e){try{return function(e){var t="";return t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `avatar_rank_NONE`: "+n.toString())]),""}},avatar_badge_verified_purchaser:function(e){try{return function(e){var t="";return t+="Verified Purchaser",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `avatar_badge_verified_purchaser`: "+n.toString())]),""}},avatar_badge_brand:function(e){try{return function(e){var t="";return t+="Brand",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `avatar_badge_brand`: "+n.toString())]),""}},avatar_badge_staff:function(e){try{return function(e){var t="";return t+="Staff",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `avatar_badge_staff`: "+n.toString())]),""}},avatar_badge_expert:function(e){try{return function(e){var t="";return t+="Expert",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `avatar_badge_expert`: "+n.toString())]),""}},authorDetailsOffscreenHeader:function(e){try{return function(e){var t="";t+="User Details for ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.DisplayName,t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `authorDetailsOffscreenHeader`: "+n.toString())]),""}},authorProfileArchiveTabReviews:function(e){try{return function(e){var t="";return t+="Reviews",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `authorProfileArchiveTabReviews`: "+n.toString())]),""}},authorProfileArchiveTabQuestions:function(e){try{return function(e){var t="";return t+="Questions",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `authorProfileArchiveTabQuestions`: "+n.toString())]),""}},authorProfileArchiveTabAnswers:function(e){try{return function(e){var t="";return t+="Answers",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `authorProfileArchiveTabAnswers`: "+n.toString())]),""}}}}),BV.define("bv/c2013/view/sidebar",["framework/bview","underscore","hbs!sidebar","mf!bv/c2013/messages/avatar"],function(e,t,n,r){return e.extend({name:"sidebar",events:{},template:n,msgpacks:[r]})}),BV.define("bv/util/socialAvatar",["underscore","util/url"],function(e,t){function r(t){var n={};return t&&t.ThirdPartyIds&&t.ThirdPartyIds.length&&e(t.ThirdPartyIds).forEach(function(e){var t=e.Name.toLowerCase();n[t]=i(t,e.Id)}),n.facebook||n.gravatar||null}function i(e,t){return e=e.toLowerCase(),n[e]?n[e](t):null}var n={gravatar:function(e){var n=t.protocol==="https:"?"https://secure.gravatar.com/avatar/":"http://www.gravatar.com/avatar/";return n+e+"?s=100&d=blank"},facebook:function(e){return t.protocol+"//graph.facebook.com/"+e+"/picture?width=100&height=100"}};return{image:function(){return arguments.length<2?r.apply(this,arguments):i.apply(this,arguments)}}}),BV.define("bv/c2013/model/tabs",["ENV","framework/bmodel","underscore","bv/api/fetch","bv/util/socialAvatar"],function(e,t,n,r,i){return t.extend({options:{},name:"tabs",collectionFeatureName:"profileContentList",init:function(e,t){n.extend(this.options,t)},setupDataProcessing:function(){var e=this.getContent();if(!e)return;t.prototype.setupDataProcessing.apply(this,arguments)},processData:function(e){this.set({Author:e}),t.prototype.processData.apply(this,arguments)},toJSON:function(){return t.prototype.toJSON.apply(this,arguments)},_initContent:function(){var e={},t=this.getFeatureModels(this.collectionFeatureName);return t?(n(t).forEach(function(t){t.isCollection?e[t.contentType]=t:e[t.get("contentType")]=t}),this.set({content:e},{silent:!0}),e):null},_getContent:function(){return this.get("content")||this._initContent()},getContent:function(){return this._getContent()},fetchPage:function(t,s){var o=this,u=e.get("config"),a=r.nouns(this.get("subjectType")),f={Reviews:"Comments",Questions:"Answers",Answers:"Questions"},l=this.getContent(),c=n(l).keys(),h=s.Id,p=r.get(a,h).withStatsOn(n(l).keys()).withoutContentLocaleFilter(),d=n(c).map(function(e){var i=u.page.details[r.noun(e)]||u.page,s=i.size,o=i.size2n,a=t>1?o:s,l=t>1?s+o*(t-2):0,c=r.get(r.nouns(e)).include(["Authors","Products"]).limit(a).offset(l),p=f[r.Nouns(e)];if(!n(p).isEmpty()){var d=u.page.details[r.noun(p)]||u.page,v=d.size;c=c.include([p]).limitIncluded(p).to(v)}return c=c.filterBy("AuthorId",h),c.withoutContentLocaleFilter(),c});d.unshift(p);var v=r.get("batch",null,d),m=s;try{v.fetch("author").done(function(e){var t=n(e).find(function(e){return e.contentType==="authors"});t&&(m=t.data.Results[0]);if(!m)return;m.Content=m.Content||{};var s=0;n(l).forEach(function(i){var o=i.get("contentType"),u=n(e).find(function(e){return e.contentType===r.nouns(o)});n(m.Content[o]).extend(u.data),m.Content[o].List=u.data.Results,i.processData(t.data),i.getContent().reset(u.data.Results),u.data.Results.length>0&&s++}),m.ContentLength=s,m._avatarImage=i.image(m),o.set("Author",m),o.publish("authorresponse",m)})}catch(g){o.set("Author",m),o.publish("authorresponse",m)}}})}),BV.define("template/helpers/subviews",["vendor/handlebars/runtime","underscore"],function(e,t){function r(r){var s=[],o;return r.viewList&&r._subview?(o=e.partials[r.viewName],n=[],o&&i(o),t(r.viewList).forEach(function(e){var i=e.viewName;i=e.viewInstanceName?i+":"+e.viewInstanceName:i,t(n).indexOf(i)===-1&&s.push(r._subview[e.viewIndex])}),new e.SafeString(s.join(""))):""}function i(r){n=n.concat(r.tplMountedViews),t(r.deps).forEach(function(t){i(e.partials[t])})}var n;return e.registerHelper("subviews",r),r}),BV.define("hbs!tabs",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/conditionalContainer","template/helpers/foreach","template/helpers/notEqual","template/helpers/extmsg","template/helpers/subviews"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+=' <div class="bv-fullpro-archive-container"> ',o={hash:{tag:"div",classList:"fullpro-tab-container"},inverse:c.noop,fn:c.program(2,d,t),data:t},s=(i=n.conditionalContainer,i?i.call(e,e,o):h.call(e,"conditionalContainer",e,o));if(s||s===0)r+=s;r+=" ",o={hash:{},inverse:c.noop,fn:c.program(12,E,t),data:t},s=(i=n.notEqual,i?i.call(e,(i=e.Author,i==null||i===!1?i:i.ContentLength),0,o):h.call(e,"notEqual",(i=e.Author,i==null||i===!1?i:i.ContentLength),0,o));if(s||s===0)r+=s;return r+=" </div> ",r}function d(e,t){var r="",i,s,o;r+=" ",o={hash:{tag:"ul",classList:"fullpro-tabs",role:"tablist"},inverse:c.noop,fn:c.programWithDepth(v,t,e),data:t},s=(i=n.conditionalContainer,i?i.call(e,e,o):h.call(e,"conditionalContainer",e,o));if(s||s===0)r+=s;return r+=" ",r}function v(e,t,r){var i="",s,o,u;i+=" ",u={hash:{},inverse:c.noop,fn:c.programWithDepth(m,t,r),data:t},o=(s=n.foreach,s?s.call(e,(s=e.Author,s==null||s===!1?s:s.Content),u):h.call(e,"foreach",(s=e.Author,s==null||s===!1?s:s.Content),u));if(o||o===0)i+=o;return i+=" ",i}function m(e,t,r){var i="",s,o,u;i+=" ",u={hash:{},inverse:c.noop,fn:c.programWithDepth(g,t,r),data:t},o=(s=n.notEqual,s?s.call(e,(s=e.Statistics,s==null||s===!1?s:s.TotalCount),0,u):h.call(e,"notEqual",(s=e.Statistics,s==null||s===!1?s:s.TotalCount),0,u));if(o||o===0)i+=o;return i+=" ",i}function g(e,t,r){var i="",s,o,u;i+=' <li role="presentation"> <a href="#" class="bv-fullpro-tab-link bv-fullpro-tab-'+l((s=t.key,typeof s===f?s.apply(e):s))+" bv-focusable ",o=n["if"].call(e,t.first,{hash:{},inverse:c.noop,fn:c.program(6,y,t),data:t});if(o||o===0)i+=o;i+='" tab="'+l((s=t.key,typeof s===f?s.apply(e):s))+'" tabindex="0" aria-selected=',o=n["if"].call(e,t.first,{hash:{},inverse:c.program(10,w,t),fn:c.program(8,b,t),data:t});if(o||o===0)i+=o;return i+=' role="tab"> ',u={hash:{prefix:"authorProfileArchiveTab"},data:t},i+=l((s=n.extmsg,s?s.call(e,t.key,r.msgpack,e,u):h.call(e,"extmsg",t.key,r.msgpack,e,u)))+" "+l((s=(s=e.Statistics,s==null||s===!1?s:s.TotalCount),typeof s===f?s.apply(e):s))+" </a> </li> ",i}function y(e,t){return"bv-active"}function b(e,t){return'"true"'}function w(e,t){return'"false"'}function E(e,t){var r="",i,s;return r+=' <div class="bv-fullpro-archive-content"> ',s={hash:{},data:t},r+=l((i=n.subviews,i?i.call(e,e,s):h.call(e,"subviews",e,s)))+" </div> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+=" ",a={hash:{tag:"dd",classList:"collection-tab fullpro-archive"},inverse:c.noop,fn:c.program(1,p,i),data:i},u=(o=n.view,o?o.call(t,t,a):h.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("tabs",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/tabs",["framework/bview","jquery","underscore","hbs!tabs","mf!bv/c2013/messages/avatar","framework/util/bvtracker","util/specialKeys","bv/util/contentType","bv/util/focusManager","bv/util/productInfo"],function(e,t,n,r,i,s,o,u,a,f){return e.extend({name:"tabs",classList:["tabs"],events:{"click a.bv-fullpro-tab-link":"switchTab","keydown a.bv-fullpro-tab-link":"switchTab"},template:r,msgpacks:[i],attach:function(r){e.prototype.attach.apply(this,arguments);var i=n(this.model.getFeatureModels(this.model.collectionFeatureName)).filter(function(e){return e.get("TotalResults")>0});if(i&&i.length>0){var s=i[0],o=s.isCollection?s.contentType:s.get("contentType");this.setActiveArchiveTab(o)}this.$viewEl.find(".bv-fullpro-tab-link").each(function(e){t(this).attr("id","bv-fullpro-tab-"+e)}),n(this.views).forEach(function(e,t){e.$viewEl.attr("id","bv-fullpro-content-"+t)})},switchTab:function(e){var t;e.keyCode?t=this.switchTabByKey(e):(e.preventDefault(),t=e.target.attributes.tab.value);if(t){var n=this.setActiveArchiveTab(t),r=n.$el.find(".bv-fullpro-tab-"+t);r.length&&a.moveFocus(r),s.feature({type:"Used",name:"TabClick",detail1:t,bvProduct:f.PROFILES,categoryId:f.getCategoryId(this)})}},switchTabByKey:function(e){var r=[o.LEFT,o.RIGHT,o.UP,o.DOWN];if(!n.contains(r,e.keyCode))return;e.preventDefault();var i;if(e.keyCode===o.RIGHT||e.keyCode===o.DOWN)i=t(e.target).parent().next().find(".bv-fullpro-tab-link"),i[0]||(i=this.$viewEl.find(".bv-fullpro-tab-link").first());if(e.keyCode===o.LEFT||e.keyCode===o.UP)i=t(e.target).parent().prev().find(".bv-fullpro-tab-link"),i[0]||(i=this.$viewEl.find(".bv-fullpro-tab-link").last());return i[0].attributes.tab.value},setActiveArchiveTab:function(e){e=u.Nouns(e);var t=this.$viewEl.find(".bv-fullpro-tab-link"),r=t.removeClass("bv-active").attr("aria-selected","false").filter(".bv-fullpro-tab-"+e).attr("aria-selected","true").addClass("bv-active"),i;return n(this.views).forEach(function(t){u.Nouns(t.contentType)===e?(i=t,t.$viewEl.css("display","block").attr("aria-hidden","false").attr("aria-expanded","true")):t.$viewEl.css("display","none").attr("aria-hidden","true").attr("aria-expanded","false")}),i}})}),BV.define("framework/bcollection",["backbone","underscore","framework/bevented","framework/bdata","framework/bmodelbase","jquery","framework/util/bvreporter"],function(e,t,n,r,i,s,o){var u=e.Collection.extend(n);return u=u.extend(r),u=u.extend(i),u.extend({isCollection:!0,initialize:function(e,n){o.debug("Initializing collection",this.name),this._initDeferreds(),this.options=t.extend({},this.options,n);var r=this.options.parent;r?(t(this).extend(this._getParentProps(r,n)),this.parent=r):t(this).extend(this._getProps()),this.parent=r,t.isFunction(this.init)&&this.init.apply(this,arguments),this.attachDataReady(r),this.onDataReady(this._dataReady,this)},attachDataReady:function(e){o.debug("Collection",this.getScope(),"attaching data ready"),e?e.onDataReady(this._processData,this):this.dataReady()},_dataReady:function(){var e=this,n=this.models;if(n.length){var r=t.invoke(n,"dataProcessedPromise");s.when.apply(s,r).done(function(){e.dataProcessed()})}else this.dataProcessed()},_processData:function(e){this.dataReady(e)},_setParent:function(e){e.parent=this},reset:function(n,r){return o.debug("Resetting collection",this.name),n&&t(n).each(this._setParent,this),e.Collection.prototype.reset.call(this,n,r)},add:function(n,r){return n&&(n=t.isArray(n)?n.slice():[n],o.debug("Adding models to collection",this.name,n),t(n).each(this._setParent,this)),e.Collection.prototype.add.call(this,n,r)},loadMore:function(e){o.debug("Loading more for collection",this.name);var n=this.size();this.add(e,{silent:!0}),this.trigger("loadmore",this,t(this.models).rest(n),n)},toJSON:function(){return this.invoke("toJSON")}})}),BV.define("util/lookup",["underscore"],function(e){return function(t,n,r){var i=r||{};if(e(n).isEmpty())return t;var s=n.split("."),o=t||{},u=o[s.shift()];while(u&&s.length)u=u[s.shift()];return e(u).isUndefined()?i.undefinedDefault:u}}),BV.define("dimsumFields!",[],{rating:{Value:{hideOnSubmission:!1,id:"Value",allowUserCreated:!1,autoPopulate:!1,displayLabel:"Value of Product",possibleValues:[],filterable:!1,subjectIDRequired:!1,name:{$schema:"http://config.bazaarvoice.com/api/schemas/Configuration/LocalizedText/1.0.0",en:"Value of Product",defaultValue:"Value of Product"},disabledPossibleValues:[],submissionFormLabel:"How would you rate the value of this product?",type:"RATING",required:!0,hideDisplay:!1},Quality:{hideOnSubmission:!1,id:"Quality",allowUserCreated:!1,autoPopulate:!1,displayLabel:"Quality of Product",possibleValues:[],filterable:!1,subjectIDRequired:!1,name:{$schema:"http://config.bazaarvoice.com/api/schemas/Configuration/LocalizedText/1.0.0",en:"Quality of Product",defaultValue:"Quality of Product"},disabledPossibleValues:[],submissionFormLabel:"How would you rate the quality of this product?",type:"RATING",required:!0,hideDisplay:!1},Fit_22:{sliderDimension2Label:"Full Size Larger",sliderSize:5,allowUserCreated:!1,displayLabel:"Size",possibleValues:[{id:"valueLabel1",displayLabel:"Full Size Smaller"},{id:"valueLabel2",displayLabel:"Half Size Smaller"},{id:"valueLabel3",displayLabel:"True To Size"},{id:"valueLabel4",displayLabel:"Half Size Larger"},{id:"valueLabel5",displayLabel:"Full Size Larger"}],subjectIDRequired:!1,disabledPossibleValues:[],type:"SLIDER",hideDisplay:!1,id:"Fit_22",hideOnSubmission:!1,sliderDimension1Label:"Full Size Smaller",autoPopulate:!1,filterable:!1,name:{$schema:"http://config.bazaarvoice.com/api/schemas/Configuration/LocalizedText/1.0.0",en_US:"Size",en:"Size",defaultValue:"Fit"},submissionFormLabel:"How would you rate the size of this product?",required:!1},Width_1:{sliderDimension2Label:"Wide",sliderSize:3,allowUserCreated:!1,displayLabel:"Width",possibleValues:[{id:"valueLabel1",displayLabel:"Felt Narrower Than Marked"},{id:"valueLabel2",displayLabel:"Felt True To Width"},{id:"valueLabel3",displayLabel:"Felt Wider Than Marked"}],subjectIDRequired:!1,disabledPossibleValues:[],type:"SLIDER",hideDisplay:!1,id:"Width_1",hideOnSubmission:!1,sliderDimension1Label:"Narrow",autoPopulate:!1,filterable:!1,name:{$schema:"http://config.bazaarvoice.com/api/schemas/Configuration/LocalizedText/1.0.0",en_US:"Width",en:"Width"},submissionFormLabel:"How would you rate the width of this product?",required:!1}},contextdatavalue:{},additionalfield:{},tag:{IntendedUse:{hideOnSubmission:!1,id:"IntendedUse",allowUserCreated:!1,autoPopulate:!1,displayLabel:"Best Use / Intended Use",possibleValues:[{id:"CasualLesisure",displayLabel:"Casual / Lesisure"},{id:"FitnessTraining",displayLabel:"Fitness / Training"},{id:"DutyService",displayLabel:"Duty / Service"},{id:"FarmRanch",displayLabel:"Farm / Ranch"},{id:"Warehouse",displayLabel:"Warehouse"},{id:"Office",displayLabel:"Office"},{id:"Hunting",displayLabel:"Hunting"},{id:"Bowhunting",displayLabel:"Bowhunting"},{id:"WaterfowlHunting",displayLabel:"Waterfowl Hunting"},{id:"UplandBirdHunting",displayLabel:"Upland / Bird Hunting"},{id:"Fishing",displayLabel:"Fishing"},{id:"FlyFishing",displayLabel:"Fly Fishing"},{id:"IceFishing",displayLabel:"Ice Fishing"},{id:"Hiking",displayLabel:"Hiking"},{id:"Camping",displayLabel:"Camping"},{id:"Landscaping",displayLabel:"Landscaping"},{id:"Gardening",displayLabel:"Gardening"},{id:"Construction",displayLabel:"Construction"},{id:"FoodService",displayLabel:"Food Service"},{id:"HealthService",displayLabel:"Health Service"},{id:"Outfitter",displayLabel:"Outfitter"},{id:"Backpacking",displayLabel:"Backpacking"},{id:"Other",displayLabel:"Other"},{id:"OutdoorNinja",displayLabel:"Outdoor Ninja"},{id:"StudentSchool",displayLabel:"Student / School"}],filterable:!1,subjectIDRequired:!1,name:{$schema:"http://config.bazaarvoice.com/api/schemas/Configuration/LocalizedText/1.0.0",en_US:"Intended Use",en:"Intended Use"},disabledPossibleValues:[],submissionFormLabel:"Best Use / Intended Use - Select Option Below",type:"MULTICHOICE_TAGGROUP",required:!1,hideDisplay:!1}}}),BV.define("bv/util/configFieldReader",["underscore","framework/util/bvreporter"],function(e,t){function u(e){this._config=e}var n="contextdatavalue",r="additionalfield",i="rating",s="tag",o={contextdatavalues:n,cdv:n,additionalfields:r,ratings:i,tags:s},a=u.prototype;return a.getField=function(n,r){if(e.isObject(n))return n;n=o[n.toLowerCase()]||n.toLowerCase();var i=this._config[n];if(!i)return t.warn("Unable to get details for config field type "+n+", not found"),!1;var s=i[r];return s?s:(t.warn("Unable to find config field "+r),!1)},a.getLabel=function(e,n){var r=this.getField(e,n);return r?r.displayLabel:(t.warn("Unable to retrieve label for field "+n),!1)},a.getValueLabels=function(n,r){var i=this.getField(n,r);if(!i)return t.warn("Unable to retrieve possible value labels for field "+r),!1;var s={};return e(i.possibleValues).forEach(function(e){s[e.id]=e.displayLabel}),s},a.getFieldType=function(e,n){var r=this.getField(e,n);return r?r.type:(t.warn("Unable to retrieve type for field"+n),!1)},a.getLabelsObject=function(e,n,r){var i=this.getField(e,n);if(!i)return t.warn("Unable to retrieve label for field "+n),!1;var s={};return s.Label=i.displayLabel,i.type==="SLIDER"&&(s.MinLabel=i.sliderDimension1Label,s.MaxLabel=i.sliderDimension2Label,s.ValueRange=i.sliderSize,r&&r.value&&(s.ValueLabel=i.possibleValues[r.value-1].displayLabel)),s},u}),BV.define("bv/util/configFieldInfo",["dimsumFields!","./configFieldReader"],function(e,t){return new t(e)}),BV.define("dimsumFields!fields",[],{rating:{Value:{hideOnSubmission:!1,id:"Value",allowUserCreated:!1,autoPopulate:!1,displayLabel:"Value of Product",possibleValues:[],filterable:!1,subjectIDRequired:!1,name:{$schema:"http://config.bazaarvoice.com/api/schemas/Configuration/LocalizedText/1.0.0",en:"Value of Product",defaultValue:"Value of Product"},disabledPossibleValues:[],submissionFormLabel:"How would you rate the value of this product?",type:"RATING",required:!0,hideDisplay:!1},Quality:{hideOnSubmission:!1,id:"Quality",allowUserCreated:!1,autoPopulate:!1,displayLabel:"Quality of Product",possibleValues:[],filterable:!1,subjectIDRequired:!1,name:{$schema:"http://config.bazaarvoice.com/api/schemas/Configuration/LocalizedText/1.0.0",en:"Quality of Product",defaultValue:"Quality of Product"},disabledPossibleValues:[],submissionFormLabel:"How would you rate the quality of this product?",type:"RATING",required:!0,hideDisplay:!1},Fit_22:{sliderDimension2Label:"Full Size Larger",sliderSize:5,allowUserCreated:!1,displayLabel:"Size",possibleValues:[{id:"valueLabel1",displayLabel:"Full Size Smaller"},{id:"valueLabel2",displayLabel:"Half Size Smaller"},{id:"valueLabel3",displayLabel:"True To Size"},{id:"valueLabel4",displayLabel:"Half Size Larger"},{id:"valueLabel5",displayLabel:"Full Size Larger"}],subjectIDRequired:!1,disabledPossibleValues:[],type:"SLIDER",hideDisplay:!1,id:"Fit_22",hideOnSubmission:!1,sliderDimension1Label:"Full Size Smaller",autoPopulate:!1,filterable:!1,name:{$schema:"http://config.bazaarvoice.com/api/schemas/Configuration/LocalizedText/1.0.0",en_US:"Size",en:"Size",defaultValue:"Fit"},submissionFormLabel:"How would you rate the size of this product?",required:!1},Width_1:{sliderDimension2Label:"Wide",sliderSize:3,allowUserCreated:!1,displayLabel:"Width",possibleValues:[{id:"valueLabel1",displayLabel:"Felt Narrower Than Marked"},{id:"valueLabel2",displayLabel:"Felt True To Width"},{id:"valueLabel3",displayLabel:"Felt Wider Than Marked"}],subjectIDRequired:!1,disabledPossibleValues:[],type:"SLIDER",hideDisplay:!1,id:"Width_1",hideOnSubmission:!1,sliderDimension1Label:"Narrow",autoPopulate:!1,filterable:!1,name:{$schema:"http://config.bazaarvoice.com/api/schemas/Configuration/LocalizedText/1.0.0",en_US:"Width",en:"Width"},submissionFormLabel:"How would you rate the width of this product?",required:!1}},contextdatavalue:{},additionalfield:{},tag:{IntendedUse:{hideOnSubmission:!1,id:"IntendedUse",allowUserCreated:!1,autoPopulate:!1,displayLabel:"Best Use / Intended Use",possibleValues:[{id:"CasualLesisure",displayLabel:"Casual / Lesisure"},{id:"FitnessTraining",displayLabel:"Fitness / Training"},{id:"DutyService",displayLabel:"Duty / Service"},{id:"FarmRanch",displayLabel:"Farm / Ranch"},{id:"Warehouse",displayLabel:"Warehouse"},{id:"Office",displayLabel:"Office"},{id:"Hunting",displayLabel:"Hunting"},{id:"Bowhunting",displayLabel:"Bowhunting"},{id:"WaterfowlHunting",displayLabel:"Waterfowl Hunting"},{id:"UplandBirdHunting",displayLabel:"Upland / Bird Hunting"},{id:"Fishing",displayLabel:"Fishing"},{id:"FlyFishing",displayLabel:"Fly Fishing"},{id:"IceFishing",displayLabel:"Ice Fishing"},{id:"Hiking",displayLabel:"Hiking"},{id:"Camping",displayLabel:"Camping"},{id:"Landscaping",displayLabel:"Landscaping"},{id:"Gardening",displayLabel:"Gardening"},{id:"Construction",displayLabel:"Construction"},{id:"FoodService",displayLabel:"Food Service"},{id:"HealthService",displayLabel:"Health Service"},{id:"Outfitter",displayLabel:"Outfitter"},{id:"Backpacking",displayLabel:"Backpacking"},{id:"Other",displayLabel:"Other"},{id:"OutdoorNinja",displayLabel:"Outdoor Ninja"},{id:"StudentSchool",displayLabel:"Student / School"}],filterable:!1,subjectIDRequired:!1,name:{$schema:"http://config.bazaarvoice.com/api/schemas/Configuration/LocalizedText/1.0.0",en_US:"Intended Use",en:"Intended Use"},disabledPossibleValues:[],submissionFormLabel:"Best Use / Intended Use - Select Option Below",type:"MULTICHOICE_TAGGROUP",required:!1,hideDisplay:!1}}}),BV.define("dimsumFields!fieldCategories",[],{fieldCategoryMap:{tag_Pro:"product",tag_BestUsesPharmacyHealth:"product",tag_BestUsesPets:"product",tag_BestUsesBeauty:"product",tag_BestUsesB2BElectronics:"product",tag_BestUsesCleaningSuppliesCPG:"product",tag_BestUsesBooks:"product",tag_BestUsesFood:"product",tag_BestUsesSoftware:"product",contextdatavalue_LengthOfOwnership:"product",tag_BestUsesFlowersGifts:"product",tag_BestUsesGames:"product",tag_BestUsesTelecom:"product",tag_BestUsesEducation:"product",tag_BestUsesSportingGoods:"product",tag_BestUsesConsumerElectronics:"product",tag_BestUsesToysHobbies:"product",tag_BestUsesCooking:"product",tag_BestUsesMusic:"product",tag_BestUsesTravel:"product",contextdatavalue_DomainExpertise:"product",tag_BestUsesHomeGoods:"product",tag_BestUsesApparel:"product",additionalfield_OrderNumber:"product",tag_Con:"product",tag_BestUsesOfficeSupplies:"product",tag_IntendedUse:"product",tag_BestUsesEntertainment:"product",tag_BestUsesDVDs:"product",contextdatavalue_IncentivizedReview:"product",contextdatavalue_BodyType:"people",contextdatavalue_Age:"people",additionalfield_Occupation:"people",contextdatavalue_FashionStyle:"people",contextdatavalue_Gender:"people",rating_Value:"ratings",rating_Quality:"ratings",rating_Fit_22:"ratings",rating_Width:"ratings",rating_Width_1:"ratings",rating_Appearance1:"ratings",rating_Comfort:"ratings"},fieldCategoryOrder:["baseReviewQuestions","basicUserInfo","people","ratings","product","netPromoterScore","hiddenPeopleQuestions","hiddenProductQuestions"]}),BV.define("mf!bv/c2013/messages/contentItem",["vendor/messageformat","framework/util/bvtrackerqueue"],function(e,t){return{syndicationText:function(e){try{return function(e){var t="";t+='Originally posted on <a href="';if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.ContentLink,t+='" class="bv-focusable">';if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.Name,t+="</a>",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `syndicationText`: "+n.toString())]),""}},syndicationTextNoLink:function(e){try{return function(e){var t="";t+="Originally posted on ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.Name,t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `syndicationTextNoLink`: "+n.toString())]),""}},productFamilyText:function(e){try{return function(e){var t="";t+='Originally posted on <a href="';if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.Url,t+='" class="bv-focusable">';if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.Name,t+="</a>",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `productFamilyText`: "+n.toString())]),""}},productFamilyTextNoLink:function(e){try{return function(e){var t="";t+="Originally posted on ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.Name,t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `productFamilyTextNoLink`: "+n.toString())]),""}},questionCloseForAnswers:function(e){try{return function(e){var t="";return t+="This question is closed for new answers!",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `questionCloseForAnswers`: "+n.toString())]),""}},contentPreview_Reviews:function(e){try{return function(e){var t="";return t+="Thank you for submitting a review! Your review is being moderated and may take up to a few days to appear. You will be receiving an email shortly to validate the review.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `contentPreview_Reviews`: "+n.toString())]),""}},contentPreview_Comments:function(e){try{return function(e){var t="";return t+="Thank you for submitting a comment! Your comment is being moderated and may take up to a few days to appear.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `contentPreview_Comments`: "+n.toString())]),""}},contentPreview_Questions:function(e){try{return function(e){var t="";return t+="Thank you for submitting a question! Your question is being moderated and may take up to a few days to appear.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `contentPreview_Questions`: "+n.toString())]),""}},content_secondary_btn_Reviews:function(e){try{return function(e){var t="";return t+="Comment",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `content_secondary_btn_Reviews`: "+n.toString())]),""}},offscreen_content_secondary_btn_Reviews:function(e){try{return function(e){var t="";t+="Comment on review by ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.authorDisplayName,t+=".",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_content_secondary_btn_Reviews`: "+n.toString())]),""}},content_secondary_btn_Questions:function(e){try{return function(e){var t="";return t+="Answer this Question",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `content_secondary_btn_Questions`: "+n.toString())]),""}},offscreen_content_secondary_btn_Questions:function(e){try{return function(e){var t="";t+="Answer this question by ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.authorDisplayName,t+=".",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_content_secondary_btn_Questions`: "+n.toString())]),""}},offscreen_play_media:function(e){try{return function(e){var t="";return t+="Play Video",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_play_media`: "+n.toString())]),""}},offscreen_photo:function(e){try{return function(e){var t="";return t+="Photo",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_photo`: "+n.toString())]),""}},offscreen_content_secondary_value_of_one_means:function(e){try{return function(e){var t="";return t+="Rating of 1 means",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_content_secondary_value_of_one_means`: "+n.toString())]),""}},offscreen_content_secondary_value_max_means:function(e){try{return function(e){var t="";t+="Rating of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.ValueRange,t+=" means",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_content_secondary_value_max_means`: "+n.toString())]),""}},offscreen_secondary_rating:function(e){try{return function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.Value,t+=" out of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.ValueRange,t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_secondary_rating`: "+n.toString())]),""}},responseFrom:function(e){try{return function(e){var t="";t+="Response from ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.clientName,t+=":",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `responseFrom`: "+n.toString())]),""}},responseFrom_reviewresponse:function(e){try{return function(e){var t="";t+="Response from ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.Department,t+=":",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `responseFrom_reviewresponse`: "+n.toString())]),""}},contentItem_defaultPhotoCaption:function(e){try{return function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");var n="ContentType",r=e[n],i=0,s={review:function(e){var t="";t+="Review photo ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.ItemNumber,t+=" ",t},comment:function(e){var t="";t+="Comment photo ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.ItemNumber,t+=" ",t},clientresponse:function(e){var t="";t+="Comment photo ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.ItemNumber,t+=" ",t},question:function(e){var t="";t+="Question photo ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.ItemNumber,t+=" ",t},answer:function(e){var t="";t+="Answer photo ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.ItemNumber,t+=" ",t},other:function(e){var t="";t+="Content photo ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.ItemNumber,t+=" ",t}};return t+=(s[r]||s.other)(e),t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `contentItem_defaultPhotoCaption`: "+n.toString())]),""}},contentItem_defaultVideoCaption:function(e){try{return function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");var n="ContentType",r=e[n],i=0,s={review:function(e){var t="";t+="Review video ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.ItemNumber,t+=" ",t},comment:function(e){var t="";t+="Comment video ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.ItemNumber,t+=" ",t},clientresponse:function(e){var t="";t+="Comment video ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.ItemNumber,t+=" ",t},question:function(e){var t="";t+="Question video ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.ItemNumber,t+=" ",t},answer:function(e){var t="";t+="Answer video ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.ItemNumber,t+=" ",t},other:function(e){var t="";t+="Content video ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.ItemNumber,t+=" ",t}};return t+=(s[r]||s.other)(e),t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `contentItem_defaultVideoCaption`: "+n.toString())]),""}},contentFeaturedBadge:function(e){try{return function(e){var t="";return t+="Featured",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `contentFeaturedBadge`: "+n.toString())]),""}},contentFeaturedBadgeAltText:function(e){try{return function(e){var t="";return t+="Featured review",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `contentFeaturedBadgeAltText`: "+n.toString())]),""}},contentVerifiedPurchaserBadge:function(e){try{return function(e){var t="";return t+="Verified Purchaser",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `contentVerifiedPurchaserBadge`: "+n.toString())]),""}},contentVerifiedPurchaserBadgeAltText:function(e){try{return function(e){var t="";return t+="Verified purchaser",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `contentVerifiedPurchaserBadgeAltText`: "+n.toString())]),""}},contentIncentivizedReviewBadge:function(e){try{return function(e){var t="";return t+="Received Free Product",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `contentIncentivizedReviewBadge`: "+n.toString())]),""}},headToHeadSummary:function(e){try{return function(e){var t="";t+="Review by ";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.authorDisplayName,t+=". Written ";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.submissionTimeAgo,t+=". ";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.Rating,t+=" out of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.RatingRange,t+=" stars.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `headToHeadSummary`: "+n.toString())]),""}}}}),function(e){function O(e,t,n,r){var i=n.lang();return i[e].call?i[e](n,r):i[e][t]}function M(e,t){return function(n){return B(e.call(this,n),t)}}function _(e){return function(t){var n=e.call(this,t);return n+this.lang().ordinal(n)}}function D(e,t,n){this._d=e,this._isUTC=!!t,this._a=e._a||null,this._lang=n||!1}function P(e){var t=this._data={},n=e.years||e.y||0,r=e.months||e.M||0,i=e.weeks||e.w||0,s=e.days||e.d||0,o=e.hours||e.h||0,u=e.minutes||e.m||0,a=e.seconds||e.s||0,f=e.milliseconds||e.ms||0;this._milliseconds=f+a*1e3+u*6e4+o*36e5,this._days=s+i*7,this._months=r+n*12,t.milliseconds=f%1e3,a+=H(f/1e3),t.seconds=a%60,u+=H(a/60),t.minutes=u%60,o+=H(u/60),t.hours=o%24,s+=H(o/24),s+=i*7,t.days=s%30,r+=H(s/30),t.months=r%12,n+=H(r/12),t.years=n,this._lang=!1}function H(e){return e<0?Math.ceil(e):Math.floor(e)}function B(e,t){var n=e+"";while(n.length<t)n="0"+n;return n}function j(e,t,n){var r=t._milliseconds,i=t._days,s=t._months,o;r&&e._d.setTime(+e+r*n),i&&e.date(e.date()+i*n),s&&(o=e.date(),e.date(1).month(e.month()+s*n).date(Math.min(o,e.daysInMonth())))}function F(e){return Object.prototype.toString.call(e)==="[object Array]"}function I(e,t){var n=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),i=0,s;for(s=0;s<n;s++)~~e[s]!==~~t[s]&&i++;return i+r}function q(e,t,n,r){var i,s,o=[];for(i=0;i<7;i++)o[i]=e[i]=e[i]==null?i===2?1:0:e[i];return e[7]=o[7]=t,e[8]!=null&&(o[8]=e[8]),e[3]+=n||0,e[4]+=r||0,s=new Date(0),t?(s.setUTCFullYear(e[0],e[1],e[2]),s.setUTCHours(e[3],e[4],e[5],e[6])):(s.setFullYear(e[0],e[1],e[2]),s.setHours(e[3],e[4],e[5],e[6])),s._a=o,s}function R(e,n){var r,i,o=[];!n&&u&&(n=BV.require("./lang/"+e));for(r=0;r<a.length;r++)n[a[r]]=n[a[r]]||s.en[a[r]];for(r=0;r<12;r++)i=t([2e3,r]),o[r]=new RegExp("^"+(n.months[r]||n.months(i,""))+"|^"+(n.monthsShort[r]||n.monthsShort(i,"")).replace(".",""),"i");return n.monthsParse=n.monthsParse||o,s[e]=n,n}function U(e){var n=typeof e=="string"&&e||e&&e._lang||null;return n?s[n]||R(n):t}function z(e){return e.match(/\[.*\]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function W(e){var t=e.match(l),n,r;for(n=0,r=t.length;n<r;n++)A[t[n]]?t[n]=A[t[n]]:t[n]=z(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=typeof t[n].call=="function"?t[n].call(i,e):t[n];return s}}function X(e,t){function r(t){return e.lang().longDateFormat[t]||t}var n=5;while(n--&&c.test(t))t=t.replace(c,r);return C[t]||(C[t]=W(t)),C[t](e)}function V(e){switch(e){case"DDDD":return v;case"YYYY":return m;case"S":case"SS":case"SSS":case"DDD":return d;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return g;case"Z":case"ZZ":return y;case"T":return b;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return p;default:return new RegExp(e.replace("\\",""))}}function $(e,t,n,r){var i,s;switch(e){case"M":case"MM":n[1]=t==null?0:~~t-1;break;case"MMM":case"MMMM":for(i=0;i<12;i++)if(U().monthsParse[i].test(t)){n[1]=i,s=!0;break}s||(n[8]=!1);break;case"D":case"DD":case"DDD":case"DDDD":t!=null&&(n[2]=~~t);break;case"YY":n[0]=~~t+(~~t>70?1900:2e3);break;case"YYYY":n[0]=~~Math.abs(t);break;case"a":case"A":r.isPm=(t+"").toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":n[3]=~~t;break;case"m":case"mm":n[4]=~~t;break;case"s":case"ss":n[5]=~~t;break;case"S":case"SS":case"SSS":n[6]=~~(("0."+t)*1e3);break;case"Z":case"ZZ":r.isUTC=!0,i=(t+"").match(x),i&&i[1]&&(r.tzh=~~i[1]),i&&i[2]&&(r.tzm=~~i[2]),i&&i[0]==="+"&&(r.tzh=-r.tzh,r.tzm=-r.tzm)}t==null&&(n[8]=!1)}function J(e,t){var n=[0,0,1,0,0,0,0],r={tzh:0,tzm:0},i=t.match(l),s,o;for(s=0;s<i.length;s++)o=(V(i[s]).exec(e)||[])[0],o&&(e=e.slice(e.indexOf(o)+o.length)),A[i[s]]&&$(i[s],o,n,r);return r.isPm&&n[3]<12&&(n[3]+=12),r.isPm===!1&&n[3]===12&&(n[3]=0),q(n,r.isUTC,r.tzh,r.tzm)}function K(e,t){var n,r=e.match(h)||[],i,s=99,o,u,a;for(o=0;o<t.length;o++)u=J(e,t[o]),i=X(new D(u),t[o]).match(h)||[],a=I(r,i),a<s&&(s=a,n=u);return n}function Q(e){var t="YYYY-MM-DDT",n;if(w.exec(e)){for(n=0;n<4;n++)if(S[n][1].exec(e)){t+=S[n][0];break}return y.exec(e)?J(e,t+" Z"):J(e,t)}return new Date(e)}function G(e,t,n,r,i){var s=i.relativeTime[e];return typeof s=="function"?s(t||1,!!n,e,r):s.replace(/%d/i,t||1)}function Y(e,t,n){var i=r(Math.abs(e)/1e3),s=r(i/60),o=r(s/60),u=r(o/24),a=r(u/365),f=i<45&&["s",i]||s===1&&["m"]||s<45&&["mm",s]||o===1&&["h"]||o<22&&["hh",o]||u===1&&["d"]||u<=25&&["dd",u]||u<=45&&["M"]||u<345&&["MM",r(u/30)]||a===1&&["y"]||["yy",a];return f[2]=t,f[3]=e>0,f[4]=n,G.apply({},f)}function Z(e,n){t.fn[e]=function(e){var t=this._isUTC?"UTC":"";return e!=null?(this._d["set"+t+n](e),this):this._d["get"+t+n]()}}function et(e){t.duration.fn[e]=function(){return this._data[e]}}function tt(e,n){t.duration.fn["as"+e]=function(){return+this/n}}var t,n="1.7.2",r=Math.round,i,s={},o="en",u=typeof module!="undefined"&&module.exports,a="months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),f=/^\/?Date\((\-?\d+)/i,l=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|.)/g,c=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?)/g,h=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,p=/\d\d?/,d=/\d{1,3}/,v=/\d{3}/,m=/\d{1,4}/,g=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,y=/Z|[\+\-]\d\d:?\d\d/i,b=/T/i,w=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,E="YYYY-MM-DDTHH:mm:ssZ",S=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],x=/([\+\-]|\d\d)/gi,T="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),N={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},C={},k="DDD w M D d".split(" "),L="M D H h m s w".split(" "),A={M:function(){return this.month()+1},MMM:function(e){return O("monthsShort",this.month(),this,e)},MMMM:function(e){return O("months",this.month(),this,e)},D:function(){return this.date()},DDD:function(){var e=new Date(this.year(),this.month(),this.date()),t=new Date(this.year(),0,1);return~~((e-t)/864e5+1.5)},d:function(){return this.day()},dd:function(e){return O("weekdaysMin",this.day(),this,e)},ddd:function(e){return O("weekdaysShort",this.day(),this,e)},dddd:function(e){return O("weekdays",this.day(),this,e)},w:function(){var e=new Date(this.year(),this.month(),this.date()-this.day()+5),t=new Date(e.getFullYear(),0,4);return~~((e-t)/864e5/7+1.5)},YY:function(){return B(this.year()%100,2)},YYYY:function(){return B(this.year(),4)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return B(~~(this.milliseconds()/10),2)},SSS:function(){return B(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+B(~~(e/60),2)+":"+B(~~e%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+B(~~(10*e/6),4)}};while(k.length)i=k.pop(),A[i+"o"]=_(A[i]);while(L.length)i=L.pop(),A[i+i]=M(A[i],2);A.DDDD=M(A.DDD,3),t=function(n,r){if(n===null||n==="")return null;var i,s;return t.isMoment(n)?new D(new Date(+n._d),n._isUTC,n._lang):(r?F(r)?i=K(n,r):i=J(n,r):(s=f.exec(n),i=n===e?new Date:s?new Date(+s[1]):n instanceof Date?n:F(n)?q(n):typeof n=="string"?Q(n):new Date(n)),new D(i))},t.utc=function(e,n){return F(e)?new D(q(e,!0),!0):(typeof e=="string"&&!y.exec(e)&&(e+=" +0000",n&&(n+=" Z")),t(e,n).utc())},t.unix=function(e){return t(e*1e3)},t.duration=function(e,n){var r=t.isDuration(e),i=typeof e=="number",s=r?e._data:i?{}:e,o;return i&&(n?s[n]=e:s.milliseconds=e),o=new P(s),r&&(o._lang=e._lang),o},t.humanizeDuration=function(e,n,r){return t.duration(e,n===!0?null:n).humanize(n===!0?!0:r)},t.version=n,t.defaultFormat=E,t.lang=function(e,n){var r;if(!e)return o;(n||!s[e])&&R(e,n);if(s[e]){for(r=0;r<a.length;r++)t[a[r]]=s[e][a[r]];t.monthsParse=s[e].monthsParse,o=e}},t.langData=U,t.isMoment=function(e){return e instanceof D},t.isDuration=function(e){return e instanceof P},t.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(e){var t=e%10;return~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th"}}),t.fn=D.prototype={clone:function(){return t(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?this._a[8]!=null?!!this._a[8]:!I(this._a,(this._a[7]?t.utc(this._a):t(this._a)).toArray()):!isNaN(this._d.getTime())},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(e){return X(this,e?e:t.defaultFormat)},add:function(e,n){var r=n?t.duration(+n,e):t.duration(e);return j(this,r,1),this},subtract:function(e,n){var r=n?t.duration(+n,e):t.duration(e);return j(this,r,-1),this},diff:function(e,n,i){var s=this._isUTC?t(e).utc():t(e).local(),o=(this.zone()-s.zone())*6e4,u=this._d-s._d-o,a=this.year()-s.year(),f=this.month()-s.month(),l=this.date()-s.date(),c;return n==="months"?c=a*12+f+l/30:n==="years"?c=a+(f+l/30)/12:c=n==="seconds"?u/1e3:n==="minutes"?u/6e4:n==="hours"?u/36e5:n==="days"?u/864e5:n==="weeks"?u/6048e5:u,i?c:r(c)},from:function(e,n){return t.duration(this.diff(e)).lang(this._lang).humanize(!n)},fromNow:function(e){return this.from(t(),e)},calendar:function(){var e=this.diff(t().sod(),"days",!0),n=this.lang().calendar,r=n.sameElse,i=e<-6?r:e<-1?n.lastWeek:e<0?n.lastDay:e<1?n.sameDay:e<2?n.nextDay:e<7?n.nextWeek:r;return this.format(typeof i=="function"?i.apply(this):i)},isLeapYear:function(){var e=this.year();return e%4===0&&e%100!==0||e%400===0},isDST:function(){return this.zone()<t([this.year()]).zone()||this.zone()<t([this.year(),5]).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e==null?t:this.add({d:e-t})},startOf:function(e){switch(e.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return this},endOf:function(e){return this.startOf(e).add(e.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return t.utc([this.year(),this.month()+1,0]).date()},lang:function(t){return t===e?U(this):(this._lang=t,this)}};for(i=0;i<T.length;i++)Z(T[i].toLowerCase(),T[i]);Z("year","FullYear"),t.duration.fn=P.prototype={weeks:function(){return H(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months*2592e6},humanize:function(e){var t=+this,n=this.lang().relativeTime,r=Y(t,!e,this.lang()),i=t<=0?n.past:n.future;return e&&(typeof i=="function"?r=i(r):r=i.replace(/%s/i,r)),r},lang:t.fn.lang};for(i in N)N.hasOwnProperty(i)&&(tt(i,N[i]),et(i.toLowerCase()));tt("Weeks",6048e5),BV.define("vendor/moment",[],function(){return t})}.call(this),BV.define("util/datelocale",[],function(){return{load:function(e,t,n,r){},write:function(e,t,n){}}}),BV.define("util/datelocale!ago",["vendor/moment"],function(e){var t={months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:{AM:"AM",am:"am",PM:"PM",pm:"pm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(e){var t=e%10;return~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th"}};return function(){return e.lang("en-us",t)}}),BV.define("template/helpers/ago",["vendor/handlebars/runtime","vendor/moment","util/datelocale!ago","framework/util/bvreporter"],function(e,t,n,r){function i(e,i){if(!e){r.warn("The ago helper was called without a date.");return}i=i||{},i.hash=i.hash||{},n(),e=e.replace(".000","");var s="YYYY-MM-DDTHH:mm:ssZ",o=t(e,s),u=i.hash.format||"";return u?o.format(u):o.fromNow()}return e.registerHelper("ago",i),i}),BV.define("bv/c2013/model/contentItem/getOrderedBadges",["underscore","util/lookup"],function(e,t){function n(n,r,i){function p(e){o[e]?a.push(o[e]):a.push({id:e,badgeType:"content",iconChar:"",msgKey:"",Badges:n}),s[e]=!0}function d(){var e="ContributorRank",t="";if(c){t=l.replace("_","").toLowerCase();if(!n||!n[t])t=e}return t}function v(){var t=/^top(\d+)$/,r=e.find(e(n).keys(),function(e){return e.match(t)});if(r){var i=r.match(t);return"TOP_"+i[1]}}r=r||{};var s={},o={},u=[],a=[],f=t(r,"Badges"),l=t(r,"ContributorRank")||v()||"NONE",c=l!=="NONE",h="";return e.isEmpty(n)&&e.isEmpty(r.Badges)&&!c?[]:(h=d(),u=["incentivizedReview","verifiedPurchaser","featured","Staff",h,"Expert"],u=e.union(u,i),o={incentivizedReview:{id:"incentivizedReview",badgeType:"content",iconChar:"&#8862;",msgKey:"contentIncentivizedReviewBadge",Badges:n},verifiedPurchaser:{id:"verifiedPurchaser",badgeType:"content",iconChar:"",msgKey:"contentVerifiedPurchaserBadge",Badges:n},featured:{id:"featured",badgeType:"content",iconChar:"",msgKey:"",Badges:n},Staff:{id:"Staff",badgeType:"user",iconChar:"&#x2642;",msgKey:"",msgPrefix:"avatar_badge_",Badges:n},Expert:{id:"Expert",badgeType:"user",iconChar:"&infin;",msgKey:"",msgPrefix:"avatar_badge_",Badges:f&&f.Expert?f:n}},o[h]={id:l,badgeType:"contributor",iconChar:"",msgKey:"",msgPrefix:"avatar_rank_",Badges:f&&f[h]?f:n},e.each(u,function(e){var t=n&&n[e],r=e===h&&c,i=f&&f[e]&&o[e];(t||r||i)&&p(e)}),e.each(n,function(e){var t=e.Id;s[t]||p(t)}),a)}return n}),BV.define("bv/c2013/model/contentItem",["ENV","framework/bmodel","underscore","bv/util/contentType","util/lookup","bv/util/configFieldInfo","dimsumFields!fields","dimsumFields!fieldCategories","mf!bv/c2013/messages/common","mf!bv/c2013/messages/contentItem","template/helpers/ago","bv/c2013/model/contentItem/getOrderedBadges","framework/util/bvreporter"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){return t.extend({options:{},name:"contentItem",init:function(e,t){var i=this.get("parent"),s=this.hasFeature("productFamiliesAttribution");i&&i.subjectId&&this.get("ReferenceId")!==i.subjectId&&s&&this.set("IsFromProductFamily",!0),n.extend(this.options,t);var o=this.get("contentType")||(e.Type?r.Nouns(e.Type):undefined),u=this.get("secondaryContentType")||(e.SecondaryType?r.Nouns(e.SecondaryType):undefined);this.set({contentType:o,secondaryContentType:u}),i&&i.lazyLoad&&this.set("lazyLoad",i.lazyLoad&&!this.get("_isPreview")),this.hasFeature("secondaryContentList")&&this.subscribe("previewsecondarycontent",this.previewSecondaryContent),this._cleanAuthorData()},_cleanAuthorData:function(){var e=this.get("Author");e||(h.warn("Content Item was initialized without Author data.","Type:",this.get("Type"),"Id:",this.get("Id")),e={DisplayName:a.anonymous()}),e.ModerationStatus==="APPROVED"&&!this.get("IsSyndicated")?e.showProfileLink=!0:e.showProfileLink=!1,this.set("Author",e)},processData:function(){var e=n(this.get("Videos")).where({VideoHost:"www.youtube.com"});return this.set("Videos",e),t.prototype.processData.call(this,this.toJSON())},index:function(){var e=this.get("parent");return e.indexOf?e.indexOf(this):0},remove:function(e){this.get("parent").remove(this,e)},findMediaById:function(e,t){var r=this.get(t),i=n(r).find(function(t){return t.Id===e||t.VideoId===e});return i},toJSON:function(){function m(e){switch(e){case"user":case"contributor":return"userBadges";case"content":return"contentBadges"}}var a=this,h=t.prototype.toJSON.call(this),p,d=this.get("SecondaryRatings")||{},v=r.noun(this.get("contentType"));h.feedbackEnabled=e.get("config").feedbackEnabled,h.SecondaryRatingList=[];if(v==="review"){var g=i(h,"Reference.Content.Reviews.Statistics.SecondaryRatingsAveragesOrder")||[];h._ReferenceHasSecondaryRatings=!!g.length}if(v==="review"||v==="comment"){var y=c(this.get("Badges"),this.get("Author"),this.get("BadgesOrder"));h.OrderedBadges=n(y).filter(function(e){var t=m(e.badgeType);return!n.isUndefined(t)&&a.hasFeature(t)})}else h.OrderedBadges=[];n(d).each(function(e){var t=s.getLabelsObject("rating",e.Id,{value:e.Value}),r=s.getFieldType("rating",e.Id);n.extend(d[e.Id],t,r)}),n(this.get("SecondaryRatingsOrder")).forEach(function(e){if(n(g).indexOf(e)===-1)return;var t=o&&o.rating&&o.rating[e];t&&n(d[e]).extend({HideDisplay:t.hideDisplay}),h.SecondaryRatingList.push(d[e])}),h.Pros=h.TagDimensions&&h.TagDimensions.Pro?h.TagDimensions.Pro.Values:null,h.Cons=h.TagDimensions&&h.TagDimensions.Con?h.TagDimensions.Con.Values:null,h.TagDimensionsList=n(this.get("TagDimensions")).chain().filter(function(e){var t=e.Id;if(t==="Pro"||t==="Con")return!1;var n=o.tag[t];return n?!n.hideDisplay:!0}).map(function(e){var t=e.Id;if(!t)return e;var n=s.getLabel("tag",t);return n&&(e.Label=n),e}).value(),h.AdditionalFields&&(h.AdditionalFieldsOrdered=n(h.AdditionalFieldsOrder).map(function(e){return h.AdditionalFields[e]})),h.ContextDataValuesOrdered&&u.fieldCategoryMap&&(h.ContextDataValuesOrdered=n(h.ContextDataValuesOrdered).filter(function(e){return u.fieldCategoryMap["contextdatavalue_"+e.Id]==="product"})),n(["ContextDataValues","AdditionalFields"]).forEach(function(e){var t=h[e+"Ordered"];if(!t)return;var r=n(t).chain().map(function(t){var n=s.getField(e,t.Id);if(!n)return!1;var r=s.getLabel(n);if(!r)return!1;var i=s.getValueLabels(n)[t.Value]||t.Value;return{Id:t.Id,Label:r,Value:i}}).filter(function(e){return e}).value();h[e+"Ordered"]=r}),h.ProductQuestionsList=(h.ContextDataValuesOrdered||[]).concat(h.AdditionalFieldsOrdered||[]),h.currentSort=this.componentGet("currentSort")||null,h.clientName=e.get("config").clientDisplayName||e.get("config").clientname;if(h.IsSyndicated&&h.SyndicationSource.Name)p=e.get("config").display.syndicationFilter,n(p).contains(h.SyndicationSource.Name)&&(h.IsSyndicated=!1);else if(h.parentContentItem&&h.Type==="clientresponse"){var b=h.parentContentItem,w=b.get("IsSyndicated"),E=b.get("SyndicationSource");w&&E&&E.Name&&(h.clientName=E.Name)}return h.authorDisplayName=h.Author.DisplayName,h.submissionTimeAgo=l(h.SubmissionTime),n(["Photo","Video"]).each(function(e){n(h[e+"s"]).each(function(t,n){t.Caption=t.Caption||f["contentItem_default"+e+"Caption"]({ContentType:v,ItemNumber:n+1})})}),h},previewSecondaryContent:function(e,t){this.get("Id")===e&&this.getFeatureModel("secondaryContentList").previewContent(t)},hasPhoto:function(){return this.get("Photos")&&this.get("Photos").length||this.get("Author")&&this.get("Author")._avatarImage},hasMedia:function(){return this.hasPhoto()?!0:this.get("Videos")&&this.get("Videos").length}})}),BV.define("bv/api/util/statsRequest",["ENV","underscore","bv/api/fetch","framework/util/bvreporter"],function(e,t,n,r){return function(i,s){r.assert(function(){return[t(i).isObject(),"config is object"]}),r.assert(function(){return[!t(i.subjectId).isUndefined(),"config.subjectId is defined"]});var o=n.get(i.subjectType||"products").limit(null).filterBy("id",i.subjectId);s&&o._label(s);var u=i.statsTypes||e.get("config").statsTypes;return r.assert(u&&u.length,"statsTypes is defined"),t(u).forEach(function(e){o=o.withStatsOn(n.Nouns(e))}),o}}),BV.define("bv/c2013/collection/contentItemCollection",["framework/bcollection","underscore","bv/c2013/model/contentItem","bv/api/fetch","util/url","ENV","bv/api/util/statsRequest"],function(e,t,n,r,i,s,o){return e.extend({model:n,name:"contentItemCollection",statsTypes:["Reviews","Questions"],init:function(){this._isReviews=r.nouns(this.contentType)==="reviews"},createContentRequest:function(e,n,i){var o=r.nouns(this.contentType),u=s.get("config"),a=u.page.details[r.noun(o)]||u.page,f=a.size,l=a.size2n,c=e>1?l:f,h=e>1?f+l*(e-2):0,p=r.get(o).include(["Authors","Products"]).withStatsOn(this.getStatsTypes()).limit(c).offset(h);if(t(this.parent.subModels).has("contentSort")){var d=this.parent.subModels.contentSort.lookup(this.parent.componentGet("currentSort"));d=d||this.parent.componentGet("defaultSort"),d&&(t(d.primary).forEach(function(e){p.sortBy(e[1],e[0])}),t(d.secondary).chain().keys().forEach(function(e){t(d.secondary[e]).forEach(function(t){p.get(e).sortBy(t[1],t[0]).end()})}))}t(i).forEach(function(e){t(e.options).forEach(function(t){t.get("enabled")&&p.filterBy(e.get("id"),"=",t.get("id"))})}),o==="reviews"&&p.filterBy("IsRatingsOnly","=",!1);if(!t.isEmpty(this.secondaryContentType)){var v=u.page.details[r.noun(this.secondaryContentType)]||u.page,m=v.size;p.include(this.secondaryContentType).limitIncluded(this.secondaryContentType).to(m)}return t(n.productId).isUndefined()||(this.subjectId=n.productId,p=p.forProduct(n.productId)),p},_normalizeSubmissionResponse:function(e){var n,i=r.normalize({Results:[e]},{contentType:r.Nouns(e._contentType)});return i&&i.Results&&!t(i.Results).isEmpty()&&(n=i.Results[0]),n},createContentItem:function(e){var t=this.parent.getSubject(),n,r;return e=this._normalizeSubmissionResponse(e),n=e.RatingRange,e.RatingRange=n.length===1?n[0]+1:n[1]-n[0]+1,e.parent=this,e._isPreview=!0,e},_getChecksum:function(){var e=this.contentType,t=this.getParent();return t&&(e+=t.get("TotalResults")||0),e},fetchPage:function(e,n,i,s){var u=this,a=this.subjectId=n.productId,f=this.createContentRequest.apply(this,arguments),l=i&&i.length>0,c=[f,o({subjectId:a})],h=r.get("batch",null,c),p=this._getChecksum();h.fetch("page",p).done(function(e){var n=t(e).where({contentType:"products"}),i=n[0];i||(i={contentType:"products",data:{Results:[{Content:{},Type:"product"}],TotalResults:0}});var o=t(e).findWhere({contentType:r.nouns(u.contentType)}),a=i.data.Results[0],f=o.data.Results;a.Content=a.Content||{},a.Content[u.contentType]?a.Content[u.contentType].List=f:a.Content[u.contentType]={List:f};if(u._isReviews&&!l){var c=u._generateReviewCounts(i,o);a.Content[u.contentType].TotalResults=c.globalCount,a.Content[u.contentType].LocalResults=c.localCount,u.trigger("newglobalresulttotal",c.globalCount),u.trigger("newresulttotal",c.localCount),u.stats=c}else t(o.data.TotalResults).isNumber()&&(u.totalResults=o.data.TotalResults,u.trigger("newglobalresulttotal",null),u.trigger("newresulttotal",o.data.TotalResults),a.Content[u.contentType].TotalResults=o.data.TotalResults,a.Content[u.contentType].LocalResults=o.data.TotalResults,u.stats={});s=s||{},s.loadMore?u.loadMore(f):u.reset(f,{doNotScroll:s.doNotScroll}),u.publish("contentresponse",i.data)})},_generateReviewCounts:function(e,t){var n={},r=e.data.Results[0],i,o=s.get("config").statistics.onlyShowDisplayedLocaleStatistics;return o?i=r.Content[this.contentType].FilteredStatistics:i=r.Content[this.contentType].RawStatistics,i?(n.globalCount=i.TotalCount,n.globalRatingsOnlyCount=i.RatingsOnlyCount,n.localCount=n.localResults=t.data.TotalResults,n.totalResults=n.localResults,n.globalNonRatingsOnlyCount=n.globalCount-n.globalRatingsOnlyCount,n.otherLocaleCount=n.globalNonRatingsOnlyCount-n.localCount,n):{globalCount:0,globalRatingsOnlyCount:0,localCount:0,localResults:0,totalResults:0,otherLocaleCount:0}},searchContent:function(e,n,r,i,s){var o=this;BV.require(["secondary"],function(u){t(o).extend(u.ContentItemCollectionExt.collection),o.searchContentExt(e,n,r,i,s)})},requestRelated:function(e,n,r,i){var s=this;BV.require(["secondary"],function(o){t(s).extend(o.ContentItemCollectionExt.collection),s.requestRelatedExt(e,n,r,i)})},fetchPageFromAuthor:function(e,n,r){var i=this;BV.require(["secondary"],function(s){t(i).extend(s.ContentItemCollectionExt.collection),i.fetchPageFromAuthorExt(e,n,r)})},hasPhotos:function(){return t(this.models).some(function(e){return e.hasPhoto()})},hasMedia:function(){return t(this.models).some(function(e){return e.hasMedia()})}})}),BV.define("bv/util/pageInfo",["ENV","bv/util/contentType","underscore"],function(e,t,n){function r(t,r,s,o,u,a){var f=e.get("config"),l=f.page.details[t]||f.page,c=l.size,h=l.size2n;return u&&(c=u,h=u,a=n(a).isUndefined()?!0:a),i(t,r,s,o,c,h,a)}function i(e,t,n,r,i,s,o){var u=n?1:0,a=n||0,f=Math.max(a,r),l=1;return r>i&&(l+=Math.ceil((r-i)/s)),t>1&&u>0&&(u=i+s*(t-2)+1,a=u+(n-1)),{type:e,start:u,end:a,total:f,numPages:l,pageSize:t>1?s:i,orphanEnd:o?f===a&&t!==1:u===a&&t!==1,showPages:l>1&&f,currentPage:t,lastPageSize:l>1?r-i-s*(l-2):r,simpleMode:o}}return r}),BV.define("bv/c2013/model/contentList/setPrimaryContent",["ENV"],function(e){return function(t,n,r){return t.PrimaryContent=t.Content[n],t.PrimaryContent||(t.PrimaryContent={}),t.PrimaryContent.Statistics||(t.PrimaryContent.Statistics={TotalCount:0,TotalSecondaryCount:0,OverallRatingRange:e.get("config").submission.rating.range[1]}),t.PrimaryContent.Type||(t.PrimaryContent.Type=r.noun(n)),t}}),BV.define("bv/c2013/model/contentList",["ENV","jquery","framework/bmodel","util/url","underscore","bv/c2013/collection/contentItemCollection","bv/util/pageInfo","bv/api","framework/util/featureHelper","BV","framework/util/bvreporter","bv/c2013/model/contentList/setPrimaryContent"],function(e,t,n,r,i,s,o,u,a,f,l,c){return n.extend({options:{},name:"contentList",collectionFeatureName:"contentItemCollection",init:function(e,n){i.extend(this.options,n),this.set({sortDfd:t.Deferred()}),this.subscribe({setupcontentsort:this.setupContentSort,pageto:this.fetchPage,pageinfo:this._enforcePageBounds,filterresults:this.filterPage,deeplink:this.deepLink,submission:this.submission,previewcontent:this.previewContent,showhelpfulpositive:this.showHelpfulPositive,showhelpfulcritical:this.showHelpfulCritical,showinlightbox:this.showContentInLightbox}),this.on("pageinfo",this._enforcePageBounds),this.hasFeature("contentSort")&&this.subscribe({sortcontent:this.sortContent})},initReady:function(e){var t=this.get("sortDfd");t?t.done(function(){e.initialized()}):e.initialized()},showContentInLightbox:function(){this.getComponent().lightbox?this.fetchPage(1):l.warn("Did not find lightbox display configuration for "+this.name)},setupDataProcessing:function(){this.subscribe("contentresponse",this.processData);var e=this.getContent();if(!e)return;e.lazyLoad=!0,this.listenTo(e,"newresulttotal",function(e){this.set("TotalResults",e)}),this.listenTo(e,"newglobalresulttotal",function(e){this.set("GlobalTotalResults",e)})},processData:function(e){var t=this.get("contentType"),n=i.clone(e.Results[0]),r,s;n.Content?(n=c(n,t,this.api),this.set("initData",n.Content[t]),r=n.PrimaryContent.TotalResults,s=n.PrimaryContent.LocalResults,this.set("TotalResults",i.isUndefined(s)?r:s)):(this.set("initData",null),this.set("TotalResults",0)),this.componentSet("initData",this.get("initData")),this.set("subject",n),this.unsubscribe("contentresponse",this.processData);var o=this.getContent();if(!o)return;this.listenTo(o,{reset:this.contentChanged,loadmore:this.moreContentLoaded});var u=this.updatePageInfo(n.Content[t].List);this.trigger("pageinfo",u),this.dataReady(e)},getSubject:function(){return{type:"product",id:this.get("clientAPIConfig").productId,contentType:this.get("contentType")}},toJSON:function(){var t=e.get("config"),r=n.prototype.toJSON.call(this),i=this.componentGet("initData"),s=i?i.List:null,o=this.get("subject"),u={Product:o};return u[this.api.Nouns(this.get("contentType"))]=s,u.clientDisplayName=t.clientDisplayName||null,u.clientLogo=t.clientLogo||null,u.readOnly=this.readOnly,u.showBeFirstButton=!this.readOnly&&this.hasFeature("writeReviews"),u},updatePageInfo:function(e){var t,n=this.componentGet("currentPage")||1;return t=o(this.api.noun(this.get("contentType")),n,e.length,this.get("TotalResults")),this.componentSet("numPages",t.numPages),this.set({TotalResults:this.get("TotalResults"),numPages:t.numPages,startResult:t.start},{silent:!0}),t.localTotal=t.total,this.get("GlobalTotalResults")&&(t.total=this.get("GlobalTotalResults")),t},_enforcePageBounds:function(e){var t=this,n=e.currentPage;n>e.numPages&&this.dataReadyPromise().done(function(){t.componentGet("currentPage")===n&&t.fetchPage(e.numPages)})},contentChanged:function(e,t){e&&this.trigger("change:content",e);var n=this.updatePageInfo(e);this.trigger("pageinfo",n,t)},moreContentLoaded:function(e,t){var n,r=this.componentGet("currentPage");n=o(this.api.noun(this.get("contentType")),r,t.length,this.get("TotalResults")),n.localTotal=n.total,this.get("GlobalTotalResults")&&(n.total=this.get("GlobalTotalResults")),n.start=this.get("startResult"),n.loadMore=!0,this.trigger("pageinfo",n)},_matchesContentType:function(e){var t=this.get("contentType"),n=this.get("secondaryContentType");try{e=u.Nouns(e)}catch(r){return l.warn("ContentList with contentType",t,"didn't recognize content type on deep link:",e),!1}return t&&e===u.Nouns(t)?!0:n&&e===u.Nouns(n)?!0:(l.warn("ContentList with contentType",t,"didn't respond to content type on deep link:",e),!1)},deepLink:function(t){if(!this._matchesContentType(t.contentType))return;var n=this.get("clientAPIConfig").productId,s=this;f.require(["secondary","bv/c2013/model/contentItem","bv/c2013/view/contentItem"],function(o,a,f){function m(e){e=e.data;var t,n;if(e.Results&&e.Results.length){var r=i(e.Results[0]).extend({parent:s});t=new a(r),n=new f({model:t,config:t}),o.Deeplink.lightbox(n)}}var l=r.protocol+e.get("config").apiconfig.baseUrl,c=t.contentType,h=s.get("contentType"),p=s.get("secondaryContentType"),d=["Products","Authors"];p&&u.Nouns(c)===u.Nouns(h)?d.push(u.Nouns(p)):h&&u.Nouns(c)===u.Nouns(p)&&d.push(u.Nouns(h));var v=u.get(u.nouns(c)).include(d).withStatsOn(u.Nouns(c)).withBaseUrl(l);i(n).isUndefined()||(v=v.forProduct(n).filterBy("id","=",t.id),v.fetch("deeplink").done(m))})},submission:function(e){var n=this.get("clientAPIConfig");e=t.extend({},n,{campaignId:e.campaignId||n.campaignId||""}),this.trigger("showsubmission",e)},_initContent:function(){var e={},t=this.getFeatureModels(this.collectionFeatureName)||this.getFeatureModels(a.getFullName(this.collectionFeatureName));return t&&s?(i(t).forEach(function(t){e[t.contentType]=t}),this.set({content:e},{silent:!0}),e):null},_getContent:function(){return this.get("content")||this._initContent()},getContent:function(){var e=this.get("contentType"),t=this._getContent();return i(t).isEmpty()?null:t[e]},fetchPage:function(e,t,n){function u(){o.fetchPage(e,s.get("clientAPIConfig"),r,n)}var r=this.get("activeFilters"),s=this;i(e).isObject()&&(i(e.pageNum).isNumber()||i(e.pageNum).isString())&&(e=parseInt(e.pageNum,10));var o=this.getContent();o.lazyLoad=e===1;if(!t&&(e<1||e>this.get("numPages")))return;this.componentSet("currentPage",e);if(this.dataReadyPromise().state()!=="resolved"&&this.componentGet("initData"))return;var a=this.get("sortDfd");a?this.get("sortDfd").done(function(){u()}):u()},filterPage:function(e){this.set("activeFilters",e),this.fetchPage(1,!0)},previewContent:function(e){var t=this.getContent();if(!t)return;var n=t.createContentItem(e);t.add(n,{isPreview:!0})},setupContentSort:function(e){this.subModels.contentSort=e,this.componentSet({defaultSort:e.get("defaultSort"),currentSort:e.get("currentSort")}),this.get("sortDfd").resolve(this)},sortContent:function(e){this.componentSet("currentSort",e),this.fetchPage(1,!0,{doNotScroll:!0})},showHelpfulPositive:function(){this.onDataProcessed(function(){this.hasFeature("contentSort")&&this.subModels.contentSort.set("currentSort","mostHelpful"),this.componentSet("currentSort","mostHelpful"),this.publish("filtercontent","Rating",[4,5],!1,{replace:!0})},this)},showHelpfulCritical:function(){this.onDataProcessed(function(){this.hasFeature("contentSort")&&this.subModels.contentSort.set("currentSort","mostHelpful"),this.componentSet("currentSort","mostHelpful"),this.publish("filtercontent","Rating",[1,2,3],!1,{replace:!0})},this)}})}),BV.define("bv/c2013/model/profileContentList",["ENV","framework/bmodel","bv/c2013/model/contentList","underscore"],function(e,t,n,r){return n.extend({name:"profileContentList",init:function(e,t){r.extend(this.options,t),this.subscribe("pageto",this.fetchPage),this.subscribe("submission",this.submission),this.subscribe("previewcontent",this.previewContent)},setupDataProcessing:function(){var e=this.getContent();if(!e)return;this.listenTo(e,"newresulttotal",function(e){this.set("TotalResults",e)})},fetchPage:function(e,t,n){var r=this.getContent(),i=this.get("subject");this.componentSet("currentPage",e);var s={Type:this.get("subjectType"),Id:i?i.Id:undefined};r.fetchPageFromAuthor(e,this.get("clientAPIConfig"),s)}})}),BV.define("template/helpers/ensureProtocolRelative",["vendor/handlebars/runtime"],function(e){function t(e){return(e||"").replace(/^http(s)?:\/\//,"//")}return e.registerHelper("ensureProtocolRelative",t),t}),BV.define("hbs!clientLogo",["hbs","vendor/handlebars/runtime","template/helpers/extmsg","template/helpers/ensureProtocolRelative"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var r="",i,s,o;return r+=' <div class="bv-client-logo-container bv-hidden"> <span class="bv-client-logo-label"> ',o={hash:{}},r+=a((i=n.extmsg,i?i.call(e,"logoSource",e.msgpack,e,o):u.call(e,"extmsg","logoSource",e.msgpack,e,o)))+' </span> <img src="',o={hash:{}},r+=a((i=n.ensureProtocolRelative,i?i.call(e,e.clientLogo,o):u.call(e,"ensureProtocolRelative",e.clientLogo,o)))+'" alt="',(s=n.clientDisplayName)?s=s.call(e,{hash:{}}):(s=e.clientDisplayName,s=typeof s===f?s.apply(e):s),r+=a(s)+'"/> </div> ',r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u=n.helperMissing,a=this.escapeExpression,f="function",l=this;o=n["if"].call(t,t.clientLogo,{hash:{},inverse:l.noop,fn:l.program(1,c,i)});if(o||o===0)s+=o;return s+=" ",s});return t.registerPartial("clientLogo",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!writeReview",["hbs","vendor/handlebars/runtime","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="bv-write-review-container bv-write-container"> <button type="button" class="bv-write-review bv-focusable bv-submission-button"> ',u={hash:{}},s+=f((o=n.extmsg,o?o.call(t,"writeReview",t.msgpack,t,u):a.call(t,"extmsg","writeReview",t.msgpack,t,u)))+' <span class="bv-off-screen">. ',u={hash:{}},s+=f((o=n.extmsg,o?o.call(t,"offscreen_writeReviewModalNotice",t.msgpack,t,u):a.call(t,"extmsg","offscreen_writeReviewModalNotice",t.msgpack,t,u)))+"</span> </button> </div> ",s});return t.registerPartial("writeReview",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!askQuestion",["hbs","vendor/handlebars/runtime","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="bv-ask-question-container bv-write-container"> <button type="button" class="bv-ask-question bv-focusable bv-submission-button"> ',u={hash:{}},s+=f((o=n.extmsg,o?o.call(t,"askQuestion",t.msgpack,t,u):a.call(t,"extmsg","askQuestion",t.msgpack,t,u)))+" </button> </div> ",s});return t.registerPartial("askQuestion",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!actionBar",["hbs","vendor/handlebars/runtime","hbs!clientLogo","hbs!writeReview","hbs!askQuestion","template/helpers/mountView","template/helpers/withIf","template/helpers/extmsg","template/helpers/ifHasFeature","template/helpers/equals"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t,r){var i="",s,o;return i+=' <h2 class="bv-action-bar-header">',o={hash:{}},i+=l((s=n.extmsg,s?s.call(e,"actionBarHeader_v2",r.msgpack,e,o):f.call(e,"extmsg","actionBarHeader_v2",r.msgpack,e,o)))+"</h2> ",i}function p(e,t){var i="",s;i+=" ",s=c.invokePartial(r.clientLogo,"clientLogo",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function d(e,t){var r="",i,s;r+=" ",s=n["if"].call(e,(i=(i=e.Product,i==null||i===!1?i:i.PrimaryContent),i==null||i===!1?i:i.TotalResults),{hash:{},inverse:c.noop,fn:c.program(6,v,t)});if(s||s===0)r+=s;return r+=" ",r}function v(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:c.noop,fn:c.program(7,m,t)},s=(i=n.equals,i?i.call(e,(i=(i=e.Product,i==null||i===!1?i:i.PrimaryContent),i==null||i===!1?i:i.Type),"review",o):f.call(e,"equals",(i=(i=e.Product,i==null||i===!1?i:i.PrimaryContent),i==null||i===!1?i:i.Type),"review",o));if(s||s===0)r+=s;return r+=" ",r}function m(e,t){var i="",s;i+=" ",s=c.invokePartial(r.writeReview,"writeReview",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function g(e,t){var r="",i,s;r+=" ",s=n["if"].call(e,(i=(i=e.Product,i==null||i===!1?i:i.PrimaryContent),i==null||i===!1?i:i.TotalResults),{hash:{},inverse:c.noop,fn:c.program(10,y,t)});if(s||s===0)r+=s;return r+=" ",r}function y(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:c.noop,fn:c.program(11,b,t)},s=(i=n.equals,i?i.call(e,(i=(i=e.Product,i==null||i===!1?i:i.PrimaryContent),i==null||i===!1?i:i.Type),"question",o):f.call(e,"equals",(i=(i=e.Product,i==null||i===!1?i:i.PrimaryContent),i==null||i===!1?i:i.Type),"question",o));if(s||s===0)r+=s;return r+=" ",r}function b(e,t){var i="",s;i+=" ",s=c.invokePartial(r.askQuestion,"askQuestion",e,n,r);if(s||s===0)i+=s;return i+=" ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this;s+='<div class="bv-action-bar"> ',a={hash:{}},u=(o=n.mountView,o?o.call(t,"contentSearch",t,a):f.call(t,"mountView","contentSearch",t,a));if(u||u===0)s+=u;s+=" ",a={hash:{},inverse:c.noop,fn:c.programWithDepth(h,i,t)},u=(o=n.withIf,o?o.call(t,(o=t.Product,o==null||o===!1?o:o.PrimaryContent),a):f.call(t,"withIf",(o=t.Product,o==null||o===!1?o:o.PrimaryContent),a));if(u||u===0)s+=u;s+="  ",a={hash:{},inverse:c.noop,fn:c.program(3,p,i)},u=(o=n.ifHasFeature,o?o.call(t,"clientLogo",a):f.call(t,"ifHasFeature","clientLogo",a));if(u||u===0)s+=u;s+=" ",a={hash:{},inverse:c.noop,fn:c.program(5,d,i)},u=(o=n.ifHasFeature,o?o.call(t,"writeReviews",a):f.call(t,"ifHasFeature","writeReviews",a));if(u||u===0)s+=u;s+=" ",a={hash:{},inverse:c.noop,fn:c.program(9,g,i)},u=(o=n.ifHasFeature,o?o.call(t,"askQuestions",a):f.call(t,"ifHasFeature","askQuestions",a));if(u||u===0)s+=u;return s+=" </div> ",s});return t.registerPartial("actionBar",n),n.deps=["clientLogo","writeReview","askQuestion"],n.tplMountedViews=["contentSearch"],n}),BV.define("hbs!inlineFormContainer",["hbs","vendor/handlebars/runtime"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div class="bv-inline-form-container"></div>'});return t.registerPartial("inlineFormContainer",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("_i18n_noReviewsYet",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";return t+="No reviews have been submitted yet.",t}(e)}catch(t){return r.push(["error",new Error("MF error on `noReviewsYet`: "+t.toString())]),""}}return t.registerHelper("_i18n_noReviewsYet",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("hbs!noReviewsYet",["hbs","vendor/handlebars/runtime","_i18n_noReviewsYet"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing;s+='<span class="bv-content-noreviews-label">  ',a={hash:{}},u=(o=n._i18n_noReviewsYet,o?o.call(t,t,a):f.call(t,"_i18n_noReviewsYet",t,a));if(u||u===0)s+=u;return s+=" </span> ",s});return t.registerPartial("noReviewsYet",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("_i18n_firstToWriteReview",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");var n="Gender",r=e[n],i=0,s={other:function(e){var t="";return t+="Be the first to review this product",t}};return t+=(s[r]||s.other)(e),t}(e)}catch(t){return r.push(["error",new Error("MF error on `firstToWriteReview`: "+t.toString())]),""}}return t.registerHelper("_i18n_firstToWriteReview",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("hbs!firstToWriteReview",["hbs","vendor/handlebars/runtime","_i18n_firstToWriteReview"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing;s+='<a class="bv-write-review-label bv-text-link bv-focusable bv-submission-button" href="#">  ',a={hash:{}},u=(o=n._i18n_firstToWriteReview,o?o.call(t,t,a):f.call(t,"_i18n_firstToWriteReview",t,a));if(u||u===0)s+=u;return s+=" </a> ",s});return t.registerPartial("firstToWriteReview",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("_i18n_firstToAskQuestion",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");var n="Gender",r=e[n],i=0,s={other:function(e){var t="";return t+="Be the first to ask a question",t}};return t+=(s[r]||s.other)(e),t}(e)}catch(t){return r.push(["error",new Error("MF error on `firstToAskQuestion`: "+t.toString())]),""}}return t.registerHelper("_i18n_firstToAskQuestion",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("hbs!firstToAskQuestion",["hbs","vendor/handlebars/runtime","_i18n_firstToAskQuestion"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing;s+='<a class="bv-ask-question-label bv-text-link bv-focusable bv-submission-button" href="#">  ',a={hash:{}},u=(o=n._i18n_firstToAskQuestion,o?o.call(t,t,a):f.call(t,"_i18n_firstToAskQuestion",t,a));if(u||u===0)s+=u;return s+=" </a> ",s});return t.registerPartial("firstToAskQuestion",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("template/helpers/loop",["vendor/handlebars/runtime","underscore"],function(e,t){function n(n,r){var i=[].slice.call(arguments),s=i[i.length-1],o="",u=[];if(e.Utils.isEmpty(n))return s.inverse(r);if(!t(n.range).isEmpty()){var a=t(n.range).last(),f=t(n.range).first();f=f===a?0:f;while(f<=a)u.push(f),f++}else t(n).isObject()?u=n.values:t(n).times(function(e){u.push(e+1)});return t(u).forEach(function(i,a){var f={value:i,total:u.length};if(r&&r.schema){var l=r.schema.Id.split("_")[0],c=[l,i].join("_");r.schema.Type==="SelectInput"&&(l=r.schema.Id,c=[l,"valueLabel"+i].join("_")),t(f).extend({id:r.schema.Id,msgpackId:c,groupId:l})}e.Utils.isEmpty(n.labels)||(f.label=n.labels[a]),o+=s.fn(f)}),o}return e.registerHelper("loop",n),n}),BV.define("template/helpers/ratingIconChar",["vendor/handlebars/runtime","ratingIconCharMap!"],function(e,t){function n(n){var r=t[n]||"9733";return new e.SafeString("&#"+r+";")}return e.registerHelper("ratingIconChar",n),n}),BV.define("hbs!contentPlaceholder",["hbs","vendor/handlebars/runtime","hbs!noReviewsYet","hbs!firstToWriteReview","hbs!firstToAskQuestion","template/helpers/equals","template/helpers/renderIcon","template/helpers/loop","template/helpers/ratingIconChar"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:c.program(4,d,t),fn:c.program(2,p,t)},s=(i=n.equals,i?i.call(e,e.readOnly,!0,o):f.call(e,"equals",e.readOnly,!0,o));if(s||s===0)r+=s;r+=" ",o={hash:{classList:"bv-rating-stars bv-rating-stars-off"},inverse:c.noop,fn:c.program(6,v,t)},s=(i=n.renderIcon,i?i.call(e,"bv-sprite-prs-rating-stars-off",o):f.call(e,"renderIcon","bv-sprite-prs-rating-stars-off",o));if(s||s===0)r+=s;r+=" ",o={hash:{},inverse:c.program(11,y,t),fn:c.program(9,g,t)},s=(i=n.equals,i?i.call(e,e.readOnly,!0,o):f.call(e,"equals",e.readOnly,!0,o));if(s||s===0)r+=s;r+=" ",o={hash:{},inverse:c.program(15,w,t),fn:c.program(13,b,t)},s=(i=n.equals,i?i.call(e,e.showBeFirstButton,!1,o):f.call(e,"equals",e.showBeFirstButton,!1,o));if(s||s===0)r+=s;return r+=" ",r}function p(e,t){return' <span class="bv-rating-stars-container bv-rating-none bv-focusable" aria-readonly="true"> '}function d(e,t){return' <a href="#" class="bv-rating-stars-container bv-focusable"> '}function v(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:c.noop,fn:c.program(7,m,t)},s=(i=n.loop,i?i.call(e,(i=(i=(i=e.Product,i==null||i===!1?i:i.PrimaryContent),i==null||i===!1?i:i.Statistics),i==null||i===!1?i:i.OverallRatingRange),e,o):f.call(e,"loop",(i=(i=(i=e.Product,i==null||i===!1?i:i.PrimaryContent),i==null||i===!1?i:i.Statistics),i==null||i===!1?i:i.OverallRatingRange),e,o));if(s||s===0)r+=s;return r+=" ",r}function m(e,t){var r,i;return i={hash:{}},l((r=n.ratingIconChar,r?r.call(e,"rating-stars-on",i):f.call(e,"ratingIconChar","rating-stars-on",i)))}function g(e,t){return" </span> "}function y(e,t){return" </a> "}function b(e,t){var i="",s;i+=" ",s=c.invokePartial(r.noReviewsYet,"noReviewsYet",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function w(e,t){var i="",s;i+=" ",s=c.invokePartial(r.firstToWriteReview,"firstToWriteReview",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function E(e,t){var i="",s;i+=" ",s=c.invokePartial(r.firstToAskQuestion,"firstToAskQuestion",e,n,r);if(s||s===0)i+=s;return i+=" ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this;s+='<div class="bv-content-placeholder"> ',a={hash:{},inverse:c.noop,fn:c.program(1,h,i)},u=(o=n.equals,o?o.call(t,(o=(o=t.Product,o==null||o===!1?o:o.PrimaryContent),o==null||o===!1?o:o.Type),"review",a):f.call(t,"equals",(o=(o=t.Product,o==null||o===!1?o:o.PrimaryContent),o==null||o===!1?o:o.Type),"review",a));if(u||u===0)s+=u;s+=" ",a={hash:{},inverse:c.noop,fn:c.program(17,E,i)},u=(o=n.equals,o?o.call(t,(o=(o=t.Product,o==null||o===!1?o:o.PrimaryContent),o==null||o===!1?o:o.Type),"question",a):f.call(t,"equals",(o=(o=t.Product,o==null||o===!1?o:o.PrimaryContent),o==null||o===!1?o:o.Type),"question",a));if(u||u===0)s+=u;return s+=" </div> ",s});return t.registerPartial("contentPlaceholder",n),n.deps=["noReviewsYet","firstToWriteReview","firstToAskQuestion"],n.tplMountedViews=[],n}),BV.define("template/helpers/compare",["vendor/handlebars/runtime"],function(e){function t(){var e=[].slice.call(arguments),t=e[e.length-1],n=e[0],r=e[2],i=e[1],s=!1;switch(i){case"lt":s=n<r;break;case"lte":s=n<=r;break;case"eq":s=n===r;break;case"gt":s=n>r;break;case"gte":s=n>=r;break;default:return t.inverse(this)}return s?t.fn(this):t.inverse(this)}return e.registerHelper("compare",t),t}),BV.define("template/helpers/ifHasSubview",["vendor/handlebars/runtime"],function(e){function t(){var e=[].slice.call(arguments),t=e[e.length-1],n=e[0],r=e.length===2?this:e[1],i,s;if(r.viewList&&r._subview)for(i=0;i<r.viewList.length;i++){s=r.viewList[i];if(s.viewName===n)return t.fn(r)}return t.inverse(r)}return e.registerHelper("ifHasSubview",t),t}),BV.define("hbs!contentList",["hbs","vendor/handlebars/runtime","hbs!actionBar","hbs!inlineFormContainer","hbs!contentPlaceholder","template/helpers/view","template/helpers/ago","template/helpers/mountView","template/helpers/equals","template/helpers/conditionalContainer","template/helpers/compare","template/helpers/ifHasSubview","template/helpers/ifHasFeature","template/helpers/subviews"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var i="",s,o,u;i+=' <!--[if lt IE 7]> <div class="bv-compat bvie6 bvie-lt8 bvie"> <![endif]--> <!--[if IE 7]> <div class="bv-compat bvie7 bvie-lt8 bvie"> <![endif]--> <!--[if IE 8]> <div class="bv-compat bv-scroll-spy bvie8 bvie"> <![endif]--> <!--[if IE 9]> <div class="bv-compat bv-scroll-spy bvie9 bvie"> <![endif]--> <!--[if gt IE 9]> <!--><div class="bv-compat bv-scroll-spy" data-bv-target="'+c((s=(s=(s=e.Product,s==null||s===!1?s:s.PrimaryContent),s==null||s===!1?s:s.Type),typeof s===h?s.apply(e):s))+'"> <!--<![endif]--> <meta name="bvDateModified" content="',u={hash:{format:"YYYY-MM-DD"}},i+=c((s=n.ago,s?s.call(e,"",u):l.call(e,"ago","",u)))+'"> <div class="bv-content-list-container"> ',u={hash:{}},i+=c((s=n.mountView,s?s.call(e,"trustmarkIcon",e,u):l.call(e,"mountView","trustmarkIcon",e,u)))+' <div class="bv-header"> ',o=f.invokePartial(r.actionBar,"actionBar",e,n,r);if(o||o===0)i+=o;i+=" ",u={hash:{},inverse:f.noop,fn:f.program(2,d,t)},o=(s=n.equals,s?s.call(e,(s=(s=e.Product,s==null||s===!1?s:s.PrimaryContent),s==null||s===!1?s:s.Type),"review",u):l.call(e,"equals",(s=(s=e.Product,s==null||s===!1?s:s.PrimaryContent),s==null||s===!1?s:s.Type),"review",u));if(o||o===0)i+=o;i+=" ",u={hash:{tag:"div",classList:"section-summary"},inverse:f.noop,fn:f.program(4,v,t)},o=(s=n.conditionalContainer,s?s.call(e,e,u):l.call(e,"conditionalContainer",e,u));if(o||o===0)i+=o;i+=" ",u={hash:{},inverse:f.noop,fn:f.program(9,b,t)},o=(s=n.compare,s?s.call(e,(s=(s=e.Product,s==null||s===!1?s:s.PrimaryContent),s==null||s===!1?s:s.LocalResults),"gt",1,u):l.call(e,"compare",(s=(s=e.Product,s==null||s===!1?s:s.PrimaryContent),s==null||s===!1?s:s.LocalResults),"gt",1,u));if(o||o===0)i+=o;i+=" </div> ",u={hash:{},inverse:f.noop,fn:f.program(16,x,t)},o=(s=n.equals,s?s.call(e,(s=(s=e.Product,s==null||s===!1?s:s.PrimaryContent),s==null||s===!1?s:s.TotalResults),0,u):l.call(e,"equals",(s=(s=e.Product,s==null||s===!1?s:s.PrimaryContent),s==null||s===!1?s:s.TotalResults),0,u));if(o||o===0)i+=o;i+=" ",u={hash:{}},i+=c((s=n.mountView,s?s.call(e,"contentFilter",u):l.call(e,"mountView","contentFilter",u)))+" ",u={hash:{}},i+=c((s=n.subviews,s?s.call(e,e,u):l.call(e,"subviews",e,u)))+" ",u={hash:{},inverse:f.noop,fn:f.program(2,d,t)},o=(s=n.ifHasFeature,s?s.call(e,"inlineSubmission",u):l.call(e,"ifHasFeature","inlineSubmission",u));if(o||o===0)i+=o;return i+=" </div> </div> ",i}function d(e,t){var i="",s;i+=" ",s=f.invokePartial(r.inlineFormContainer,"inlineFormContainer",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function v(e,t){var r="",i,s,o;r+=" ",o={hash:{tag:"table",classList:"section-summary-table table-full-width",role:"presentation"},inverse:f.noop,fn:f.program(5,m,t)},s=(i=n.conditionalContainer,i?i.call(e,e,o):l.call(e,"conditionalContainer",e,o));if(s||s===0)r+=s;return r+=" ",r}function m(e,t){var r="",i,s,o;r+=" ",o={hash:{tag:"tr",classList:"section-summary-inline"},inverse:f.noop,fn:f.program(6,g,t)},s=(i=n.conditionalContainer,i?i.call(e,e,o):l.call(e,"conditionalContainer",e,o));if(s||s===0)r+=s;r+=" ",o={hash:{}},s=(i=n.mountView,i?i.call(e,"headToHead",e,o):l.call(e,"mountView","headToHead",e,o));if(s||s===0)r+=s;r+=" ",o={hash:{}},s=(i=n.mountView,i?i.call(e,"tagDistributionSummary",e,o):l.call(e,"mountView","tagDistributionSummary",e,o));if(s||s===0)r+=s;return r+=" ",r}function g(e,t){var r="",i,s;r+=" ",s=n["if"].call(e,(i=e.Product,i==null||i===!1?i:i.TotalReviewCount),{hash:{},inverse:f.noop,fn:f.program(7,y,t)});if(s||s===0)r+=s;return r+=" ",r}function y(e,t){var r="",i,s,o;r+=" ",o={hash:{}},s=(i=n.mountView,i?i.call(e,"inlineHistogram",e,o):l.call(e,"mountView","inlineHistogram",e,o));if(s||s===0)r+=s;r+=" ",o={hash:{}},s=(i=n.mountView,i?i.call(e,"secondaryRatingSummary",e,o):l.call(e,"mountView","secondaryRatingSummary",e,o));if(s||s===0)r+=s;return r+=" ",r}function b(e,t){var r="",i,s,o;r+=' <div class="bv-control-bar',o={hash:{},inverse:f.noop,fn:f.program(10,w,t)},s=(i=n.ifHasSubview,i?i.call(e,"contentFilterButton",o):l.call(e,"ifHasSubview","contentFilterButton",o));if(s||s===0)r+=s;r+='"> ',o={hash:{}},s=(i=n.mountView,i?i.call(e,"ugcCount",e,o):l.call(e,"mountView","ugcCount",e,o));if(s||s===0)r+=s;r+=" ",o={hash:{},inverse:f.noop,fn:f.program(12,E,t)},s=(i=n.ifHasFeature,i?i.call(e,"contentSort",o):l.call(e,"ifHasFeature","contentSort",o));if(s||s===0)r+=s;r+=" ",o={hash:{},inverse:f.noop,fn:f.program(14,S,t)},s=(i=n.ifHasFeature,i?i.call(e,"relevancyLink",o):l.call(e,"ifHasFeature","relevancyLink",o));if(s||s===0)r+=s;return r+=" ",o={hash:{}},r+=c((i=n.mountView,i?i.call(e,"contentFilterButton",o):l.call(e,"mountView","contentFilterButton",o)))+" </div> ",r}function w(e,t){return" bv-control-bar-filter-offset"}function E(e,t){var r="",i,s,o;r+=" ",o={hash:{}},s=(i=n.mountView,i?i.call(e,"contentSort",e,o):l.call(e,"mountView","contentSort",e,o));if(s||s===0)r+=s;return r+=" ",r}function S(e,t){var r="",i,s;return r+=" ",s={hash:{}},r+=c((i=n.mountView,i?i.call(e,"relevancyLink",e,s):l.call(e,"mountView","relevancyLink",e,s)))+" ",r}function x(e,t){var i="",s;i+=" ",s=f.invokePartial(r.contentPlaceholder,"contentPlaceholder",e,n,r);if(s||s===0)i+=s;return i+=" ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=this,l=n.helperMissing,c=this.escapeExpression,h="function";s+=' <div class="bv-cleanslate"> ',a={hash:{tag:"div",classList:"shared",dataProductId:!0},inverse:f.noop,fn:f.program(1,p,i)},u=(o=n.view,o?o.call(t,t,a):l.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" </div> ",s});return t.registerPartial("contentList",n),n.deps=["actionBar","inlineFormContainer","contentPlaceholder"],n.tplMountedViews=["trustmarkIcon","inlineHistogram","secondaryRatingSummary","headToHead","tagDistributionSummary","ugcCount","contentSort","relevancyLink","contentFilterButton","contentFilter"],n}),BV.define("util/viewport",["window","jquery"],function(e,t){return{height:function(){var n=e.innerHeight,r=document.compatMode;if(r||!t.support.boxModel)n=r==="CSS1Compat"?document.documentElement.clientHeight:document.body.clientHeight;return n},scrollTop:function(){return document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop},visible:function(e){var n=this.height(),r=this.scrollTop(),i=t(e),s=i.offset().top,o=i.height();return!(r>s+o||r+n<s)}}}),BV.define("bv/util/bvLocal",["underscore","ENV","jquery","util/lookup","BV"],function(e,t,n,r,i){var s=r(t.get("config"),"bvLocal")||{},o=function(t,n){var r=e(t).chain().pluck("Value").intersection(n).value();return r.length===n.length},u={config:s,verifyNode:function(t){var n=r(t,"results.Results");if(!e.isArray(n))return!0;var i=["BV_LOCAL","BV_LOCAL_INACTIVE"],u=o(r(n[0],"Attributes.BV_SUBJECT_TYPE.Values"),i);return s.nodeDisabled=!!u,!s.nodeDisabled},isDisabledNode:function(){return s.enabled&&s.isLocalNode&&s.nodeDisabled},isBVLocal:function(){return s.isLocalNode},shouldRender:function(){var e=i.extensions.data.get("bvapi"),t=n.Deferred();return s.isLocalNode?e.getLast("products").done(function(e){t.resolve(u.verifyNode(e))}):t.resolve(!0),t.promise()},attachLogoHandler:function(t){if(!this.isBVLocal()||!t)return;var n=t.$el.find(".bv-client-logo-container"),r=e.once(function(e){n.removeClass("bv-hidden")}),i=n.find("img");i.on("load",r),i[0].complete&&i.load()}};return u}),BV.define("util/requestAnimFrame",["window"],function(e){return e.BV.requestAnimationFrame}),BV.define("bv/c2013/view/contentList",["ENV","framework/bview","jquery","underscore","hbs!contentList","mf!bv/c2013/messages/common","util/viewport","window","$BV","BV","bv/util/contentType","bv/util/focusManager","bv/util/loadingOverlay","bv/util/productInfo","bv/util/bvLocal","util/requestAnimFrame","framework/util/bvtracker","body"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){return t.extend({name:"contentList",events:{"click .bv-submission-button, .bv-content-placeholder .bv-rating-stars":"loadSubmission","hover .bv-shared":"preloadSubmission","click .bv-text-link":"markLinkAsFakeVisited"},classList:["core-container-"+t.config.version],template:i,msgpacks:[s],init:function(e){var t=this;this.$window=n(u),this.listenTo(this.model,"submission",r(this.loadSubmission).bind(this)),this.subscribe({scrolltocontent:this.scrollToContent,showinlightbox:this.launchContentInLightbox}),this.model.subscribe("loadmedia",function(){t.loadAllMedia()})},_render:function(){return this.model.get("pageview")&&this.triggerPageView(),this.$el.find(this.selector()).find(".bv-content-list").empty(),t.prototype._render.apply(this,arguments)},attach:function(e){d.isBVLocal()&&d.attachLogoHandler(this),t.prototype.attach.apply(this,arguments),this.model.onDataReady(this.lazyLoad,this)},loadAllMedia:function(){if(this.$viewEl){var e=this.$viewEl.length?this.$viewEl:this.$el;this.showImages(e.find("img"))}},lazyLoad:function(){var e=this,t=this.model.getContent();if(!t.lazyLoad||!this.$window)return this.loadAllMedia();if(!t.hasMedia())return;var n=this.$viewEl&&this.$viewEl.length?this.$viewEl:this.$el,i=n.find(".bv-content-list"),s=i.find(".bv-content-top-"+l.noun(this.contentType)),o=r.throttle(function(){var t=e.loadContentItems(s);t||v(o)},500);v(o)},loadContentItems:function(e){var t=this,r=e.not(".bv-content-loaded");return r.length===0?!0:(r.each(function(e,r){o.visible(r)&&t.showImages(n(r).addClass("bv-content-loaded").find("img"))}),!1)},showImages:function(e){e.each(function(e,t){var r=n(t);r.attr("src",r.data("src"))})},_calculatePosition:function(){var e=n("#BVStickyHeader"),t=n(".bv-active-filters"),r=n(u).height(),i=this.$el.length>0?this.$el.offset().top:0,s=0;if(e.length>0){var o=e.hasClass("bv-masthead-fixed");if(i>e.offset().top||o)s=e.height()}if(t.length>0&&!t.hasClass("bv-hidden")){var a=t.offset().top+t.outerHeight(),f=i+r;a>f&&(s+=f-a)}return{scrollTop:i,offset:s}},launchContentInLightbox:function(){if(this.getComponent().lightbox){var t=this;this.model.onDataReady(function(){f.require(["secondary"],function(n){var i=n.ModestBox.get("lightbox"),s=[t],o=t.getFeatureView("contentSort");if(i.opened)return;i.once("afterClose",function(t){var n=r(s).pluck("component");o&&n.push(o.component),e.get("componentManager").restore(n)}),i.open({views:s})})})}},scrollToContent:function(e){var t=this,r=0,i=function(){try{var e=t._calculatePosition();if(!t.$el.length||e.scrollTop<0){++r<15&&setTimeout(i,200);return}n("html").add(g()).animate({scrollTop:e.scrollTop-e.offset},600)}catch(s){}},s=function(){setTimeout(function(){var e=t.$(".bv-content-list.bv-focusable");e.length&&c.moveFocus(e)},0)};this.showContent({showFn:i,moveFn:s})},showContent:function(e){var t=(this.clientAPIConfig||{}).doShowContent||n.noop,i=function(){r(["showFn","moveFn"]).each(function(t){e[t]&&e[t]()})};t(null,null,null,null,i,null)!==!1&&i()},getClientAPIConfig:function(){var e=r.extend({},this.clientAPIConfig,{campaignId:"BV_"+l.Noun(this.model.get("contentType")).toUpperCase()+"_DISPLAY",mobileRedirect:!0});return e},preloadSubmission:r.once(function(e){f._internal.nopreload||f.require(["secondary"],function(){})}),loadSubmission:r.debounce(function(e){if(this.readOnly)return;e.preventDefault();var t=this.getClientAPIConfig();t.silentMode=!1,h.show(),this.model.trigger("showsubmission",t);var n=p.getType(this),r={RatingsAndReviews:"Write",AskAndAnswer:"Ask"}[n];m.feature({type:"Used",name:r,detail1:"Button",detail2:"ContentTop",bvProduct:n,productId:p.getId(this),categoryId:p.getCategoryId(this)})},1e3,!0),triggerPageView:function(){var e=this.model.get("pageview");if(!e)return;var t=this.getClientAPIConfig(),n={type:"Product",label:"Default",productId:t.productId,bvProduct:e.bvProduct,categoryId:p.getCategoryId(this)};e.bvProduct==="AskAndAnswer"&&(n.numQuestions=this.model.get("subject").TotalQuestionCount||0,n.numAnswers=this.model.get("subject").TotalAnswerCount||0),m.pageview(n,this.model)},markLinkAsFakeVisited:function(e){n(e.target).addClass("bv-fake-visited")}})}),BV.define("hbs!profileContentList",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/extmsg","template/helpers/compare","template/helpers/mountView","template/helpers/subviews"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+=' <div data-bv-target="'+c((i=(i=(i=e.Product,i==null||i===!1?i:i.PrimaryContent),i==null||i===!1?i:i.Type),typeof i===l?i.apply(e):i))+'" role="tabpanel" class="bv-focusable" tabindex="0"> <span class="bv-off-screen"> ',o={hash:{prefix:"displaytext_"}},r+=c((i=n.extmsg,i?i.call(e,(i=(i=e.Product,i==null||i===!1?i:i.PrimaryContent),i==null||i===!1?i:i.Type),e.msgpack,e,o):f.call(e,"extmsg",(i=(i=e.Product,i==null||i===!1?i:i.PrimaryContent),i==null||i===!1?i:i.Type),e.msgpack,e,o)))+" </span> ",o={hash:{},inverse:h.noop,fn:h.program(2,d,t)},s=(i=n.compare,i?i.call(e,(i=(i=(i=e.Product,i==null||i===!1?i:i.PrimaryContent),i==null||i===!1?i:i.Statistics),i==null||i===!1?i:i.TotalCount),"gt",1,o):f.call(e,"compare",(i=(i=(i=e.Product,i==null||i===!1?i:i.PrimaryContent),i==null||i===!1?i:i.Statistics),i==null||i===!1?i:i.TotalCount),"gt",1,o));if(s||s===0)r+=s;return r+=" ",o={hash:{}},r+=c((i=n.subviews,i?i.call(e,e,o):f.call(e,"subviews",e,o)))+" </div> ",r}function d(e,t){var r="",i,s,o;r+=' <div class="bv-control-bar"> ',o={hash:{}},s=(i=n.mountView,i?i.call(e,"ugcCount",e,o):f.call(e,"mountView","ugcCount",e,o));if(s||s===0)r+=s;return r+=" </div> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l="function",c=this.escapeExpression,h=this;s+=" ",a={hash:{tag:"div",classList:"shared full-profile-content-list"},inverse:h.noop,fn:h.program(1,p,i)},u=(o=n.view,o?o.call(t,t,a):f.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("profileContentList",n),n.deps=[],n.tplMountedViews=["ugcCount"],n}),BV.define("mf!bv/c2013/messages/profile",["vendor/messageformat","framework/util/bvtrackerqueue"],function(e,t){return{displaytext_review:function(e){try{return function(e){var t="";return t+="Reviews Tab Panel",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `displaytext_review`: "+n.toString())]),""}},displaytext_question:function(e){try{return function(e){var t="";return t+="Questions Tab Panel",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `displaytext_question`: "+n.toString())]),""}},displaytext_answer:function(e){try{return function(e){var t="";return t+="Answers Tab Panel",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `displaytext_answer`: "+n.toString())]),""}}}}),BV.define("bv/c2013/view/profileContentList",["framework/bview","bv/c2013/view/contentList","hbs!profileContentList","jquery","underscore","mf!bv/c2013/messages/profile"],function(e,t,n,r,i,s){return t.extend({name:"profileContentList",classList:["core-container-"+e.config.version],templateName:"profileContentList",events:{},template:n,msgpacks:[s],init:function(){},attach:function(t){e.prototype.attach.apply(this,arguments)}})}),BV.define("hbs!contentItemCollection",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/subviews"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){var r="",i,s;return r+=" ",s={hash:{}},r+=l((i=n.subviews,i?i.call(e,e,s):f.call(e,"subviews",e,s)))+" ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this;a={hash:{tag:"ol",classList:"content-list",alwaysRender:!0},inverse:c.noop,fn:c.program(1,h,i)},u=(o=n.view,o?o.call(t,t,a):f.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("contentItemCollection",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!contentAvatar",["hbs","vendor/handlebars/runtime","template/helpers/ifHasFeature"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){return' <div class="bv-content-item-author-profile-offset bv-content-item-author-profile-offset-on"> '}function h(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:f.program(6,d,t),fn:f.program(4,p,t)},s=(i=n.ifHasFeature,i?i.call(e,"socialAvatar",o):l.call(e,"ifHasFeature","socialAvatar",o));if(s||s===0)r+=s;return r+=" ",r}function p(e,t){return' <div class="bv-content-item-avatar-offset bv-content-item-avatar-offset-on"> '}function d(e,t){return' <div class="bv-content-item-avatar-offset bv-content-item-avatar-offset-off"> '}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=this,l=n.helperMissing;a={hash:{},inverse:f.program(3,h,i),fn:f.program(1,c,i)},u=(o=n.ifHasFeature,o?o.call(t,"inlineProfile",a):l.call(t,"ifHasFeature","inlineProfile",a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("contentAvatar",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!subjectInfo",["hbs","vendor/handlebars/runtime","template/helpers/withIf"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var r="",i;return r+=' <img class="bv-subject-image" src="',(i=n.ImageUrl)?i=i.call(e,{hash:{}}):(i=e.ImageUrl,i=typeof i===u?i.apply(e):i),r+=a(i)+'" alt="',(i=n.Name)?i=i.call(e,{hash:{}}):(i=e.Name,i=typeof i===u?i.apply(e):i),r+=a(i)+'"/> ',r}function h(e,t){var r="",i,s,o;r+=' <h3 class="bv-subject-name-header"> ',o={hash:{},inverse:f.noop,fn:f.program(4,p,t)},s=(i=n.withIf,i?i.call(e,e.Brand,o):l.call(e,"withIf",e.Brand,o));if(s||s===0)r+=s;return r+=" ",(s=n.Name)?s=s.call(e,{hash:{}}):(s=e.Name,s=typeof s===u?s.apply(e):s),r+=a(s)+" </h3> ",r}function p(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.Name,{hash:{},inverse:f.noop,fn:f.program(5,d,t)});if(i||i===0)r+=i;return r+=" ",r}function d(e,t){var r="",i;return(i=n.Name)?i=i.call(e,{hash:{}}):(i=e.Name,i=typeof i===u?i.apply(e):i),r+=a(i)+" - ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=this,l=n.helperMissing;s+='<div class="bv-subject-info"> ',o=n["if"].call(t,t.ImageUrl,{hash:{},inverse:f.noop,fn:f.program(1,c,i)});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t.Name,{hash:{},inverse:f.noop,fn:f.program(3,h,i)});if(o||o===0)s+=o;return s+=" </div> ",s});return t.registerPartial("subjectInfo",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!brandLogo",["hbs","vendor/handlebars/runtime"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){var r="",i;return r+=' <img class="bv-brand-logo-image" src="',(i=n.BrandImageLogoURL)?i=i.call(e,{hash:{}}):(i=e.BrandImageLogoURL,i=typeof i===u?i.apply(e):i),r+=a(i)+'" alt="'+a((i=(i=e.Author,i==null||i===!1?i:i.DisplayName),typeof i===u?i.apply(e):i))+'"/> ',r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div class="bv-brand-logo"> ',o=n["if"].call(t,t.BrandImageLogoURL,{hash:{},inverse:f.noop,fn:f.program(1,l,i)});if(o||o===0)s+=o;return s+=" </div> ",s});return t.registerPartial("brandLogo",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!contentBadgeSummary",["hbs","vendor/handlebars/runtime","template/helpers/conditionalContainer","template/helpers/equals","template/helpers/mountView","template/helpers/renderBadge"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t,r){var i="",s,o,u;i+="  ",u={hash:{},inverse:c.noop,fn:c.program(2,p,t)},o=(s=n.equals,s?s.call(e,e.contentType,"Answers",u):f.call(e,"equals",e.contentType,"Answers",u));if(o||o===0)i+=o;i+=" ",o=n.each.call(e,e.OrderedBadges,{hash:{},inverse:c.noop,fn:c.programWithDepth(v,t,r)});if(o||o===0)i+=o;return i+=" ",i}function p(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:c.noop,fn:c.program(3,d,t)},s=(i=n.equals,i?i.call(e,e.CampaignId,"BVCROWDSOURCE",o):f.call(e,"equals",e.CampaignId,"BVCROWDSOURCE",o));if(s||s===0)r+=s;return r+=" ",r}function d(e,t){var r="",i,s;return r+=" ",s={hash:{}},r+=l((i=n.mountView,i?i.call(e,"crowdSourcedAnswerBadge",e,s):f.call(e,"mountView","crowdSourcedAnswerBadge",e,s)))+" ",r}function v(e,t,r){var i="",s,o;return i+=" ",o={hash:{badgeId:e.id,badgeType:e.badgeType,iconChar:e.iconChar,msgKey:e.msgKey,msgPack:r.msgpack,msgPrefix:e.msgPrefix}},i+=l((s=n.renderBadge,s?s.call(e,e.Badges,o):f.call(e,"renderBadge",e.Badges,o)))+" ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this;s+="  ",a={hash:{tag:"div",classList:"content-badges-container"},inverse:c.noop,fn:c.programWithDepth(h,i,t)},u=(o=n.conditionalContainer,o?o.call(t,t,a):f.call(t,"conditionalContainer",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("contentBadgeSummary",n),n.deps=[],n.tplMountedViews=["crowdSourcedAnswerBadge"],n}),BV.define("hbs!responseFrom",["hbs","vendor/handlebars/runtime","template/helpers/equals","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){var r="",i,s,o;r+=' <h4 class="bv-content-title"> ',o={hash:{},inverse:c.program(4,d,t),fn:c.program(2,p,t)},s=(i=n.equals,i?i.call(e,e.ResponseSource,"Review Response",o):f.call(e,"equals",e.ResponseSource,"Review Response",o));if(s||s===0)r+=s;return r+=" </h4> ",r}function p(e,t){var r="",i,s;return r+=" ",s={hash:{}},r+=l((i=n.extmsg,i?i.call(e,"responseFrom_reviewresponse",e.msgpack,e.Author,s):f.call(e,"extmsg","responseFrom_reviewresponse",e.msgpack,e.Author,s)))+" ",r}function d(e,t){var r="",i,s;return r+=" ",s={hash:{}},r+=l((i=n.extmsg,i?i.call(e,"responseFrom",e.msgpack,e,s):f.call(e,"extmsg","responseFrom",e.msgpack,e,s)))+" ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this;a={hash:{},inverse:c.noop,fn:c.program(1,h,i)},u=(o=n.equals,o?o.call(t,t.Type,"clientresponse",a):f.call(t,"equals",t.Type,"clientresponse",a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("responseFrom",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("template/helpers/percentage",["vendor/handlebars/runtime","framework/util/bvreporter"],function(e,t){function n(e,n,r,i){if(e===void undefined)return t.warn("Percentage helper being called without a value"),0;if(e<0)return t.warn("Percentage helper being called with an invalid value"),0;if(n===void undefined)return t.warn("Percentage helper being called without a range"),0;if(n<=0)return t.warn("Percentage helper being called with an invalid range"),0;r=r||1,r.hash&&(i=r,r=1),r=Math.round(r),i=i||{},i.hash=i.hash||{};var s=Math.pow(10,r);e=Math.round(e*s)/s;var o=i.hash.rangeStart||0,u=Math.round((e-o)/(n-o)*100);return i.hash.offset&&(u+=parseFloat(i.hash.offset)),u}return e.registerHelper("percentage",n),n}),BV.define("hbs!contentStars",["hbs","vendor/handlebars/runtime","template/helpers/extmsg","template/helpers/renderIcon","template/helpers/loop","template/helpers/ratingIconChar","template/helpers/percentage"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var r="",i,s,o;r+=' <span class="bv-content-rating bv-rating-ratio" itemprop="reviewRating" itemscope itemtype="http://schema.org/Rating"> <meta itemprop="ratingValue" content="',(i=n.Rating)?i=i.call(e,{hash:{}}):(i=e.Rating,i=typeof i===l?i.apply(e):i),r+=a(i)+'"> <meta itemprop="bestRating" content="',(i=n.RatingRange)?i=i.call(e,{hash:{}}):(i=e.RatingRange,i=typeof i===l?i.apply(e):i),r+=a(i)+'"> <span class="bv-rating-stars-container"> <abbr title="',o={hash:{}},r+=a((i=n.extmsg,i?i.call(e,"offscreen_ratingStars",e.msgpack,e,o):u.call(e,"extmsg","offscreen_ratingStars",e.msgpack,e,o)))+'" class="bv-rating bv-rating-stars bv-rating-stars-off" aria-hidden="true"> ',o={hash:{},inverse:f.noop,fn:f.program(2,h,t)},s=(i=n.renderIcon,i?i.call(e,"bv-sprite-rating-stars-off",o):u.call(e,"renderIcon","bv-sprite-rating-stars-off",o));if(s||s===0)r+=s;r+=' </abbr> <abbr title="',o={hash:{}},r+=a((i=n.extmsg,i?i.call(e,"offscreen_ratingStars",e.msgpack,e,o):u.call(e,"extmsg","offscreen_ratingStars",e.msgpack,e,o)))+'" style="width:',o={hash:{}},r+=a((i=n.percentage,i?i.call(e,e.Rating,e.RatingRange,o):u.call(e,"percentage",e.Rating,e.RatingRange,o)))+'% !important;" class="bv-rating-max bv-rating-stars bv-rating-stars-on" aria-hidden="true"> ',o={hash:{},inverse:f.noop,fn:f.program(2,h,t)},s=(i=n.renderIcon,i?i.call(e,"bv-sprite-rating-stars-on",o):u.call(e,"renderIcon","bv-sprite-rating-stars-on",o));if(s||s===0)r+=s;return r+=' </abbr> <span class="bv-off-screen">',o={hash:{}},r+=a((i=n.extmsg,i?i.call(e,"offscreen_ratingStars",e.msgpack,e,o):u.call(e,"extmsg","offscreen_ratingStars",e.msgpack,e,o)))+"</span> </span> </span> ",r}function h(e,t){var r,i,s;return s={hash:{},inverse:f.noop,fn:f.program(3,p,t)},i=(r=n.loop,r?r.call(e,e.RatingRange,e,s):u.call(e,"loop",e.RatingRange,e,s)),i||i===0?i:""}function p(e,t){var r,i;return i={hash:{}},a((r=n.ratingIconChar,r?r.call(e,"rating-stars-on",i):u.call(e,"ratingIconChar","rating-stars-on",i)))}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u=n.helperMissing,a=this.escapeExpression,f=this,l="function";o=n["if"].call(t,t.Rating,{hash:{},inverse:f.noop,fn:f.program(1,c,i)});if(o||o===0)s+=o;return s+=" ",s});return t.registerPartial("contentStars",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!contentReference",["hbs","vendor/handlebars/runtime","template/helpers/withIf"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.Url,{hash:{},inverse:c.noop,fn:c.program(2,d,t)});if(i||i===0)r+=i;r+=' <span class="bv-reference-title"> ',i=n["if"].call(e,e.Product,{hash:{},inverse:c.program(6,m,t),fn:c.program(4,v,t)});if(i||i===0)r+=i;r+=" </span> ",i=n["if"].call(e,e.Url,{hash:{},inverse:c.noop,fn:c.program(8,g,t)});if(i||i===0)r+=i;return r+=" ",r}function d(e,t){var r="",i;return r+=' <a class="bv-content-reference-link" href="',(i=n.Url)?i=i.call(e,{hash:{}}):(i=e.Url,i=typeof i===f?i.apply(e):i),r+=l(i)+'" > ',r}function v(e,t){var n="",r;return n+=" "+l((r=(r=e.Product,r==null||r===!1?r:r.Name),typeof r===f?r.apply(e):r))+" ",n}function m(e,t){var r="",i;return r+=" ",(i=n.Name)?i=i.call(e,{hash:{}}):(i=e.Name,i=typeof i===f?i.apply(e):i),r+=l(i)+" ",r}function g(e,t){return" </a> "}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;a={hash:{},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.withIf,o?o.call(t,t.Reference,a):h.call(t,"withIf",t.Reference,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("contentReference",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!contentTimeAgo",["hbs","vendor/handlebars/runtime","template/helpers/schemaType","template/helpers/ago"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){var r="",i,s;return r+=' <meta itemprop="datePublished" content="',s={hash:{format:"YYYY-MM-DD"}},r+=l((i=n.ago,i?i.call(e,e.LastModeratedTime,s):f.call(e,"ago",e.LastModeratedTime,s)))+'"> ',r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this;s+='<div class="bv-content-datetime" role="presentation"> <meta itemprop="',a={hash:{comment:"commentTime",answer:"answerTime",def:"dateCreated"}},s+=l((o=n.schemaType,o?o.call(t,t.Type,a):f.call(t,"schemaType",t.Type,a)))+'" content="',a={hash:{format:"YYYY-MM-DD"}},s+=l((o=n.ago,o?o.call(t,t.SubmissionTime,a):f.call(t,"ago",t.SubmissionTime,a)))+'"> ',u=n["if"].call(t,t.LastModeratedTime,{hash:{},inverse:c.noop,fn:c.program(1,h,i)});if(u||u===0)s+=u;return s+=' <span class="bv-content-datetime-dot" aria-hidden="true">&middot;</span> <span class="bv-content-datetime-stamp">',a={hash:{}},s+=l((o=n.ago,o?o.call(t,t.SubmissionTime,a):f.call(t,"ago",t.SubmissionTime,a)))+" &nbsp;</span> </div> ",s});return t.registerPartial("contentTimeAgo",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!contentMeta",["hbs","vendor/handlebars/runtime","hbs!contentReference","hbs!contentAuthorInner","hbs!contentTimeAgo","template/helpers/ifHasFeature"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var i="",s;i+=" ",s=f.invokePartial(r.contentReference,"contentReference",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function h(e,t){var i="",s;i+=" ",s=f.invokePartial(r.contentAuthorInner,"contentAuthorInner",e,n,r);if(s||s===0)i+=s;return i+=" ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=this,l=n.helperMissing;s+='<div class="bv-content-meta-wrapper"> <div class="bv-content-meta" role="presentation"> <div class="bv-content-reference-data bv-content-author-name"> ',a={hash:{},inverse:f.program(3,h,i),fn:f.program(1,c,i)},u=(o=n.ifHasFeature,o?o.call(t,"productImage",t,a):l.call(t,"ifHasFeature","productImage",t,a));if(u||u===0)s+=u;s+=" ",u=f.invokePartial(r.contentTimeAgo,"contentTimeAgo",t,n,r);if(u||u===0)s+=u;return s+=" </div> </div> </div> ",s});return t.registerPartial("contentMeta",n),n.deps=["contentReference","contentAuthorInner","contentTimeAgo"],n.tplMountedViews=[],n}),BV.define("template/helpers/paragraphize",["vendor/handlebars/runtime","underscore"],function(e,t){function r(r,i){if(typeof r=="string"){r=t.escape(r);if(i.hash.enableLinks){var s=[];t(n).chain().values().forEach(function(e){var t=r.match(e);t&&(s=s.concat(t))});var o=r.replace(/./g,"0");t(s).forEach(function(e){e.charAt(0)==="("&&(e=e.slice(1,e.indexOf(")"))),e.charAt(e.length-1)==="."&&(e=e.slice(0,e.length-1));var t=0;while(r.indexOf(e,t)>-1){var n=r.indexOf(e,t);if(o.substring(n,n+e.length).indexOf("1")===-1){var i=e.indexOf("http")>-1?' href="'+e+'"':e.indexOf("@")>-1?' href="mailto:'+e+'"':"";i='<a class="bv-text-link"'+i+">"+e+"</a>",r=r.substring(0,n)+i+r.substring(n+e.length,r.length),o=o.substring(0,n)+i.replace(/./g,"1")+o.substring(n+e.length,o.length),t=r.length}else t=o.indexOf("0",o.indexOf("1",t))}})}return r=r.split("\n\n").join("</p><p>"),new e.SafeString("<p>"+r+"</p>")}return r}var n={url:/\(?\b(?:(http|https|ftp):\/\/)+((?:www.)?[a-zA-Z0-9\-\.]+[\.][a-zA-Z]{2,4}|localhost(?=\/)|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?(?=[\s\/,\.\)])([\/]{1}[^\s\?]*[\/]{1})*(?:\/?([^\s\n\?\[\]\{\}\#]*(?:(?=\.)){1}|[^\s\n\?\[\]\{\}\.\#]*)?([\.]{1}[^\s\?\#]*)?)?(?:\?{1}([^\s\n\#\[\]\(\)]*))?([\#][^\s\n]*)?\)?/ig,email:/[_a-z0-9\-]+(\.[_a-z0-9\-]+)*@[a-z0-9\-]+(\.[a-z0-9\-]+)*(\.[a-z]{2,4})/ig};return e.registerHelper("paragraphize",r),r}),BV.define("hbs!contentTitle",["hbs","vendor/handlebars/runtime","template/helpers/extmsg","template/helpers/ifHasFeature","template/helpers/paragraphize"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var r="",i;r+=' <h4 class="bv-content-title" itemprop="headline"> ',i=n["if"].call(e,e.isSimple,{hash:{},inverse:l.noop,fn:l.program(2,h,t)});if(i||i===0)r+=i;r+=" ",i=n["if"].call(e,e._isPreview,{hash:{},inverse:l.program(6,d,t),fn:l.program(4,p,t)});if(i||i===0)r+=i;return r+=" </h4> ",r}function h(e,t){var r="",i,s;return r+='  <span class="bv-off-screen"> ',s={hash:{prefix:""}},r+=a((i=n.extmsg,i?i.call(e,"headToHeadSummary",e.msgpack,e,s):u.call(e,"extmsg","headToHeadSummary",e.msgpack,e,s)))+" </span> ",r}function p(e,t){var r="",i;return r+=" ",(i=n.Title)?i=i.call(e,{hash:{}}):(i=e.Title,i=typeof i===f?i.apply(e):i),r+=a(i)+" ",r}function d(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:l.program(4,p,t),fn:l.program(7,v,t)},s=(i=n.ifHasFeature,i?i.call(e,"secondaryContentLink",o):u.call(e,"ifHasFeature","secondaryContentLink",o));if(s||s===0)r+=s;return r+=" ",r}function v(e,t){var r="",i;return r+=' <a class="bv-secondary-content-link bv-focusable" href="#" data-contentId="',(i=n.Id)?i=i.call(e,{hash:{}}):(i=e.Id,i=typeof i===f?i.apply(e):i),r+=a(i)+'">',(i=n.Title)?i=i.call(e,{hash:{}}):(i=e.Title,i=typeof i===f?i.apply(e):i),r+=a(i)+"</a> ",r}function m(e,t){var r="",i,s;return r+=' <div class="bv-content-summary-title bv-focusable" tabindex="0"> ',s={hash:{}},r+=a((i=n.paragraphize,i?i.call(e,e.QuestionDetails,s):u.call(e,"paragraphize",e.QuestionDetails,s)))+" </div> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u=n.helperMissing,a=this.escapeExpression,f="function",l=this;o=n["if"].call(t,t.Title,{hash:{},inverse:l.noop,fn:l.program(1,c,i)});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t.QuestionDetails,{hash:{},inverse:l.noop,fn:l.program(9,m,i)});if(o||o===0)s+=o;return s+=" ",s});return t.registerPartial("contentTitle",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("_i18n_secondaryContentCommentLink",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";return t+="comments",t}(e)}catch(t){return r.push(["error",new Error("MF error on `secondaryContentCommentLink`: "+t.toString())]),""}}return t.registerHelper("_i18n_secondaryContentCommentLink",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("_i18n_secondaryContentAnswerLink",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(t){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalSecondaryContentCount",i=t[r],s=0,o={one:function(e){var t="";return t+="answer",t},other:function(e){var t="";return t+="answers",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}(t)}catch(n){return r.push(["error",new Error("MF error on `secondaryContentAnswerLink`: "+n.toString())]),""}}return t.registerHelper("_i18n_secondaryContentAnswerLink",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("hbs!secondaryContentLink",["hbs","vendor/handlebars/runtime","template/helpers/exists","template/helpers/equals","_i18n_secondaryContentCommentLink","_i18n_secondaryContentAnswerLink"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+=' <a class="bv-content-data-count bv-secondary-content-link bv-focusable" tabindex="0" href="#" data-contentId="',(i=n.Id)?i=i.call(e,{hash:{}}):(i=e.Id,i=typeof i===l?i.apply(e):i),r+=c(i)+'"> <span class="bv-content-title">',(i=n.TotalSecondaryContentCount)?i=i.call(e,{hash:{}}):(i=e.TotalSecondaryContentCount,i=typeof i===l?i.apply(e):i),r+=c(i)+'</span> <span class="bv-content-data-label"> ',o={hash:{},inverse:h.noop,fn:h.program(2,d,t)},s=(i=n.equals,i?i.call(e,e.SecondaryType,"comment",o):f.call(e,"equals",e.SecondaryType,"comment",o));if(s||s===0)r+=s;r+=" ",o={hash:{},inverse:h.noop,fn:h.program(4,v,t)},s=(i=n.equals,i?i.call(e,e.SecondaryType,"answer",o):f.call(e,"equals",e.SecondaryType,"answer",o));if(s||s===0)r+=s;return r+=' </span> <meta itemprop="interactionCount" content="User',(s=n.secondaryContentType)?s=s.call(e,{hash:{}}):(s=e.secondaryContentType,s=typeof s===l?s.apply(e):s),r+=c(s)+":",(s=n.TotalSecondaryContentCount)?s=s.call(e,{hash:{}}):(s=e.TotalSecondaryContentCount,s=typeof s===l?s.apply(e):s),r+=c(s)+'"/> </a> ',r}function d(e,t){var r="",i,s,o;r+="  ",o={hash:{}},s=(i=n._i18n_secondaryContentCommentLink,i?i.call(e,e,o):f.call(e,"_i18n_secondaryContentCommentLink",e,o));if(s||s===0)r+=s;return r+=" ",r}function v(e,t){var r="",i,s,o;r+="  ",o={hash:{}},s=(i=n._i18n_secondaryContentAnswerLink,i?i.call(e,e,o):f.call(e,"_i18n_secondaryContentAnswerLink",e,o));if(s||s===0)r+=s;return r+=" ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l="function",c=this.escapeExpression,h=this;a={hash:{},inverse:h.noop,fn:h.program(1,p,i)},u=(o=n.exists,o?o.call(t,t.TotalSecondaryContentCount,a):f.call(t,"exists",t.TotalSecondaryContentCount,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("secondaryContentLink",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!contentDataSummary",["hbs","vendor/handlebars/runtime","hbs!contentBadgeSummary","hbs!responseFrom","hbs!contentStars","hbs!contentMeta","hbs!contentTitle","hbs!secondaryContentLink","template/helpers/notEqual","template/helpers/ifHasFeature","template/helpers/equals"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var i="",s;i+=" ",s=f.invokePartial(r.contentBadgeSummary,"contentBadgeSummary",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function h(e,t){var i="",s;i+=" ",s=f.invokePartial(r.contentStars,"contentStars",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function p(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:f.noop,fn:f.program(6,d,t)},s=(i=n.ifHasFeature,i?i.call(e,"secondaryContentLink",o):l.call(e,"ifHasFeature","secondaryContentLink",o));if(s||s===0)r+=s;return r+=" ",r}function d(e,t){var i="",s;i+=" ",s=f.invokePartial(r.secondaryContentLink,"secondaryContentLink",e,n,r);if(s||s===0)i+=s;return i+=" ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=this,l=n.helperMissing;s+='<div class="bv-content-data-summary"> ',a={hash:{},inverse:f.noop,fn:f.program(1,c,i)},u=(o=n.notEqual,o?o.call(t,t.contentType,"Comments",a):l.call(t,"notEqual",t.contentType,"Comments",a));if(u||u===0)s+=u;s+=' <div class="bv-content-header-meta"> ',u=f.invokePartial(r.responseFrom,"responseFrom",t,n,r);if(u||u===0)s+=u;s+=" ",a={hash:{},inverse:f.noop,fn:f.program(3,h,i)},u=(o=n.ifHasFeature,o?o.call(t,"stars",a):l.call(t,"ifHasFeature","stars",a));if(u||u===0)s+=u;s+=" ",u=f.invokePartial(r.contentMeta,"contentMeta",t,n,r);if(u||u===0)s+=u;s+=" </div> ",a={hash:{},inverse:f.noop,fn:f.program(1,c,i)},u=(o=n.equals,o?o.call(t,t.contentType,"Comments",a):l.call(t,"equals",t.contentType,"Comments",a));if(u||u===0)s+=u;s+=' <div class="bv-content-title-container"> ',u=f.invokePartial(r.contentTitle,"contentTitle",t,n,r);if(u||u===0)s+=u;s+=" </div> ",u=n.unless.call(t,t.isSimple,{hash:{},inverse:f.noop,fn:f.program(5,p,i)});if(u||u===0)s+=u;return s+=" </div> ",s});return t.registerPartial("contentDataSummary",n),n.deps=["contentBadgeSummary","responseFrom","contentStars","contentMeta","contentTitle","secondaryContentLink"],n.tplMountedViews=[],n}),BV.define("template/helpers/unlessHasFeature",["vendor/handlebars/runtime"],function(e){function t(){var t=[].slice.call(arguments),n=t[t.length-1],r=n.fn,i=n.inverse;return n.fn=i,n.inverse=r,e.helpers.ifHasFeature.apply(this,t)}return e.registerHelper("unlessHasFeature",t),t}),BV.define("hbs!contentHeader",["hbs","vendor/handlebars/runtime","hbs!subjectInfo","hbs!brandLogo","hbs!contentAuthorIcon","hbs!contentDataSummary","template/helpers/ifHasFeature","template/helpers/unlessHasFeature","template/helpers/withIf"],function(e,t){var n=t.template(function(e,t,n,r,i){function f(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:u.program(9,v,t),fn:u.program(2,l,t)},s=(i=n.ifHasFeature,i?i.call(e,"productImage",o):a.call(e,"ifHasFeature","productImage",o));if(s||s===0)r+=s;return r+=" ",r}function l(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:u.noop,fn:u.program(3,c,t)},s=(i=n.withIf,i?i.call(e,e.Reference,o):a.call(e,"withIf",e.Reference,o));if(s||s===0)r+=s;return r+=" ",r}function c(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.ImageUrl,{hash:{},inverse:u.program(6,p,t),fn:u.program(4,h,t)});if(i||i===0)r+=i;return r+=" ",r}function h(e,t){var i="",s;i+=" ",s=u.invokePartial(r.subjectInfo,"subjectInfo",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function p(e,t){var r="",i,s;r+=" ",s=n["if"].call(e,(i=e.Product,i==null||i===!1?i:i.ImageUrl),{hash:{},inverse:u.noop,fn:u.program(7,d,t)});if(s||s===0)r+=s;return r+=" ",r}function d(e,t){var i="",s;i+=" ",s=u.invokePartial(r.subjectInfo,"subjectInfo",e.Product,n,r);if(s||s===0)i+=s;return i+=" ",i}function v(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.IsBrandAnswer,{hash:{},inverse:u.program(12,g,t),fn:u.program(10,m,t)});if(i||i===0)r+=i;return r+=" ",r}function m(e,t){var i="",s;i+=" ",s=u.invokePartial(r.brandLogo,"brandLogo",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function g(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:u.noop,fn:u.program(13,y,t)},s=(i=n.unlessHasFeature,i?i.call(e,"inlineProfile",o):a.call(e,"unlessHasFeature","inlineProfile",o));if(s||s===0)r+=s;return r+=" ",r}function y(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:u.noop,fn:u.program(14,b,t)},s=(i=n.ifHasFeature,i?i.call(e,"socialAvatar",o):a.call(e,"ifHasFeature","socialAvatar",o));if(s||s===0)r+=s;return r+=" ",r}function b(e,t){var i="",s;i+=' <div class="bv-author-avatar"> ',s=u.invokePartial(r.contentAuthorIcon,"contentAuthorIcon",e.Author,n,r);if(s||s===0)i+=s;return i+=" </div> ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u=this,a=n.helperMissing;s+='<div class="bv-content-header"> ',o=n.unless.call(t,t.isSimple,{hash:{},inverse:u.noop,fn:u.program(1,f,i)});if(o||o===0)s+=o;s+=" ",o=u.invokePartial(r.contentDataSummary,"contentDataSummary",t,n,r);if(o||o===0)s+=o;return s+=" </div> ",s});return t.registerPartial("contentHeader",n),n.deps=["subjectInfo","brandLogo","contentAuthorIcon","contentDataSummary"],n.tplMountedViews=[],n}),BV.define("_i18n_contentProsLabel",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";return t+="Pros:",t}(e)}catch(t){return r.push(["error",new Error("MF error on `contentProsLabel`: "+t.toString())]),""}}return t.registerHelper("_i18n_contentProsLabel",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("_i18n_contentConsLabel",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";return t+="Cons:",t}(e)}catch(t){return r.push(["error",new Error("MF error on `contentConsLabel`: "+t.toString())]),""}}return t.registerHelper("_i18n_contentConsLabel",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("hbs!contentData",["hbs","vendor/handlebars/runtime","hbs!contentRecommended","hbs!contentMediaList","hbs!contentSyndicationSummary","hbs!contentProductFamilySummary","template/helpers/conditionalContainer","template/helpers/ifHasFeature","template/helpers/eachWithSeparator","_i18n_contentProsLabel","_i18n_contentConsLabel"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i;r+=" ",i=n.unless.call(e,e.isSimple,{hash:{},inverse:c.noop,fn:c.program(2,d,t)});if(i||i===0)r+=i;return r+=" ",r}function d(e,t){var i="",s,o,u;i+=" ",u={hash:{},inverse:c.noop,fn:c.program(3,v,t)},o=(s=n.ifHasFeature,s?s.call(e,"prosCons",u):h.call(e,"ifHasFeature","prosCons",u));if(o||o===0)i+=o;i+=' <div class="bv-content-product-questions"> ',o=n.each.call(e,e.ProductQuestionsList,{hash:{},inverse:c.noop,fn:c.program(9,b,t)});if(o||o===0)i+=o;i+=" </div> ",u={hash:{},inverse:c.noop,fn:c.program(11,w,t)},o=(s=n.ifHasFeature,s?s.call(e,"tags",u):h.call(e,"ifHasFeature","tags",u));if(o||o===0)i+=o;i+=" ",u={hash:{},inverse:c.noop,fn:c.program(14,S,t)},o=(s=n.ifHasFeature,s?s.call(e,"recommended",u):h.call(e,"ifHasFeature","recommended",u));if(o||o===0)i+=o;i+="  ",o=c.invokePartial(r.contentMediaList,"contentMediaList",e,n,r);if(o||o===0)i+=o;i+=" ",o=n.unless.call(e,e.isSearchResult,{hash:{},inverse:c.noop,fn:c.program(16,x,t)});if(o||o===0)i+=o;return i+=" ",i}function v(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.Pros,{hash:{},inverse:c.noop,fn:c.program(4,m,t)});if(i||i===0)r+=i;r+=" ",i=n["if"].call(e,e.Cons,{hash:{},inverse:c.noop,fn:c.program(7,y,t)});if(i||i===0)r+=i;return r+=" ",r}function m(e,t){var r="",i,s,o;r+=' <dl class="bv-content-data-pros" role="presentation"> <dt class="bv-content-data-label-container" role="presentation"> <span class="bv-content-data-icon" aria-hidden="true">+</span> <span class="bv-content-data-label">  ',(i=n._i18n_contentProsLabel)?i=i.call(e,{hash:{}}):(i=e._i18n_contentProsLabel,i=typeof i===f?i.apply(e):i);if(i||i===0)r+=i;r+=" </span> </dt> ",o={hash:{},inverse:c.noop,fn:c.program(5,g,t)},s=(i=n.eachWithSeparator,i?i.call(e,e.Pros,",",o):h.call(e,"eachWithSeparator",e.Pros,",",o));if(s||s===0)r+=s;return r+=" </dl> ",r}function g(e,t){var n="",r;return n+=' <dd class="bv-content-data-value" role="presentation">'+l((r=e.content,typeof r===f?r.apply(e):r))+l((r=e.separator,typeof r===f?r.apply(e):r))+"</dd> ",n}function y(e,t){var r="",i,s,o;r+=' <dl class="bv-content-data-cons" role="presentation"> <dt class="bv-content-data-label-container" role="presentation"> <span class="bv-content-data-icon" aria-hidden="true">-</span> <span class="bv-content-data-label">  ',(i=n._i18n_contentConsLabel)?i=i.call(e,{hash:{}}):(i=e._i18n_contentConsLabel,i=typeof i===f?i.apply(e):i);if(i||i===0)r+=i;r+=" </span> </dt> ",o={hash:{},inverse:c.noop,fn:c.program(5,g,t)},s=(i=n.eachWithSeparator,i?i.call(e,e.Cons,",",o):h.call(e,"eachWithSeparator",e.Cons,",",o));if(s||s===0)r+=s;return r+=" </dl> ",r}function b(e,t){var n="",r;return n+=' <dl class="bv-content-data-product-questions" role="presentation"> <dt class="bv-content-data-label-container" role="presentation"> <span class="bv-content-data-label">'+l((r=e.Label,typeof r===f?r.apply(e):r))+'</span> </dt> <dd class="bv-content-data-value" role="presentation">'+l((r=e.Value,typeof r===f?r.apply(e):r))+"</dd> </dl> ",n}function w(e,t){var r="",i;r+=' <div class="bv-content-tag-dimensions"> ',i=n.each.call(e,e.TagDimensionsList,{hash:{},inverse:c.noop,fn:c.program(12,E,t)});if(i||i===0)r+=i;return r+=" </div> ",r}function E(e,t){var r="",i,s,o;r+=' <dl class="bv-content-data-tag-dimensions" role="presentation"> <dt class="bv-content-data-label-container" role="presentation"> <span class="bv-content-data-icon" aria-hidden="true">#</span> <span class="bv-content-data-label">'+l((i=e.Label,typeof i===f?i.apply(e):i))+"</span> </dt> ",o={hash:{},inverse:c.noop,fn:c.program(5,g,t)},s=(i=n.eachWithSeparator,i?i.call(e,e.Values,",",o):h.call(e,"eachWithSeparator",e.Values,",",o));if(s||s===0)r+=s;return r+=" </dl> ",r}function S(e,t){var i="",s;i+=" ",s=c.invokePartial(r.contentRecommended,"contentRecommended",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function x(e,t){var r="",i,s,o;r+=" ",o={hash:{tag:"div",classList:"content-data-syndication"},inverse:c.noop,fn:c.program(17,T,t)},s=(i=n.conditionalContainer,i?i.call(e,e,o):h.call(e,"conditionalContainer",e,o));if(s||s===0)r+=s;return r+=" ",r}function T(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:c.noop,fn:c.program(18,N,t)},s=(i=n.ifHasFeature,i?i.call(e,"reviewAttribution",o):h.call(e,"ifHasFeature","reviewAttribution",o));if(s||s===0)r+=s;return r+=" ",r}function N(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.IsSyndicated,{hash:{},inverse:c.noop,fn:c.program(19,C,t)});if(i||i===0)r+=i;r+=" ",i=n["if"].call(e,e.IsFromProductFamily,{hash:{},inverse:c.noop,fn:c.program(21,k,t)});if(i||i===0)r+=i;return r+=" ",r}function C(e,t){var i="",s;i+=" ",s=c.invokePartial(r.contentSyndicationSummary,"contentSyndicationSummary",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function k(e,t){var i="",s;i+=" ",s=c.invokePartial(r.contentProductFamilySummary,"contentProductFamilySummary",e,n,r);if(s||s===0)i+=s;return i+=" ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;a={hash:{tag:"div",classList:"content-data"},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.conditionalContainer,o?o.call(t,t,a):h.call(t,"conditionalContainer",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("contentData",n),n.deps=["contentRecommended","contentMediaList","contentSyndicationSummary","contentProductFamilySummary"],n.tplMountedViews=[],n}),BV.define("_i18n_recommendsProduct",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");var n="Gender",r=e[n],i=0,s={other:function(e){var t="";return t+="I recommend this product.",t}};return t+=(s[r]||s.other)(e),t}(e)}catch(t){return r.push(["error",new Error("MF error on `recommendsProduct`: "+t.toString())]),""}}return t.registerHelper("_i18n_recommendsProduct",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("_i18n_notRecommendProduct",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");var n="Gender",r=e[n],i=0,s={other:function(e){var t="";return t+="I do not recommend this product.",t}};return t+=(s[r]||s.other)(e),t}(e)}catch(t){return r.push(["error",new Error("MF error on `notRecommendProduct`: "+t.toString())]),""}}return t.registerHelper("_i18n_notRecommendProduct",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("hbs!contentRecommended",["hbs","vendor/handlebars/runtime","template/helpers/extmsg","template/helpers/equals","_i18n_recommendsProduct","_i18n_notRecommendProduct"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t,r){var i="",s,o,u;i+=' <dl class="bv-content-data-recommend-yes" role="presentation"> <dt class="bv-content-data-label-container" role="presentation"> <span class="bv-content-data-icon" aria-hidden="true">&#10004;</span> <span class="bv-content-data-label">',u={hash:{}},i+=l((s=n.extmsg,s?s.call(e,"ProductIsRecommended",r.msgpack,e,u):f.call(e,"extmsg","ProductIsRecommended",r.msgpack,e,u)))+'</span>, </dt> <dd class="bv-content-data-value" role="presentation"> '+" ",u={hash:{}},o=(s=n._i18n_recommendsProduct,s?s.call(e,e.Author,u):f.call(e,"_i18n_recommendsProduct",e.Author,u));if(o||o===0)i+=o;return i+=" </dd> </dl> ",i}function p(e,t,r){var i="",s,o,u;i+=' <dl class="bv-content-data-recommend-no" role="presentation"> <dt class="bv-content-data-label-container" role="presentation"> <span class="bv-content-data-icon" aria-hidden="true">&#10008;</span> <span class="bv-content-data-label">',u={hash:{}},i+=l((s=n.extmsg,s?s.call(e,"ProductIsNotRecommended",r.msgpack,e,u):f.call(e,"extmsg","ProductIsNotRecommended",r.msgpack,e,u)))+'</span>, </dt> <dd class="bv-content-data-value" role="presentation"> '+" ",u={hash:{}},o=(s=n._i18n_notRecommendProduct,s?s.call(e,e.Author,u):f.call(e,"_i18n_notRecommendProduct",e.Author,u));if(o||o===0)i+=o;return i+=" </dd> </dl> ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this;o=n["if"].call(t,t.IsRecommended,{hash:{},inverse:c.noop,fn:c.programWithDepth(h,i,t)});if(o||o===0)s+=o;s+=" ",a={hash:{},inverse:c.noop,fn:c.programWithDepth(p,i,t)},u=(o=n.equals,o?o.call(t,t.IsRecommended,!1,a):f.call(t,"equals",t.IsRecommended,!1,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("contentRecommended",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!contentMediaList",["hbs","vendor/handlebars/runtime","template/helpers/conditionalContainer","template/helpers/extmsg","template/helpers/ensureProtocolRelative"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.Videos,{hash:{},inverse:h.noop,fn:h.program(2,d,t)});if(i||i===0)r+=i;r+=" ",i=n["if"].call(e,e.Photos,{hash:{},inverse:h.noop,fn:h.program(6,g,t)});if(i||i===0)r+=i;return r+=" ",r}function d(e,t){var r="",i;r+=" ",i=n.each.call(e,e.Videos,{hash:{},inverse:h.noop,fn:h.programWithDepth(v,t,e)});if(i||i===0)r+=i;return r+=" ",r}function v(e,t,r){var i="",s,o,u;i+=' <li role="button" class="bv-media-item bv-media-item-video bv-focusable" tabindex="0" data-bv-mediatype="Videos" data-bv-media-id="',(s=n.VideoId)?s=s.call(e,{hash:{}}):(s=e.VideoId,s=typeof s===f?s.apply(e):s),i+=l(s)+'" itemprop="video" itemscope itemtype="http://schema.org/VideoObject"> <div class="bv-media-item-wrapper"> <div class="bv-media-item-spinner-container"> <div class="bv-media-item-spinner"></div> </div> <span aria-hidden="true" class="bv-media-item-icon bv-video-item-icon">&#9658;</span> <span class="bv-off-screen">',(s=n.Caption)?s=s.call(e,{hash:{}}):(s=e.Caption,s=typeof s===f?s.apply(e):s),i+=l(s)+'</span> <span class="bv-off-screen"> ',u={hash:{}},i+=l((s=n.extmsg,s?s.call(e,"offscreen_play_media",r.msgpack,e,u):c.call(e,"extmsg","offscreen_play_media",r.msgpack,e,u)))+" ",u={hash:{}},i+=l((s=n.extmsg,s?s.call(e,"offscreen_showMediaModalNotice",r.msgpack,e,u):c.call(e,"extmsg","offscreen_showMediaModalNotice",r.msgpack,e,u)))+' </span> <meta itemprop="thumbnail" content="//img.youtube.com/vi/',(o=n.VideoId)?o=o.call(e,{hash:{}}):(o=e.VideoId,o=typeof o===f?o.apply(e):o),i+=l(o)+'/0.jpg"> <meta itemprop="description" content="',(o=n.Caption)?o=o.call(e,{hash:{}}):(o=e.Caption,o=typeof o===f?o.apply(e):o),i+=l(o)+'"> <img ',o=n["if"].call(e,r.lazyLoad,{hash:{},inverse:h.noop,fn:h.program(4,m,t)});if(o||o===0)i+=o;return i+='src="//img.youtube.com/vi/',(o=n.VideoId)?o=o.call(e,{hash:{}}):(o=e.VideoId,o=typeof o===f?o.apply(e):o),i+=l(o)+'/0.jpg" alt="',(o=n.Caption)?o=o.call(e,{hash:{}}):(o=e.Caption,o=typeof o===f?o.apply(e):o),i+=l(o)+'" title="',(o=n.Caption)?o=o.call(e,{hash:{}}):(o=e.Caption,o=typeof o===f?o.apply(e):o),i+=l(o)+'" /> </div> <span class="bv-media-item-border" role="presentation"></span> </li> ',i}function m(e,t){return'class="bv-media-item-lazyload" data-'}function g(e,t){var r="",i;r+=" ",i=n.each.call(e,e.Photos,{hash:{},inverse:h.noop,fn:h.programWithDepth(y,t,e)});if(i||i===0)r+=i;return r+=" ",r}function y(e,t,r){var i="",s,o,u;i+=' <li role="button" class="bv-media-item bv-media-item-photo bv-focusable" tabindex="0" data-bv-mediatype="Photos" data-bv-media-id="',(s=n.Id)?s=s.call(e,{hash:{}}):(s=e.Id,s=typeof s===f?s.apply(e):s),i+=l(s)+'" itemprop="image" itemscope itemtype="http://schema.org/ImageObject"> <div class="bv-media-item-wrapper"> <div class="bv-media-item-spinner-container"> <div class="bv-media-item-spinner"></div> </div> <span class="bv-off-screen">',(s=n.Caption)?s=s.call(e,{hash:{}}):(s=e.Caption,s=typeof s===f?s.apply(e):s),i+=l(s)+'</span> <span class="bv-off-screen"> ',u={hash:{}},i+=l((s=n.extmsg,s?s.call(e,"offscreen_photo",r.msgpack,e,u):c.call(e,"extmsg","offscreen_photo",r.msgpack,e,u)))+" ",u={hash:{}},i+=l((s=n.extmsg,s?s.call(e,"offscreen_showMediaModalNotice",r.msgpack,e,u):c.call(e,"extmsg","offscreen_showMediaModalNotice",r.msgpack,e,u)))+' </span> <meta itemprop="image" content="',u={hash:{}},i+=l((s=n.ensureProtocolRelative,s?s.call(e,(s=(s=e.Sizes,s==null||s===!1?s:s.normal),s==null||s===!1?s:s.Url),u):c.call(e,"ensureProtocolRelative",(s=(s=e.Sizes,s==null||s===!1?s:s.normal),s==null||s===!1?s:s.Url),u)))+'"> <meta itemprop="thumbnail" content="',u={hash:{}},i+=l((s=n.ensureProtocolRelative,s?s.call(e,(s=(s=e.Sizes,s==null||s===!1?s:s.thumbnail),s==null||s===!1?s:s.Url),u):c.call(e,"ensureProtocolRelative",(s=(s=e.Sizes,s==null||s===!1?s:s.thumbnail),s==null||s===!1?s:s.Url),u)))+'"> <meta itemprop="description" content="',(o=n.Caption)?o=o.call(e,{hash:{}}):(o=e.Caption,o=typeof o===f?o.apply(e):o),i+=l(o)+'"> <img ',o=n["if"].call(e,r.lazyLoad,{hash:{},inverse:h.noop,fn:h.program(4,m,t)});if(o||o===0)i+=o;return i+='src="',u={hash:{}},i+=l((s=n.ensureProtocolRelative,s?s.call(e,(s=(s=e.Sizes,s==null||s===!1?s:s.normal),s==null||s===!1?s:s.Url),u):c.call(e,"ensureProtocolRelative",(s=(s=e.Sizes,s==null||s===!1?s:s.normal),s==null||s===!1?s:s.Url),u)))+'" alt="',(o=n.Caption)?o=o.call(e,{hash:{}}):(o=e.Caption,o=typeof o===f?o.apply(e):o),i+=l(o)+'" title="',(o=n.Caption)?o=o.call(e,{hash:{}}):(o=e.Caption,o=typeof o===f?o.apply(e):o),i+=l(o)+'" /> </div> <span class="bv-media-item-border" role="presentation"></span> </li> ',i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+=" ",a={hash:{tag:"ul",classList:"content-media-container",role:"presentation"},inverse:h.noop,fn:h.program(1,p,i)},u=(o=n.conditionalContainer,o?o.call(t,t,a):c.call(t,"conditionalContainer",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("contentMediaList",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!syndicationLogo",["hbs","vendor/handlebars/runtime"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var n="",r;return n+=' <a href="'+f((r=(r=e.SyndicationSource,r==null||r===!1?r:r.ContentLink),typeof r===a?r.apply(e):r))+'"><img class="bv-brand-logo-image" src="'+f((r=(r=e.SyndicationSource,r==null||r===!1?r:r.LogoImageUrl),typeof r===a?r.apply(e):r))+'" alt="'+f((r=(r=e.SyndicationSource,r==null||r===!1?r:r.Name),typeof r===a?r.apply(e):r))+'"/></a> ',n}function h(e,t){var n="",r;return n+=' <img class="bv-brand-logo-image" src="'+f((r=(r=e.SyndicationSource,r==null||r===!1?r:r.LogoImageUrl),typeof r===a?r.apply(e):r))+'" alt="'+f((r=(r=e.SyndicationSource,r==null||r===!1?r:r.Name),typeof r===a?r.apply(e):r))+'"/> ',n}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a="function",f=this.escapeExpression,l=this;s+='<div class="bv-brand-logo"> ',u=n["if"].call(t,(o=t.SyndicationSource,o==null||o===!1?o:o.ContentLink),{hash:{},inverse:l.program(3,h,i),fn:l.program(1,c,i)});if(u||u===0)s+=u;return s+=" </div> ",s});return t.registerPartial("syndicationLogo",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!contentSyndicationSummary",["hbs","vendor/handlebars/runtime","hbs!syndicationLogo","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var r="",i,s;r+=' <div class="bv-syndication-summary"> ',s=n["if"].call(e,(i=e.SyndicationSource,i==null||i===!1?i:i.LogoImageUrl),{hash:{},inverse:a.noop,fn:a.program(2,h,t)});if(s||s===0)r+=s;r+=" ",s=n["if"].call(e,(i=e.SyndicationSource,i==null||i===!1?i:i.ContentLink),{hash:{},inverse:a.program(6,d,t),fn:a.program(4,p,t)});if(s||s===0)r+=s;return r+=" </div> ",r}function h(e,t){var i="",s;i+=" ",s=a.invokePartial(r.syndicationLogo,"syndicationLogo",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function p(e,t){var r="",i,s;return r+=' <span class="bv-badge-syndicated">',s={hash:{}},r+=l((i=n.extmsg,i?i.call(e,"syndicationText",e.msgpack,e.SyndicationSource,s):f.call(e,"extmsg","syndicationText",e.msgpack,e.SyndicationSource,s)))+"</span> ",r}function d(e,t){var r="",i,s;return r+=' <span class="bv-badge-syndicated">',s={hash:{}},r+=l((i=n.extmsg,i?i.call(e,"syndicationTextNoLink",e.msgpack,e.SyndicationSource,s):f.call(e,"extmsg","syndicationTextNoLink",e.msgpack,e.SyndicationSource,s)))+"</span> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a=this,f=n.helperMissing,l=this.escapeExpression;s+="  ",u=n["if"].call(t,(o=t.SyndicationSource,o==null||o===!1?o:o.Name),{hash:{},inverse:a.noop,fn:a.program(1,c,i)});if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("contentSyndicationSummary",n),n.deps=["syndicationLogo"],n.tplMountedViews=[],n}),BV.define("hbs!contentProductFamilySummary",["hbs","vendor/handlebars/runtime","template/helpers/withIf","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t,r){var i="",s;i+=" ",s=n["if"].call(e,e.Name,{hash:{},inverse:l.noop,fn:l.programWithDepth(h,t,r)});if(s||s===0)i+=s;return i+=" ",i}function h(e,t,r){var i="",s;i+=' <div class="bv-product-family-summary"> ',s=n["if"].call(e,e.Url,{hash:{},inverse:l.programWithDepth(d,t,e,r),fn:l.programWithDepth(p,t,e,r)});if(s||s===0)i+=s;return i+=" </div> ",i}function p(e,t,r,i){var s="",o,u;return s+=' <span class="bv-badge-product-family">',u={hash:{}},s+=f((o=n.extmsg,o?o.call(e,"productFamilyText",i.msgpack,r,u):a.call(e,"extmsg","productFamilyText",i.msgpack,r,u)))+"</span> ",s}function d(e,t,r,i){var s="",o,u;return s+=' <span class="bv-badge-product-family">',u={hash:{}},s+=f((o=n.extmsg,o?o.call(e,"productFamilyTextNoLink",i.msgpack,r,u):a.call(e,"extmsg","productFamilyTextNoLink",i.msgpack,r,u)))+"</span> ",s}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s,o,u,a=n.helperMissing,f=this.escapeExpression,l=this;return u={hash:{},inverse:l.noop,fn:l.programWithDepth(c,i,t)},o=(s=n.withIf,s?s.call(t,t.Reference,u):a.call(t,"withIf",t.Reference,u)),o||o===0?o:""});return t.registerPartial("contentProductFamilySummary",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("template/helpers/eachWithSeparator",["vendor/handlebars/runtime"],function(e){function t(e,t,n){var r=n.fn,i=n.inverse,s="",o;if(e&&e.length>0)for(var u=0,a=e.length;u<a;u++)o={content:e[u],separator:""},a>1&&u!==a-1&&(o.separator=t),s+=r(o);else s=i(this);return s}return e.registerHelper("eachWithSeparator",t),t}),BV.define("hbs!contentBody",["hbs","vendor/handlebars/runtime","hbs!contentData","template/helpers/ifHasFeature","template/helpers/schemaType","template/helpers/equals","template/helpers/paragraphize"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:f.program(5,m,t),fn:f.program(2,d,t)},s=(i=n.ifHasFeature,i?i.call(e,"secondaryRatings",e,o):l.call(e,"ifHasFeature","secondaryRatings",e,o));if(s||s===0)r+=s;return r+=" ",r}function d(e,t){var r="",i;r+=" ",i=n["if"].call(e,e._ReferenceHasSecondaryRatings,{hash:{},inverse:f.program(5,m,t),fn:f.program(3,v,t)});if(i||i===0)r+=i;return r+=" ",r}function v(e,t){return' <div class="bv-content-details-offset-on"> '}function m(e,t){return' <div class="bv-content-details-offset-off"> '}function g(e,t){var r="",i,s,o;r+=' <div class="bv-content-summary-body-text"> ',o={hash:{},inverse:f.program(13,E,t),fn:f.program(8,y,t)},s=(i=n.equals,i?i.call(e,e.Type,"clientresponse",o):l.call(e,"equals",e.Type,"clientresponse",o));if(s||s===0)r+=s;return r+=" </div> ",r}function y(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:f.program(11,w,t),fn:f.program(9,b,t)},s=(i=n.equals,i?i.call(e,e.ResponseSource,"Review Response",o):l.call(e,"equals",e.ResponseSource,"Review Response",o));if(s||s===0)r+=s;return r+=" ",r}function b(e,t){var r="",i;r+=" ",(i=n.Text)?i=i.call(e,{hash:{}}):(i=e.Text,i=typeof i===c?i.apply(e):i);if(i||i===0)r+=i;return r+=" ",r}function w(e,t){var r="",i,s;return r+=" ",s={hash:{enableLinks:!0}},r+=h((i=n.paragraphize,i?i.call(e,e.Text,s):l.call(e,"paragraphize",e.Text,s)))+" ",r}function E(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.isSearchResult,{hash:{},inverse:f.program(16,x,t),fn:f.program(14,S,t)});if(i||i===0)r+=i;return r+=" ",r}function S(e,t){var r="",i,s;return r+=" ",s={hash:{}},r+=h((i=n.paragraphize,i?i.call(e,e.shortText,s):l.call(e,"paragraphize",e.shortText,s)))+" ",r}function x(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.IsBrandAnswer,{hash:{},inverse:f.program(17,T,t),fn:f.program(11,w,t)});if(i||i===0)r+=i;return r+=" ",r}function T(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:f.program(18,N,t),fn:f.program(11,w,t)},s=(i=n.equals,i?i.call(e,e.CampaignId,"BV_QA_PORTAL_ANSWER_MANAGEMENT",o):l.call(e,"equals",e.CampaignId,"BV_QA_PORTAL_ANSWER_MANAGEMENT",o));if(s||s===0)r+=s;return r+=" ",r}function N(e,t){var r="",i,s;return r+=" ",s={hash:{}},r+=h((i=n.paragraphize,i?i.call(e,e.Text,s):l.call(e,"paragraphize",e.Text,s)))+" ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=this,l=n.helperMissing,c="function",h=this.escapeExpression;o=n.unless.call(t,t.isSimple,{hash:{},inverse:f.program(5,m,i),fn:f.program(1,p,i)});if(o||o===0)s+=o;s+=' <div class="bv-content-summary"> <div class="bv-content-summary-body" itemprop="',a={hash:{answer:"answerText",comment:"commentText",review:"reviewBody",def:"text"}},s+=h((o=n.schemaType,o?o.call(t,t.Type,a):l.call(t,"schemaType",t.Type,a)))+'"> ',u=n["if"].call(t,t.Text,{hash:{},inverse:f.noop,fn:f.program(7,g,i)});if(u||u===0)s+=u;s+=" ",u=f.invokePartial(r.contentData,"contentData",t,n,r);if(u||u===0)s+=u;return s+=" </div> </div> </div> ",s});return t.registerPartial("contentBody",n),n.deps=["contentData"],n.tplMountedViews=[],n}),BV.define("hbs!contentSliderDisplay",["hbs","vendor/handlebars/runtime","template/helpers/loop","template/helpers/percentage","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+='<li class="bv-content-slider-segment" style="width:',s={hash:{}},r+=l((i=n.percentage,i?i.call(e,1,e.total,1,s):f.call(e,"percentage",1,e.total,1,s)))+'% !important;"></li>',r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this,h="function";s+='<span class="bv-content-slider-container"> <ul class="bv-content-slider-bar" role="presentation"> ',a={hash:{},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.loop,o?o.call(t,t.SliderSegments,a):f.call(t,"loop",t.SliderSegments,a));if(u||u===0)s+=u;return s+=' </ul> <span class="bv-content-slider-halfway"></span> <div class="bv-content-slider-value-container"> <span class="bv-content-slider-value" style="margin-left:',a={hash:{rangeStart:"1"}},s+=l((o=n.percentage,o?o.call(t,t.Value,t.ValueRange,1,a):f.call(t,"percentage",t.Value,t.ValueRange,1,a)))+'% !important;"></span> </div> </span> <span class="bv-content-slider-sublabel1" aria-label="',a={hash:{}},s+=l((o=n.extmsg,o?o.call(t,"offscreen_content_secondary_value_of_one_means",t.msgpack,t,a):f.call(t,"extmsg","offscreen_content_secondary_value_of_one_means",t.msgpack,t,a)))+" ",(u=n.MinLabel)?u=u.call(t,{hash:{}}):(u=t.MinLabel,u=typeof u===h?u.apply(t):u),s+=l(u)+'"> ',(u=n.MinLabel)?u=u.call(t,{hash:{}}):(u=t.MinLabel,u=typeof u===h?u.apply(t):u),s+=l(u)+' </span> <span class="bv-content-slider-sublabel2" aria-label="',a={hash:{}},s+=l((o=n.extmsg,o?o.call(t,"offscreen_content_secondary_value_max_means",t.msgpack,t,a):f.call(t,"extmsg","offscreen_content_secondary_value_max_means",t.msgpack,t,a)))+" ",(u=n.MaxLabel)?u=u.call(t,{hash:{}}):(u=t.MaxLabel,u=typeof u===h?u.apply(t):u),s+=l(u)+'"> ',(u=n.MaxLabel)?u=u.call(t,{hash:{}}):(u=t.MaxLabel,u=typeof u===h?u.apply(t):u),s+=l(u)+' </span> <span class="bv-off-screen"> ',(u=n.Label)?u=u.call(t,{hash:{}}):(u=t.Label,u=typeof u===h?u.apply(t):u),s+=l(u)+", ",a={hash:{}},s+=l((o=n.extmsg,o?o.call(t,"offscreen_secondary_rating",t.msgpack,t,a):f.call(t,"extmsg","offscreen_secondary_rating",t.msgpack,t,a)))+"</span> ",s});return t.registerPartial("contentSliderDisplay",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("template/helpers/renderSlider",["vendor/handlebars/runtime","hbs!contentSliderDisplay","underscore"],function(e,t,n){function r(r,i){var s=n.extend({},{offscreen_content_secondary_value_of_one_means:r.offscreen_secondary_rating_summary_value_of_one_means,offscreen_content_secondary_value_max_means:r.offscreen_secondary_rating_summary_value_max_means,offscreen_secondary_rating:r.offscreen_secondary_rating_summary},r),o=n.extend({},{Value:i.AverageRating,ValueRange:i.RatingRange,msgpack:s},i);o.SliderSegments=o.ValueRange-1;var u=t(o);return new e.SafeString(u)}return e.registerHelper("renderSlider",r),r}),BV.define("hbs!contentSecondaryRatingsList",["hbs","vendor/handlebars/runtime","template/helpers/extmsg","template/helpers/equals","template/helpers/loop","template/helpers/percentage","template/helpers/renderSlider"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var r="",i;r+=' <div class="bv-secondary-ratings" role="presentation"> <dl class="bv-content-secondary-ratings" role="presentation"> ',i=n.each.call(e,e.SecondaryRatingList,{hash:{},inverse:l.noop,fn:l.programWithDepth(h,t,e)});if(i||i===0)r+=i;return r+=" </dl> </div> ",r}function h(e,t,r){var i="",s;i+=" ",s=n.unless.call(e,e.HideDisplay,{hash:{},inverse:l.noop,fn:l.programWithDepth(p,t,e,r)});if(s||s===0)i+=s;return i+=" ",i}function p(e,t,r,i){var s="",o,u,c;s+=' <dt class="bv-content-secondary-ratings-label">',c={hash:{prefix:"rating_",defaultDisplay:e.Label}},s+=f((o=n.extmsg,o?o.call(e,e.Id,r.msgpack,e,c):a.call(e,"extmsg",e.Id,r.msgpack,e,c)))+"</dt> ",c={hash:{},inverse:l.programWithDepth(v,t,i),fn:l.programWithDepth(d,t,i)},u=(o=n.equals,o?o.call(e,e.DisplayType,"SLIDER",c):a.call(e,"equals",e.DisplayType,"SLIDER",c));if(u||u===0)s+=u;return s+=" ",s}function d(e,t,r){var i="",s,o;return i+=' <dd class="bv-content-slider"> ',o={hash:{}},i+=f((s=n.renderSlider,s?s.call(e,r.msgpack,e,o):a.call(e,"renderSlider",r.msgpack,e,o)))+" </dd> ",i}function v(e,t,r){var i="",s,o,u;i+=' <dd class="bv-popup-histogram-ratings-bar"> <span class="bv-content-secondary-ratings-container"> <ul class="bv-content-secondary-ratings-bars" role="presentation"> ',u={hash:{},inverse:l.noop,fn:l.program(7,m,t)},o=(s=n.loop,s?s.call(e,e.ValueRange,u):a.call(e,"loop",e.ValueRange,u));if(o||o===0)i+=o;return i+=' </ul> <span class="bv-content-secondary-ratings-value" style="width:',u={hash:{}},i+=f((s=n.percentage,s?s.call(e,e.Value,e.ValueRange,1,u):a.call(e,"percentage",e.Value,e.ValueRange,1,u)))+'% !important;"></span> <span class="bv-off-screen">',u={hash:{}},i+=f((s=n.extmsg,s?s.call(e,"offscreen_secondary_rating",r.msgpack,e,u):a.call(e,"extmsg","offscreen_secondary_rating",r.msgpack,e,u)))+"</span> </span> </dd> ",i}function m(e,t){return'<li class="bv-content-secondary-ratings-bar"></li>'}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a=n.helperMissing,f=this.escapeExpression,l=this;u=n["if"].call(t,(o=t.SecondaryRatingList,o==null||o===!1?o:o.length),{hash:{},inverse:l.noop,fn:l.program(1,c,i)});if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("contentSecondaryRatingsList",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!contentSecondaryRatingsInline",["hbs","vendor/handlebars/runtime","template/helpers/extmsg","template/helpers/percentage"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){var r="",i;r+=' <div class="bv-secondary-ratings"> <dl class="bv-content-secondary-ratings" role="presentation"> ',i=n.each.call(e,e.SecondaryRatingList,{hash:{},inverse:f.noop,fn:f.programWithDepth(c,t,e)});if(i||i===0)r+=i;return r+=" </dl> </div> ",r}function c(e,t,r){var i="",s,o;return i+=' <dt class="bv-content-secondary-ratings-label" role="presentation">',o={hash:{prefix:"rating_",defaultDisplay:e.Label}},i+=a((s=n.extmsg,s?s.call(e,e.Id,r.msgpack,e,o):u.call(e,"extmsg",e.Id,r.msgpack,e,o)))+'</dt> <dd class="bv-popup-histogram-ratings-bar" role="presentation"> <span class="bv-content-secondary-ratings-container"> <span class="bv-content-secondary-ratings-value" style="width:',o={hash:{}},i+=a((s=n.percentage,s?s.call(e,e.Value,e.ValueRange,1,o):u.call(e,"percentage",e.Value,e.ValueRange,1,o)))+'% !important;"></span> </span> </dd> ',i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s,o,u=n.helperMissing,a=this.escapeExpression,f=this;return o=n["if"].call(t,(s=t.SecondaryRatingList,s==null||s===!1?s:s.length),{hash:{},inverse:f.noop,fn:f.program(1,l,i)}),o||o===0?o:""});return t.registerPartial("contentSecondaryRatingsInline",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!content",["hbs","vendor/handlebars/runtime","hbs!contentHeader","hbs!contentBody","hbs!contentSecondaryRatingsList","hbs!contentSecondaryRatingsInline","template/helpers/ifHasFeature","template/helpers/conditionalContainer"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var r,i,s;return s={hash:{},inverse:f.noop,fn:f.program(2,h,t)},i=(r=n.ifHasFeature,r?r.call(e,"secondaryContentLink",s):l.call(e,"ifHasFeature","secondaryContentLink",s)),i||i===0?i:""}function h(e,t){return"bv-content-core-float"}function p(e,t){var r="",i;r+=" ",i=n.unless.call(e,e.isSimple,{hash:{},inverse:f.noop,fn:f.program(5,d,t)});if(i||i===0)r+=i;return r+=" ",r}function d(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:f.program(8,m,t),fn:f.program(6,v,t)},s=(i=n.ifHasFeature,i?i.call(e,"secondaryRatings",e,o):l.call(e,"ifHasFeature","secondaryRatings",e,o));if(s||s===0)r+=s;return r+=" ",r}function v(e,t){var i="",s;i+=" ",s=f.invokePartial(r.contentSecondaryRatingsList,"contentSecondaryRatingsList",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function m(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:f.noop,fn:f.program(9,g,t)},s=(i=n.ifHasFeature,i?i.call(e,"secondaryRatingsInline",e,o):l.call(e,"ifHasFeature","secondaryRatingsInline",e,o));if(s||s===0)r+=s;return r+=" ",r}function g(e,t){var i="",s;i+=" ",s=f.invokePartial(r.contentSecondaryRatingsInline,"contentSecondaryRatingsInline",e,n,r);if(s||s===0)i+=s;return i+=" ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=this,l=n.helperMissing;s+='<div class="bv-content-container"> <div class=\'bv-content-core ',o=n.unless.call(t,t.isSimple,{hash:{},inverse:f.noop,fn:f.program(1,c,i)});if(o||o===0)s+=o;s+="'> ",o=f.invokePartial(r.contentHeader,"contentHeader",t,n,r);if(o||o===0)s+=o;s+=" ",o=f.invokePartial(r.contentBody,"contentBody",t,n,r);if(o||o===0)s+=o;s+=" ",a={hash:{tag:"div",classList:"content-details-container"},inverse:f.noop,fn:f.program(4,p,i)},u=(o=n.conditionalContainer,o?o.call(t,t,a):l.call(t,"conditionalContainer",t,a));if(u||u===0)s+=u;return s+=" </div> </div> ",s});return t.registerPartial("content",n),n.deps=["contentHeader","contentBody","contentSecondaryRatingsList","contentSecondaryRatingsInline"],n.tplMountedViews=[],n}),BV.define("hbs!previewMessage",["hbs","vendor/handlebars/runtime","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function f(e,t){var r="",i,s;return r+=' <div class="bv-content-preview-message" role="alert"> ',s={hash:{prefix:"contentPreview_"}},r+=u((i=n.extmsg,i?i.call(e,e.contentType,e.msgpack,e,s):o.call(e,"extmsg",e.contentType,e.msgpack,e,s)))+" </div> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s,o=n.helperMissing,u=this.escapeExpression,a=this;return s=n["if"].call(t,t._isPreview,{hash:{},inverse:a.noop,fn:a.program(1,f,i)}),s||s===0?s:""});return t.registerPartial("previewMessage",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!contentActions",["hbs","vendor/handlebars/runtime","template/helpers/conditionalContainer","template/helpers/notEqual","template/helpers/mountView","template/helpers/ifHasFeature","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:l.noop,fn:l.program(2,p,t)},s=(i=n.notEqual,i?i.call(e,e.contentType,"ClientResponses",o):f.call(e,"notEqual",e.contentType,"ClientResponses",o));if(s||s===0)r+=s;return r+=" ",r}function p(e,t){var r="",i,s,o;r+=" ",o={hash:{}},s=(i=n.mountView,i?i.call(e,"feedback",e,o):f.call(e,"mountView","feedback",e,o));if(s||s===0)r+=s;return r+=" ",r}function d(e,t){var r="",i;r+=" ",i=n.unless.call(e,e.isSimple,{hash:{},inverse:l.noop,fn:l.program(5,v,t)});if(i||i===0)r+=i;return r+=" ",r}function v(e,t){var r="",i;r+=" ",i=n.unless.call(e,e.IsSyndicated,{hash:{},inverse:l.noop,fn:l.program(6,m,t)});if(i||i===0)r+=i;return r+=" ",r}function m(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:l.noop,fn:l.program(7,g,t)},s=(i=n.ifHasFeature,i?i.call(e,"secondaryContentBtn",o):f.call(e,"ifHasFeature","secondaryContentBtn",o));if(s||s===0)r+=s;return r+=" ",r}function g(e,t){var r="",i,s,o;r+=" ",o={hash:{tag:"div",classList:"secondary-content-actions-container"},inverse:l.noop,fn:l.program(8,y,t)},s=(i=n.conditionalContainer,i?i.call(e,e,o):f.call(e,"conditionalContainer",e,o));if(s||s===0)r+=s;return r+=" ",r}function y(e,t){var r="",i,s;return r+=' <button type="button" aria-label="',s={hash:{prefix:"offscreen_content_secondary_btn_",protectString:!0}},r+=c((i=n.extmsg,i?i.call(e,e.contentType,e.msgpack,e,s):f.call(e,"extmsg",e.contentType,e.msgpack,e,s)))+'" class="bv-content-btn bv-content-secondary-btn bv-focusable"> ',s={hash:{prefix:"content_secondary_btn_"}},r+=c((i=n.extmsg,i?i.call(e,e.contentType,e.msgpack,e,s):f.call(e,"extmsg",e.contentType,e.msgpack,e,s)))+" </button> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this,c=this.escapeExpression;a={hash:{tag:"div",classList:"content-actions-container active-feedback"},inverse:l.noop,fn:l.program(1,h,i)},u=(o=n.conditionalContainer,o?o.call(t,t,a):f.call(t,"conditionalContainer",t,a));if(u||u===0)s+=u;s+=" ",a={hash:{tag:"div",classList:"content-actions-container"},inverse:l.noop,fn:l.program(4,d,i)},u=(o=n.conditionalContainer,o?o.call(t,t,a):f.call(t,"conditionalContainer",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("contentActions",n),n.deps=[],n.tplMountedViews=["feedback"],n}),BV.define("hbs!contentItem",["hbs","vendor/handlebars/runtime","hbs!contentAvatar","hbs!content","hbs!previewMessage","hbs!contentActions","hbs!inlineFormContainer","template/helpers/view","template/helpers/extmsg","template/helpers/renderIcon","template/helpers/mountView","template/helpers/equals","template/helpers/withIf","template/helpers/ifHasFeature","template/helpers/subviews"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var i="",s,o,u;i+=" ",s=n["if"].call(e,e.isRelatedQuestion,{hash:{},inverse:c.noop,fn:c.program(2,d,t)});if(s||s===0)i+=s;i+=" ",u={hash:{}},o=(s=n.mountView,s?s.call(e,"inlineProfile",e,u):f.call(e,"mountView","inlineProfile",e,u));if(o||o===0)i+=o;i+=" ",u={hash:{},inverse:c.noop,fn:c.program(5,m,t)},o=(s=n.equals,s?s.call(e,e.Type,"review",u):f.call(e,"equals",e.Type,"review",u));if(o||o===0)i+=o;i+=" ",u={hash:{},inverse:c.program(16,T,t),fn:c.program(9,b,t)},o=(s=n.ifHasFeature,s?s.call(e,"productImage",u):f.call(e,"ifHasFeature","productImage",u));if(o||o===0)i+=o;i+=" ",o=c.invokePartial(r.content,"content",e,n,r);if(o||o===0)i+=o;i+=" ",o=c.invokePartial(r.previewMessage,"previewMessage",e,n,r);if(o||o===0)i+=o;i+=" ",o=c.invokePartial(r.contentActions,"contentActions",e,n,r);if(o||o===0)i+=o;i+=" ",u={hash:{},inverse:c.noop,fn:c.program(18,N,t)},o=(s=n.equals,s?s.call(e,e.secondaryContentType,"Comments",u):f.call(e,"equals",e.secondaryContentType,"Comments",u));if(o||o===0)i+=o;i+=" ",u={hash:{}},i+=l((s=n.subviews,s?s.call(e,e,u):f.call(e,"subviews",e,u)))+" ",u={hash:{},inverse:c.noop,fn:c.program(20,C,t)},o=(s=n.ifHasFeature,s?s.call(e,"inlineSubmission",u):f.call(e,"ifHasFeature","inlineSubmission",u));if(o||o===0)i+=o;return i+=" </div> ",i}function d(e,t){var r="",i,s,o;r+=' <a title="',o={hash:{}},r+=l((i=n.extmsg,i?i.call(e,"close",e.msgpack,e,o):f.call(e,"extmsg","close",e.msgpack,e,o)))+'" class="bv-content-item-close bv-focusable" href="#" onclick="return false;"> ',o={hash:{ariaHidden:"true"},inverse:c.noop,fn:c.program(3,v,t)},s=(i=n.renderIcon,i?i.call(e,"bv-sprite-close",o):f.call(e,"renderIcon","bv-sprite-close",o));if(s||s===0)r+=s;return r+=" </a> ",r}function v(e,t){return" &#x2718; "}function m(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:c.noop,fn:c.program(6,g,t)},s=(i=n.withIf,i?i.call(e,e.Reference,o):f.call(e,"withIf",e.Reference,o));if(s||s===0)r+=s;return r+=" ",r}function g(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.Name,{hash:{},inverse:c.noop,fn:c.program(7,y,t)});if(i||i===0)r+=i;return r+=" ",r}function y(e,t){var r="",i;return r+='<meta itemprop="itemReviewed" content="',(i=n.Name)?i=i.call(e,{hash:{}}):(i=e.Name,i=typeof i===h?i.apply(e):i),r+=l(i)+'"/>',r}function b(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:c.program(14,x,t),fn:c.program(10,w,t)},s=(i=n.withIf,i?i.call(e,e.Reference,o):f.call(e,"withIf",e.Reference,o));if(s||s===0)r+=s;return r+=" ",r}function w(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.ImageUrl,{hash:{},inverse:c.program(13,S,t),fn:c.program(11,E,t)});if(i||i===0)r+=i;return r+=" ",r}function E(e,t){return' <div class="bv-content-item-product-image-offset bv-content-item-product-image-offset-on"> '}function S(e,t){var r="",i,s;r+=" ",s=n["if"].call(e,(i=e.Product,i==null||i===!1?i:i.ImageUrl),{hash:{},inverse:c.program(14,x,t),fn:c.program(11,E,t)});if(s||s===0)r+=s;return r+=" ",r}function x(e,t){return' <div class="bv-content-item-product-image-offset-off"> '}function T(e,t){var i="",s;i+=" ",s=c.invokePartial(r.contentAvatar,"contentAvatar",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function N(e,t){var i="",s;i+=" ",s=c.invokePartial(r.inlineFormContainer,"inlineFormContainer",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function C(e,t){return' <div class="bv-secondary-submission"> <div class="bv-submission bv-fake-submission bv-fake-inline"> </div> </div> '}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this,h="function";s+=" ",a={hash:{tag:"li",classList:"content-item",dataContentId:!0},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.view,o?o.call(t,t,a):f.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("contentItem",n),n.deps=["contentAvatar","content","previewMessage","contentActions","inlineFormContainer"],n.tplMountedViews=["inlineProfile"],n}),BV.define("bv/c2013/view/contentItem",["framework/bview","jquery","underscore","hbs!contentItem","util/viewport","window","mf!bv/c2013/messages/contentItem","mf!bv/c2013/messages/avatar","mf!bv/c2013/messages/common","bv/util/contentType","bv/util/productInfo","framework/util/bvtracker","util/specialKeys"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=e.extend({name:"contentItem",events:{"click .bv-rating-stars-container":"clickStars","click .bv-content-top-question .bv-content-core-float, .bv-content-top-review .bv-secondary-content-link":"showSecondaryContent","click .bv-content-secondary-btn":"showSecondarySubmission","click .bv-media-item":"showMedia","keydown .bv-media-item":"_interpretMediaKeyPress","click .bv-secondary-content-link":"preventDefault","click .bv-content-item-close":"closeQuestion","click .bv-fullprofile-popup-target":"launchProfile","click .bv-show-more-link":"showFullContent"},template:r,msgpacks:[o,u,a],init:function(e){this.classList.push("content-"+f.noun(this.model.get("Type")||this.model.get("contentType"))),this.seoMicrodataTags(),this.on("attach",n(this._handleBadgeVisibility).bind(this))},clickStars:function(e){var t=this.model;c.feature({type:"Used",name:"Click",detail1:"Stars",detail2:t.get("Rating"),contentType:t.get("contentType"),contentId:t.get("Id"),bvProduct:l.getType(this),productId:l.getId(this),categoryId:l.getCategoryId(this)})},formSetup:function(t){if(n(t).has("searchFor")&&!n(t.searchFor).isEmpty()){var r=this.$viewEl.find(".bv-content-item");r.find(".bv-content-summary").bvhighlight(t),this.filterHighlightItems(r)}else this.$viewEl.find(".bv-content-item-hidden").removeClass("bv-content-item-hidden");e.prototype.formSetup.call(this)},filterHighlightItems:function(e){var r=t(),i=0;n(e).forEach(function(e){var n=t(e),s=!n.hasClass("bv-content-item-hidden"),o=n.find(".bv-content-highlight");s&&(r=r.add(n));var u=o.length===0&&!n.hasClass("bv-content-highlight");n.toggleClass("bv-content-item-hidden",u),u&&i++}),e.length>0&&e.length===i&&(r.length>0?r:e.first()).removeClass("bv-content-item-hidden")},attach:function(t){e.prototype.attach.call(this,t),this.$viewEl.find(".bv-fieldset-inner textarea").bind("click",n.once(this.showSecondaryContent)),this.setMediaOrientation(this.$viewEl.find("img"))},isVisible:function(){return this.$viewEl.is(":visible")&&i.visible(this.viewEl)},showSecondaryContent:function(e){e.preventDefault(),this._loadSecondary(!0)},showSecondarySubmission:function(e){e.preventDefault();var t=this.$viewEl.next().find("form:first");if(t.length>0){t.find("textarea").focus();return}this._loadSecondary()},_loadSecondary:function(e){var t=this;BV.require(["secondary"],function(r){n(t).extend(r.ContentItemExt.view),t.showSecondaryContentExt(p,e)})},_interpretMediaKeyPress:function(e){if(e.keyCode===h.SPACE||e.keyCode===h.ENTER)e.preventDefault(),this.showMedia(e)},showMedia:function(e){var r=t(e.target).closest(".bv-media-item"),i=r.attr("data-bv-media-id"),s=r.attr("data-bv-mediatype"),o=this.model.findMediaById(i,s),u=l.getCategoryId(this),a=[];n(this.model.get("Videos")).each(function(e,t){a.push({mediaType:"Videos",mediaContent:e})}),n(this.model.get("Photos")).each(function(e,t){a.push({mediaType:"Photos",mediaContent:e})}),this.getTopModel().trigger("showmediaviewer",{media:{mediaType:s,mediaContent:o},mediaCollection:a,categoryId:u,$container:r}),c.feature({type:"Used",name:"Click",detail1:"UserSubmittedMedia",contentType:this.model.get("Type"),contentId:this.model.get("Id"),bvProduct:l.getType(this),productId:l.getId(this),categoryId:u})},closeQuestion:function(e){e.preventDefault(),this._remove({view:this})},seoMicrodataTags:function(){var e=f.noun(this.model.get("Type")||this.model.get("contentType")),t=n({review:"Review",question:"Creativework/Question"}).result(e);t&&this.seoTagList.push('itemprop="'+e+'" itemscope itemtype="http://schema.org/'+t+'"')},preventDefault:function(e){e.preventDefault()},_remove:function(e){var t=this;this.$viewEl.removeClass("bv-content-item-scale-in").addClass("bv-content-item-scale-out"),n.delay(function(){t.model?t.model.remove(e):t.$viewEl.remove()},1e3)},launchProfile:function(e){var t=BV._internal.mobile||navigator.userAgent.match(/(iPhone|iPod|Android|BlackBerry)/);t&&this.getTopModel().trigger("showfullprofile",this.model.get("Author"))},showFullContent:function(e){if(e.isDefaultPrevented()||e.metaKey||e.ctrlKey)return;e.preventDefault(),this.model.publish("deeplink",{id:this.model.get("Id"),contentType:this.model.get("Type")})},impression:function(){var e=this.model.get("Id");if(!e)return;var t={contentId:e,contentType:f.Noun(this.model.get("contentType")),subjectType:f.Noun(this.model.get("subjectType")),subjectId:this.model.get("ReferenceId"),visible:this.isVisible(),syndicated:!!this.model.get("IsSyndicated"),bvProduct:this.model.get("Type")==="review"?"RatingsAndReviews":"AskAndAnswer"};return this.model.get("IsSyndicated")&&(t.syndicationSource=this.model.get("SyndicationSource").Name),t},_handleBadgeVisibility:function(){var e=this.$viewEl.find(".bv-badge-summary");e.first().addClass("bv-badge-first"),e.slice(0,3).addClass("bv-badge-top-three")},setMediaOrientation:function(e){e.each(function(e,n){t(n).on("load",function(){var e=t(this).closest(".bv-media-item"),n=this.naturalHeight,r=this.naturalWidth;if(!r||!n){var i=new s.Image;i.src=this.src,r=i.width,n=i.height,i=null}var o=n<r;e.addClass("bv-media-item-show"),o?1-n/r<=.25?e.addClass("bv-media-item-square"):e.addClass("bv-media-item-landscape"):1-r/n<=.25?e.addClass("bv-media-item-square"):e.addClass("bv-media-item-portrait")})})}});return p}),BV.define("bv/c2013/model/stubRemainderContentItem",["ENV","framework/bmodel","underscore","bv/api"],function(e,t,n,r){return t.extend({name:"stubRemainderContentItem",init:function(){this.get("type")||this.set("type",r.noun(this.get("contentType"))),this.set("refName","contentItem")},setupDataProcessing:function(){},processData:function(e){}})}),BV.define("hbs!stubRemainderContentItem",["hbs","vendor/handlebars/runtime","hbs!contentAvatar","template/helpers/view","template/helpers/unlessHasFeature","template/helpers/ifHasFeature","template/helpers/renderIcon","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t,r){var i="",s;i+="   ",s=n.each.call(e,e.remainders,{hash:{},inverse:f.noop,fn:f.programWithDepth(p,t,e,r)});if(s||s===0)i+=s;return i+=" ",i}function p(e,t,i,s){var o="",u,a,h;o+=' <div class="bv-content-item bv-stub-content-item bv-focusable" tabindex="0">  ',u=f.invokePartial(r.contentAvatar,"contentAvatar",i,n,r);if(u||u===0)o+=u;o+='  <div class="bv-content-container"> <div class="bv-content-core">  <div class="bv-content-header">  ',h={hash:{},inverse:f.noop,fn:f.programWithDepth(d,t,i)},a=(u=n.unlessHasFeature,u?u.call(e,"inlineProfile",s,h):l.call(e,"unlessHasFeature","inlineProfile",s,h));if(a||a===0)o+=a;return o+='  <div class="bv-content-data-summary"> <div class="bv-content-title-container"> <h4 class="bv-content-title" itemprop="headline"> ',h={hash:{prefix:e.prefix}},o+=c((u=n.extmsg,u?u.call(e,"contentListCount",i.msgpack,e,h):l.call(e,"extmsg","contentListCount",i.msgpack,e,h)))+" </h4> </div> "+" </div> "+" </div> "+" "+" </div> "+" </div> "+" </div> "+" </div> "+" ",o}function d(e,t,r){var i="",s,o,u;i+=" ",u={hash:{},inverse:f.noop,fn:f.program(4,v,t)},o=(s=n.ifHasFeature,s?s.call(e,"socialAvatar",r,u):l.call(e,"ifHasFeature","socialAvatar",r,u));if(o||o===0)i+=o;return i+=" ",i}function v(e,t){var r="",i,s,o;r+=' <div class="bv-author-avatar">   <span class="bv-author-no-avatar bv-author-gender-Male" aria-hidden="true"> ',o={hash:{},inverse:f.noop,fn:f.program(5,m,t)},s=(i=n.renderIcon,i?i.call(e,"bv-sprite-author-Multiple",o):l.call(e,"renderIcon","bv-sprite-author-Multiple",o));if(s||s===0)r+=s;return r+=" </span> </div>  ",r}function m(e,t){return"&#x260D;"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=this,l=n.helperMissing,c=this.escapeExpression;a={hash:{tag:"li"},inverse:f.noop,fn:f.programWithDepth(h,i,t)},u=(o=n.view,o?o.call(t,t,a):l.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("stubRemainderContentItem",n),n.deps=["contentAvatar"],n.tplMountedViews=[],n}),BV.define("mf!bv/c2013/messages/stubContentItem",["vendor/messageformat","framework/util/bvtrackerqueue"],function(e,t){return{ratingsOnly_contentListCount:function(n){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="count",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.count,t+=" Ratings-Only Review",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.count,t+=" Ratings-Only Reviews",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}(n||{})}catch(r){return t.push(["error",new Error("MF error on `ratingsOnly_contentListCount`: "+r.toString())]),""}},otherLocales_contentListCount:function(n){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="count",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.count,t+=" Review in Another Language",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.count,t+=" Reviews in Other Languages",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}(n||{})}catch(r){return t.push(["error",new Error("MF error on `otherLocales_contentListCount`: "+r.toString())]),""}}}}),BV.define("mf!bv/c2013/messages/ugcCount",["vendor/messageformat","framework/util/bvtrackerqueue"],function(e,t){return{content_type_display:function(n){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="type",i=t[r],s=0,o={review:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="total",i=t[r],s=0,o={one:function(e){var t="";return t+="Review",t},other:function(e){var t="";return t+="Reviews",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n+=" ",n},question:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="total",i=t[r],s=0,o={one:function(e){var t="";return t+="Question",t},other:function(e){var t="";return t+="Questions",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n+=" ",n},answer:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="total",i=t[r],s=0,o={one:function(e){var t="";return t+="Answer",t},other:function(e){var t="";return t+="Answers",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n+=" ",n},product:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="total",i=t[r],s=0,o={one:function(e){var t="";return t+="Product",t},other:function(e){var t="";return t+="Products",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n+=" ",n},other:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="total",i=t[r],s=0,o={one:function(e){var t="";return t+="Content",t},other:function(e){var t="";return t+="Content",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n+=" ",n}};return n+=(o[i]||o.other)(t),n}(n||{})}catch(r){return t.push(["error",new Error("MF error on `content_type_display`: "+r.toString())]),""}},contentListPageInfoSimple:function(n){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="orphanEnd",i=t[r],s=0,o={"true":function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="total",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.lastPageSize,t+=" of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.total,t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.lastPageSize,t+=" of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.total,t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n},other:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="total",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.pageSize,t+=" of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.total,t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.pageSize,t+=" of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.total,t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}};return n+=(o[i]||o.other)(t),n}(n||{})}catch(r){return t.push(["error",new Error("MF error on `contentListPageInfoSimple`: "+r.toString())]),""}},contentListPageInfo:function(n){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="orphanEnd",i=t[r],s=0,o={"true":function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="total",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.start,t+=" of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.total,t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.start,t+=" of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.total,t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n},other:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="total",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.start,t+=" of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.total,t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.start,t+="&ndash;";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.end,t+=" of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.total,t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}};return n+=(o[i]||o.other)(t),n}(n||{})}catch(r){return t.push(["error",new Error("MF error on `contentListPageInfo`: "+r.toString())]),""}},contentListPageInfoSearch:function(n){try{return function(t){var n="";n+="Showing ";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="orphanEnd",i=t[r],s=0,o={"true":function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.end,t+=" of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.end,t},other:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="total",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.total,t+=" of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.total,t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.start,t+="&ndash;";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.end,t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}};return n+=(o[i]||o.other)(t),n}(n||{})}catch(r){return t.push(["error",new Error("MF error on `contentListPageInfoSearch`: "+r.toString())]),""}},offscreen_ugc_arrow:function(e){try{return function(e){var t="";return t+="Menu, press enter to show options",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_ugc_arrow`: "+n.toString())]),""}}}}),BV.define("bv/c2013/view/stubRemainderContentItem",["framework/bview","hbs!stubRemainderContentItem","mf!bv/c2013/messages/stubContentItem","mf!bv/c2013/messages/ugcCount","underscore"],function(e,t,n,r,i){return e.extend({name:"stubRemainderContentItem",template:t,msgpacks:[n,r],init:function(e){}})}),BV.define("hbs!submissionMessage",["hbs","vendor/handlebars/runtime","template/helpers/view"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i;r+=' <hgroup class="bv-submission-message"> <h1 class="bv-submission-icon" aria-hidden="true">',(i=n.icon)?i=i.call(e,{hash:{}}):(i=e.icon,i=typeof i===f?i.apply(e):i);if(i||i===0)r+=i;r+='</h1> <h2 id="bv-mbox-label-text" class="bv-submission-text"> ',(i=n.message)?i=i.call(e,{hash:{}}):(i=e.message,i=typeof i===f?i.apply(e):i),r+=l(i)+" ",i=n["if"].call(e,e.offScreenText,{hash:{},inverse:c.noop,fn:c.program(2,d,t)});if(i||i===0)r+=i;return r+=" </h2> </hgroup> ",r}function d(e,t){var r="",i;return r+=' <span class="bv-off-screen">',(i=n.offScreenText)?i=i.call(e,{hash:{}}):(i=e.offScreenText,i=typeof i===f?i.apply(e):i),r+=l(i)+"</span> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;a={hash:{tag:"div",classList:"submission submission-message-container bv-focusable",tabindex:"0"},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.view,o?o.call(t,t,a):h.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("submissionMessage",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/submissionMessage",["ENV","framework/bmodel","framework/bview","hbs!submissionMessage"],function(e,t,n,r){return n.extend({name:"SubmissionMessage",template:r,init:function(e){var n=this.getComponent();this.model=new t({name:"SubmissionMessage",message:e.message,offScreenText:e.offScreenText,icon:e.icon,componentId:this.componentId,component:n,contentType:n.contentType})}})}),BV.define("vendor/jquery/replacetext",["jquery","underscore"],function(e,t){return function(e){e.fn.replaceText=function(n,r,i){return this.each(function(){var s=this.firstChild,o,u,a=[];if(s)do s.nodeType===3&&(o=t.escape(s.nodeValue),u=o.replace(n,r),u!==o&&(!i&&/</.test(u)?(e(s).before(u),a.push(s)):s.nodeValue=t.unescape(u))),s=s.nextSibling;while(s);a.length&&e(a).remove()})}}(e),e}),BV.define("bv/util/jquery/highlight",["vendor/jquery/replacetext","underscore"],function(e,t){var n=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.bvhighlight.defaults,n),this.highlightSearches()};return n.prototype={constructor:n,highlightSearches:function(e){var n=this,r=t(this.options.searchFor).isArray()?this.options.searchFor:[this.options.searchFor];t(r).forEach(function(e){var r;t(e).isString()&&(r=new RegExp(e.replace(/[.*+?|()\[\]{}\\$\^]/g,"\\$&"),"ig")),n.$element.find("*").addBack().replaceText(r,'<span class="bv-content-highlight">$&</span>')})}},e.fn.bvhighlight=function(r){return this.each(function(){var i=e(this),s=i.data("bvhighlight");r=r||{},s||i.data("bvhighlight",s=new n(this,r)),t.isString(r)&&s[r]()})},e.fn.bvhighlight.defaults={searchFor:[]},e}),BV.define("bv/ui-core/focusableview",["bv/util/focusManager","underscore","framework/util/bvtracker","bv/strings"],function(e,t,n,r){var i={};return t(["registerFocusableLayer","deregisterFocusableLayer","deregisterFocusableLayerById","moveFocus","addFocusables","addFocusablesInline","removeFocusables","rescanFocusLayer","refocusLayer"]).each(function(t){i[t]=function(){try{return e[t].apply(e,arguments)}catch(i){n.error({name:r.errors.UI,detail1:"Focus Error",detail2:i.toString()})}}}),t(["layer"]).each(function(t){i[t]=e[t]}),i}),BV.define("bv/c2013/view/contentItemCollection",["framework/bview","hbs!contentItemCollection","bv/c2013/view/contentItem","bv/c2013/model/stubRemainderContentItem","bv/c2013/view/stubRemainderContentItem","bv/c2013/view/submissionMessage","bv/util/productInfo","underscore","bv/util/jquery/highlight","bv/util/contentType","bv/util/focusManager","bv/ui-core/focusableview","framework/util/bvtracker","bv/util/ariaStatus","bv/util/bvLocal"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=e.extend(c);return v.extend({name:"contentItemCollection",template:t,init:function(e){this.resetDfd=new a.Deferred,this.classList.push("content-list-"+this.contentType),this._isReviews=f.noun(this.contentType)==="review",this._isQuestions=f.noun(this.contentType)==="question",(this._isReviews||this._isQuestions)&&this.classList.push("focusable")},modelDataReady:function(){e.prototype.modelDataReady.call(this),this.initContentViews(),this.listenTo(this.model,{reset:this.contentChanged,loadmore:this.loadMore,add:this.addContent}),this.resetDfd&&this.resetDfd.resolve(this),d.isBVLocal()&&this.render()},initContentViews:function(){var e=this;this.views=[],this.model.forEach(function(t,n){e.initContentView(t,n),e._trackImpression(t,!0)})},initContentView:function(e,t){var r=e.get("Type")||e.contentType||e.get("contentType");e.hasFeature("inlineSubmission")&&this.model.fakeSubmissionSchemaExt(e);var i=new n({model:e,config:e,componentId:e.componentId||e.get("componentId"),index:t,classList:["content-top-"+f.noun(r)],parent:this});return this.views.push(i),i},contentChanged:function(e){var t=this;this.resetDfd.done(function(e){e.initContentViews(),e.render(),e.rescanFocusLayer()}),this.publish("loadmedia")},_trackImpression:function(e,t){h.impression({type:"UGC",initialContent:!!t,contentType:e.get("Type"),contentId:e.get("Id"),bvProduct:o.getType({model:e}),categoryId:o.getCategoryId(this)},e)},loadMore:function(e,t,n){var r=this,i=n,s="",o=[];u(t).forEach(function(e){var t=r.initContentView(e,i);r._trackImpression(e),i++,s+=t.toHTML(),o.push(t)});var f=this._manageStubView();f&&(s+=f.toHTML(),o.push(f)),r.$viewEl.append(s),u(o).forEach(function(e){e.attach(r.viewEl)});var c=o[0].$viewEl.find(".bv-focusable")[0];c.focus(),setTimeout(function(){l.rescanFocusLayer(),l.moveFocus(a(c))},0)},_manageStubView:function(){var e=[];u(this.views).each(function(t,n){t.name==="stubRemainderContentItem"&&e.push(n)}),u(e).each(function(e){this.views.splice(e,1)},this);var t=this.model.componentGet("currentPage"),n=this.model.componentGet("numPages");if(t!==n)return;var r=this.model.stats||{};r.localCount=r.localCount||0,r.globalRatingsOnlyCount=r.globalRatingsOnlyCount||0,r.globalCount=r.globalCount||0,r.otherLocaleCount=r.otherLocaleCount||0;var i=[];return r.globalRatingsOnlyCount>0&&i.push({prefix:"ratingsOnly_",count:r.globalRatingsOnlyCount}),r.otherLocaleCount>0&&i.push({prefix:"otherLocales_",count:r.otherLocaleCount}),i.length>0?this._createStubView(i):null},serializeSubviews:function(){var e;return this._isReviews&&(e=this._manageStubView(),e&&this.views.push(e)),v.prototype.serializeSubviews.apply(this,arguments)},_createStubView:function(e){var t=this.getComponent(),n=u(e).reduce(function(e,t){return e+t.count},0),s={totalResults:this.model.componentGet("totalResults"),startResult:this.model.componentGet("startResult"),pageItemCount:this.model.componentGet("pageItemCount"),remainders:e,remainderCount:n},o=new r({component:t,parent:this.model,contentType:this.contentType});o.set(s);var a=new i({model:o,component:t,parent:this});return a},addContent:function(e,t,r){var i=this,o=e.contentType||e.get("contentType"),l;e.hasFeature("inlineSubmission")&&this.model.fakeSubmissionSchemaExt(e);var c=new n({model:e,config:e,componentId:e.componentId||e.get("componentId"),classList:["content-item","content-"+f.noun(o)],parent:this});if(this.$viewEl)if(r.isPreview){this.$viewEl.prepend(c.toHTML()).find("li:first").addClass("bv-content-preview"),l=this.$viewEl.find(".bv-content-preview-message").text();var h=p.add(l);u.delay(function(){h.remove()},1e3),this.publish("scrolltocontent")}else if(!r.message)r.view.model=e,r.view.hasSubmissionView=!1,r.view.classList.push("content-item-scale-out"),r.view.render(),u.delay(function(){r.view.$viewEl.removeClass("bv-content-item-scale-out").addClass("bv-content-item-scale-in")},500);else{var d=new s({componentId:r.view.componentId,message:r.message,classList:["thankyou"],icon:"&#x2714;"});a(r.view.$viewEl[0]).find("div").remove(),a(r.view.$viewEl[0]).parent().find("div.bv-thankyou").remove(),a(r.view.$viewEl[0]).parent().prepend(d.toHTML()),u.delay(function(){r.view.$viewEl.removeClass("bv-content-item-scale-out").addClass("bv-content-item-scale-in"),r.view.model=null,c.classList.push("content-item-scale-out"),c.setElement(r.view.$viewEl.parent()),a(r.view.$viewEl[0]).after(c.toHTML()),c.attach()},500),u.delay(function(){c.$viewEl.removeClass("bv-content-item-scale-out").addClass("bv-content-item-scale-in")},1500)}}})}),BV.define("bv/c2013/model/ugcCount",["framework/bmodel","underscore","bv/c2013/model/contentList","bv/util/productInfo","framework/util/bvtracker"],function(e,t,n,r,i){return e.extend({name:"ugcCount",init:function(e,r){t.extend(this.options,r);var i=this.get("parent");this.set("searchPagination",i.name==="searchContentList"),i.get("parentContentType")&&i.get("parentContentId")&&this.set({parentContentType:i.get("parentContentType"),parentContentId:i.get("parentContentId")});var s=this.getClosestAncestor({modelType:n});s?this.listenTo(s,"pageinfo",this.updatePageInfo):this.getComponent().type==="genericSubmission"&&this.subscribe("pageinfo",this.updatePageInfo)},updatePageInfo:function(e,t){if(this.hasFeature("instanceNameScope")&&t&&t.instanceName!==this.getInstanceName())return;e.message||this.unset("message"),e.inlineMessage||this.unset("inlineMessage"),e.parentContentId?this.get("parentContentType")===e.parentContentType&&this.get("parentContentId")===e.parentContentId&&(this.set(e),this.trigger("datachanged")):(this.set(e),this.trigger("datachanged"))},pageTo:function(e,t){if(e<1||e>this.get("numPages"))return;this.publish("pageto",e),t.srcControl&&i.feature({type:"Used",name:"Paginate",detail1:t.srcControl,detail2:e,bvProduct:t.bvProduct,productId:t.productId,categoryId:r.getCategoryId(this)})}})}),BV.define("hbs!ugcCountSummary",["hbs","vendor/handlebars/runtime","template/helpers/compare","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.message,{hash:{},inverse:h.program(4,v,t),fn:h.program(2,d,t)});if(i||i===0)r+=i;return r+=" ",r}function d(e,t){var r="",i;return r+=" ",(i=n.message)?i=i.call(e,{hash:{}}):(i=e.message,i=typeof i===f?i.apply(e):i),r+=l(i)+" ",r}function v(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.searchPagination,{hash:{},inverse:h.program(7,g,t),fn:h.program(5,m,t)});if(i||i===0)r+=i;return r+=" ",r}function m(e,t){var r="",i,s;return r+=" ",s={hash:{}},r+=l((i=n.extmsg,i?i.call(e,"contentListPageInfoSearch",e.msgpack,e,s):c.call(e,"extmsg","contentListPageInfoSearch",e.msgpack,e,s)))+" ",r}function g(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.simpleMode,{hash:{},inverse:h.program(10,b,t),fn:h.program(8,y,t)});if(i||i===0)r+=i;return r+=" ",r}function y(e,t){var r="",i,s;return r+=" ",s={hash:{}},r+=l((i=n.extmsg,i?i.call(e,"contentListPageInfoSimple",e.msgpack,e,s):c.call(e,"extmsg","contentListPageInfoSimple",e.msgpack,e,s)))+" ",s={hash:{}},r+=l((i=n.extmsg,i?i.call(e,"content_type_display",e.msgpack,e,s):c.call(e,"extmsg","content_type_display",e.msgpack,e,s)))+" ",r}function b(e,t){var r="",i,s;return r+=" ",s={hash:{}},r+=l((i=n.extmsg,i?i.call(e,"contentListPageInfo",e.msgpack,e,s):c.call(e,"extmsg","contentListPageInfo",e.msgpack,e,s)))+" ",s={hash:{}},r+=l((i=n.extmsg,i?i.call(e,"content_type_display",e.msgpack,e,s):c.call(e,"extmsg","content_type_display",e.msgpack,e,s)))+" ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<span class="bv-content-pagination-pages-current"> ',a={hash:{},inverse:h.noop,fn:h.program(1,p,i)},u=(o=n.compare,o?o.call(t,t.total,"gt",1,a):c.call(t,"compare",t.total,"gt",1,a));if(u||u===0)s+=u;return s+="  ",(u=n.inlineMessage)?u=u.call(t,{hash:{}}):(u=t.inlineMessage,u=typeof u===f?u.apply(t):u),s+=l(u)+"&nbsp;</span> ",s});return t.registerPartial("ugcCountSummary",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!ugcCount",["hbs","vendor/handlebars/runtime","hbs!ugcCountSummary","template/helpers/view","template/helpers/exists"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:f.noop,fn:f.program(2,h,t)},s=(i=n.exists,i?i.call(e,e.total,o):l.call(e,"exists",e.total,o));if(s||s===0)r+=s;return r+=" ",r}function h(e,t){var i="",s;i+=" ",s=f.invokePartial(r.ugcCountSummary,"ugcCountSummary",e,n,r);if(s||s===0)i+=s;return i+=" ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=this,l=n.helperMissing;a={hash:{tag:"div",classList:"control-bar-count",alwaysRender:!0},inverse:f.noop,fn:f.program(1,c,i)},u=(o=n.view,o?o.call(t,t,a):l.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("ugcCount",n),n.deps=["ugcCountSummary"],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/ugcCount",["framework/bview","hbs!ugcCount","mf!bv/c2013/messages/ugcCount","bv/util/productInfo","jquery"],function(e,t,n,r,i){return e.extend({name:"ugcCount",template:t,msgpacks:[n],modelDataReady:function(){e.prototype.modelDataReady.call(this),this.listenTo(this.model,"datachanged",this.updatePageInfo)},firstPage:function(){var e={srcControl:"First",bvProduct:r.getType(this),productId:r.getId(this)};this.model.pageTo(1,e)},lastPage:function(e){var t={srcControl:"Last",bvProduct:r.getType(this),productId:r.getId(this)};this.model.pageTo(this.model.get("numPages"),t)},updatePageInfo:function(){this.$viewEl&&this.$viewEl.length&&this.render()}})}),BV.define("bv/util/bvstate",["underscore","util/url","window"],function(e,t,n){function r(e,t){var n=e.indexOf(t),r=e.substring(0,n),i=e.substring(n+1);return[r,i]}function f(e,t){return t in o?o[t](e):!1}function l(e,t){return t in u?u[t](e):e}function c(e,t){return t in a?a[t](e):e}function h(t){/^bvstate=/.test(t)&&(t=t.replace(/^bvstate=/,""));var n=t.split("/"),i={};return e(n).each(function(e){if(e.indexOf(":")===-1)return;var t=r(e,":"),n=t[0],s=t[1];if(!f(s,n))return;s=l(s,n),i[n]=s}),i}function p(n){function u(t,n,r){/bvstate/i.test(n)&&e.extend(o,h(t))}var r=t.getParam(n,"bvstate"),i=t.getParam(n,"_escaped_fragment_"),s=t.hash(n),o={};r&&e.extend(o,h(r));if(i){var a=t.toQueryParams(i);e.each(a,u)}if(s){s=s.replace(/^#!?/,"");var f=t.toQueryParams(unescape(s));e.each(f,u)}return o}function d(e){var t=[],n,r;for(var i in e){n=e[i],n=c(n,i);if(!f(n,i))continue;t.push(i+":"+n)}return t.join("/")}function v(n,r){var i=p(n);r=e.clone(r);var s=t.getParam(n,"_escaped_fragment_"),o=t.hash(n),u=o&&o.indexOf("bvstate")!==-1,a=s&&s.indexOf("bvstate")!==-1;return u&&(n=t.withoutHash(n)),a&&(n=t.splice(n,"_escaped_fragment_")),n=t.splice(n,"bvstate"),r=h(d(r)),e.extend(i,r),n=t.push(n,"bvstate",d(i)),n}var i={q:"question",r:"review",a:"answer",c:"comment",s:"story",u:"universal"},s={p:"product",c:"category",d:"detail",e:"entry"},o={pg:function(e){if(e.length===0)return!1;var t=Number(e);return!isNaN(t)&&Math.round(t)===t},ct:function(e){return e in i},st:function(e){return e in s},id:function(e){return!/\s/.test(e)}},u={ct:function(e){return i[e]},st:function(e){return s[e]},pg:function(e){return Number(e)}},a={ct:function(t){t=t.toLowerCase();var n=e(i).values();if(!o.ct(t)&&!e(n).contains(t))return null;if(t.length===1)return t;for(var r in i)if(t===i[r])return r},st:function(t){t=t.toLowerCase();var n=e(s).values();if(!o.st(t)&&!e(n).contains(t))return null;if(t.length===1)return t;for(var r in s)if(t===s[r])return r}};return{parse:h,parseURL:p,updateURL:v,serialize:d}}),BV.define("framework/util/experiments",["ENV","underscore","framework/util/bvreporter","bv/util/bvLocal"],function(e,t,n,r){var i=["asyncRender","asyncDataProcessing","asyncComponentRender"],s=e.get("config").experiments||{},o={};return t(i).each(function(e){s[e]&&(n.info("Experiment",e,"enabled"),o[e]=s[e])}),r.isBVLocal()&&(o.asyncRender=!0,n.info("Experiment asyncRender enabled for BV Local")),o}),BV.define("bv/c2013/model/pagination",["ENV","framework/bmodel","underscore","window","bv/util/pageInfo","bv/util/bvstate","bv/util/contentType","bv/util/productInfo","framework/util/bvtracker","framework/util/experiments"],function(e,t,n,r,i,s,o,u,a,f){return t.extend({name:"pagination",defaults:{start:0,end:0,total:0,currentPage:1,numPages:0,allowNext:!0,allowBack:!1,activeRequests:0},init:function(e,t){n.extend(this.options,t);var r=this.get("parent"),i=this.componentGet("initData")||r.get("initData");i&&this.processData(),r.name==="genericSubmission"?this.subscribe("pageinfo",this.updatePageInfo,this):this.listenTo(r,"pageinfo",this.updatePageInfo);if(r.name==="secondaryContentList"){var s=r.get("parent");s&&this.set({parentContentType:s.get("contentType"),parentContentId:s.get("Id")})}},processData:function(e){var t=this.get("parent"),n=this.componentGet("initData")||t.get("initData");if(n){var r=t.get("current")||this.componentGet("currentPage"),s=n.List,u=i(o.noun(this.get("contentType")),r,s?s.length:0,n.LocalResults||0);u.localTotal=u.total,n.TotalResults&&(u.total=n.TotalResults),this.set(u)}this.updateButtonState(),this.dataReady(e)},_getNextPageUrl:function(){var e=this.get("currentPage"),t=this.get("numPages");return e===t?null:this._getPageUrl(e+1)},_getPrevPageUrl:function(){var e=this.get("currentPage");return e===1?null:this._getPageUrl(e-1)},_getPageUrl:function(e){var t=r.location.toString(),n={pg:e,ct:o.noun(this.get("contentType"))},i=s.updateURL(t,n);return i},updatePageInfo:function(e,t){t=t||{};if(this.hasFeature("instanceNameScope")&&t.instanceName!==this.getInstanceName())return;if(!(!e.parentContentId||this.get("parentContentType")===e.parentContentType&&this.get("parentContentId")===e.parentContentId))return;this.set(e);var n=this.get("parent"),r=n.get("fetchResults");if(r){var s=n.get("current")||this.componentGet("currentPage"),u=r.length,a=i(o.noun(this.get("contentType")),s,u,u);this.set(a)}this.set("localTotal",this.get("total"));var f=this.getComponent();if(f.get("subjectType")==="Products"){var l=this._getNextPageUrl();this.set("seoNextPageUrl",l);var c=this._getPrevPageUrl();this.set("seoPrevPageUrl",c)}var h=!this.get("loadMore")&&!t.doNotScroll;this.updateButtonState(),this.trigger("pagingstatechanged",h)},pageTo:function(e,t){if(e<1||e>this.get("numPages"))return;this.set("currentPage",e);var n={loadMore:t.loadMore,parentContentType:this.get("parentContentType"),parentContentId:this.get("parentContentId"),instanceName:this.getInstanceName()};this.publish("pageto",e,!1,n),t.srcControl&&a.feature({type:"Used",name:"Paginate",detail1:t.srcControl,detail2:e,bvProduct:t.bvProduct,productId:t.productId,categoryId:u.getCategoryId({model:this})})},updateButtonState:function(){var e=this.get("currentPage"),t=e<this.get("numPages"),n=e>1;this.set({allowNext:t,allowBack:n})}})}),BV.define("hbs!pagination",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/mountView","template/helpers/extmsg","template/helpers/renderIcon"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.showPages,{hash:{},inverse:l.noop,fn:l.program(2,h,t)});if(i||i===0)r+=i;return r+=" ",r}function h(e,t){var r="",i,s,o;r+=" ",o={hash:{tag:"div",classList:"content-pagination"},inverse:l.noop,fn:l.program(3,p,t)},s=(i=n.view,i?i.call(e,e,o):f.call(e,"view",e,o));if(s||s===0)r+=s;return r+=" ",r}function p(e,t){var r="",i,s,o;r+=' <!--begin-pagination--> <div class="bv-content-pagination-container"> ',o={hash:{}},s=(i=n.mountView,i?i.call(e,"ugcCount",e,o):f.call(e,"mountView","ugcCount",e,o));if(s||s===0)r+=s;r+=' <ul class="bv-content-pagination-buttons" role="presentation">  <li class="bv-content-pagination-buttons-item bv-content-pagination-buttons-item-previous"> ',s=n["if"].call(e,e.seoPrevPageUrl,{hash:{},inverse:l.program(7,m,t),fn:l.program(4,d,t)});if(s||s===0)r+=s;r+=' </li>  <li class="bv-content-pagination-buttons-item bv-content-pagination-buttons-item-next"> ',s=n["if"].call(e,e.seoNextPageUrl,{hash:{},inverse:l.program(21,T,t),fn:l.program(18,S,t)});if(s||s===0)r+=s;return r+=" </li> </ul> </div>  <!--end-pagination--> ",r}function d(e,t){var r="",i,s,o;r+='  <a href="',(i=n.seoPrevPageUrl)?i=i.call(e,{hash:{}}):(i=e.seoPrevPageUrl,i=typeof i===u?i.apply(e):i),r+=a(i)+'" role="button" class="bv-content-btn bv-content-btn-pages bv-content-btn-pages-first bv-focusable bv-content-btn-pages-active"> <span class="bv-off-screen"> ',o={hash:{}},r+=a((i=n.extmsg,i?i.call(e,"paginationPrevious",e.msgpack,e,o):f.call(e,"extmsg","paginationPrevious",e.msgpack,e,o)))+' </span> <span class="bv-content-btn-pages-prev" aria-hidden="true"> ',o={hash:{},inverse:l.noop,fn:l.program(5,v,t)},s=(i=n.renderIcon,i?i.call(e,"bv-sprite-left-arrow-dark",o):f.call(e,"renderIcon","bv-sprite-left-arrow-dark",o));if(s||s===0)r+=s;return r+=" </span> </a> ",r}function v(e,t){return" &#x25C4; "}function m(e,t){var r="",i,s,o;r+=' <button type="button" class="bv-content-btn bv-content-btn-pages bv-content-btn-pages-first bv-focusable bv-content-btn-pages-',i=n["if"].call(e,e.allowBack,{hash:{},inverse:l.program(10,y,t),fn:l.program(8,g,t)});if(i||i===0)r+=i;r+='" ',i=n.unless.call(e,e.allowBack,{hash:{},inverse:l.noop,fn:l.program(12,b,t)});if(i||i===0)r+=i;r+='> <span class="bv-off-screen"> ',o={hash:{}},r+=a((i=n.extmsg,i?i.call(e,"paginationPrevious",e.msgpack,e,o):f.call(e,"extmsg","paginationPrevious",e.msgpack,e,o)))+' </span> <span class="bv-content-btn-pages-prev" aria-hidden="true"> ',s=n["if"].call(e,e.allowBack,{hash:{},inverse:l.program(16,E,t),fn:l.program(14,w,t)});if(s||s===0)r+=s;return r+=" </span> </button> ",r}function g(e,t){return"active"}function y(e,t){return"inactive"}function b(e,t){return"disabled"}function w(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:l.noop,fn:l.program(5,v,t)},s=(i=n.renderIcon,i?i.call(e,"bv-sprite-left-arrow-dark",o):f.call(e,"renderIcon","bv-sprite-left-arrow-dark",o));if(s||s===0)r+=s;return r+=" ",r}function E(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:l.noop,fn:l.program(5,v,t)},s=(i=n.renderIcon,i?i.call(e,"bv-sprite-left-arrow-light",o):f.call(e,"renderIcon","bv-sprite-left-arrow-light",o));if(s||s===0)r+=s;return r+=" ",r}function S(e,t){var r="",i,s,o;r+='  <a href="',(i=n.seoNextPageUrl)?i=i.call(e,{hash:{}}):(i=e.seoNextPageUrl,i=typeof i===u?i.apply(e):i),r+=a(i)+'" role="button" class="bv-content-btn bv-content-btn-pages bv-content-btn-pages-last bv-focusable bv-content-btn-pages-active"> <span class="bv-off-screen"> ',o={hash:{}},r+=a((i=n.extmsg,i?i.call(e,"paginationNext",e.msgpack,e,o):f.call(e,"extmsg","paginationNext",e.msgpack,e,o)))+' </span> <span class="bv-content-btn-pages-next" aria-hidden="true"> ',o={hash:{},inverse:l.noop,fn:l.program(19,x,t)},s=(i=n.renderIcon,i?i.call(e,"bv-sprite-right-arrow-dark",o):f.call(e,"renderIcon","bv-sprite-right-arrow-dark",o));if(s||s===0)r+=s;return r+=" </span> </a> ",r}function x(e,t){return" &#x25BA; "}function T(e,t){var r="",i,s,o;r+=' <button type="button" class="bv-content-btn bv-content-btn-pages bv-content-btn-pages-last bv-focusable bv-content-btn-pages-',i=n["if"].call(e,e.allowNext,{hash:{},inverse:l.program(10,y,t),fn:l.program(8,g,t)});if(i||i===0)r+=i;r+='" ',i=n.unless.call(e,e.allowNext,{hash:{},inverse:l.noop,fn:l.program(12,b,t)});if(i||i===0)r+=i;r+='> <span class="bv-off-screen"> ',o={hash:{}},r+=a((i=n.extmsg,i?i.call(e,"paginationNext",e.msgpack,e,o):f.call(e,"extmsg","paginationNext",e.msgpack,e,o)))+' </span> <span class="bv-content-btn-pages-next" aria-hidden="true"> ',s=n["if"].call(e,e.allowNext,{hash:{},inverse:l.program(24,C,t),fn:l.program(22,N,t)});if(s||s===0)r+=s;return r+=" </span> </button> ",r}function N(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:l.noop,fn:l.program(19,x,t)},s=(i=n.renderIcon,i?i.call(e,"bv-sprite-right-arrow-dark",o):f.call(e,"renderIcon","bv-sprite-right-arrow-dark",o));if(s||s===0)r+=s;return r+=" ",r}function C(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:l.noop,fn:l.program(19,x,t)},s=(i=n.renderIcon,i?i.call(e,"bv-sprite-right-arrow-light",o):f.call(e,"renderIcon","bv-sprite-right-arrow-light",o));if(s||s===0)r+=s;return r+=" ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=n.helperMissing,l=this;o=n["if"].call(t,t.localTotal,{hash:{},inverse:l.noop,fn:l.program(1,c,i)});if(o||o===0)s+=o;return s+=" ",s});return t.registerPartial("pagination",n),n.deps=[],n.tplMountedViews=["ugcCount"],n}),BV.define("bv/util/bvstateManager",["ENV","underscore","util/url","window","jquery","bv/util/bvstate","framework/util/bvreporter"],function(e,t,n,r,i,s,o){function a(e){if(!e.pg||!e.ct)return;var n=i("link[rel=canonical]");if(n.length===0)return;var r=n.attr("href"),u=s.parseURL(r);if(t.isEqual(e,u))return;var a=s.updateURL(r,e);o.info("Changing page's canonical URL from:",r,"to:",a),n.attr("href",a)}function f(e,t){e.handler.call(e.scope,t)}var u=1;return{state:null,_handlers:{},start:function(n){var i;n?i=t.clone(n):i=s.parseURL(r.location.toString()),this._change(i);var o=e.get("config");o.queryRouter&&o.queryRouter.editCanonicalTags&&a(this.state)},subscribe:function(e,n){var r=u++;t.isUndefined(n)&&(n=null);var i={handler:e,scope:n};return this._handlers[r]=i,this.state!==null&&f(i,this.state),r},unsubscribe:function(e){o.assert(t.isNumber(e),"argument must be number");var n=this._handlers[e];if(!n)return;delete this._handlers[e]},update:function(e){if(t.isEqual(e,this.state))return;this._change(e)},_change:function(e){this.state=e,t(this._handlers).each(function(t,n){f(t,e)})}}}),BV.define("mf!bv/c2013/messages/pagination",["vendor/messageformat","framework/util/bvtrackerqueue"],function(e,t){return{paginationPrevious:function(e){try{return function(e){var t="";return t+="Previous",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `paginationPrevious`: "+n.toString())]),""}},paginationNext:function(e){try{return function(e){var t="";return t+="Next",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `paginationNext`: "+n.toString())]),""}}}}),BV.define("bv/c2013/view/pagination",["ENV","framework/bview","jquery","hbs!pagination","bv/util/contentType","bv/util/productInfo","bv/util/loadingOverlay","bv/util/bvstateManager","util/url","mf!bv/c2013/messages/pagination","mf!bv/c2013/messages/common"],function(e,t,n,r,i,s,o,u,a,f,l){return t.extend({name:"pagination",events:{"click .bv-content-btn-pages-first":"prevPageClicked","click .bv-content-btn-pages-last":"nextPageClicked","click button.bv-content-pagination-pages-arrow":"pagesArrowClicked"},template:r,msgpacks:[f,l],handlerAdded:!1,init:function(){this.on("attach",function(e){e.handlerAdded||(e.listenTo(e.model,"pagingstatechanged",e.stateChanged),e.handlerAdded=!0);if(!e.viewEl)return;e.$("ul.bv-content-pagination-pages").hover(function(){n(e).addClass("bv-content-pagination-pages-active")},function(){n(e).removeClass("bv-content-pagination-pages-active")})})},stateChanged:function(e){o.hide(),this.$viewEl&&(this.render(),e&&this.scrollPage())},scrollPage:function(e){this.model.publish("scrolltocontent")},pageTo:function(e,t){var r,i=1;e.preventDefault();if(n(e.target).hasClass("bv-content-btn-pages-inactive"))return;t==="Prev"&&(i=-1),r=this.model.get("currentPage")+i;var a={srcControl:t,loadMore:!1,bvProduct:s.getType(this),productId:s.getId(this)};u.update({ct:this.model.get("contentType"),pg:r}),o.show(),this.model.pageTo(r,a)},prevPageClicked:function(e){e.preventDefault(),this.pageTo(e,"Prev")},nextPageClicked:function(e){e.preventDefault(),this.pageTo(e,"Next")},pagesArrowClicked:function(e){this.$("ul.bv-content-pagination-pages").toggleClass("bv-content-pagination-pages-active")}})}),BV.define("bv/c2013/model/secondaryContentItem",["ENV","bv/c2013/model/contentItem","underscore"],function(e,t,n){return t.extend({options:{},name:"secondaryContentItem",init:function(e,t){this.set("Author",n.extend({showProfileLink:!this.get("IsSyndicated")},this.get("Author"))),n.extend(this.options,t);var r=this.get("parent");r&&this.set({parentContentItem:r.parentContentItem})}})}),BV.define("bv/c2013/collection/secondaryContentItemCollection",["bv/c2013/collection/contentItemCollection","underscore","bv/c2013/model/secondaryContentItem","ENV","bv/api"],function(e,t,n,r,i){return e.extend({model:n,name:"secondaryContentItemCollection",init:function(e,t){var n=this.options.parent;n&&(this.parentContentItem=n.get("parent"))},fetchPage:function(e,n,s,o){if(!this.parentContentItem)throw new Error("SecondaryContentItemCollection is missing its parentContentItem.");var u=this,a=i.nouns(this.contentType),f=this.parentContentItem.get("contentType"),l=r.get("config"),c=l.page.details[i.noun(a)]||l.page,h=c.size,p=c.size2n,d=e>1?p:h,v=e>1?h+p*(e-2):0;a==="comments"&&(a=i.noun(f)+a);var m=i.get(a).include(["Authors",i.Nouns(f)]).withStatsOn(this.getStatsTypes()).limit(d).offset(v);if(!t(o).isUndefined()&&!t(o.parentContentId).isUndefined()){var g=i.noun(o.parentContentType);m=m.filterBy(g+"id",o.parentContentId)}var y=i.get("batch",null,[m]);try{y.fetch("pageSecondary").done(function(e){var t=e[0],n=t.data.Results;o&&o.loadMore?u.loadMore(n):u.reset(n)})}catch(b){}}})}),BV.define("bv/c2013/model/secondaryContentList",["ENV","framework/bmodel","bv/c2013/model/contentList","bv/c2013/collection/secondaryContentItemCollection","bv/util/pageInfo","underscore","bv/util/contentType"],function(e,t,n,r,i,s,o){return n.extend({name:"secondaryContentList",collectionFeatureName:"secondaryContentItemCollection",defaults:{TotalResults:0,numPages:0},init:function(e,t){s.extend(this.options,t);var n=this.get("parent");if(n){var r=n.get("secondaryContentType");if(s.isEmpty(r))return{};var i=n.get(o.Nouns(r));typeof i!="undefined"&&(i.TotalResults=n.get("TotalSecondaryContentCount")),this.set({componentId:n.isCollection?n.componentId:n.get("componentId"),contentType:r,subject:n,TotalResults:n.get("TotalSecondaryContentCount"),current:0,initData:i}),this.unset("secondaryContentType")}this.subscribe("pageto",this.fetchPage)},setupDataProcessing:function(){var e=this.get("parent");if(!e)return;e.onDataReady(this.processData,this)},processData:function(e){var t=this,n=this.get("parent"),r=this.getContent();if(!r)return;s(r).forEach(function(e,r){var i=n.get(r);s.isEmpty(i)||(i=i.List||i,r==="ClientResponses"&&(i=s(i).sortBy(function(e){return e.ResponseSource==="Review Response"})),e.reset(i),t.listenTo(e,{reset:t.contentChanged,loadmore:t.moreContentLoaded}),r===n.get("secondaryContentType")&&t.updatePageInfo(i))}),this.dataReady(e)},getSubject:function(){return{type:"product",id:this.get("clientAPIConfig").productId,contentType:this.get("secondaryContentType")}},getContent:function(){return this._getContent()},previewContent:function(e){var t=this.getContent(),n=o.Nouns(e._contentType);if(t&&t[n]){var r=t[n],i=r.createContentItem(e);r.add(i,{isPreview:!0})}},updatePageInfo:function(e){var t=this.get("parent"),n,r;return e&&(n=this.get("current")||1,r=i(o.noun(this.get("contentType")),n,e.length,t.get("TotalSecondaryContentCount")),this.set({TotalResults:this.get("TotalResults"),numPages:r.numPages,startResult:r.start,current:n},{silent:!0}),r.parentContentType=t.get("contentType"),r.parentContentId=t.get("Id")),r},toJSON:function(){return t.prototype.toJSON.call(this)},moreContentLoaded:function(e,t){var n=this.get("parent"),r,s=this.get("current");n&&(r=i(o.noun(this.get("contentType")),s,t.length,this.get("TotalResults")),r.start=this.get("startResult"),r.loadMore=!0,r.parentContentType=n.get("contentType"),r.parentContentId=n.get("Id"),this.trigger("pageinfo",r))},fetchPage:function(e,t,n){var r=this.get("parent");if(r&&r.get("contentType")===n.parentContentType&&r.get("Id")===n.parentContentId){s(e).isObject()&&(s(e.pageNum).isNumber()||s(e.pageNum).isString())&&(e=parseInt(e.pageNum,10));var i=this.getContent()[this.get("contentType")];if(!t&&(e<1||e>this.get("numPages")))return;this.set("current",e);if(this.dataReadyPromise().state()!=="resolved")return;i.fetchPage(e,this.get("clientAPIConfig"),null,n)}}})}),BV.define("hbs!secondaryContentList",["hbs","vendor/handlebars/runtime","hbs!inlineFormContainer","template/helpers/view","template/helpers/ifHasFeature","template/helpers/subviews"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:f.noop,fn:f.program(2,p,t)},s=(i=n.ifHasFeature,i?i.call(e,"inlineSubmission",o):l.call(e,"ifHasFeature","inlineSubmission",o));if(s||s===0)r+=s;return r+=" ",o={hash:{}},r+=c((i=n.subviews,i?i.call(e,e,o):l.call(e,"subviews",e,o)))+" ",r}function p(e,t){var i="",s;i+=" ",s=f.invokePartial(r.inlineFormContainer,"inlineFormContainer",e,n,r);if(s||s===0)i+=s;return i+=" ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=this,l=n.helperMissing,c=this.escapeExpression;a={hash:{tag:"div",classList:"secondary-content-list"},inverse:f.noop,fn:f.program(1,h,i)},u=(o=n.view,o?o.call(t,t,a):l.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("secondaryContentList",n),n.deps=["inlineFormContainer"],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/secondaryContentList",["framework/bview","jquery","hbs!secondaryContentList"],function(e,t,n){return e.extend({name:"secondaryContentList",template:n})}),BV.define("hbs!secondaryContentItem",["hbs","vendor/handlebars/runtime","hbs!contentAvatar","hbs!content","hbs!previewMessage","hbs!contentActions","template/helpers/view","template/helpers/mountView","template/helpers/subviews","template/helpers/ifHasFeature"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){var i="",s,o,u;i+=" ",u={hash:{}},o=(s=n.mountView,s?s.call(e,"inlineProfile",e,u):f.call(e,"mountView","inlineProfile",e,u));if(o||o===0)i+=o;i+=" ",o=l.invokePartial(r.contentAvatar,"contentAvatar",e,n,r);if(o||o===0)i+=o;i+=" ",o=l.invokePartial(r.content,"content",e,n,r);if(o||o===0)i+=o;i+=" ",o=l.invokePartial(r.previewMessage,"previewMessage",e,n,r);if(o||o===0)i+=o;i+=" ",o=l.invokePartial(r.contentActions,"contentActions",e,n,r);if(o||o===0)i+=o;i+=" ",u={hash:{}},i+=c((s=n.subviews,s?s.call(e,e,u):f.call(e,"subviews",e,u)))+" ",u={hash:{},inverse:l.noop,fn:l.program(2,p,t)},o=(s=n.ifHasFeature,s?s.call(e,"inlineSubmission",u):f.call(e,"ifHasFeature","inlineSubmission",u));if(o||o===0)i+=o;return i+=" </div> ",i}function p(e,t){return' <div class="bv-secondary-submission"> <div class="bv-submission bv-fake-submission bv-fake-inline"> </div> </div> '}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=n.helperMissing,l=this,c=this.escapeExpression;s+=" ",a={hash:{tag:"li",classList:"content-item",dataContentId:!0},inverse:l.noop,fn:l.program(1,h,i)},u=(o=n.view,o?o.call(t,t,a):f.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("secondaryContentItem",n),n.deps=["contentAvatar","content","previewMessage","contentActions"],n.tplMountedViews=["inlineProfile"],n}),BV.define("bv/c2013/view/secondaryContentItem",["bv/c2013/view/contentItem","jquery","underscore","hbs!secondaryContentItem","util/viewport","window","mf!bv/c2013/messages/contentItem","bv/util/contentType"],function(e,t,n,r,i,s,o,u){return e.extend({name:"secondaryContentItem",el:".bv-content-list",template:r,msgpacks:[o],init:function(e){this.seoMicrodataTags(),this.classList.push("secondary-content-item"),e.showItem||this.classList.push("content-item-hidden"),this.on("attach",n(this._handleBadgeVisibility).bind(this))},seoMicrodataTags:function(){var e=u.noun(this.model.get("Type")||this.model.get("contentType")),t=n({answer:"Creativework/Question/Answer",comment:"UserComments"}).result(e);t&&this.seoTagList.push('itemprop="'+e+'" itemscope itemtype="http://schema.org/'+t+'"')}})}),BV.define("bv/c2013/view/secondaryContentItemCollection",["framework/bview","bv/c2013/view/contentItemCollection","hbs!contentItemCollection","bv/c2013/view/secondaryContentItem","bv/util/contentType","underscore"],function(e,t,n,r,i,s){return t.extend({name:"secondaryContentItemCollection",templateName:"contentItemCollection",template:n,getShowView:function(){var e={comments:!0,clientresponses:!0,answers:function(e){return e===0}};return e[i.nouns(this.contentType)]},initContentView:function(t,n){var o,u=t.get("Type")||t.contentType||t.get("contentType"),a=t.get("componentId")||t.componentId,f=e.config,l=f.page.details[i.noun(u)]||f.page,c=l.size,h=this.getShowView();return o=new r({model:t,config:t,componentId:a,contentType:u,index:n,classList:["secondary-content-"+i.noun(u)],parent:this,showItem:s(h).isFunction()?h(n):h}),this.views.push(o),o},addContent:function(e,t,n){var s=e.contentType||e.get("contentType"),o=new r({model:e,config:e,componentId:e.componentId||e.get("componentId"),contentType:s,secondaryContentType:e.secondaryContentType||e.get("secondaryContentType"),classList:["content-item","content-"+i.noun(s)]});this.$viewEl&&(n.isPreview?this.$viewEl.prepend(o.toHTML()).find("li:first").removeClass("bv-content-item-hidden").addClass("bv-content-preview"):(o.setElement(this.$viewEl),o.render()))}})}),BV.define("bv/c2013/model/mediaViewer",["framework/bmodel","underscore"],function(e,t){return e.extend({options:{},name:"mediaViewer",init:function(e,n){t.extend(this.options,n)}})}),BV.define("mf!bv/c2013/messages/mediaViewer",["vendor/messageformat","framework/util/bvtrackerqueue"],function(e,t){return{media_dialog_label:function(e){try{return function(e){var t="";return t+="Media Viewer",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `media_dialog_label`: "+n.toString())]),""}},previous_media:function(e){try{return function(e){var t="";return t+="Previous",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `previous_media`: "+n.toString())]),""}},next_media:function(e){try{return function(e){var t="";return t+="Next",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `next_media`: "+n.toString())]),""}}}}),BV.define("hbs!mediaViewer",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/notEqual","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){var r="",i,s;r+=' <div class="bv-media-viewer-stack"> <div class="bv-media-viewer-inner"> <table class="bv-media-viewer-table" role="presentation"> <tr> <td> <div class="bv-media-viewer-canvas">  </div> </td> </tr> </table> </div> <div class="bv-media-viewer-ribbon bv-hidden">  </div> </div> ',s=n["if"].call(e,(i=e.mediaCollection,i==null||i===!1?i:i.length),{hash:{},inverse:c.noop,fn:c.program(2,p,t)});if(s||s===0)r+=s;return r+=" ",r}function p(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:c.noop,fn:c.program(3,d,t)},s=(i=n.notEqual,i?i.call(e,(i=e.mediaCollection,i==null||i===!1?i:i.length),1,o):f.call(e,"notEqual",(i=e.mediaCollection,i==null||i===!1?i:i.length),1,o));if(s||s===0)r+=s;return r+=" ",r}function d(e,t){var r="",i,s;return r+=' <div role="button" class="bv-media-arrow bv-media-prev bv-focusable" tabindex="0" aria-labelledby="bv-previous-media-label"> <span aria-hidden="true">â—„</span> <span id="bv-previous-media-label" class="bv-off-screen">',s={hash:{}},r+=l((i=n.extmsg,i?i.call(e,"previous_media",e.msgpack,e,s):f.call(e,"extmsg","previous_media",e.msgpack,e,s)))+'</span> </div> <div role="button" class="bv-media-arrow bv-media-next bv-focusable" tabindex="0" aria-labelledby="bv-next-media-label"> <span aria-hidden="true">â–º</span> <span id="bv-next-media-label" class="bv-off-screen">',s={hash:{}},r+=l((i=n.extmsg,i?i.call(e,"next_media",e.msgpack,e,s):f.call(e,"extmsg","next_media",e.msgpack,e,s)))+"</span> </div> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this;s+=" ",a={hash:{tag:"div",classList:"compat media-viewer"},inverse:c.noop,fn:c.program(1,h,i)},u=(o=n.view,o?o.call(t,t,a):f.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("mediaViewer",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!mediaViewerImage",["hbs","vendor/handlebars/runtime","template/helpers/ensureProtocolRelative"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function";return s+='<div class="bv-media-viewer-image"> <img src="',a={hash:{}},s+=l((o=n.ensureProtocolRelative,o?o.call(t,t.url,a):f.call(t,"ensureProtocolRelative",t.url,a)))+'" alt="',(u=n.caption)?u=u.call(t,{hash:{}}):(u=t.caption,u=typeof u===c?u.apply(t):u),s+=l(u)+'" tabindex="0" class="bv-focusable bv-media-focus-target" /> </div> <div class="bv-media-viewer-caption"> ',(u=n.caption)?u=u.call(t,{hash:{}}):(u=t.caption,u=typeof u===c?u.apply(t):u),s+=l(u)+" </div> ",s});return t.registerPartial("mediaViewerImage",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!mediaViewerEmbed",["hbs","vendor/handlebars/runtime"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<div class="bv-media-viewer-embedded"> <div class="bv-media-viewer-dummy"></div> <iframe class="bv-media-viewer-ytmedia bv-media-focus-target bv-focusable" type="text/html" src="//www.youtube.com/embed/',(o=n.videoId)?o=o.call(t,{hash:{}}):(o=t.videoId,o=typeof o===u?o.apply(t):o),s+=a(o)+'?rel=0" /> </div> <div class="bv-media-viewer-caption"> ',(o=n.caption)?o=o.call(t,{hash:{}}):(o=t.caption,o=typeof o===u?o.apply(t):o),s+=a(o)+" </div> ",s});return t.registerPartial("mediaViewerEmbed",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("_i18n_mediaViewerCollectionSummary",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.currentItem,t+=" of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.totalItems,t}(e)}catch(t){return r.push(["error",new Error("MF error on `mediaViewerCollectionSummary`: "+t.toString())]),""}}return t.registerHelper("_i18n_mediaViewerCollectionSummary",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("hbs!mediaViewerRibbonSummary",["hbs","vendor/handlebars/runtime","_i18n_mediaViewerCollectionSummary"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing;s+=" ",a={hash:{}},u=(o=n._i18n_mediaViewerCollectionSummary,o?o.call(t,t,a):f.call(t,"_i18n_mediaViewerCollectionSummary",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("mediaViewerRibbonSummary",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!mediaViewerRibbon",["hbs","vendor/handlebars/runtime","hbs!mediaViewerRibbonSummary","template/helpers/view"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var i="",s;i+=' <p class="bv-media-viewer-ribbon-summary"> ',s=f.invokePartial(r.mediaViewerRibbonSummary,"mediaViewerRibbonSummary",e,n,r);if(s||s===0)i+=s;i+=' </p> <ul class="bv-media-viewer-ribbon-inner"> ',s=n.each.call(e,e.mediaCollection,{hash:{},inverse:f.noop,fn:f.program(2,d,t)});if(s||s===0)i+=s;return i+=" </ul> ",i}function d(e,t){var r="",i;r+=' <li class="bv-media-viewer-ribbon-item ',i=n["if"].call(e,e.current,{hash:{},inverse:f.noop,fn:f.program(3,v,t)});if(i||i===0)r+=i;return r+='" data-bv-mediatype="',(i=n.mediaType)?i=i.call(e,{hash:{}}):(i=e.mediaType,i=typeof i===l?i.apply(e):i),r+=c(i)+'" data-bv-index="',(i=n.index)?i=i.call(e,{hash:{}}):(i=e.index,i=typeof i===l?i.apply(e):i),r+=c(i)+'">&nbsp;</li> ',r}function v(e,t){return"bv-media-viewer-ribbon-item-active"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=this,l="function",c=this.escapeExpression,h=n.helperMissing;a={hash:{tag:"div",classList:""},inverse:f.noop,fn:f.program(1,p,i)},u=(o=n.view,o?o.call(t,t,a):h.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("mediaViewerRibbon",n),n.deps=["mediaViewerRibbonSummary"],n.tplMountedViews=[],n}),BV.define("vendor/fastclick",["BV"],function(e){function t(e,n){function s(e,t){return function(){return e.apply(t,arguments)}}var i;n=n||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=n.touchBoundary||10,this.layer=e,this.tapDelay=n.tapDelay||200,this.tapTimeout=n.tapTimeout||700;if(t.notNeeded(e))return;var o=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],u=this;for(var a=0,f=o.length;a<f;a++)u[o[a]]=s(u[o[a]],u);r&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,r){var i=Node.prototype.removeEventListener;t==="click"?i.call(e,t,n.hijacked||n,r):i.call(e,t,n,r)},e.addEventListener=function(t,n,r){var i=Node.prototype.addEventListener;t==="click"?i.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),r):i.call(e,t,n,r)}),typeof e.onclick=="function"&&(i=e.onclick,e.addEventListener("click",function(e){i(e)},!1),e.onclick=null)}if(e.serverRender)return{};var n=navigator.userAgent.indexOf("Windows Phone")>=0,r=navigator.userAgent.indexOf("Android")>0&&!n,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!n,s=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),o=i&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),u=navigator.userAgent.indexOf("BB10")>0;return t.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(i&&e.type==="file"||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},t.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!r;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},t.prototype.sendClick=function(e,t){var n,r;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),r=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},t.prototype.determineEventType=function(e){return r&&e.tagName.toLowerCase()==="select"?"mousedown":"click"},t.prototype.focus=function(e){var t;i&&e.setSelectionRange&&e.type.indexOf("date")!==0&&e.type!=="time"&&e.type!=="month"?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},t.prototype.updateScrollParent=function(e){var t,n;t=e.fastClickScrollParent;if(!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},t.prototype.onTouchStart=function(e){var t,n,r;if(e.targetTouches.length>1)return!0;t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0];if(i){r=window.getSelection();if(r.rangeCount&&!r.isCollapsed)return!0;if(!s){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},t.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},t.prototype.onTouchMove=function(e){if(!this.trackingClick)return!0;if(this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))this.trackingClick=!1,this.targetElement=null;return!0},t.prototype.findControl=function(e){return e.control!==undefined?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(e){var t,n,u,a,f,l=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,o&&(f=e.changedTouches[0],l=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),u=l.tagName.toLowerCase();if(u==="label"){t=this.findControl(l);if(t){this.focus(l);if(r)return!1;l=t}}else if(this.needsFocus(l)){if(e.timeStamp-n>100||i&&window.top!==window&&u==="input")return this.targetElement=null,!1;this.focus(l),this.sendClick(l,e);if(!i||u!=="select")this.targetElement=null,e.preventDefault();return!1}if(i&&!s){a=l.fastClickScrollParent;if(a&&a.fastClickLastScrollTop!==a.scrollTop)return!0}return this.needsClick(l)||(e.preventDefault(),this.sendClick(l,e)),!1},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0:!0},t.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):e.target.type==="submit"&&e.detail===0?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},t.prototype.destroy=function(){var e=this.layer;r&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(e){var t,n,i;if(typeof window.ontouchstart=="undefined")return!0;n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(n){if(!r)return!0;t=document.querySelector("meta[name=viewport]");if(t){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(u){i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);if(i[1]>=10&&i[2]>=3){t=document.querySelector("meta[name=viewport]");if(t){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}}}return e.style.msTouchAction==="none"?!0:e.style.touchAction==="none"?!0:!1},t.attach=function(e,n){return new t(e,n)},t}),BV.define("bv/util/cssLoadCheck",["ENV","body","jquery","client!framework/util/ie","framework/util/bvtracker","framework/util/bvreporter","bv/strings","document"],function(e,t,n,r,i,s,o,u){function m(){if(r&&r<9&&!n.isReady){n(m);return}var u=t();u&&d.parentNode!==u&&u.appendChild(d);if(v.css("display")==="none"){s.info("CSS load detected"),e.set("cssIsLoaded",!0),a.resolve();return}if(p>h){i.error({name:o.errors.TIMEOUT,detail1:"CSS",detail2:"Failed to load after "+c+"ms"}),a.reject();return}setTimeout(m,l),p++}var a=n.Deferred(),f=a.promise();if(!u)return a.resolve(),f;var l=50,c=2e4,h=Math.floor(c/l),p=0,d=u.createElement("div"),v=n(d);return d.style.height="0px",d.style.width="0px",d.style.border="0px",d.className="bv-verify-css-loaded",r=r(),m(),f}),BV.define("hbs!modestboxZone",["hbs","vendor/handlebars/runtime"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<div id="bv-mboxzone-',(o=n.id)?o=o.call(t,{hash:{}}):(o=t.id,o=typeof o===u?o.apply(t):o),s+=a(o)+'" class="bv-mboxzone ',(o=n["class"])?o=o.call(t,{hash:{}}):(o=t["class"],o=typeof o===u?o.apply(t):o),s+=a(o)+'"/> ',s});return t.registerPartial("modestboxZone",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!modestboxOverlay",["hbs","vendor/handlebars/runtime"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div id="bv-mbox-overlay-id" class="bv-mbox-overlay"/> '});return t.registerPartial("modestboxOverlay",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("_i18n_cancel",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";return t+="Cancel",t}(e)}catch(t){return r.push(["error",new Error("MF error on `cancel`: "+t.toString())]),""}}return t.registerHelper("_i18n_cancel",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("hbs!modestboxClose",["hbs","vendor/handlebars/runtime","template/helpers/renderIcon","template/helpers/extmsg","_i18n_cancel"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){return" &#x2718; "}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this,c=n.helperMissing,h=this.escapeExpression;s+='<button type="button" name="',(o=n._i18n_cancel)?o=o.call(t,{hash:{}}):(o=t._i18n_cancel,o=typeof o===f?o.apply(t):o);if(o||o===0)s+=o;s+='" class="bv-mbox-close bv-focusable" onclick="return false;" tabindex="0" aria-labelledby="bv-mbox-close-label"> ',a={hash:{ariaHidden:"true"},inverse:l.noop,fn:l.program(1,p,i)},u=(o=n.renderIcon,o?o.call(t,"bv-sprite-close",a):c.call(t,"renderIcon","bv-sprite-close",a));if(u||u===0)s+=u;return s+=' <span id="bv-mbox-close-label" class="bv-off-screen">',a={hash:{}},s+=h((o=n.extmsg,o?o.call(t,"close",t.msgpack,t,a):c.call(t,"extmsg","close",t.msgpack,t,a)))+"</span> </button> ",s});return t.registerPartial("modestboxClose",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!modestboxInner",["hbs","vendor/handlebars/runtime"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){return'role="dialog"'}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div class="bv-mbox-inner ',(o=n.wrapClass)?o=o.call(t,{hash:{}}):(o=t.wrapClass,o=typeof o===u?o.apply(t):o),s+=a(o)+" bv-mbox-",(o=n.id)?o=o.call(t,{hash:{}}):(o=t.id,o=typeof o===u?o.apply(t):o),s+=a(o)+'"> <div class="bv-mbox-wrapper ',(o=n.injectionClass)?o=o.call(t,{hash:{}}):(o=t.injectionClass,o=typeof o===u?o.apply(t):o),s+=a(o)+'"> <div id="',(o=n.injectionId)?o=o.call(t,{hash:{}}):(o=t.injectionId,o=typeof o===u?o.apply(t):o),s+=a(o)+'" class="bv-mbox" ',o=n["if"].call(t,t.ariaDialog,{hash:{},inverse:f.noop,fn:f.program(1,l,i)});if(o||o===0)s+=o;return s+=' aria-label=""> <div class="bv-mbox-sidebar"></div> <!--[if lt IE 7]> <div class="bv-mbox-content-container bvie6 bvie-lt8 bvie"> <![endif]--> <!--[if IE 7]> <div class="bv-mbox-content-container bvie7 bvie-lt8 bvie"> <![endif]--> <!--[if IE 8]> <div class="bv-mbox-content-container bvie8 bvie"> <![endif]--> <!--[if IE 9]> <div class="bv-mbox-content-container bvie9 bvie"> <![endif]--> <!--[if gt IE 9]> <!--><div class="bv-mbox-content-container"> <!--<![endif]--> <h2 class="bv-mbox-breadcrumb"></h2> <div class="bv-mbox-injection-container"></div> </div> </div> </div> </div> ',s});return t.registerPartial("modestboxInner",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!modestboxBreadcrumb",["hbs","vendor/handlebars/runtime","template/helpers/renderIcon"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var r="",i;r+=' <span data-bv-mbox-layer-index="',(i=n.index)?i=i.call(e,{hash:{}}):(i=e.index,i=typeof i===u?i.apply(e):i),r+=l(i)+'" class="bv-mbox-breadcrumb-item"> ',i=n.unless.call(e,e.last,{hash:{},inverse:a.program(8,m,t),fn:a.program(2,h,t)});if(i||i===0)r+=i;r+=" ",i=n.unless.call(e,e.last,{hash:{},inverse:a.noop,fn:a.program(10,g,t)});if(i||i===0)r+=i;return r+=" </span> ",r}function h(e,t){var r="",i;r+=" <a href=\"#\" class='bv-focusable'> ",i=n["if"].call(e,e.titleIcon,{hash:{},inverse:a.noop,fn:a.program(3,p,t)});if(i||i===0)r+=i;r+=" <span ",i=n["if"].call(e,e.titleIcon,{hash:{},inverse:a.noop,fn:a.program(6,v,t)});if(i||i===0)r+=i;return r+=">",(i=n.title)?i=i.call(e,{hash:{}}):(i=e.title,i=typeof i===u?i.apply(e):i),r+=l(i)+"</span> </a> ",r}function p(e,t){var r,i,s;return s={hash:{classList:"bv-submission-icon"},inverse:a.noop,fn:a.program(4,d,t)},i=(r=n.renderIcon,r?r.call(e,"bv-sprite-thank-you",s):f.call(e,"renderIcon","bv-sprite-thank-you",s)),i||i===0?i:""}function d(e,t){var r;return(r=n.titleIcon)?r=r.call(e,{hash:{}}):(r=e.titleIcon,r=typeof r===u?r.apply(e):r),r||r===0?r:""}function v(e,t){return'class="bv-submission-icon-text"'}function m(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.titleIcon,{hash:{},inverse:a.noop,fn:a.program(3,p,t)});if(i||i===0)r+=i;r+=" <span ",i=n["if"].call(e,e.titleIcon,{hash:{},inverse:a.noop,fn:a.program(6,v,t)});if(i||i===0)r+=i;return r+=">",(i=n.title)?i=i.call(e,{hash:{}}):(i=e.title,i=typeof i===u?i.apply(e):i),r+=l(i)+"</span> ",r}function g(e,t){return'<span class="bv-mbox-breadcrumb-divider">/</span> '}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this,f=n.helperMissing,l=this.escapeExpression;o=n.each.call(t,t.titles,{hash:{},inverse:a.noop,fn:a.program(1,c,i)});if(o||o===0)s+=o;return s+=" ",s});return t.registerPartial("modestboxBreadcrumb",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("bv/ui-core/modestbox",["underscore","jquery","backbone","window","document","body","BV","vendor/fastclick","bv/ui-core/focusableview","bv/util/loadingOverlay","bv/util/cssLoadCheck","util/specialKeys","util/highContrast","bv/strings","framework/bview","framework/util/bvtracker","hbs!modestboxZone","hbs!modestboxOverlay","hbs!modestboxClose","hbs!modestboxInner","hbs!modestboxBreadcrumb","mf!bv/c2013/messages/common"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E){function C(e){this.fn=e.fn,this.frequency=e.frequency,this.cleanup=e.cleanup||t.noop,this.id=null,this.start()}function k(){this.intervals=[]}function L(e){this.id=e,this.layers=[],this.intervalList=new k,this.$mboxClose=t(y({msgpack:E})),this.on("afterClose",a.refocusLayer)}function A(e,t){this._configure(e,t),_(this),this._createInjectionTarget()}function O(e){if(e.inline&&!e.showCloseButton){a.addFocusablesInline(e.box.$layerList.find(".bv-focusable"));return}var t="#"+e.box.injectionId,n=[t+" .bv-mbox-close.bv-focusable",t+" .bv-mbox-breadcrumb .bv-focusable",t+" .bv-mbox-current .bv-focusable"].join(", ");a.registerFocusableLayer(N,n,!1,!0);if(e.autoFocus){var r=e.box.$viewEl.find(".bv-focusable:first");a.moveFocus(r)}}function M(e){a.deregisterFocusableLayer(!1,!0)}function _(e){e.on("afterShow",O),e.on("afterHide",M)}if(r.BV&&r.BV.serverRender)return;var S=500,x=300,T=t(r),N=t(i);return e(C.prototype).extend({start:function(){this.stop(),this.id=setInterval(this.fn,this.frequency)},stop:function(){if(!this.id)return;r.clearInterval(this.id),this.id=null,this.cleanup()}}),e(k.prototype).extend({add:function(e){var t=e instanceof C?e:new C(e);this.intervals.push(t)},startAll:function(){e(this.intervals).invoke("start")},stopAll:function(){e(this.intervals).invoke("stop")}}),e(L.prototype).extend(n.Events,{_addLayer:function(e){return e.on("afterShow",this._applyLayerConfig),this.layers.push(e),this._checkSize(),e},_removeLayer:function(t){typeof t=="undefined"&&(t=this.layers.length-1);var n=this.layers.splice(t,1)[0],r=this;return e.delay(function(){if(!r.opened||r.layers.length===0)return;r._checkSize()},x),n},_checkSize:function(){this.$layerList.toggleClass("bv-mbox-multi",this.layers.length>1)},_cleanupContainers:function(){if(this.overlay){var n=t("#bv-mbox-overlay-id");n.addClass("bv-hiding").attr("style","opacity: 0 !important;"),e.delay(function(){n.hasClass("bv-hiding")&&n.hide()},20)}t("#bv-mboxzone-"+this.id).remove()},_injectContainer:function(e){var n=e.bodyAppend?t(s()):t(e.container),r=[];n.closest(".bv-cleanslate").length===0&&(r.push("bv-cleanslate"),h("high-contrast")&&r.push("bv-highcontrast")),e.bodyAppend||r.push("bv-mbox-opened");var i=t(m({id:this.id,"class":r.join(" ")}));return i.appendTo(n),e.inline||(e.overlay&&(t("#bv-mbox-overlay-id").remove(),t(g()).insertBefore(i)),i.addClass("bv-mbox-lightbox")),new u(i.get(0)),i.on("click",function(e){var n=t(e.target);n.closest('a[href="#"]').length>0&&e.preventDefault()}),i},_createView:function(e){var n="bv-core-container-"+d.config.version,r=this.$container.closest("."+r).length===0,i={id:this.id,ariaTitle:e.ariaTitle||"",ariaDialog:e.ariaDialog,sidebar:!!e.sidebar,wrapClass:r?n:"",injectionId:this.injectionId,injectionClass:this._classesForContainer(e).join(" ")};return t(b(i))},_classesForContainer:function(t){var n=t.classList.slice(0);return n.push(t.sidebar?"wide":"narrow"),t.overElement&&n.push("over"),t.mobile?n.push("mobile"):t.inline?n.push("inline"):n.push("box"),e(n).map(function(e){return"bv-mbox-"+e})},_onStackChange:function(){if(!this.opened||this.layers.length===0)return;var t=e(this.layers).last();f.hide(),this._updateBreadcrumb(),this._manageSidebar(t)},_manageSidebar:function(e){var t=this.$viewEl.find(".bv-mbox-wrapper"),n=t.find(".bv-mbox-sidebar"),r=e?e.sidebar:null;r?(r._actAsEventManager(),t.addClass("bv-mbox-wide").removeClass("bv-mbox-narrow"),n.addClass("bv-sidebar-enabled").removeClass("bv-sidebar-disabled"),r.remove(),r.setElement(n[0]),r.render()):(t.find(".bv-mbox-sidebar").removeClass("bv-sidebar-enabled").addClass("bv-sidebar-disabled").empty(),t.hasClass("bv-mbox-wide")&&(t.removeClass("bv-mbox-wide"),t[0].offsetHeight,t.addClass("bv-mbox-narrow")))},_updateBreadcrumb:function(){var n=this,r=[];e(this.layers).each(function(e,t){if(!e.title)return;r.push({title:e.title,ariaTitle:e.ariaTitle||e.title,titleIcon:e.titleIcon,index:t,last:t===this.layers.length-1})},this);var i=e(this.layers).last();i.showBreadcrumb||(r.length>1?r=e(r).filter(function(e){return e.last}):r.length===1&&!r[0].last&&(r=[]));var s=i.ariaTitle;s||(r.length===0?s="":s=e(r).find(function(e){return e.last}).ariaTitle),t("#bv-mbox-"+this.id+"-list").attr("aria-label",s),this.$breadcrumb.off("click.bv-mbox-breadcrumb","**");if(r.length===0){this.$breadcrumb.addClass("bv-hidden");return}this.$breadcrumb.removeClass("bv-hidden"),this.$breadcrumb.html(w({titles:r})),this.trigger("changeTitle",this,i.title,e.map(r,function(e){return e.title}))},_adjustOffset:function(e){var n=0,r=t("#BVStickyHeader"),i=!this.inline&&!this.over;i&&(n-=40);if(!i&&r.length){var s=r.hasClass("bv-masthead-fixed");if(s||e>r.offset().top)n-=r.height()}return e+n},_moveScroll:function(e,n){var r;if(!this.$container.length)return;typeof e=="undefined"&&(e=!1);if(typeof n=="undefined"){r=this.inline?this.$container:this.$overElement||this.$container,n=r.offset().top;var i=T.scrollTop();n=this._adjustOffset(n);if(!e&&n>=i)return}e?t("html").add(s()).delay(500).animate({scrollTop:n}):T.scrollTop(n)},_fakeInlinePosition:function(e,t){function n(e,t,n){return!this._lastFakeOffset||!this._lastFakeOuterWidth||!this._lastRealOuterHeight?!1:this._lastFakeOffset.top!==e.top||this._lastFakeOffset.left!==e.left?!1:this._lastFakeOuterWidth!==t||this._lastRealOuterHeight!==n?!1:!0}var r=t.offset(),i=t.outerWidth(!0),s=e.outerHeight(!0);if(n(r,i,s))return;e.width(i),t.height(s),e.css({position:"absolute",top:r.top,left:r.left}),this._lastFakeOffset=r,this._lastFakeOuterWidth=i,this._lastRealOuterHeight=s},_applyLayerConfig:function(e){var t=e.showCloseButton;!e.box.hasMultipleLayers()&&e.preventClose&&(t=!1),e.box.$mboxClose[(t?"remove":"add")+"Class"]("bv-hidden")},hasMultipleLayers:function(){return this.$layerList.hasClass("bv-mbox-multi")},open:function(e){var t=this;l.done(function(){t._open(e)})},_open:function(n){function u(t){t.stopPropagation();var n=e(r.layers).last();if(!r.hasMultipleLayers()&&n.preventClose)return;n&&n.closeAll?r.close():r.pop()}function f(){if(!r.opened||r.layers.length===0)return;if(r.skipResizing)return;var n=e(r.layers).last().$target.outerHeight(!0);if(a===n)return;a=n,t.importantizer&&t.importantizer.state()==="resolved"?r.$layerList.height(n):r.$layerList.css("cssText","height: "+n+"px !important;")}var r=this,i=new A(n,this);if(this.opened){v.error({name:p.errors.UI,detail1:"Modestbox Error",detail2:"Box already open"});return}this._originalScroll=null,i.silentMode||(this._originalScroll=T.scrollTop()),this.closeUrl=i.closeUrl||null,this.$overElement=i.$overElement||null,this.inline=i.inline,this.overlay=i.overlay;var s=!0;i.inline&&i.$container&&(i._inForm?s=!0:s=!1),this.$container=this._injectContainer({bodyAppend:s,inline:i.inline,container:i.container,overlay:i.overlay}),this.injectionId="bv-mbox-"+this.id+"-list",this.$viewEl=this._createView(i);if(this.$overElement){var o=function(e){return function(){var t=r.$overElement.offset();if(r._lastOverOffset&&t.top===r._lastOverOffset.top&&t.left===r._lastOverOffset.left)return;r.$container.css({top:t.top,left:t.left}),r.inline||e.css({width:r.$overElement.outerWidth()})}}(this.$viewEl.find(".bv-mbox-wrapper"));o(),T.on("resize."+r.id,e.debounce(o,200))}this.$breadcrumb=this.$viewEl.find(".bv-mbox-breadcrumb"),this.$layerList=this.$viewEl.find(".bv-mbox-injection-container"),this.trigger("beforeOpen",this),this.$container.height("auto").empty().append(this.$viewEl),this.$mboxClose.prependTo(this.$viewEl.find(".bv-mbox")).addClass("bv-hidden"),function(e){var t=!0;e.$mboxClose.on("click."+e.id,function(e){t&&u(e)}).on("keydown."+e.id,function(e){e.keyCode===c.ENTER&&(t=!1)}).on("keyup."+e.id,function(e){e.keyCode===c.ENTER&&(u(e),t=!0)})}(this),i.inline||N.on("keydown."+r.id,function(e){if(e.keyCode!==c.ESCAPE||r.ignoreKeys)return;N.on("keyup."+r.id,function(e){e.keyCode===c.ESCAPE&&(N.off("keyup."+r.id),u(e))})}),this.opened=!0,this.push(i),this.$container.addClass("bv-mbox-opened"),i.container&&i._inForm&&(this._fakeInlinePosition(this.$container,i.$container),this.intervalList.add({fn:function(){if(r.skipResizing)return;r._fakeInlinePosition(r.$container,i.$container)},frequency:200,cleanup:function(){i.$container.height("")}}));var a=-1;f(),this.intervalList.add({fn:f,frequency:200});if(i.silentMode)this._originalScroll=null;else{var l=this.$overElement||this.inline;this._moveScroll(l)}return this.trigger("afterOpen",this),this},close:function(){if(!this.opened)return this;this.intervalList.stopAll(),this.trigger("beforeClose",this),e(this.layers).invoke("destroy"),this.layers=[],this._cleanupContainers(),this.opened=!1,T.off("."+this.id),N.off("."+this.id);var t=!this.$overElement&&!this.inline;return t&&typeof this._originalScroll=="number"&&(this._moveScroll(!1,this._originalScroll),this._originalScroll=null),this.trigger("afterClose",this),this},push:function(t){if(!this.opened){v.error({name:p.errors.UI,detail1:"Modestbox Error",detail2:"Box not open"});return}var n=this,r=t instanceof A?t:new A(t,this),i=e(this.layers).last();this._addLayer(r),i&&i._transitionOut("left"),r.attach(),r._transitionIn("right"),this._moveScroll(),this._onStackChange()},pop:function(e){if(!e)return this.replace();while(e>0)this.pop(),e--;return this},replace:function(t){t&&this.push(t);var n;t?n=this._removeLayer(this.layers.length-2):n=this._removeLayer();var r;return this.layers.length===0?(n.destroy(),this.close()):t||(n._transitionOut("right"),n.on("afterHide",function(e){e.detach()}),r=e(this.layers).last(),r._transitionIn("left"),this._onStackChange()),this},pushOrOpen:function(e){return this.opened?this.push(e):this.open(e),this},replaceOrOpen:function(e){return this.opened?this.replace(e):this.open(e),this}}),A.DEFAULT_OPTIONS={classList:[],overElement:null,inline:!1,overlay:!0,container:null,silentMode:!1,ariaDialog:!1,preventClose:!1,targetClass:"",showCloseButton:!0,showBreadcrumb:!1,autoFocus:!0,closeAll:!1,beforeShow:null,afterShow:null,beforeHide:null,afterHide:null,afterDetach:null},A.TRANSITIONS={enterFromLeft:function(e){e.removeClass("bv-mbox-left").addClass("bv-mbox-current")},enterFromRight:function(e){e.removeClass("bv-mbox-right").addClass("bv-mbox-current")},exitToLeft:function(e){e.removeClass("bv-mbox-current").addClass("bv-mbox-left")},exitToRight:function(e){e.removeClass("bv-mbox-current").addClass("bv-mbox-right")}},e(A.prototype).extend(n.Events,{_configure:function(n,r){var i=this;this.box=r,n.container&&(this.$container=t(n.container)),n.overElement?this.$overElement=t(n.overElement):this.$overElement=null,this.views=n.views||[n.view];if(!this.views){v.error({name:p.errors.UI,detail1:"Modestbox Error",detail2:"No view for layer"});return}delete n.views,delete n.view;var s=e.extend({},A.DEFAULT_OPTIONS,n);e(["beforeShow","afterShow","beforeHide","afterHide","afterDetach"]).each(function(e){s[e]&&this.on(e,function(){s[e].apply(i,arguments)})},this),e(this).extend(s);if(this.inline){if(!this.$container||this.$container.length===0){v.error({name:p.errors.UI,detail1:"Modestbox Error",detail2:"An existing container is required for inline mode"});return}this.$container.closest("form").length>0&&(this._inForm=!0);var o=this.$container.find(".bv-inline-form-container");o.length&&(this.container=o.get(0),this.$container=o.first())}},_createInjectionTarget:function(){var e=t('<div class="bv-mbox-injection-target"></div>');return e.addClass(this.targetClass||""),this.$target=e,e},_makeTransition:function(t,n){function o(){n(i,s)}var r=this.box.hasMultipleLayers(),i=this,s=this.$target;A.TRANSITIONS[t](s);var u=r?x:S;e.delay(o,u)},_transitionIn:function(e){var t=this.$target,n=this,r={left:"enterFromLeft",right:"enterFromRight"}[e];t.addClass("bv-mbox-"+e),t[0].offsetHeight,this.trigger("beforeShow",this),this._makeTransition(r,function(e,t){n.trigger("afterShow",n)})},_transitionOut:function(e){var t=this.$target,n=this,r={left:"exitToLeft",right:"exitToRight"}[e];this.trigger("beforeHide",this),t[0].offsetHeight,n._makeTransition(r,function(){n.trigger("afterHide",n)})},attach:function(){var t=this.box;e(this.views).each(function(e){e.detach(),e.setElement(this.$target[0]),e._actAsEventManager(),e.render(),e.on("close",function(){t.pop()}),e.on("scroll",function(){t._moveScroll()})},this),this.$target.appendTo(t.$layerList),this._detached=!1},detach:function(){e(this.views).each(function(e){e.rpc&&e.rpc.destroy(),e.undelegateEvents(),e.off("close"),e.off("scroll"),e.remove()}),this._detached=!0;var t=this;e.defer(function(){t.trigger("afterDetach",t)})},destroy:function(){this._detached||(this.trigger("beforeHide",this),this.detach(),this.trigger("afterHide",this))}}),{_instances:{},get:function(e){var t=this._instances;e=e||"lightbox";var n=t[e];return n||(n=new L(e),t[e]=n),n}}}),BV.define("bv/c2013/view/mediaViewer",["framework/bmodel","framework/bview","bv/ui-core/focusableview","mf!bv/c2013/messages/mediaViewer","hbs!mediaViewer","hbs!mediaViewerImage","hbs!mediaViewerEmbed","hbs!mediaViewerRibbon","hbs!mediaViewerRibbonSummary","underscore","jquery","bv/api","BV","bv/util/productInfo","framework/util/bvtracker","util/specialKeys","bv/ui-core/modestbox"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g=e.extend({toJSON:function(){var e=this.get("index"),t=this.get("mediaCollection"),n={mediaCollection:f(t).map(function(t,n){var r={mediaType:t.mediaType,index:n};return n===e&&(r.current=!0),r}),totalItems:t.length,currentItem:e+1};return n}}),y=t.extend({name:"mediauploadribbonview",events:{"click .bv-media-viewer-ribbon-item":"_thumbnailClick"},template:u,init:function(e){this.summaryTemplate=a,this.parent=e.parent,this.listenTo(this.model,"change:index",this.onChangeIndex)},_thumbnailClick:function(e){var t=l(e.currentTarget).data("bv-index"),n=l(e.currentTarget).data("bv-mediatype");this.model.set("index",t),this.parent.setIndex(t)},onChangeIndex:function(e,t){var n=this.$el.find(".bv-media-viewer-ribbon-summary");n.html(this.summaryTemplate(this.model.toJSON()));var r="bv-media-viewer-ribbon-item-active";this.$el.find("."+r).removeClass(r);var i=this.$el.find('[data-bv-index="'+t+'"]');i.addClass(r)}});return t.extend({name:"mediaViewer",template:i,msgpacks:[r],init:function(e){var t=this;t.imageTemplate=s,t.embedVideoTemplate=o,t.multiple=!1,t.subscribe("open",this.open),this.listenTo(this.model,"change:media",this.onChangeMedia)},events:{"click .bv-media-prev":"_prev","click .bv-media-next":"_next","keydown .bv-media-arrow":"_interpretKeydown"},open:function(e){var t=this;e.media&&t.model.set("media",e.media),e.mediaCollection&&(t.model.set("mediaCollection",e.mediaCollection),t.ribbonModel=new g({name:"mediauploadribbon",mediaCollection:e.mediaCollection,index:0,component:t.model.getComponent()}),t.ribbonView=new y({model:t.ribbonModel,mediaCollection:e.mediaCollection,parent:this,component:t.model.getComponent()}),t.multiple=e.mediaCollection.length>1);var i=m.get("lightbox");i.pushOrOpen({view:t,targetClass:"bv-mbox-media-box",title:r.media_dialog_label(),autoFocus:!1,beforeShow:function(e){var n=e.box.$container.find(".bv-mbox-narrow");n.removeClass("bv-mbox-narrow").addClass("bv-mbox-media"),t.onRender()},afterHide:function(){n.moveFocus(e.$container),d.feature({type:"Used",name:"Close",detail1:"UserSubmittedMedia",detail2:"Lightbox",bvProduct:p.RATINGSANDREVIEWS,productId:p.getId(t),categoryId:e.categoryId})}})},_indexOfMediaWithId:function(e,t){t=t||this.model.get("mediaCollection");for(var n=0,r,i=t.length;n<i;n++){r=t[n].mediaContent;if(r.Id===e||r.VideoId===e)return n}return-1},setIndex:function(e){var t=this.model.get("mediaCollection"),n=t.length-1;e<0&&(e=0),e>n&&(e=n);var r=t[e];this.setMedia(r)},_interpretKeydown:function(e){if(e.keyCode!==v.SPACE&&e.keyCode!==v.ENTER)return;e.preventDefault();var t=l(e.target);t.hasClass("bv-media-prev")?this._prev():this._next()},_prev:function(){this.move(-1)},_next:function(){this.move(1)},_keydown:function(e){switch(e.keyCode){case v.LEFT:e.preventDefault(),this.move(-1);break;case v.RIGHT:e.preventDefault(),this.move(1)}},move:function(e){var t=this.model.get("mediaCollection"),n=this.currentIndex,r=t.length-1,i;n===r&&e===1?i=0:n===0&&e===-1?i=r:i=n+e,this.setIndex(i)},onRender:function(){var e=this.$el.find(".bv-media-viewer");this._adjustContainerHeight(),this._registerResize(!0),this.multiple&&(this._registerKeyDown(!0),e.addClass("bv-media-viewer-multiple"),this.$el.find(".bv-media-viewer-ribbon").removeClass("bv-hidden"),this.renderRibbon()),this.onChangeMedia()},renderRibbon:function(){var e=this.$el.find(".bv-media-viewer-ribbon");this.ribbonView.setElement(e),this.ribbonView.render()},setMedia:function(e){this.model.set("media",e)},onChangeMedia:function(){var e=this,t,r=e.model.get("media"),i=r.mediaType,s=r.mediaContent;if(!this.$el.length)return;var o={Photos:this.showPhoto,Videos:this.showVideo};(o[i]||function(){})(s,e),n.rescanFocusLayer(),f.delay(function(){n.moveFocus(e.$el.find(".bv-media-focus-target"))},0);if(this.multiple){var u=this._indexOfMediaWithId(s.Id||s.VideoId);this.currentIndex=u,this.ribbonModel.set("index",u)}},showVideo:function(e,t){var n={caption:e.Caption,videoId:e.VideoId};t.$el.find(".bv-media-viewer-canvas").html(t.embedVideoTemplate(n))},showPhoto:function(e,t){var n={caption:e.Caption,url:e.Sizes.normal.Url};t.$el.find(".bv-media-viewer-canvas").html(t.imageTemplate(n));var r=t.$el.find(".bv-media-viewer-image img"),i=new Image;i.onload=function(){t._captureImageDimensions(r,i.height,i.width),t._adjustTableCell()},i.src=n.url},_captureImageDimensions:function(e,t,n){e.attr({"data-height":t,"data-width":n})},_adjustContainerHeight:function(){var e=this,t=l(window).innerHeight(),n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,r=!t||n&&n<t?n:t,i=this.$el.find(".bv-media-viewer");i.css("height",r*.8),this._adjustTableCell()},_adjustTableCell:function(){var e=this;if(!this.$el)return;var t=this.$el.find(".bv-media-viewer-inner"),n=t.height();if(n){t.find("td").css("height",n);var r=t.find(".bv-media-viewer-caption").outerHeight(),i=Number(t.find(".bv-media-viewer-image > img").attr("data-height")),s=Math.min(i,n-r);t.find(".bv-media-viewer-image").css("height",s),e._innerHeightCount=0}else e._innerHeightCount=e._innerHeightCount?e._innerHeightCount:0,e._innerHeightCount<10&&setTimeout(function(){e._adjustTableCell.call(this)},50),e._innerHeightCount++},_registerResize:function(e){var t=this;if(e){var n=f.throttle(function(){t._adjustContainerHeight()},500);l(window).bind("resize.bvmediaviewerresize",n)}else l(window).unbind(".bvmediaviewerresize")},_registerKeyDown:function(e){var t=this;e?l(document).bind("keydown.bvthumbnail",function(e){t._keydown(e)}):l(document).unbind(".bvthumbnail")},remove:function(){return this._registerResize(!1),this._registerKeyDown(!1),this.$el.remove(),this.$viewEl=this.viewEl=null,this}})}),BV.define("mf!bv/c2013/messages/genericSubmission",["vendor/messageformat","framework/util/bvtrackerqueue"],function(e,t){return{product_picker_title:function(e){try{return function(e){var t="";return t+="Select a Product to Review",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `product_picker_title`: "+n.toString())]),""}},allCategories:function(e){try{return function(e){var t="";return t+="All Categories",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `allCategories`: "+n.toString())]),""}},goBackCategory:function(e){try{return function(e){var t="";t+="Back to ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.lastCategoryName,t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `goBackCategory`: "+n.toString())]),""}},selectCategory:function(e){try{return function(e){var t="";return t+="More Categories",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `selectCategory`: "+n.toString())]),""}},offscreen_category_select_arrow:function(e){try{return function(e){var t="";return t+="Menu, press enter to show options",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_category_select_arrow`: "+n.toString())]),""}}}}),BV.define("bv/c2013/model/genericSubmission",["framework/bmodel","underscore","bv/api/fetch","framework/util/bvtracker","bv/util/productInfo","template/helpers/extmsg","mf!bv/c2013/messages/genericSubmission"],function(e,t,n,r,i,s,o){return e.extend({name:"genericSubmission",init:function(e){var n=e.clientAPIConfig||{},s=n.familyProductId,o=t.debounce(function(e){r.feature({type:"Used",name:"Search",detail1:"GenericReviewSubmission",detail2:e,bvProduct:i.RATINGSANDREVIEWS})},2e3),u=this.getComponent(),a=!!n.inline,f="silentMode"in n?!!n.silentMode:a;this.set({categoryId:n.categoryId||null,familyProductId:s,categoryHistory:[],rootCategoryId:-1,preventClose:!!n.preventClose,inline:a,silentMode:f});var l=u.container;n.containerId&&(l=n.containerId,u.container=l),this.set("containerId",l),s?(this.subscribe("productItemSelected",this.launchSubmissionForProduct),this.subscribeOnce("pageto",function(){this.dataReady()})):this.subscribe({pageto:this.fetchData,productItemSelected:this.launchSubmissionForProduct,searchcontent:function(e,t){o(t)},searchcleared:function(){var e=this.get("rootCategoryId"),t=this.get("categoryId")}}),this.on("change:categoryId",this.fetchData,this),this.on("change:categoryName",this.updateChildrenWithName,this)},setupDataProcessing:function(){var e=this;this.searchModel=t(this.subModels).find(function(e){return e.name==="searchBar"}),this.subscribe("pageinfo",function(e,t){t.instanceName==="unfiltered"&&this.set("moreResultsEnabled",!!e.total)},this),this.on("categoryDataReady",function(t){var n=t.subcatData;this.get("categoryHistory").length&&(n=[{Id:"bv_back_category",Name:o.goBackCategory(e.toJSON())}].concat(n)),this.set("subCategories",n),this.get("categoryId")===null?this.set("categoryName",o.allCategories()):this.set("categoryName",t.catData.Name)}),this.once("categoryDataReady",function(e){this.dataReady({categoryName:this.get("categoryName"),subCategories:this.get("subCategories")})})},fetchData:function(){var e=this,t=this.get("categoryId"),r=n.get("categories").filterBy("parentid","=",String(t)).filterBy("isActive").sortBy("asc","Name").limit(100),i=n.get("categories").filterBy("id","=",t).filterBy("isActive"),s=n.get("batch",null,[i,r]);this.unsubscribe("pageto",this.fetchData),s.fetch(this.name).done(function(t){var n=t[0],r=t[1];e.trigger("categoryDataReady",{catData:n.data.Results[0],subcatData:r.data.Results})})},setCategory:function(e,n,r){var i=this.get("rootCategoryId");if(!n){var s=t(this.get("subCategories")).find(function(t){return t.Id===e});n=s?s.Name:null}r&&(this.get("categoryHistory").push({categoryId:this.get("categoryId"),categoryName:this.get("categoryName"),lastCategoryName:this.get("lastCategoryName")}),this.set("lastCategoryName",this.get("categoryName"))),this.set("categoryName",n),this.set("categoryId",e),this.publish("change:categoryId",e)},backCategory:function(){var e=this.get("categoryHistory").pop();this.set("lastCategoryName",e.lastCategoryName),this.setCategory(e.categoryId,e.categoryName,!1)},breadcrumbCategory:function(e){var t;if(e!==undefined){do t=this.get("categoryHistory").pop();while(t.categoryId!==null&&t.categoryId!==e);this.set("lastCategoryName",t.lastCategoryName),this.setCategory(t.categoryId,t.categoryName,!1)}},launchSubmissionForProduct:function(e){this.trigger("launchSubmissionForProduct",e)},updateChildrenWithName:function(e,t){this.searchModel.set("categoryName",t)}})}),BV.define("hbs!genericSubmission",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/mountView","template/helpers/foreach"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+=" ",i=n.unless.call(e,e.familyProductId,{hash:{},inverse:c.noop,fn:c.program(2,d,t),data:t});if(i||i===0)r+=i;r+=' <div class="bv-product-picker"> ',i=n.unless.call(e,e.familyProductId,{hash:{},inverse:c.noop,fn:c.program(5,m,t),data:t});if(i||i===0)r+=i;r+=" ",o={hash:{},data:t},r+=l((i=n.mountView,i?i.call(e,"productItemCollection:filtered",o):f.call(e,"mountView","productItemCollection:filtered",o)))+" ",o={hash:{},data:t},r+=l((i=n.mountView,i?i.call(e,"loadMore:filtered",o):f.call(e,"mountView","loadMore:filtered",o)))+" ",s=n.unless.call(e,e.familyProductId,{hash:{},inverse:c.noop,fn:c.program(9,b,t),data:t});if(s||s===0)r+=s;return r+=" ",r}function d(e,t){var r="",i,s;r+=" ",s=n["if"].call(e,(i=e.dimsumConfig,i==null||i===!1?i:i.grsSearchEnabled),{hash:{},inverse:c.noop,fn:c.program(3,v,t),data:t});if(s||s===0)r+=s;return r+=" ",r}function v(e,t){var r="",i,s;return r+=" ",s={hash:{},data:t},r+=l((i=n.mountView,i?i.call(e,"searchBar",s):f.call(e,"mountView","searchBar",s)))+" ",r}function m(e,t){var r="",i,s,o;r+=' <div class="bv-control-bar"> ',o={hash:{},data:t},r+=l((i=n.mountView,i?i.call(e,"ugcCount:filtered",o):f.call(e,"mountView","ugcCount:filtered",o)))+' <div class="bv-category-breadcrumb"> ',o={hash:{},inverse:c.noop,fn:c.program(6,g,t),data:t},s=(i=n.foreach,i?i.call(e,e.categoryHistory,o):f.call(e,"foreach",e.categoryHistory,o));if(s||s===0)r+=s;return r+=" ",o={hash:{},data:t},r+=l((i=n.mountView,i?i.call(e,"categorySelect",o):f.call(e,"mountView","categorySelect",o)))+" </div> </div> ",r}function g(e,t){var r="",i;r+=" ",i=n["if"].call(e,t.last,{hash:{},inverse:c.noop,fn:c.program(7,y,t),data:t});if(i||i===0)r+=i;return r+=" ",r}function y(e,t){var r="",i;return r+=' <div class="bv-back-category-link"> <a class="bv-text-link bv-category-breadcrumb-link" data-bv-category-breadcrumb="',(i=n.categoryId)?i=i.call(e,{hash:{},data:t}):(i=e.categoryId,i=typeof i===h?i.apply(e):i),r+=l(i)+'" href="#">',(i=n.categoryName)?i=i.call(e,{hash:{},data:t}):(i=e.categoryName,i=typeof i===h?i.apply(e):i),r+=l(i)+" &raquo;&nbsp;</a> </div> ",r}function b(e,t){var r="",i,s;return r+=' <div class="bv-control-bar bv-more-results bv-hidden"> ',s={hash:{},data:t},r+=l((i=n.mountView,i?i.call(e,"ugcCount:unfiltered",s):f.call(e,"mountView","ugcCount:unfiltered",s)))+" </div> ",s={hash:{},data:t},r+=l((i=n.mountView,i?i.call(e,"productItemCollection:unfiltered",s):f.call(e,"mountView","productItemCollection:unfiltered",s)))+" ",s={hash:{},data:t},r+=l((i=n.mountView,i?i.call(e,"loadMore:unfiltered",s):f.call(e,"mountView","loadMore:unfiltered",s)))+" </div> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this,h="function";s+=" ",a={hash:{tag:"div",classList:"submission generic-submission"},inverse:c.noop,fn:c.program(1,p,i),data:i},u=(o=n.view,o?o.call(t,t,a):f.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("genericSubmission",n),n.deps=[],n.tplMountedViews=["searchBar","ugcCount:filtered","categorySelect","productItemCollection:filtered","loadMore:filtered","ugcCount:unfiltered","productItemCollection:unfiltered","loadMore:unfiltered"],n}),BV.define("mf!bv/c2013/messages/contentSearch",["vendor/messageformat","framework/util/bvtrackerqueue"],function(e,t){return{content_follow_button:function(e){try{return function(e){var t="";return t+="Follow",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `content_follow_button`: "+n.toString())]),""}},content_share_button:function(e){try{return function(e){var t="";return t+="Share",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `content_share_button`: "+n.toString())]),""}},content_search_button:function(e){try{return function(e){var t="";return t+="Search",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `content_search_button`: "+n.toString())]),""}},content_search_placeholder:function(e){try{return function(e){var t="";return t+="Search topics and reviews",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `content_search_placeholder`: "+n.toString())]),""}},content_search_placeholder_reviewGenericSubmission1:function(e){try{return function(e){var t="";t+="Search ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.categoryName,t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `content_search_placeholder_reviewGenericSubmission1`: "+n.toString())]),""}},content_search_no_results:function(e){try{return function(e){var t="";return t+="Your search returned no results.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `content_search_no_results`: "+n.toString())]),""}}}}),BV.define("mf!bv/c2013/messages/submission",["vendor/messageformat","framework/util/bvtrackerqueue"],function(e,t){return{submit_review:function(e){try{return function(e){var t="";return t+="Post Review",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `submit_review`: "+n.toString())]),""}},submit_comment:function(e){try{return function(e){var t="";return t+="Post Comment",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `submit_comment`: "+n.toString())]),""}},submit_question:function(e){try{return function(e){var t="";return t+="Post Question",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `submit_question`: "+n.toString())]),""}},submit_answer:function(e){try{return function(e){var t="";return t+="Post Answer",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `submit_answer`: "+n.toString())]),""}},add_file:function(e){try{return function(e){var t="";return t+="Add File",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `add_file`: "+n.toString())]),""}},add_photo:function(e){try{return function(e){var t="";return t+="Add Photo",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `add_photo`: "+n.toString())]),""}},add_photo_dialog:function(e){try{return function(e){var t="";return t+="Add Photo. dialog.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `add_photo_dialog`: "+n.toString())]),""}},add_facebookphoto:function(e){try{return function(e){var t="";return t+="Add Photo",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `add_facebookphoto`: "+n.toString())]),""}},add_facebookphoto_1:function(e){try{return function(e){var t="";return t+="Facebook",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `add_facebookphoto_1`: "+n.toString())]),""}},display_photourl_1:function(e){try{return function(e){var t="";return t+="Photo",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `display_photourl_1`: "+n.toString())]),""}},helpertext_photourl_1:function(e){try{return function(e){var t="";return t+="<h2>  Photo guidelines</h2> <p>  When submitting images, please follow these guidelines:</p> <ul>  <li>   Images must be in BMP, PNG, GIF or JPEG format.</li>  <li>   File size must be 5 MB or less.</li>  <li>   Image must be at least 60 pixels tall.</li>  <li>   Image must be at least 60 pixels wide.</li>  <li>   If you are not the copyright holder, you may not submit copyrighted images.</li>  <li>   Objectionable images will be rejected.</li>  <li>   Uploaded images become the property of the Company.</li> </ul>",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `helpertext_photourl_1`: "+n.toString())]),""}},header_review:function(e){try{return function(e){var t="";return t+="My Review",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `header_review`: "+n.toString())]),""}},aria_header_review:function(e){try{return function(e){var t="";t+="My Review for ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.productName,t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `aria_header_review`: "+n.toString())]),""}},remove_photo:function(e){try{return function(e){var t="";return t+="Remove Photo",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `remove_photo`: "+n.toString())]),""}},remove_confirm_photo:function(e){try{return function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");var n="Gender",r=e[n],i=0,s={other:function(e){var t="";return t+="Are you sure you want to remove this photo?",t}};return t+=(s[r]||s.other)(e),t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `remove_confirm_photo`: "+n.toString())]),""}},add_video:function(e){try{return function(e){var t="";return t+="Add Video",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `add_video`: "+n.toString())]),""}},add_video_dialog:function(e){try{return function(e){var t="";return t+="Add Video. dialog.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `add_video_dialog`: "+n.toString())]),""}},display_videourl_1:function(e){try{return function(e){var t="";return t+="Link to YouTube Video",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `display_videourl_1`: "+n.toString())]),""}},helpertext_videourl_1:function(e){try{return function(e){var t="";return t+="<h2>  Video guidelines</h2> <p>  When submitting videos, please follow these guidelines:</p> <ul>  <li>   Make sure your video is related to the product.</li>  <li>   Try to submit videos of you using the product.</li>  <li>   Inappropriate videos will be rejected along with your review.</li>  <li>   If you are not the copyright holder, you may not submit copyrighted videos.</li> </ul>",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `helpertext_videourl_1`: "+n.toString())]),""}},error_message_invalid_url_video:function(e){try{return function(e){var t="";return t+="Invalid YouTube URL",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_message_invalid_url_video`: "+n.toString())]),""}},error_message_require_url_video:function(e){try{return function(e){var t="";return t+="YouTube URL is required",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_message_require_url_video`: "+n.toString())]),""}},remove_video:function(e){try{return function(e){var t="";return t+="Remove Video",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `remove_video`: "+n.toString())]),""}},remove_confirm_video:function(e){try{return function(e){var t="";return t+="Are you sure you want to remove this video?",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `remove_confirm_video`: "+n.toString())]),""}},display_rating:function(e){try{return function(e){var t="";return t+="Overall Rating",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `display_rating`: "+n.toString())]),""}},placeholder_rating:function(e){try{return function(e){var t="";return t+="Rate from 1 to 5 where 1 is poor and 5 is excellent.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `placeholder_rating`: "+n.toString())]),""}},helper_rating_1:function(e){try{return function(e){var t="";return t+="Click to rate!",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `helper_rating_1`: "+n.toString())]),""}},title_rating_1:function(e){try{return function(e){var t="";return t+="Poor",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `title_rating_1`: "+n.toString())]),""}},title_rating_2:function(e){try{return function(e){var t="";return t+="Fair",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `title_rating_2`: "+n.toString())]),""}},title_rating_3:function(e){try{return function(e){var t="";return t+="Average",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `title_rating_3`: "+n.toString())]),""}},title_rating_4:function(e){try{return function(e){var t="";return t+="Good",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `title_rating_4`: "+n.toString())]),""}},title_rating_5:function(e){try{return function(e){var t="";return t+="Excellent",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `title_rating_5`: "+n.toString())]),""}},display_title:function(e){try{return function(e){var t="";return t+="Review Title",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `display_title`: "+n.toString())]),""}},placeholder_title:function(e){try{return function(e){var t="";return t+="Example:Â  Great Price!",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `placeholder_title`: "+n.toString())]),""}},display_reviewtext:function(e){try{return function(e){var t="";return t+="Review",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `display_reviewtext`: "+n.toString())]),""}},placeholder_reviewtext:function(e){try{return function(e){var t="";return t+="Please keep all content within the review relative to the product.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `placeholder_reviewtext`: "+n.toString())]),""}},helpertext_reviewtext:function(e){try{return function(e){var t="";return t+='<h2>  Writing guidelines</h2> <p>  &nbsp;</p> <p>  When writing your review, please consider the following guidelines:</p> <ul>  <li>   Use the product before reviewing it</li>  <li>   Focus on the product and your individual experience using it</li>  <li>   Provide details about why you liked or disliked a product</li>  <li>   All submitted reviews are subject to the terms set forth in our Terms of Use</li> </ul> <p>  Please avoid:</p> <ul>  <li>   Info that changes, such as price and promotional details</li>  <li>   Info about other companies and websites</li>  <li>   Inappropriate language and attitude</li> </ul> <p>  We reserve the right not to post your review if it contains any of the following types of content or violates other guidelines:</p> <ul>  <li>   Obscenities, discriminatory language, or other language not suitable for a public forum</li>  <li>   Advertisements, "spam" content, or references to other products, offers, or web sites</li>  <li>   Email addresses, URLs, phone numbers, physical addresses or other forms of contact/personal information - we want to protect your privacy!</li>  <li>   Critical or spiteful comments on other reviews posted on the page or their authors</li> </ul> <p>  In addition, please do not submit any feedback other than for product reviews. If you wish to share feedback with us about product selection, pricing, ordering, delivery or other customer service issues, please <a href="http://www.sportsmansguide.com/customerservice/contactus" target="_blank">contact us</a> directly.</p>',t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `helpertext_reviewtext`: "+n.toString())]),""}},display_photocaption_1:function(e){try{return function(e){var t="";return t+="Caption",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `display_photocaption_1`: "+n.toString())]),""}},placeholder_photocaption_1:function(e){try{return function(e){var t="";return t+="Example: My new shirt",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `placeholder_photocaption_1`: "+n.toString())]),""}},display_videocaption_1:function(e){try{return function(e){var t="";return t+="Caption",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `display_videocaption_1`: "+n.toString())]),""}},placeholder_videocaption_1:function(e){try{return function(e){var t="";return t+="Example: How to Install",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `placeholder_videocaption_1`: "+n.toString())]),""}},display_usernickname:function(e){try{return function(e){var t="";return t+="Nickname",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `display_usernickname`: "+n.toString())]),""}},placeholder_usernickname:function(e){try{return function(e){var t="";return t+="Example: Mike111",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `placeholder_usernickname`: "+n.toString())]),""}},display_userlocation:function(e){try{return function(e){var t="";return t+="Location",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `display_userlocation`: "+n.toString())]),""}},placeholder_userlocation:function(e){try{return function(e){var t="";return t+="Example: St Paul, MN",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `placeholder_userlocation`: "+n.toString())]),""}},display_isrecommended:function(e){try{return function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");var n="Gender",r=e[n],i=0,s={other:function(e){var t="";return t+="Would you recommend this product to a friend?",t}};return t+=(s[r]||s.other)(e),t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `display_isrecommended`: "+n.toString())]),""}},display_netpromoterscore:function(e){try{return function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");var n="Gender",r=e[n],i=0,s={other:function(e){var t="";t+="Would you recommend ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.clientName,t+=" to a friend?",t}};return t+=(s[r]||s.other)(e),t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `display_netpromoterscore`: "+n.toString())]),""}},placeholder_netpromoterscore:function(e){try{return function(e){var t="";return t+="Rate from 0 to 10 where 0 is never and 10 is definitely.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `placeholder_netpromoterscore`: "+n.toString())]),""}},helper_netpromoterscore_1:function(e){try{return function(e){var t="";return t+="Never",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `helper_netpromoterscore_1`: "+n.toString())]),""}},helper_netpromoterscore_2:function(e){try{return function(e){var t="";return t+="Definitely",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `helper_netpromoterscore_2`: "+n.toString())]),""}},display_netpromotercomment:function(e){try{return function(e){var t="";return t+="Please tell us why <em>(will not appear on our site)</em>",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `display_netpromotercomment`: "+n.toString())]),""}},display_useremail:function(e){try{return function(e){var t="";return t+="Email",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `display_useremail`: "+n.toString())]),""}},placeholder_useremail:function(e){try{return function(e){var t="";return t+="Example: yourname@example.com",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `placeholder_useremail`: "+n.toString())]),""}},display_hostedauthentication_authenticationemail:function(e){try{return function(e){var t="";return t+="Email",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `display_hostedauthentication_authenticationemail`: "+n.toString())]),""}},placeholder_hostedauthentication_authenticationemail:function(e){try{return function(e){var t="";return t+="Example: youremail@example.com",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `placeholder_hostedauthentication_authenticationemail`: "+n.toString())]),""}},display_rememberemail:function(e){try{return function(e){var t="";return t+="Remember me",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `display_rememberemail`: "+n.toString())]),""}},display_agreedtotermsandconditions:function(e){try{return function(e){var t="";return t+='I agree to the <a href="#" class="bv-text-link bv-focusable">terms &amp; conditions</a>',t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `display_agreedtotermsandconditions`: "+n.toString())]),""}},display_casltext:function(e){try{return function(e){var t="";return t+="You may receive emails regarding this submission. Any emails will include the ability to opt-out of future communications.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `display_casltext`: "+n.toString())]),""}},header_termsandconditions:function(e){try{return function(e){var t="";return t+="Terms and Conditions",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `header_termsandconditions`: "+n.toString())]),""}},header_comment:function(e){try{return function(e){var t="";return t+="My Comment",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `header_comment`: "+n.toString())]),""}},display_commenttext:function(e){try{return function(e){var t="";return t+="Comment",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `display_commenttext`: "+n.toString())]),""}},placeholder_commenttext:function(e){try{return function(e){var t="";return t+="Write a comment...",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `placeholder_commenttext`: "+n.toString())]),""}},header_question:function(e){try{return function(e){var t="";return t+="Ask a Question",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `header_question`: "+n.toString())]),""}},display_questionsummary:function(e){try{return function(e){var t="";return t+="Question",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `display_questionsummary`: "+n.toString())]),""}},placeholder_questionsummary:function(e){try{return function(e){var t="";return t+="Please keep questions relative to the product.Â  If you have questions regarding Availability (Back Order , In Stock, Pricing, etc) please contact SG Customer Service at custserv@sportsmansguide.com",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `placeholder_questionsummary`: "+n.toString())]),""}},header_answer:function(e){try{return function(e){var t="";return t+="My Answer",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `header_answer`: "+n.toString())]),""}},error_AN_ERROR_OCCURRED:function(e){try{return function(e){var t="";return t+="An error occurred. Please try again.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_AN_ERROR_OCCURRED`: "+n.toString())]),""}},error_ERROR_FORM_DUPLICATE:function(e){try{return function(e){var t="";return t+="nickname already used",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_DUPLICATE`: "+n.toString())]),""}},error_ERROR_FORM_DUPLICATE_NICKNAME:function(e){try{return function(e){var t="";return t+="nickname already used",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_DUPLICATE_NICKNAME`: "+n.toString())]),""}},error_ERROR_DUPLICATE_SUBMISSION:function(e){try{return function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");var n="Gender",r=e[n],i=0,s={other:function(e){var t="";return t+="You already submitted a review. Thanks!",t}};return t+=(s[r]||s.other)(e),t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_DUPLICATE_SUBMISSION`: "+n.toString())]),""}},error_ERROR_FORM_FILE_PARSE:function(e){try{return function(e){var t="";return t+="error",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_FILE_PARSE`: "+n.toString())]),""}},error_ERROR_FORM_FILE_TOO_LARGE:function(e){try{return function(e){var t="";return t+="file too large",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_FILE_TOO_LARGE`: "+n.toString())]),""}},error_ERROR_FORM_IMAGE_HEIGHT_TOO_SMALL:function(e){try{return function(e){var t="";return t+="image too short",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_IMAGE_HEIGHT_TOO_SMALL`: "+n.toString())]),""}},error_ERROR_FORM_IMAGE_PARSE:function(e){try{return function(e){var t="";return t+="invalid image",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_IMAGE_PARSE`: "+n.toString())]),""}},error_ERROR_FORM_IMAGE_TOO_LARGE:function(e){try{return function(e){var t="";return t+="image too large",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_IMAGE_TOO_LARGE`: "+n.toString())]),""}},error_ERROR_FORM_IMAGE_WIDTH_TOO_SMALL:function(e){try{return function(e){var t="";return t+="image too narrow",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_IMAGE_WIDTH_TOO_SMALL`: "+n.toString())]),""}},error_ERROR_FORM_INVALID_EMAILADDRESS:function(e){try{return function(e){var t="";return t+="invalid email",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_INVALID_EMAILADDRESS`: "+n.toString())]),""}},error_ERROR_FORM_INVALID_IPADDRESS:function(e){try{return function(e){var t="";return t+="invalid IP",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_INVALID_IPADDRESS`: "+n.toString())]),""}},error_ERROR_FORM_INVALID_OPTION:function(e){try{return function(e){var t="";return t+="invalid value",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_INVALID_OPTION`: "+n.toString())]),""}},error_ERROR_FORM_PATTERN_MISMATCH:function(e){try{return function(e){var t="";return t+="only use letters and numbers",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_PATTERN_MISMATCH`: "+n.toString())]),""}},error_ERROR_FORM_PROFANITY:function(e){try{return function(e){var t="";return t+="profanity",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_PROFANITY`: "+n.toString())]),""}},error_ERROR_FORM_REJECTED_HEADER:function(e){try{return function(e){var t="";return t+="Your review cannot be approved at this time because it:",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REJECTED_HEADER`: "+n.toString())]),""}},error_ERROR_FORM_REJECTED_SENTENCE:function(e){try{return function(e){var t="";t+="This field ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.errorCodeMessage,t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REJECTED_SENTENCE`: "+n.toString())]),""}},error_ERROR_FORM_REJECTED_CR:function(e){try{return function(e){var t="";return t+="mentions a competitor",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REJECTED_CR`: "+n.toString())]),""}},error_ERROR_FORM_REJECTED_DBA:function(e){try{return function(e){var t="";return t+="directs business away",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REJECTED_DBA`: "+n.toString())]),""}},error_ERROR_FORM_REJECTED_PII:function(e){try{return function(e){var t="";return t+="includes personally identifiable information",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REJECTED_PII`: "+n.toString())]),""}},error_ERROR_FORM_REJECTED_SI:function(e){try{return function(e){var t="";return t+="mentions shipping complaints",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REJECTED_SI`: "+n.toString())]),""}},error_ERROR_FORM_REJECTED_IMG:function(e){try{return function(e){var t="";return t+="includes inappropriate media",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REJECTED_IMG`: "+n.toString())]),""}},error_ERROR_FORM_REJECTED_URL:function(e){try{return function(e){var t="";return t+="contains a URL",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REJECTED_URL`: "+n.toString())]),""}},error_ERROR_FORM_REJECTED_VAC:function(e){try{return function(e){var t="";return t+="is vacuous or needs more detail",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REJECTED_VAC`: "+n.toString())]),""}},error_ERROR_FORM_REJECTED_PRF:function(e){try{return function(e){var t="";return t+="includes profanity",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REJECTED_PRF`: "+n.toString())]),""}},error_ERROR_FORM_REJECTED_VID:function(e){try{return function(e){var t="";return t+="includes inappropriate media",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REJECTED_VID`: "+n.toString())]),""}},error_ERROR_FORM_REJECTED_PRI:function(e){try{return function(e){var t="";return t+="mentions the specific price",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REJECTED_PRI`: "+n.toString())]),""}},error_ERROR_FORM_REJECTED_CS:function(e){try{return function(e){var t="";return t+="mentions customer service issues",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REJECTED_CS`: "+n.toString())]),""}},error_ERROR_FORM_REJECTED_LI:function(e){try{return function(e){var t="";return t+="contains legally sensitive content",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REJECTED_LI`: "+n.toString())]),""}},error_ERROR_FORM_REJECTED_FL:function(e){try{return function(e){var t="";return t+="does not match the site's language",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REJECTED_FL`: "+n.toString())]),""}},error_ERROR_FORM_REJECTED_SPM:function(e){try{return function(e){var t="";return t+="looks like duplicate content",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REJECTED_SPM`: "+n.toString())]),""}},error_ERROR_FORM_REJECTED_GIU:function(e){try{return function(e){var t="";return t+="contains inappropriate content",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REJECTED_GIU`: "+n.toString())]),""}},error_ERROR_FORM_REJECTED_WP:function(e){try{return function(e){var t="";return t+="applies to a different product",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REJECTED_WP`: "+n.toString())]),""}},error_ERROR_FORM_REJECTED_UA:function(e){try{return function(e){var t="";return t+="was written by a reviewer younger than 13",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REJECTED_UA`: "+n.toString())]),""}},error_ERROR_FORM_REJECTED_PUX:function(e){try{return function(e){var t="";return t+="was written lacking personal experience",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REJECTED_PUX`: "+n.toString())]),""}},error_ERROR_FORM_REJECTED:function(e){try{return function(e){var t="";return t+="Does not meet moderation guidelines",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REJECTED`: "+n.toString())]),""}},error_ERROR_FORM_REQUIRED:function(e){try{return function(e){var t="";return t+="required",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REQUIRED`: "+n.toString())]),""}},error_ERROR_FORM_REQUIRED_EITHER:function(e){try{return function(e){var t="";return t+="required",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REQUIRED_EITHER`: "+n.toString())]),""}},error_ERROR_FORM_REQUIRED_FAKE:function(e){try{return function(e){var t="";return t+="required",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REQUIRED_FAKE`: "+n.toString())]),""}},error_ERROR_FORM_REQUIRED_NICKNAME:function(e){try{return function(e){var t="";return t+="required",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REQUIRED_NICKNAME`: "+n.toString())]),""}},error_ERROR_FORM_REQUIRES_TRUE:function(e){try{return function(e){var t="";return t+="required",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_REQUIRES_TRUE`: "+n.toString())]),""}},error_ERROR_FORM_RESTRICTED:function(e){try{return function(e){var t="";return t+="too young",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_RESTRICTED`: "+n.toString())]),""}},error_ERROR_FORM_STORAGE_PROVIDER_FAILED:function(e){try{return function(e){var t="";return t+="upload failed",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_STORAGE_PROVIDER_FAILED`: "+n.toString())]),""}},error_ERROR_FORM_SUBMITTED_NICKNAME:function(e){try{return function(e){var t="";return t+="nickname already used",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_SUBMITTED_NICKNAME`: "+n.toString())]),""}},error_ERROR_FORM_TOO_FEW:function(e){try{return function(e){var t="";return t+="too few",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_TOO_FEW`: "+n.toString())]),""}},error_ERROR_FORM_TOO_HIGH:function(e){try{return function(e){var t="";return t+="too high",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_TOO_HIGH`: "+n.toString())]),""}},error_ERROR_FORM_TOO_LONG:function(e){try{return function(e){var t="";return t+="too long",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_TOO_LONG`: "+n.toString())]),""}},error_ERROR_FORM_TOO_LOW:function(e){try{return function(e){var t="";return t+="too low",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_TOO_LOW`: "+n.toString())]),""}},error_ERROR_FORM_TOO_SHORT:function(e){try{return function(e){var t="";return t+="too short",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_TOO_SHORT`: "+n.toString())]),""}},error_ERROR_FORM_UPLOAD_IO:function(e){try{return function(e){var t="";return t+="upload failed",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_FORM_UPLOAD_IO`: "+n.toString())]),""}},error_ERROR_PRIVATE_BROWSING_MODE:function(e){try{return function(e){var t="";return t+="Sorry, writing reviews is disabled in private browsing mode. Please disable private browsing mode and try again.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_ERROR_PRIVATE_BROWSING_MODE`: "+n.toString())]),""}},error_unknown:function(e){try{return function(e){var t="";return t+="error",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `error_unknown`: "+n.toString())]),""}},selectOne:function(e){try{return function(e){var t="";return t+="Select",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `selectOne`: "+n.toString())]),""}},submission_yes:function(e){try{return function(e){var t="";return t+="Yes",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `submission_yes`: "+n.toString())]),""}},submission_no:function(e){try{return function(e){var t="";return t+="No",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `submission_no`: "+n.toString())]),""}},field_required:function(e){try{return function(e){var t="";return t+="Required field",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `field_required`: "+n.toString())]),""}},max_length_message:function(e){try{return function(e){var t="";t+="Maximum of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.maxlength,t+=" characters.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `max_length_message`: "+n.toString())]),""}},max_length_reached_message:function(e){try{return function(e){var t="";t+="Reached maximum of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.maxlength,t+=" characters.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `max_length_reached_message`: "+n.toString())]),""}},photo_upload_success:function(e){try{return function(e){var t="";return t+="The photo was uploaded successfully.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `photo_upload_success`: "+n.toString())]),""}},photo_upload_preview:function(e){try{return function(e){var t="";return t+="This is a preview of the photo that was uploaded.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `photo_upload_preview`: "+n.toString())]),""}},photo_upload_preview_placeholder:function(e){try{return function(e){var t="";return t+="Uploading photo.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `photo_upload_preview_placeholder`: "+n.toString())]),""}},video_upload_success:function(e){try{return function(e){var t="";return t+="The video was successfully linked.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `video_upload_success`: "+n.toString())]),""}},video_upload_preview:function(e){try{return function(e){var t="";return t+="This is a preview of the video that was linked.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `video_upload_preview`: "+n.toString())]),""}},video_upload_preview_placeholder:function(e){try{return function(e){var t="";return t+="Loading video.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `video_upload_preview_placeholder`: "+n.toString())]),""}},submission_photo_added:function(e){try{return function(e){var t="";return t+="The photo was successfully added.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `submission_photo_added`: "+n.toString())]),""}},submission_video_added:function(e){try{return function(e){var t="";return t+="The video was successfully added.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `submission_video_added`: "+n.toString())]),""}}}}),BV.define("_i18n_acceptTCButton",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";return t+="Accept",t}(e)}catch(t){return r.push(["error",new Error("MF error on `acceptTCButton`: "+t.toString())]),""}}return t.registerHelper("_i18n_acceptTCButton",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("hbs!termsConditions",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/extmsg","_i18n_acceptTCButton"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+=' <div class="bv-compat bv-submit-step"> <div class="bv-terms-conditions"> <div class="bv-terms-conditions-text bv-focusable" tabindex="0"> ',o={hash:{prefix:"display_",defaultDisplay:" <p>Welcome to our website. If you continue to browse and use this website, you are agreeing to comply with and be bound by the following terms and conditions of use, which together with our privacy policy govern [business name]'s relationship with you in relation to this website. If you disagree with any part of these terms and conditions, please do not use our website.</p> <p>The term '[business name]' or 'us' or 'we' refers to the owner of the website whose registered office is [address]. Our company registration number is [company registration number and place of registration]. The term 'you' refers to the user or viewer of our website.</p> <p>The use of this website is subject to the following terms of use:</p> <ul> <li>The content of the pages of this website is for your general information and use only. It is subject to change without notice.</li> <li>This website uses cookies to monitor browsing preferences. If you do allow cookies to be used, the following personal information may be stored by us for use by third parties: [insert list of information].</li> <li>Neither we nor any third parties provide any warranty or guarantee as to the accuracy, timeliness, performance, completeness or suitability of the information and materials found or offered on this website for any particular purpose. You acknowledge that such information and materials may contain inaccuracies or errors and we expressly exclude liability for any such inaccuracies or errors to the fullest extent permitted by law.</li> <li>Your use of any information or materials on this website is entirely at your own risk, for which we shall not be liable. It shall be your own responsibility to ensure that any products, services or information available through this website meet your specific requirements.</li> <li>This website contains material which is owned by or licensed to us. This material includes, but is not limited to, the design, layout, look, appearance and graphics. Reproduction is prohibited other than in accordance with the copyright notice, which forms part of these terms and conditions.</li> <li>All trade marks reproduced in this website which are not the property of, or licensed to, the operator are acknowledged on the website.</li> <li>Unauthorised use of this website may give rise to a claim for damages and/or be a criminal offence.</li> <li>From time to time this website may also include links to other websites. These links are provided for your convenience to provide further information. They do not signify that we endorse the website(s). We have no responsibility for the content of the linked website(s).</li> <li>Your use of this website and any dispute arising out of such use of the website is subject to the laws of England, Northern Ireland, Scotland and Wales.</li> </ul> "}},r+=l((i=n.extmsg,i?i.call(e,e.termsConditionsType,e.msgPack,e,o):f.call(e,"extmsg",e.termsConditionsType,e.msgPack,e,o)))+' </div> </div> <div class="bv-tc-footer"> <button type="button" class="bv-button bv-accept-tc-button bv-focusable"> '+" ",(s=n._i18n_acceptTCButton)?s=s.call(e,{hash:{}}):(s=e._i18n_acceptTCButton,s=typeof s===c?s.apply(e):s);if(s||s===0)r+=s;return r+=" </button> </div> </div> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;a={hash:{tag:"div",classList:"submission"},inverse:h.noop,fn:h.program(1,p,i)},u=(o=n.view,o?o.call(t,t,a):f.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("termsConditions",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/termsConditions",["framework/bmodel","framework/bview","jquery","hbs!termsConditions"],function(e,t,n,r){return t.extend({name:"termsConditions",el:".bv-terms-conditions",events:{"click .bv-accept-tc-button":"acceptTC"},template:r,init:function(t){var n=this.getComponent(),r={answer:"qaTermsAndConditions",review:"termsAndConditions",question:"qaTermsAndConditions"};this.model=new e({componentId:this.componentId,component:n,name:"dummy",termsConditionsType:r[this.parent.model.get("contentType")]})},acceptTC:function(e){this.parent.trigger("acceptTC"),this.trigger("close")}})}),BV.define("hbs!uploadPreviewPlaceholder",["hbs","vendor/handlebars/runtime","template/helpers/equals"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){return' <span aria-hidden="true" class="bv-media-preview-icon bv-photo-preview-icon">&#9688;</span> '}function d(e,t){return' <span aria-hidden="true" class="bv-media-preview-icon bv-video-preview-icon">&#9689;</span> '}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+='<div id="bv-media-preview-placeholder-label" class="bv-off-screen"></div> <div class="bv-media-preview-placeholder bv-',(o=n.mediaType)?o=o.call(t,{hash:{}}):(o=t.mediaType,o=typeof o===f?o.apply(t):o),s+=l(o)+'-preview-placeholder" aria-labelledby="bv-media-preview-placeholder-label" role="presentation"> <div class="bv-media-preview-dummy"> ',a={hash:{},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.equals,o?o.call(t,t.mediaType,"photo",a):h.call(t,"equals",t.mediaType,"photo",a));if(u||u===0)s+=u;s+=" ",a={hash:{},inverse:c.noop,fn:c.program(3,d,i)},u=(o=n.equals,o?o.call(t,t.mediaType,"video",a):h.call(t,"equals",t.mediaType,"video",a));if(u||u===0)s+=u;return s+=' </div>  <div class="bv-upload-spinner-container"> <div class="bv-upload-spinner"></div> </div> </div> ',s});return t.registerPartial("uploadPreviewPlaceholder",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!submissionHelper",["hbs","vendor/handlebars/runtime","template/helpers/renderIcon"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){return" &#x2714; "}function h(e,t){return" &#x2718; "}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=this,l=n.helperMissing;s+='<span class="bv-helper"> <label class="bv-helper-label"></label> <span class="bv-helper-icon" aria-hidden="true"> <span class="bv-helper-icon-positive">',a={hash:{},inverse:f.noop,fn:f.program(1,c,i)},u=(o=n.renderIcon,o?o.call(t,"bv-helper-icon-positive",a):l.call(t,"renderIcon","bv-helper-icon-positive",a));if(u||u===0)s+=u;s+='</span> <span class="bv-helper-icon-negative">',a={hash:{},inverse:f.noop,fn:f.program(3,h,i)},u=(o=n.renderIcon,o?o.call(t,"bv-helper-icon-negative",a):l.call(t,"renderIcon","bv-helper-icon-negative",a));if(u||u===0)s+=u;return s+="</span> </span> </span> ",s});return t.registerPartial("submissionHelper",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("template/helpers/msgExists",["vendor/handlebars/runtime","underscore","template/helpers/extmsg"],function(e,t,n){function r(e,r,i,s){var o=n(e,r,i,s);return o&&!t(o.string).isEmpty()?s.fn({text:o.string}):s.inverse(this)}return e.registerHelper("msgExists",r),r}),BV.define("hbs!submissionLabel",["hbs","vendor/handlebars/runtime","hbs!submissionHelper","template/helpers/extmsg","template/helpers/msgExists","template/helpers/equals"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){return"*"}function d(e,t){var r="",i;return r+='<span class="bv-off-screen">',(i=n.text)?i=i.call(e,{hash:{}}):(i=e.text,i=typeof i===f?i.apply(e):i),r+=l(i)+"</span>",r}function v(e,t){var r="",i,s;return r+=' <span class="bv-off-screen">',s={hash:{}},r+=l((i=n.extmsg,i?i.call(e,"max_length_message",e.msgpack,e.validation,s):c.call(e,"extmsg","max_length_message",e.msgpack,e.validation,s)))+"</span> ",r}function m(e,t){var r="",i,s;return r+=' <span class="bv-sublabel"> ',s={hash:{}},r+=l((i=n.extmsg,i?i.call(e,"max_length_message",e.msgpack,e.validation,s):c.call(e,"extmsg","max_length_message",e.msgpack,e.validation,s)))+" </span> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<label for="bv-',(o=n.type)?o=o.call(t,{hash:{}}):(o=t.type,o=typeof o===f?o.apply(t):o),s+=l(o)+"-field-"+l((o=(o=t.schema,o==null||o===!1?o:o.Id),typeof o===f?o.apply(t):o))+'" class="bv-fieldset-label-wrapper"> <span class="bv-fieldset-label"> <span class="bv-fieldset-label-text"> ',a={hash:{prefix:"display_",defaultDisplay:(o=t.schema,o==null||o===!1?o:o.Label)}},s+=l((o=n.extmsg,o?o.call(t,(o=t.schema,o==null||o===!1?o:o.Id),t.msgpack,t,a):c.call(t,"extmsg",(o=t.schema,o==null||o===!1?o:o.Id),t.msgpack,t,a))),u=n["if"].call(t,(o=t.validation,o==null||o===!1?o:o.required),{hash:{},inverse:h.noop,fn:h.program(1,p,i)});if(u||u===0)s+=u;s+=' </span>  <span aria-hidden="false" class="bv-off-screen bv-field-aria-validation"></span> </span> ',a={hash:{prefix:"placeholder_"},inverse:h.noop,fn:h.program(3,d,i)},u=(o=n.msgExists,o?o.call(t,(o=t.schema,o==null||o===!1?o:o.Id),t.msgpack,t,a):c.call(t,"msgExists",(o=t.schema,o==null||o===!1?o:o.Id),t.msgpack,t,a));if(u||u===0)s+=u;s+="  ",u=n["if"].call(t,(o=t.validation,o==null||o===!1?o:o.maxlength),{hash:{},inverse:h.noop,fn:h.program(5,v,i)});if(u||u===0)s+=u;s+=" </label>  ",a={hash:{},inverse:h.noop,fn:h.program(7,m,i)},u=(o=n.equals,o?o.call(t,(o=t.schema,o==null||o===!1?o:o.Id),"questionsummary",a):c.call(t,"equals",(o=t.schema,o==null||o===!1?o:o.Id),"questionsummary",a));if(u||u===0)s+=u;s+=" ",u=h.invokePartial(r.submissionHelper,"submissionHelper",t,n,r);if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("submissionLabel",n),n.deps=["submissionHelper"],n.tplMountedViews=[],n}),BV.define("hbs!submissionInputRadio",["hbs","vendor/handlebars/runtime","template/helpers/equals","template/helpers/loop","template/helpers/percentage","template/helpers/extmsg","template/helpers/msgExists"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){return" bv-fieldset-slider-group"}function d(e,t,r){var i="",s,o,u;i+=' <li class="bv-radio-',(s=n.groupId)?s=s.call(e,{hash:{}}):(s=e.groupId,s=typeof s===c?s.apply(e):s),i+=l(s)+" bv-radio-",(s=n.id)?s=s.call(e,{hash:{}}):(s=e.id,s=typeof s===c?s.apply(e):s),i+=l(s)+"-group-",(s=n.value)?s=s.call(e,{hash:{}}):(s=e.value,s=typeof s===c?s.apply(e):s),i+=l(s)+' bv-radio-container-li"',u={hash:{},inverse:h.noop,fn:h.programWithDepth(v,t,e)},o=(s=n.equals,s?s.call(e,(s=r.dimsumField,s==null||s===!1?s:s.type),"SLIDER",u):f.call(e,"equals",(s=r.dimsumField,s==null||s===!1?s:s.type),"SLIDER",u));if(o||o===0)i+=o;i+='> <input type="radio" id="bv-radio-'+l((s=(s=r.schema,s==null||s===!1?s:s.Id),typeof s===c?s.apply(e):s))+"-",(o=n.value)?o=o.call(e,{hash:{}}):(o=e.value,o=typeof o===c?o.apply(e):o),i+=l(o)+'" name="',(o=n.id)?o=o.call(e,{hash:{}}):(o=e.id,o=typeof o===c?o.apply(e):o),i+=l(o)+'" class="bv-radio-input bv-'+l((s=(s=r.schema,s==null||s===!1?s:s.Id),typeof s===c?s.apply(e):s))+"-input "+l((s=r.inputClasses,typeof s===c?s.apply(e):s))+" ",u={hash:{},inverse:h.noop,fn:h.program(6,m,t)},o=(s=n.equals,s?s.call(e,(s=r.dimsumField,s==null||s===!1?s:s.type),"SLIDER",u):f.call(e,"equals",(s=r.dimsumField,s==null||s===!1?s:s.type),"SLIDER",u));if(o||o===0)i+=o;i+='" value="',(o=n.value)?o=o.call(e,{hash:{}}):(o=e.value,o=typeof o===c?o.apply(e):o),i+=l(o)+'" ',o=n["if"].call(e,e.label,{hash:{},inverse:h.noop,fn:h.program(8,g,t)});if(o||o===0)i+=o;i+=" ",u={hash:{prefix:"title_",defaultDisplay:e.label},inverse:h.noop,fn:h.program(10,y,t)},o=(s=n.msgExists,s?s.call(e,e.msgpackId,r.msgpack,e,u):f.call(e,"msgExists",e.msgpackId,r.msgpack,e,u));if(o||o===0)i+=o;return i+="/> </li> ",i}function v(e,t,r){var i="",s,o;return i+=' style="width:',o={hash:{}},i+=l((s=n.percentage,s?s.call(e,1,e.total,2,o):f.call(e,"percentage",1,e.total,2,o)))+'% !important;" data-bv-dropdown-inmbox data-bv-dropdown-style="sliderTextOverflow" data-bv-dropdown-text="',o={hash:{defaultDisplay:e.value}},i+=l((s=n.extmsg,s?s.call(e,e.msgpackId,r.msgpack,e,o):f.call(e,"extmsg",e.msgpackId,r.msgpack,e,o)))+'"',i}function m(e,t){return"bv-focusable"}function g(e,t){var r="",i;return r+='data-label="',(i=n.label)?i=i.call(e,{hash:{}}):(i=e.label,i=typeof i===c?i.apply(e):i),r+=l(i)+'"',r}function y(e,t){var r="",i;return r+='title="',(i=n.text)?i=i.call(e,{hash:{}}):(i=e.text,i=typeof i===c?i.apply(e):i),r+=l(i)+'"',r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;s+='<span class="bv-fieldset-'+l((o=(o=t.schema,o==null||o===!1?o:o.Id),typeof o===c?o.apply(t):o))+"-group bv-radio-group",a={hash:{},inverse:h.noop,fn:h.program(1,p,i)},u=(o=n.equals,o?o.call(t,(o=t.dimsumField,o==null||o===!1?o:o.type),"SLIDER",a):f.call(t,"equals",(o=t.dimsumField,o==null||o===!1?o:o.type),"SLIDER",a));if(u||u===0)s+=u;s+='"> <ul role="presentation"> ',a={hash:{},inverse:h.noop,fn:h.programWithDepth(d,i,t)},u=(o=n.loop,o?o.call(t,(o=t.ui,o==null||o===!1?o:o.radioEl),t,a):f.call(t,"loop",(o=t.ui,o==null||o===!1?o:o.radioEl),t,a));if(u||u===0)s+=u;return s+=" </ul> </span> ",s});return t.registerPartial("submissionInputRadio",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!submissionInputCheckbox",["hbs","vendor/handlebars/runtime","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing;return s+='<!-- checkbox --> <div class="bv-checkbox-container"> <input id="bv-checkbox-'+l((o=(o=t.schema,o==null||o===!1?o:o.Id),typeof o===f?o.apply(t):o))+'" name="'+l((o=(o=t.schema,o==null||o===!1?o:o.Id),typeof o===f?o.apply(t):o))+'" class="bv-checkbox bv-focusable ',(u=n.inputClasses)?u=u.call(t,{hash:{}}):(u=t.inputClasses,u=typeof u===f?u.apply(t):u),s+=l(u)+'" type="checkbox" value="true"/> <label class="bv-fieldset-label-checkbox" for="bv-checkbox-'+l((o=(o=t.schema,o==null||o===!1?o:o.Id),typeof o===f?o.apply(t):o))+'"> <span class="bv-fieldset-label-text">',a={hash:{prefix:"display_"}},s+=l((o=n.extmsg,o?o.call(t,(o=t.schema,o==null||o===!1?o:o.Id),t.msgpack,t,a):c.call(t,"extmsg",(o=t.schema,o==null||o===!1?o:o.Id),t.msgpack,t,a)))+"</span> "+' <span aria-hidden="false" class="bv-off-screen bv-field-aria-validation"></span> </label> </div> ',s});return t.registerPartial("submissionInputCheckbox",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!submissionInputSelect",["hbs","vendor/handlebars/runtime","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t,r){var i="",s,o;i+=' <option value="'+f((s=e.Value,typeof s===l?s.apply(e):s))+'" ',o=n["if"].call(e,e.Selected,{hash:{},inverse:c.noop,fn:c.program(2,p,t)});if(o||o===0)i+=o;i+=" ",o=n.unless.call(e,e.Label,{hash:{},inverse:c.noop,fn:c.program(4,d,t)});if(o||o===0)i+=o;i+="> ",o=n["if"].call(e,e.Label,{hash:{},inverse:c.programWithDepth(m,t,r),fn:c.programWithDepth(v,t,r)});if(o||o===0)i+=o;return i+=" </option> ",i}function p(e,t){return'selected="selected"'}function d(e,t){return'class="bv-option-disabled" disabled="disabled"'}function v(e,t,r){var i="",s,o;return i+=" ",o={hash:{prefixNum:2,prefix:(s=r.schema,s==null||s===!1?s:s.Id),prefix1:"_",defaultDisplay:e.Label}},i+=f((s=n.extmsg,s?s.call(e,e.Value,r.msgpack,e,o):a.call(e,"extmsg",e.Value,r.msgpack,e,o)))+" ",i}function m(e,t,r){var i="",s,o;return i+=" ",o={hash:{}},i+=f((s=n.extmsg,s?s.call(e,"selectOne",r.msgpack,e,o):a.call(e,"extmsg","selectOne",r.msgpack,e,o)))+" ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a=n.helperMissing,f=this.escapeExpression,l="function",c=this;s+='<select id="bv-select-field-'+f((o=(o=t.schema,o==null||o===!1?o:o.Id),typeof o===l?o.apply(t):o))+'" class="bv-select-cleanslate bv-select bv-focusable" name="'+f((o=(o=t.schema,o==null||o===!1?o:o.Id),typeof o===l?o.apply(t):o))+'"> ',u=n.each.call(t,(o=t.schema,o==null||o===!1?o:o.Options),{hash:{},inverse:c.noop,fn:c.programWithDepth(h,i,t)});if(u||u===0)s+=u;return s+=' </select> <button type="button" class="bv-dropdown-arrow" aria-hidden="true" onclick="return false;">â–¼</button> ',s});return t.registerPartial("submissionInputSelect",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!submissionInput",["hbs","vendor/handlebars/runtime","hbs!submissionInputRadio","hbs!submissionInputCheckbox","hbs!submissionInputSelect","template/helpers/extmsg","template/helpers/ifHasFeature","template/helpers/msgExists","template/helpers/equals","template/helpers/loop"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var n="",r;return n+=' <input id="bv-hidden-'+a((r=(r=e.schema,r==null||r===!1?r:r.Id),typeof r===u?r.apply(e):r))+'" type="hidden" class="bv-noremember" name="'+a((r=(r=e.schema,r==null||r===!1?r:r.Id),typeof r===u?r.apply(e):r))+'" value="'+a((r=(r=e.schema,r==null||r===!1?r:r.Value),typeof r===u?r.apply(e):r))+'"/> ',n}function h(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.text,{hash:{},inverse:l.noop,fn:l.program(4,p,t)});if(i||i===0)r+=i;r+=" ",i=n["if"].call(e,e.email,{hash:{},inverse:l.noop,fn:l.program(6,d,t)});if(i||i===0)r+=i;r+=" ",i=n["if"].call(e,e.textarea,{hash:{},inverse:l.noop,fn:l.program(8,v,t)});if(i||i===0)r+=i;r+=" ",i=n["if"].call(e,e.radio,{hash:{},inverse:l.noop,fn:l.program(12,y,t)});if(i||i===0)r+=i;r+=" ",i=n["if"].call(e,e.checkbox,{hash:{},inverse:l.noop,fn:l.program(18,S,t)});if(i||i===0)r+=i;r+=" ",i=n["if"].call(e,e.select,{hash:{},inverse:l.noop,fn:l.program(20,x,t)});if(i||i===0)r+=i;return r+=" ",r}function p(e,t){var r="",i,s,o;return r+='  <input id="bv-text-field-'+a((i=(i=e.schema,i==null||i===!1?i:i.Id),typeof i===u?i.apply(e):i))+'" class="bv-text bv-focusable ',(s=n.inputClasses)?s=s.call(e,{hash:{}}):(s=e.inputClasses,s=typeof s===u?s.apply(e):s),r+=a(s)+'" type="text" name="'+a((i=(i=e.schema,i==null||i===!1?i:i.Id),typeof i===u?i.apply(e):i))+'" maxlength="'+a((i=(i=e.validation,i==null||i===!1?i:i.maxlength),typeof i===u?i.apply(e):i))+'" placeholder="',o={hash:{prefix:"placeholder_",protectString:!0}},r+=a((i=n.extmsg,i?i.call(e,(i=e.schema,i==null||i===!1?i:i.Id),e.msgpack,e,o):f.call(e,"extmsg",(i=e.schema,i==null||i===!1?i:i.Id),e.msgpack,e,o)))+'" value="'+a((i=(i=e.schema,i==null||i===!1?i:i.Value),typeof i===u?i.apply(e):i))+'"/> ',r}function d(e,t){var r="",i,s,o;return r+='  <input id="bv-email-field-'+a((i=(i=e.schema,i==null||i===!1?i:i.Id),typeof i===u?i.apply(e):i))+'" class="bv-text bv-focusable ',(s=n.inputClasses)?s=s.call(e,{hash:{}}):(s=e.inputClasses,s=typeof s===u?s.apply(e):s),r+=a(s)+'" type="email" name="'+a((i=(i=e.schema,i==null||i===!1?i:i.Id),typeof i===u?i.apply(e):i))+'" maxlength="'+a((i=(i=e.validation,i==null||i===!1?i:i.maxlength),typeof i===u?i.apply(e):i))+'" placeholder="',o={hash:{prefix:"placeholder_",protectString:!0}},r+=a((i=n.extmsg,i?i.call(e,(i=e.schema,i==null||i===!1?i:i.Id),e.msgpack,e,o):f.call(e,"extmsg",(i=e.schema,i==null||i===!1?i:i.Id),e.msgpack,e,o)))+'" value="'+a((i=(i=e.schema,i==null||i===!1?i:i.Value),typeof i===u?i.apply(e):i))+'"/> ',r}function v(e,t){var r="",i,s,o;r+='  <textarea id="bv-textarea-field-'+a((i=(i=e.schema,i==null||i===!1?i:i.Id),typeof i===u?i.apply(e):i))+'" class="bv-focusable ',(s=n.inputClasses)?s=s.call(e,{hash:{}}):(s=e.inputClasses,s=typeof s===u?s.apply(e):s),r+=a(s)+'" name="'+a((i=(i=e.schema,i==null||i===!1?i:i.Id),typeof i===u?i.apply(e):i))+'" maxlength="'+a((i=(i=e.validation,i==null||i===!1?i:i.maxlength),typeof i===u?i.apply(e):i))+'" placeholder="',o={hash:{prefix:"placeholder_",protectString:!0}},r+=a((i=n.extmsg,i?i.call(e,(i=e.schema,i==null||i===!1?i:i.Id),e.msgpack,e,o):f.call(e,"extmsg",(i=e.schema,i==null||i===!1?i:i.Id),e.msgpack,e,o)))+'" ',o={hash:{_schemaId:(i=e.schema,i==null||i===!1?i:i.Id)},inverse:l.noop,fn:l.program(9,m,t)},s=(i=n.ifHasFeature,i?i.call(e,"reviewHelperText",e.rawData,o):f.call(e,"ifHasFeature","reviewHelperText",e.rawData,o));if(s||s===0)r+=s;return r+=">"+a((i=(i=e.schema,i==null||i===!1?i:i.Value),typeof i===u?i.apply(e):i))+"</textarea> ",r}function m(e,t){var r,i,s;return s={hash:{prefix:"helpertext_"},inverse:l.noop,fn:l.program(10,g,t)},i=(r=n.msgExists,r?r.call(e,e._schemaId,e.msgpack,e,s):f.call(e,"msgExists",e._schemaId,e.msgpack,e,s)),i||i===0?i:""}function g(e,t){var r="",i;return r+=' data-bv-dropdown-inmbox data-bv-dropdown-style="helperTextOverflow" data-bv-dropdown-always-show="false" data-bv-dropdown-text="',(i=n.text)?i=i.call(e,{hash:{}}):(i=e.text,i=typeof i===u?i.apply(e):i),r+=a(i)+'" ',r}function y(e,t){var i="",s,o,c;i+='  <span class="bv-fieldset-'+a((s=(s=e.schema,s==null||s===!1?s:s.Id),typeof s===u?s.apply(e):s))+'-wrapper bv-fieldset-radio-wrapper bv-focusable" role="radiogroup" aria-labelledby="bv-fieldset-label-'+a((s=(s=e.schema,s==null||s===!1?s:s.Id),typeof s===u?s.apply(e):s))+'" tabindex="0"> ',o=l.invokePartial(r.submissionInputRadio,"submissionInputRadio",e,n,r);if(o||o===0)i+=o;i+=" ",c={hash:{},inverse:l.program(15,w,t),fn:l.program(13,b,t)},o=(s=n.equals,s?s.call(e,(s=e.dimsumField,s==null||s===!1?s:s.type),"SLIDER",c):f.call(e,"equals",(s=e.dimsumField,s==null||s===!1?s:s.type),"SLIDER",c));if(o||o===0)i+=o;return i+=" </span> ",i}function b(e,t){var r="",i,s;return r+=' <span class="bv-sliderscore-helper-1" aria-hidden="true">',s={hash:{prefix:"slider_dimension_1_"}},r+=a((i=n.extmsg,i?i.call(e,(i=e.schema,i==null||i===!1?i:i.Id),e.msgpack,e,s):f.call(e,"extmsg",(i=e.schema,i==null||i===!1?i:i.Id),e.msgpack,e,s)))+'</span> <span class="bv-sliderscore-helper-2" aria-hidden="true">',s={hash:{prefix:"slider_dimension_2_"}},r+=a((i=n.extmsg,i?i.call(e,(i=e.schema,i==null||i===!1?i:i.Id),e.msgpack,e,s):f.call(e,"extmsg",(i=e.schema,i==null||i===!1?i:i.Id),e.msgpack,e,s)))+"</span> ",r}function w(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:l.noop,fn:l.programWithDepth(E,t,e)},s=(i=n.loop,i?i.call(e,(i=e.ui,i==null||i===!1?i:i.numHelpers),e,o):f.call(e,"loop",(i=e.ui,i==null||i===!1?i:i.numHelpers),e,o));if(s||s===0)r+=s;return r+=" ",r}function E(e,t,r){var i="",s,o;return i+=' <span class="bv-rating-helper bv-',(s=n.id)?s=s.call(e,{hash:{}}):(s=e.id,s=typeof s===u?s.apply(e):s),i+=a(s)+"-helper-",(s=n.value)?s=s.call(e,{hash:{}}):(s=e.value,s=typeof s===u?s.apply(e):s),i+=a(s)+'" aria-hidden="true">',o={hash:{prefix:"helper_"}},i+=a((s=n.extmsg,s?s.call(e,e.msgpackId,r.msgpack,e,o):f.call(e,"extmsg",e.msgpackId,r.msgpack,e,o)))+"</span> ",i}function S(e,t){var i="",s;i+="  ",s=l.invokePartial(r.submissionInputCheckbox,"submissionInputCheckbox",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function x(e,t){var i="",s;i+='  <span class="bv-fieldset-select-wrapper"> ',s=l.invokePartial(r.submissionInputSelect,"submissionInputSelect",e,n,r);if(s||s===0)i+=s;return i+=" </span> ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u="function",a=this.escapeExpression,f=n.helperMissing,l=this;s+=" ",o=n["if"].call(t,t.hidden,{hash:{},inverse:l.program(3,h,i),fn:l.program(1,c,i)});if(o||o===0)s+=o;return s+=" ",s});return t.registerPartial("submissionInput",n),n.deps=["submissionInputRadio","submissionInputCheckbox","submissionInputSelect"],n.tplMountedViews=[],n}),BV.define("hbs!submissionField",["hbs","vendor/handlebars/runtime","hbs!submissionInput","hbs!submissionLabel"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){var i="",s,o;i+=' <fieldset class="bv-hidden-field bv-fieldset-'+a((s=(s=e.schema,s==null||s===!1?s:s.Id),typeof s===u?s.apply(e):s))+'">',o=f.invokePartial(r.submissionInput,"submissionInput",e,n,r);if(o||o===0)i+=o;return i+="</fieldset> ",i}function c(e,t){var i="",s,o;i+=' <fieldset class="bv-fieldset bv-fieldset-'+a((s=(s=e.schema,s==null||s===!1?s:s.Id),typeof s===u?s.apply(e):s))+" bv-",(o=n.type)?o=o.call(e,{hash:{}}):(o=e.type,o=typeof o===u?o.apply(e):o),i+=a(o)+"-field ",(o=n.fieldsetClasses)?o=o.call(e,{hash:{}}):(o=e.fieldsetClasses,o=typeof o===u?o.apply(e):o),i+=a(o)+'"> <div class="bv-fieldset-arrowicon"></div> <div class="bv-fieldset-inner"> ',o=f.invokePartial(r.submissionLabel,"submissionLabel",e,n,r);if(o||o===0)i+=o;i+=" ",o=f.invokePartial(r.submissionInput,"submissionInput",e,n,r);if(o||o===0)i+=o;return i+=" </div> </fieldset> ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u="function",a=this.escapeExpression,f=this;o=n["if"].call(t,t.hidden,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i)});if(o||o===0)s+=o;return s+=" ",s});return t.registerPartial("submissionField",n),n.deps=["submissionInput","submissionLabel"],n.tplMountedViews=[],n}),BV.define("template/helpers/submissionField",["vendor/handlebars/runtime","underscore","mf!bv/c2013/messages/submission"],function(e,t,n){function r(r,i,s){var o=[].slice.call(arguments),u=o[o.length-1],a=i[r],f={},l=!e.Utils.isEmpty(a);if(!l||!a.enabled)return u.inverse(a);t(a.schema).isObject()||(a.schema={Id:r}),a.rawData=s,a.clientName=s.clientName,a.msgpack=s.msgpack;var c={TextInput:function(e){return e.type="text",e},TextAreaInput:function(e){return e.type="textarea",e},BooleanInput:function(e){return e.type="radio",e.radioEl={values:["true","false"],labels:[n.submission_yes(),n.submission_no()]},e},IntegerInput:function(e){return e.type="radio",e.radioEl={range:a.range},e},SelectInput:function(e){return e.type="select",e},HiddenInput:function(e){return e.type="hidden",e.hidden=!0,e}};return t(a.schema.Type).isEmpty()||(f=c[a.hidden?"HiddenInput":a.schema.Type](f),a.schema.Id.indexOf("rating_")>-1&&(f=c.IntegerInput(f))),t(u.hash.inputType).isUndefined()||(f.type=u.hash.inputType),t(u.hash.numHelpers).isUndefined()||(f.numHelpers=u.hash.numHelpers),t(f.type).isEmpty()||(a.type=f.type,a.ui=f,a[f.type]=!0),t(u.hash.fieldsetClasses).isUndefined()||(a.fieldsetClasses=u.hash.fieldsetClasses),t(u.hash.inputClasses).isUndefined()||(a.inputClasses=u.hash.inputClasses),u.fn(a)}return e.registerHelper("submissionField",r),r}),BV.define("hbs!upload",["hbs","vendor/handlebars/runtime","hbs!uploadPreviewPlaceholder","hbs!submissionLabel","hbs!submissionField","template/helpers/view","template/helpers/submissionField","template/helpers/equals","template/helpers/extmsg","template/helpers/msgExists"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+=' <div class="bv-compat bv-media-uploader bv-',(i=n.mediaType)?i=i.call(e,{hash:{}}):(i=e.mediaType,i=typeof i===f?i.apply(e):i),r+=l(i)+'-uploader bv-submit-step"> <form id="bv-',(i=n.mediaType)?i=i.call(e,{hash:{}}):(i=e.mediaType,i=typeof i===f?i.apply(e):i),r+=l(i)+"-upload-form-",(i=n.channelId)?i=i.call(e,{hash:{}}):(i=e.channelId,i=typeof i===f?i.apply(e):i),r+=l(i)+'" enctype="multipart/form-data" target="bv-submission-target-',(i=n.channelId)?i=i.call(e,{hash:{}}):(i=e.channelId,i=typeof i===f?i.apply(e):i),r+=l(i)+'" action="https:'+l((i=(i=e.apiConfig,i==null||i===!1?i:i.baseUrl),typeof i===f?i.apply(e):i))+"upload",(s=n.mediaType)?s=s.call(e,{hash:{}}):(s=e.mediaType,s=typeof s===f?s.apply(e):s),r+=l(s)+'.json?" accept-charset="utf-8" method="POST" class="bv-form"> <input type="hidden" name="contenttype" value="',(s=n.contentType)?s=s.call(e,{hash:{}}):(s=e.contentType,s=typeof s===f?s.apply(e):s),r+=l(s)+'" class="bv-noremember" /> <input type="hidden" name="passkey" value="'+l((i=(i=e.apiConfig,i==null||i===!1?i:i.passkey),typeof i===f?i.apply(e):i))+'" class="bv-noremember" /> <input type="hidden" name="apiversion" value="'+l((i=(i=e.apiConfig,i==null||i===!1?i:i.apiversion),typeof i===f?i.apply(e):i))+'" class="bv-noremember" /> <input type="hidden" name="callback" value="',(s=n.postCallback)?s=s.call(e,{hash:{}}):(s=e.postCallback,s=typeof s===f?s.apply(e):s),r+=l(s)+'" class="bv-noremember" /> <input type="hidden" name="forceutf8" value="&#9760;" class="bv-noremember" /> <input type="hidden" name="locale" value="',(s=n.locale)?s=s.call(e,{hash:{}}):(s=e.locale,s=typeof s===f?s.apply(e):s),r+=l(s)+'" class="bv-noremember" /> ',s=n["if"].call(e,(i=e.apiConfig,i==null||i===!1?i:i.virtualEnvironment),{hash:{},inverse:c.noop,fn:c.program(2,d,t)});if(s||s===0)r+=s;r+=" ",s=n["if"].call(e,(i=e.apiConfig,i==null||i===!1?i:i.displaycode),{hash:{},inverse:c.noop,fn:c.program(4,v,t)});if(s||s===0)r+=s;r+=' <div class="bv-submission-section"> <div class="bv-media-upload bv-',(s=n.mediaType)?s=s.call(e,{hash:{}}):(s=e.mediaType,s=typeof s===f?s.apply(e):s),r+=l(s)+'-upload"> <ul class="bv-fieldsets" role="presentation"> ',o={hash:{fieldsetClasses:"bv-media-upload-placeholder"},inverse:c.noop,fn:c.program(6,m,t)},s=(i=n.submissionField,i?i.call(e,e.urlFieldName,e.formFields,e,o):h.call(e,"submissionField",e.urlFieldName,e.formFields,e,o));if(s||s===0)r+=s;r+="  ",o={hash:{},inverse:c.program(21,C,t),fn:c.program(18,T,t)},s=(i=n.equals,i?i.call(e,(i=e.rawData,i==null||i===!1?i:i.name),"facebookphotoupload",o):h.call(e,"equals",(i=e.rawData,i==null||i===!1?i:i.name),"facebookphotoupload",o));if(s||s===0)r+=s;r+=' </ul> <ul class="bv-fieldsets bv-fieldsets-actions bv-media-upload-actions',o={hash:{},inverse:c.noop,fn:c.program(23,k,t)},s=(i=n.equals,i?i.call(e,e.mediaType,"photo",o):h.call(e,"equals",e.mediaType,"photo",o));if(s||s===0)r+=s;o={hash:{},inverse:c.noop,fn:c.program(7,g,t)},s=(i=n.equals,i?i.call(e,e.name,"facebookphotoupload",o):h.call(e,"equals",e.name,"facebookphotoupload",o));if(s||s===0)r+=s;return r+='" role="presentation"> <li class="bv-form-actions bv-fieldset"> <div class="bv-fieldset-arrowicon"></div> <div class="bv-fieldset-inner"> <button type="button" type="submit" class="bv-form-actions-submit bv-submit bv-photo-submit bv-focusable bv-submission-button-submit">',o={hash:{prefix:"add_"}},r+=l((i=n.extmsg,i?i.call(e,e.mediaType,e.msgpack,e,o):h.call(e,"extmsg",e.mediaType,e.msgpack,e,o)))+'</button> <button type="button" class="bv-form-action bv-cancel bv-submission-button-submit"> ',o={hash:{}},r+=l((i=n.extmsg,i?i.call(e,"cancel",e.msgpack,e,o):h.call(e,"extmsg","cancel",e.msgpack,e,o)))+" </button> </div> </li> </ul> </div> "+" </div> "+" </form> </div> ",r}function d(e,t){var n="",r;return n+=' <input type="hidden" name="ve" value="'+l((r=(r=e.apiConfig,r==null||r===!1?r:r.virtualEnvironment),typeof r===f?r.apply(e):r))+'" class="bv-noremember" /> ',n}function v(e,t){var n="",r;return n+=' <input type="hidden" name="displaycode" value="'+l((r=(r=e.apiConfig,r==null||r===!1?r:r.displaycode),typeof r===f?r.apply(e):r))+'" class="bv-noremember" /> ',n}function m(e,t){var i="",s,o,u;i+=' <li class="bv-fieldset bv-fieldset-'+l((s=(s=e.schema,s==null||s===!1?s:s.Id),typeof s===f?s.apply(e):s))+" bv-",(o=n.type)?o=o.call(e,{hash:{}}):(o=e.type,o=typeof o===f?o.apply(e):o),i+=l(o)+"-field ",(o=n.fieldsetClasses)?o=o.call(e,{hash:{}}):(o=e.fieldsetClasses,o=typeof o===f?o.apply(e):o),i+=l(o)+'"> <div class="bv-fieldset-arrowicon"></div> <div class="bv-fieldset-inner bv-fieldset-media-upload"> <div class="bv-media-display bv-'+l((s=(s=e.rawData,s==null||s===!1?s:s.mediaType),typeof s===f?s.apply(e):s))+'-display"> '+' <div id="bv-',(o=n.type)?o=o.call(e,{hash:{}}):(o=e.type,o=typeof o===f?o.apply(e):o),i+=l(o)+"-media-display-container-"+l((s=(s=e.schema,s==null||s===!1?s:s.Id),typeof s===f?s.apply(e):s))+'" class="bv-media-preview-container bv-'+l((s=(s=e.rawData,s==null||s===!1?s:s.mediaType),typeof s===f?s.apply(e):s))+"-preview-container",u={hash:{},inverse:c.noop,fn:c.program(7,g,t)},o=(s=n.equals,s?s.call(e,(s=e.rawData,s==null||s===!1?s:s.name),"facebookphotoupload",u):h.call(e,"equals",(s=e.rawData,s==null||s===!1?s:s.name),"facebookphotoupload",u));if(o||o===0)i+=o;i+='"> ',o=c.invokePartial(r.uploadPreviewPlaceholder,"uploadPreviewPlaceholder",e.rawData,n,r);if(o||o===0)i+=o;i+=' </div> <div class="bv-media-picker-container"> ',o=c.invokePartial(r.submissionLabel,"submissionLabel",e,n,r);if(o||o===0)i+=o;i+=' <button type="button" class="bv-content-btn bv-hidden bv-media-preview-clear bv-focusable" tabindex="0">',u={hash:{prefix:"remove_"}},i+=l((s=n.extmsg,s?s.call(e,(s=e.rawData,s==null||s===!1?s:s.mediaType),(s=e.rawData,s==null||s===!1?s:s.msgpack),e,u):h.call(e,"extmsg",(s=e.rawData,s==null||s===!1?s:s.mediaType),(s=e.rawData,s==null||s===!1?s:s.msgpack),e,u)))+"</button> "+" ",u={hash:{},inverse:c.noop,fn:c.program(9,y,t)},o=(s=n.equals,s?s.call(e,(s=e.rawData,s==null||s===!1?s:s.mediaType),"photo",u):h.call(e,"equals",(s=e.rawData,s==null||s===!1?s:s.mediaType),"photo",u));if(o||o===0)i+=o;i+=" ",u={hash:{},inverse:c.noop,fn:c.program(15,S,t)},o=(s=n.equals,s?s.call(e,(s=e.rawData,s==null||s===!1?s:s.mediaType),"video",u):h.call(e,"equals",(s=e.rawData,s==null||s===!1?s:s.mediaType),"video",u));if(o||o===0)i+=o;return i+=" </div> </div>  </div> </li> ",i}function g(e,t){return" bv-hidden bv-hidden-facebook"}function y(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:c.noop,fn:c.program(10,b,t)},s=(i=n.equals,i?i.call(e,(i=e.rawData,i==null||i===!1?i:i.name),"photoupload",o):h.call(e,"equals",(i=e.rawData,i==null||i===!1?i:i.name),"photoupload",o));if(s||s===0)r+=s;r+=" ",o={hash:{},inverse:c.noop,fn:c.program(13,E,t)},s=(i=n.equals,i?i.call(e,(i=e.rawData,i==null||i===!1?i:i.name),"facebookphotoupload",o):h.call(e,"equals",(i=e.rawData,i==null||i===!1?i:i.name),"facebookphotoupload",o));if(s||s===0)r+=s;return r+=" ",r}function b(e,t){var r="",i,s,o;r+=' <div class="bv-media-toggle-controls"> <input type="file" accept="image/*" name="'+l((i=(i=e.rawData,i==null||i===!1?i:i.mediaType),typeof i===f?i.apply(e):i))+'" id="bv-',(s=n.type)?s=s.call(e,{hash:{}}):(s=e.type,s=typeof s===f?s.apply(e):s),r+=l(s)+"-field-"+l((i=(i=e.schema,i==null||i===!1?i:i.Id),typeof i===f?i.apply(e):i))+'" class="bv-noremember bv-form-ignore bv-focusable" ',o={hash:{prefix:"helpertext_"},inverse:c.noop,fn:c.programWithDepth(w,t,e)},s=(i=n.msgExists,i?i.call(e,(i=e.schema,i==null||i===!1?i:i.Id),e.msgpack,e,o):h.call(e,"msgExists",(i=e.schema,i==null||i===!1?i:i.Id),e.msgpack,e,o));if(s||s===0)r+=s;return r+=" /> </div> ",r}function w(e,t,r){var i="",s;return i+=' data-bv-dropdown-inmbox data-bv-dropdown-style="helperTextOverflow" data-bv-dropdown-text="',(s=n.text)?s=s.call(e,{hash:{}}):(s=e.text,s=typeof s===f?s.apply(e):s),i+=l(s)+'" data-bv-dropdown-position-target="bv-'+l((s=r.type,typeof s===f?s.apply(e):s))+"-media-display-container-"+l((s=(s=r.schema,s==null||s===!1?s:s.Id),typeof s===f?s.apply(e):s))+'" data-bv-dropdown-disable-events ',i}function E(e,t){return' <div class="bv-facebook-photo-outer-container"> <div class="bv-mbox-spinner">loading...</div> </div> <input type="hidden" name="photourl" class="bv-noremember" /> '}function S(e,t){var r="",i,s,o;r+=' <input type="text" name="videourl" id="bv-',(i=n.type)?i=i.call(e,{hash:{}}):(i=e.type,i=typeof i===f?i.apply(e):i),r+=l(i)+"-field-"+l((i=(i=e.schema,i==null||i===!1?i:i.Id),typeof i===f?i.apply(e):i))+'" class="bv-text bv-focusable bv-noremember" placeholder="Ex: http://youtube.com" ',o={hash:{prefix:"helpertext_"},inverse:c.noop,fn:c.programWithDepth(x,t,e)},s=(i=n.msgExists,i?i.call(e,(i=e.schema,i==null||i===!1?i:i.Id),e.msgpack,e,o):h.call(e,"msgExists",(i=e.schema,i==null||i===!1?i:i.Id),e.msgpack,e,o));if(s||s===0)r+=s;return r+=" /> ",r}function x(e,t,r){var i="",s;return i+=' data-bv-dropdown-inmbox data-bv-dropdown-style="helperTextOverflow" data-bv-dropdown-text="',(s=n.text)?s=s.call(e,{hash:{}}):(s=e.text,s=typeof s===f?s.apply(e):s),i+=l(s)+'" data-bv-dropdown-position-target="bv-'+l((s=r.type,typeof s===f?s.apply(e):s))+"-media-display-container-"+l((s=(s=r.schema,s==null||s===!1?s:s.Id),typeof s===f?s.apply(e):s))+'" data-bv-dropdown-disable-events="true" ',i}function T(e,t){var r="",i,s,o;r+=" ",o={hash:{fieldsetClasses:"bv-media-upload-caption"},inverse:c.noop,fn:c.program(19,N,t)},s=(i=n.submissionField,i?i.call(e,e.captionFieldName,e.formFields,e,o):h.call(e,"submissionField",e.captionFieldName,e.formFields,e,o));if(s||s===0)r+=s;return r+=" ",r}function N(e,t){var i="",s;i+=" ",s=c.invokePartial(r.submissionField,"submissionField",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function C(e,t){var r="",i,s,o;r+=" ",o={hash:{fieldsetClasses:"bv-media-upload-caption bv-hidden bv-hidden-facebook"},inverse:c.noop,fn:c.program(19,N,t)},s=(i=n.submissionField,i?i.call(e,e.captionFieldName,e.formFields,e,o):h.call(e,"submissionField",e.captionFieldName,e.formFields,e,o));if(s||s===0)r+=s;return r+=" ",r}function k(e,t){return" bv-hidden"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;a={hash:{tag:"div",classList:"submission submission-noimage"},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.view,o?o.call(t,t,a):h.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("upload",n),n.deps=["uploadPreviewPlaceholder","submissionLabel","submissionField"],n.tplMountedViews=[],n}),BV.define("hbs!uploadPreview",["hbs","vendor/handlebars/runtime","template/helpers/extmsg","template/helpers/equals","template/helpers/ensureProtocolRelative"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i;return r+=' <div class="bv-media-preview-dummy"></div> <iframe class="bv-media-viewer-ytmedia" type="text/html" src="//www.youtube.com/embed/',(i=n.id)?i=i.call(e,{hash:{}}):(i=e.id,i=typeof i===f?i.apply(e):i),r+=l(i)+'"/> ',r}function d(e,t){var r="",i,s;return r+=' <img data-src="',s={hash:{}},r+=l((i=n.ensureProtocolRelative,i?i.call(e,e.url,s):c.call(e,"ensureProtocolRelative",e.url,s)))+'" /> ',r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<div id="bv-media-preview-label" class="bv-off-screen">',a={hash:{prefix:t.mediaType}},s+=l((o=n.extmsg,o?o.call(t,"_upload_preview",t.msgpack,t,a):c.call(t,"extmsg","_upload_preview",t.msgpack,t,a)))+'</div> <div class="bv-media-preview bv-',(u=n.mediaType)?u=u.call(t,{hash:{}}):(u=t.mediaType,u=typeof u===f?u.apply(t):u),s+=l(u)+'-preview bv-focusable" tabindex="0" aria-labelledby="bv-media-preview-label" role="presentation"> ',a={hash:{},inverse:h.noop,fn:h.program(1,p,i)},u=(o=n.equals,o?o.call(t,t.mediaType,"video",a):c.call(t,"equals",t.mediaType,"video",a));if(u||u===0)s+=u;s+=" ",a={hash:{},inverse:h.noop,fn:h.program(3,d,i)},u=(o=n.equals,o?o.call(t,t.mediaType,"photo",a):c.call(t,"equals",t.mediaType,"photo",a));if(u||u===0)s+=u;return s+=" </div> ",s});return t.registerPartial("uploadPreview",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("bv/ui-core/buploadview",["ENV","framework/bmodel","framework/bview","hbs!upload","underscore","jquery","bv/api","mf!bv/c2013/messages/submission","hbs!uploadPreview","hbs!uploadPreviewPlaceholder","bv/util/focusManager"],function(e,t,n,r,i,s,o,u,a,f,l){return n.extend({name:"mediaupload",mediaType:"media",label:".bv-media-picker-container .bv-helper-label",offscreenError:".bv-media-picker-container .bv-field-aria-validation",input:".bv-media-picker-container input",preview:".bv-media-preview-container",controls:".bv-media-toggle-controls",uploadActions:".bv-media-upload-actions",clear:".bv-media-preview-clear",fieldset:".bv-media-upload-placeholder",caption:".bv-media-upload-caption",events:{"click .bv-cancel":"cancelUpload","click .bv-submit":"submitUpload","click .bv-media-preview-clear":"_removeMedia"},init:function(e){var t=e.parent||this.parent;this.template=r,i(e.media).isUndefined()||this.model.set(this.mediaType,e.media)},submitUpload:function(e){e.preventDefault();var t=this.model.get(this.mediaType);if(!t)return;this._updateMedia(t),this.model.set(this.mediaType,t),this.parent.trigger("addmedia",this.mediaType,t)},_updateMedia:function(e){var t=this.model.get("captionFieldName"),n=this.$el.find('input[name="'+t+'"]').val();e.caption=n},showError:function(e){this._currentError=e;var t=this.$el.find(this.preview);t.removeClass("bv-media-uploading"),this.$el.find(this.controls).css("display","block");var n=this.$el.find(this.fieldset);n.addClass("bv-error");var r=n.find(this.label);r.text(e).show();var i=n.find(this.offscreenError);i.text(e);var s=n.find(this.input);s.attr("aria-invalid",!0),l.moveFocus(s)},clearError:function(){this._currentError=null;var e=this.$el.find(this.fieldset);e.removeClass("bv-error");var t=e.find(this.offscreenError);t.empty();var n=e.find(this.input);n.removeAttr("aria-invalid");var r=e.find(this.label);r.empty().hide();var i=this.$el.find(".bv-submit")},displayMedia:function(e,t){var n=this,r=this.model.get(this.mediaType),i=r.thumbnail&&r.thumbnail[2]?r.thumbnail[2].url:r.url;this.clearError(),this.$el.find(this.preview).removeClass("bv-media-uploading"),this.$el.find(this.controls).css("display","none"),this.$el.find(this.clear).removeClass("bv-hidden"),this.$el.find(this.uploadActions).removeClass("bv-hidden");var o=this.$el.find(this.preview);o.html(a({mediaType:this.mediaType,id:r.id,url:i,msgpack:u})),e&&(s(e).addClass("bv-photo-preview-img"),n.$el.find(".bv-media-preview").html(e),setTimeout(function(){s(e).addClass("bv-photo-preview-img-show")},0)),this.mediaType==="video"&&this.$el.find('input[name="videourl"]').val(r.url),t&&setTimeout(function(){l.rescanFocusLayer();var e=s(".bv-media-preview"),t=s("#bv-media-preview-label"),r=t.html();t.html(u[n.mediaType+"_upload_success"]()+" "+r),l.moveFocus(e),setTimeout(function(){t.html(r)},2e3)},0);var f=this.$el.find(this.caption);f.removeClass("bv-hidden"),f.find('input[type="text"]').val(r.caption)},_removeMedia:function(e){this.removeMedia(!0)},removeMedia:function(e){i.isUndefined(e)&&(e=!0);var t=this.model.get(this.mediaType);t&&(this.parent.trigger("removemedia",t.id,this.mediaType),this.model.set(this.mediaType,null)),this.$el.find(this.controls).css("display","block"),this.mediaType==="photo"&&this.$el.find(this.uploadActions).addClass("bv-hidden");var n=this.$el.find(this.preview),r=f({mediaType:this.mediaType,msgpack:u});n.html(r).css({height:"",width:""}).addClass("bv-"+this.mediaType+"-preview-container"),this.$el.find(this.clear).addClass("bv-hidden"),this.$el.find(this.caption).addClass("bv-hidden");if(e){var s=this.mediaType==="video"?"videourl":this.mediaType;this.$el.find('input[name="'+s+'"]').val("")}this.trigger("scroll")},cancelUpload:function(){this.trigger("close")},remove:function(){n.prototype.remove.apply(this,arguments)},setupView:function(){var e=this.model.get(this.mediaType);e&&this.displayMedia()},updatePlaceholderText:function(){var e=this;setTimeout(function(){var t=e.$el.find(".bv-media-preview-placeholder"),n=e.$el.find("#bv-media-preview-placeholder-label");t.addClass("bv-focusable"),t.attr("tabindex","0"),n.html(u[e.mediaType+"_upload_preview_placeholder"]()),l.rescanFocusLayer(),l.moveFocus(t),setTimeout(function(){n.empty()},2e3)},1e3)}})}),BV.define("vendor/easyXDM",["vendor/json2"],function(e){return function(t,n,r,i,s,o){function E(e,t){var n=typeof e[t];return n=="function"||n=="object"&&!!e[t]||n=="unknown"}function S(e,t){return typeof e[t]=="object"&&!!e[t]}function x(e){return Object.prototype.toString.call(e)==="[object Array]"}function T(){var e="Shockwave Flash",t="application/x-shockwave-flash";if(!R(navigator.plugins)&&typeof navigator.plugins[e]=="object"){var n=navigator.plugins[e].description;n&&!R(navigator.mimeTypes)&&navigator.mimeTypes[t]&&navigator.mimeTypes[t].enabledPlugin&&(b=n.match(/\d+/g))}if(!b){var r;try{r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),b=Array.prototype.slice.call(r.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1),r=null}catch(i){}}if(!b)return!1;var s=parseInt(b[0],10),o=parseInt(b[1],10);return w=s>9&&o>0,!0}function O(){if(k)return;k=!0;for(var e=0;e<L.length;e++)L[e]();L.length=0}function _(e,t){if(k){e.call(t);return}L.push(function(){e.call(t)})}function D(){var e=parent;if(p!=="")for(var t=0,n=p.split(".");t<n.length;t++)e=e[n[t]];return e.easyXDM}function P(e){return t.easyXDM=v,p=e,p&&(m="easyXDM_"+p.replace(".","_")+"_"),d}function H(e){return e.match(l)[3]}function B(e){return e.match(l)[4]||""}function j(e){var t=e.toLowerCase().match(l),n=t[2],r=t[3],i=t[4]||"";if(n=="http:"&&i==":80"||n=="https:"&&i==":443")i="";return n+"//"+r+i}function F(e){e=e.replace(h,"$1/");if(!e.match(/^(http||https):\/\//)){var t=e.substring(0,1)==="/"?"":r.pathname;t.substring(t.length-1)!=="/"&&(t=t.substring(0,t.lastIndexOf("/")+1)),e=r.protocol+"//"+r.host+t+e}while(c.test(e))e=e.replace(c,"");return e}function I(e,t){var n="",r=e.indexOf("#");r!==-1&&(n=e.substring(r),e=e.substring(0,r));var i=[];for(var s in t)t.hasOwnProperty(s)&&i.push(s+"="+o(t[s]));return e+(y?"#":e.indexOf("?")==-1?"?":"&")+i.join("&")+n}function R(e){return typeof e=="undefined"}function z(e,t,n){var r;for(var i in t)t.hasOwnProperty(i)&&(i in e?(r=t[i],typeof r=="object"?z(e[i],r,n):n||(e.setAttribute?e.setAttribute(i,t[i]):e[i]=t[i])):e.setAttribute?e.setAttribute(i,t[i]):e[i]=t[i]);return e}function W(){var e=n.body.appendChild(n.createElement("form")),t=e.appendChild(n.createElement("input"));t.name=m+"TEST"+a,g=t!==e.elements[t.name],n.body.removeChild(e)}function X(e){R(g)&&W();var t;g?t=n.createElement('<iframe name="'+e.props.name+'"/>'):(t=n.createElement("IFRAME"),t.name=e.props.name),t.id=t.name=e.props.name,delete e.props.name,typeof e.container=="string"&&(e.container=n.getElementById(e.container)),e.container||(z(t.style,{position:"absolute",top:"-2000px",left:"0px"}),e.container=n.body);var r=e.props.src;e.props.src="javascript:false",z(t,e.props),t.border=t.frameBorder=0,t.allowTransparency=!0,e.container.appendChild(t),e.onLoad&&N(t,"load",e.onLoad);if(e.usePost){var i=e.container.appendChild(n.createElement("form")),s;i.target=t.name,i.action=r,i.method="POST";if(typeof e.usePost=="object")for(var o in e.usePost)e.usePost.hasOwnProperty(o)&&(g?s=n.createElement('<input name="'+o+'"/>'):(s=n.createElement("INPUT"),s.name=o),s.value=e.usePost[o],i.appendChild(s));i.submit(),i.parentNode.removeChild(i)}else t.src=r;return e.props.src=r,t}function V(e,t){typeof e=="string"&&(e=[e]);var n,r=e.length;while(r--){n=e[r],n=new RegExp(n.substr(0,1)=="^"?n:"^"+n.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$");if(n.test(t))return!0}return!1}function $(e){var i=e.protocol,s;e.isHost=e.isHost||R(q.xdm_p),y=e.hash||!1,e.props||(e.props={});if(!e.isHost){e.channel=q.xdm_c.replace(/["'<>\\]/g,""),e.secret=q.xdm_s,e.remote=q.xdm_e.replace(/["'<>\\]/g,""),i=q.xdm_p;if(e.acl&&!V(e.acl,e.remote))throw new Error("Access denied for "+e.remote)}else e.remote=F(e.remote),e.channel=e.channel||"default"+a++,e.secret=Math.random().toString(16).substring(2),R(i)&&(j(r.href)==j(e.remote)?i="4":E(t,"postMessage")||E(n,"postMessage")?i="1":e.swf&&E(t,"ActiveXObject")&&T()?i="6":navigator.product==="Gecko"&&"frameElement"in t&&navigator.userAgent.indexOf("WebKit")==-1?i="5":e.remoteHelper?i="2":i="0");e.protocol=i;switch(i){case"0":z(e,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0);if(e.isHost){if(!e.local){var o=r.protocol+"//"+r.host,u=n.body.getElementsByTagName("img"),f,l=u.length;while(l--){f=u[l];if(f.src.substring(0,o.length)===o){e.local=f.src;break}}e.local||(e.local=t)}var c={xdm_c:e.channel,xdm_p:0};e.local===t?(e.usePolling=!0,e.useParent=!0,e.local=r.protocol+"//"+r.host+r.pathname+r.search,c.xdm_e=e.local,c.xdm_pa=1):c.xdm_e=F(e.local),e.container&&(e.useResize=!1,c.xdm_po=1),e.remote=I(e.remote,c)}else z(e,{channel:q.xdm_c,remote:q.xdm_e,useParent:!R(q.xdm_pa),usePolling:!R(q.xdm_po),useResize:e.useParent?!1:e.useResize});s=[new d.stack.HashTransport(e),new d.stack.ReliableBehavior({}),new d.stack.QueueBehavior({encode:!0,maxLength:4e3-e.remote.length}),new d.stack.VerifyBehavior({initiate:e.isHost})];break;case"1":s=[new d.stack.PostMessageTransport(e)];break;case"2":e.remoteHelper=F(e.remoteHelper),s=[new d.stack.NameTransport(e),new d.stack.QueueBehavior,new d.stack.VerifyBehavior({initiate:e.isHost})];break;case"3":s=[new d.stack.NixTransport(e)];break;case"4":s=[new d.stack.SameOriginTransport(e)];break;case"5":s=[new d.stack.FrameElementTransport(e)];break;case"6":b||T(),s=[new d.stack.FlashTransport(e)]}return s.push(new d.stack.QueueBehavior({lazy:e.lazy,remove:!0})),s}function J(e){var t,n={incoming:function(e,t){this.up.incoming(e,t)},outgoing:function(e,t){this.down.outgoing(e,t)},callback:function(e){this.up.callback(e)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}};for(var r=0,i=e.length;r<i;r++)t=e[r],z(t,n,!0),r!==0&&(t.down=e[r-1]),r!==i-1&&(t.up=e[r+1]);return t}function K(e){e.up.down=e.down,e.down.up=e.up,e.up=e.down=null}var u=t,a=Math.floor(Math.random()*1e4),f=Function.prototype,l=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,c=/[\-\w]+\/\.\.\//,h=/([^:])\/\//g,p="",d={},v=t.easyXDM,m="easyXDM_",g,y=!1,b,w,N,C;if(E(t,"addEventListener"))N=function(e,t,n){e.addEventListener(t,n,!1)},C=function(e,t,n){e.removeEventListener(t,n,!1)};else{if(!E(t,"attachEvent"))throw new Error("Browser not supported");N=function(e,t,n){e.attachEvent("on"+t,n)},C=function(e,t,n){e.detachEvent("on"+t,n)}}var k=!1,L=[],A;"readyState"in n?(A=n.readyState,k=A=="complete"||~navigator.userAgent.indexOf("AppleWebKit/")&&(A=="loaded"||A=="interactive")):k=!!n.body;if(!k){if(E(t,"addEventListener"))N(n,"DOMContentLoaded",O);else{N(n,"readystatechange",function(){n.readyState=="complete"&&O()});if(n.documentElement.doScroll&&t===top){var M=function(){if(k)return;try{n.documentElement.doScroll("left")}catch(e){i(M,1);return}O()};M()}}N(t,"load",O)}var q=function(e){e=e.substring(1).split("&");var t={},n,r=e.length;while(r--)n=e[r].split("="),t[n[0]]=s(n[1]);return t}(/xdm_e=/.test(r.search)?r.search:r.hash),U=function(){var t={},n={a:[1,2,3]},r='{"a":[1,2,3]}';return typeof e!="undefined"&&typeof e.stringify=="function"&&e.stringify(n).replace(/\s/g,"")===r?e:(Object.toJSON&&Object.toJSON(n).replace(/\s/g,"")===r&&(t.stringify=Object.toJSON),typeof String.prototype.evalJSON=="function"&&(n=r.evalJSON(),n.a&&n.a.length===3&&n.a[2]===3&&(t.parse=function(e){return e.evalJSON()})),t.stringify&&t.parse?(U=function(){return t},t):null)};z(d,{version:"2.4.15.0",query:q,stack:{},apply:z,getJSONObject:U,whenReady:_,noConflict:P}),d.DomHelper={on:N,un:C,requiresJSON:function(e){S(t,"JSON")||n.write('<script type="text/javascript" src="'+e+'"><'+"/script>")}},function(){var e={};d.Fn={set:function(t,n){e[t]=n},get:function(t,n){var r=e[t];return n&&delete e[t],r}}}(),d.Socket=function(e){var t=J($(e).concat([{incoming:function(t,n){e.onMessage(t,n)},callback:function(t){e.onReady&&e.onReady(t)}}])),n=j(e.remote);this.origin=j(e.remote),this.destroy=function(){t.destroy()},this.postMessage=function(e){t.outgoing(e,n)},t.init()},d.Rpc=function(e,t){if(t.local)for(var n in t.local)if(t.local.hasOwnProperty(n)){var r=t.local[n];typeof r=="function"&&(t.local[n]={method:r})}var i=J($(e).concat([new d.stack.RpcBehavior(this,t),{callback:function(t){e.onReady&&e.onReady(t)}}]));this.origin=j(e.remote),this.channel=e.channel,this.destroy=function(){i.destroy()},i.init()},d.stack.SameOriginTransport=function(e){var t,n,s,o;return t={outgoing:function(e,t,n){s(e),n&&n()},destroy:function(){n&&(n.parentNode.removeChild(n),n=null)},onDOMReady:function(){o=j(e.remote),e.isHost?(z(e.props,{src:I(e.remote,{xdm_e:r.protocol+"//"+r.host+r.pathname,xdm_c:e.channel,xdm_p:4}),name:m+e.channel+"_provider"}),n=X(e),d.Fn.set(e.channel,function(e){return s=e,i(function(){t.up.callback(!0)},0),function(e){t.up.incoming(e,o)}})):(s=D().Fn.get(e.channel,!0)(function(e){t.up.incoming(e,o)}),i(function(){t.up.callback(!0)},0))},init:function(){_(t.onDOMReady,t)}}},d.stack.FlashTransport=function(e){function c(e,n){i(function(){t.up.incoming(e,a)},0)}function h(t){var r=e.swf+"?host="+e.isHost,i="easyXDM_swf_"+Math.floor(Math.random()*1e4);d.Fn.set("flash_loaded"+t.replace(/[\-.]/g,"_"),function(){d.stack.FlashTransport[t].swf=f=l.firstChild;var e=d.stack.FlashTransport[t].queue;for(var n=0;n<e.length;n++)e[n]();e.length=0}),e.swfContainer?l=typeof e.swfContainer=="string"?n.getElementById(e.swfContainer):e.swfContainer:(l=n.createElement("div"),z(l.style,w&&e.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),n.body.appendChild(l));var s="callback=flash_loaded"+t.replace(/[\-.]/g,"_")+"&proto="+u.location.protocol+"&domain="+H(u.location.href)+"&port="+B(u.location.href)+"&ns="+p;l.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+i+"' data='"+r+"'>"+"<param name='allowScriptAccess' value='always'></param>"+"<param name='wmode' value='transparent'>"+"<param name='movie' value='"+r+"'></param>"+"<param name='flashvars' value='"+s+"'></param>"+"<embed type='application/x-shockwave-flash' FlashVars='"+s+"' allowScriptAccess='always' wmode='transparent' src='"+r+"' height='1' width='1'></embed>"+"</object>"}var t,s,o,a,f,l;return t={outgoing:function(t,n,r){f.postMessage(e.channel,t.toString()),r&&r()},destroy:function(){try{f.destroyChannel(e.channel)}catch(t){}f=null,s&&(s.parentNode.removeChild(s),s=null)},onDOMReady:function(){a=e.remote,d.Fn.set("flash_"+e.channel+"_init",function(){i(function(){t.up.callback(!0)})}),d.Fn.set("flash_"+e.channel+"_onMessage",c),e.swf=F(e.swf);var n=H(e.swf),o=function(){d.stack.FlashTransport[n].init=!0,f=d.stack.FlashTransport[n].swf,f.createChannel(e.channel,e.secret,j(e.remote),e.isHost),e.isHost&&(w&&e.swfNoThrottle&&z(e.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),z(e.props,{src:I(e.remote,{xdm_e:j(r.href),xdm_c:e.channel,xdm_p:6,xdm_s:e.secret}),name:m+e.channel+"_provider"}),s=X(e))};d.stack.FlashTransport[n]&&d.stack.FlashTransport[n].init?o():d.stack.FlashTransport[n]?d.stack.FlashTransport[n].queue.push(o):(d.stack.FlashTransport[n]={queue:[o]},h(n))},init:function(){_(t.onDOMReady,t)}}},d.stack.PostMessageTransport=function(e){function a(e){if(e.origin)return j(e.origin);if(e.uri)return j(e.uri);if(e.domain)return r.protocol+"//"+e.domain;throw"Unable to retrieve the origin of the event"}function f(t){var r=a(t);r==u&&t.data.substring(0,e.channel.length+1)==e.channel+" "&&n.up.incoming(t.data.substring(e.channel.length+1),r)}var n,s,o,u;return n={outgoing:function(t,n,r){o.postMessage(e.channel+" "+t,n||u),r&&r()},destroy:function(){C(t,"message",f),s&&(o=null,s.parentNode.removeChild(s),s=null)},onDOMReady:function(){u=j(e.remote);if(e.isHost){var a=function(r){r.data==e.channel+"-ready"&&(o="postMessage"in s.contentWindow?s.contentWindow:s.contentWindow.document,C(t,"message",a),N(t,"message",f),i(function(){n.up.callback(!0)},0))};N(t,"message",a),z(e.props,{src:I(e.remote,{xdm_e:j(r.href),xdm_c:e.channel,xdm_p:1}),name:m+e.channel+"_provider"}),s=X(e)}else N(t,"message",f),o="postMessage"in t.parent?t.parent:t.parent.document,o.postMessage(e.channel+"-ready",u),i(function(){n.up.callback(!0)},0)},init:function(){_(n.onDOMReady,n)}}},d.stack.FrameElementTransport=function(e){var s,o,u,a;return s={outgoing:function(e,t,n){u.call(this,e),n&&n()},destroy:function(){o&&(o.parentNode.removeChild(o),o=null)},onDOMReady:function(){a=j(e.remote),e.isHost?(z(e.props,{src:I(e.remote,{xdm_e:j(r.href),xdm_c:e.channel,xdm_p:5}),name:m+e.channel+"_provider"}),o=X(e),o.fn=function(e){return delete o.fn,u=e,i(function(){s.up.callback(!0)},0),function(e){s.up.incoming(e,a)}}):(n.referrer&&j(n.referrer)!=q.xdm_e&&(t.top.location=q.xdm_e),u=t.frameElement.fn(function(e){s.up.incoming(e,a)}),s.up.callback(!0))},init:function(){_(s.onDOMReady,s)}}},d.stack.NameTransport=function(e){function l(t){var i=e.remoteHelper+(n?"#_3":"#_2")+e.channel;r.contentWindow.sendMessage(t,i)}function c(){n?(++o===2||!n)&&t.up.callback(!0):(l("ready"),t.up.callback(!0))}function h(e){t.up.incoming(e,a)}function p(){u&&i(function(){u(!0)},0)}var t,n,r,s,o,u,a,f;return t={outgoing:function(e,t,n){u=n,l(e)},destroy:function(){r.parentNode.removeChild(r),r=null,n&&(s.parentNode.removeChild(s),s=null)},onDOMReady:function(){n=e.isHost,o=0,a=j(e.remote),e.local=F(e.local),n?(d.Fn.set(e.channel,function(t){n&&t==="ready"&&(d.Fn.set(e.channel,h),c())}),f=I(e.remote,{xdm_e:e.local,xdm_c:e.channel,xdm_p:2}),z(e.props,{src:f+"#"+e.channel,name:m+e.channel+"_provider"}),s=X(e)):(e.remoteHelper=e.remote,d.Fn.set(e.channel,h));var t=function(){var n=r||this;C(n,"load",t),d.Fn.set(e.channel+"_load",p),function s(){typeof n.contentWindow.sendMessage=="function"?c():i(s,50)}()};r=X({props:{src:e.local+"#_4"+e.channel},onLoad:t})},init:function(){_(t.onDOMReady,t)}}},d.stack.HashTransport=function(e){function d(t){if(!c)return;var n=e.remote+"#"+f++ +"_"+t;(s||!h?c.contentWindow:c).location=n}function v(e){a=e,n.up.incoming(a.substring(a.indexOf("_")+1),p)}function g(){if(!l)return;var e=l.location.href,t="",n=e.indexOf("#");n!=-1&&(t=e.substring(n)),t&&t!=a&&v(t)}function y(){o=setInterval(g,u)}var n,r=this,s,o,u,a,f,l,c,h,p;return n={outgoing:function(e,t){d(e)},destroy:function(){t.clearInterval(o),(s||!h)&&c.parentNode.removeChild(c),c=null},onDOMReady:function(){s=e.isHost,u=e.interval,a="#"+e.channel,f=0,h=e.useParent,p=j(e.remote);if(s){z(e.props,{src:e.remote,name:m+e.channel+"_provider"});if(h)e.onLoad=function(){l=t,y(),n.up.callback(!0)};else{var r=0,o=e.delay/50;(function d(){if(++r>o)throw new Error("Unable to reference listenerwindow");try{l=c.contentWindow.frames[m+e.channel+"_consumer"]}catch(t){}l?(y(),n.up.callback(!0)):i(d,50)})()}c=X(e)}else l=t,y(),h?(c=parent,n.up.callback(!0)):(z(e,{props:{src:e.remote+"#"+e.channel+new Date,name:m+e.channel+"_consumer"},onLoad:function(){n.up.callback(!0)}}),c=X(e))},init:function(){_(n.onDOMReady,n)}}},d.stack.ReliableBehavior=function(e){var t,n,r=0,i=0,s="";return t={incoming:function(e,o){var u=e.indexOf("_"),a=e.substring(0,u).split(",");e=e.substring(u+1),a[0]==r&&(s="",n&&(n(!0),n=null)),e.length>0&&(t.down.outgoing(a[1]+","+r+"_"+s,o),i!=a[1]&&(i=a[1],t.up.incoming(e,o)))},outgoing:function(e,o,u){s=e,n=u,t.down.outgoing(i+","+ ++r+"_"+e,o)}}},d.stack.QueueBehavior=function(e){function h(){if(e.remove&&n.length===0){K(t);return}if(r||n.length===0||a)return;r=!0;var s=n.shift();t.down.outgoing(s.data,s.origin,function(e){r=!1,s.callback&&i(function(){s.callback(e)},0),h()})}var t,n=[],r=!0,u="",a,f=0,l=!1,c=!1;return t={init:function(){R(e)&&(e={}),e.maxLength&&(f=e.maxLength,c=!0),e.lazy?l=!0:t.down.init()},callback:function(e){r=!1;var n=t.up;h(),n.callback(e)},incoming:function(n,r){if(c){var i=n.indexOf("_"),o=parseInt(n.substring(0,i),10);u+=n.substring(i+1),o===0&&(e.encode&&(u=s(u)),t.up.incoming(u,r),u="")}else t.up.incoming(n,r)},outgoing:function(r,i,s){e.encode&&(r=o(r));var u=[],a;if(c){while(r.length!==0)a=r.substring(0,f),r=r.substring(a.length),u.push(a);while(a=u.shift())n.push({data:u.length+"_"+a,origin:i,callback:u.length===0?s:null})}else n.push({data:r,origin:i,callback:s});l?t.down.init():h()},destroy:function(){a=!0,t.down.destroy()}}},d.stack.VerifyBehavior=function(e){function s(){n=Math.random().toString(16).substring(2),t.down.outgoing(n)}var t,n,r,i=!1;return t={incoming:function(i,o){var u=i.indexOf("_");u===-1?i===n?t.up.callback(!0):r||(r=i,e.initiate||s(),t.down.outgoing(i)):i.substring(0,u)===r&&t.up.incoming(i.substring(u+1),o)},outgoing:function(e,r,i){t.down.outgoing(n+"_"+e,r,i)},callback:function(t){e.initiate&&s()}}},d.stack.RpcBehavior=function(e,t){function o(e){e.jsonrpc="2.0",n.down.outgoing(r.stringify(e))}function u(e,t){var n=Array.prototype.slice;return function(){var r=arguments.length,u,a={method:t};r>0&&typeof arguments[r-1]=="function"?(r>1&&typeof arguments[r-2]=="function"?(u={success:arguments[r-2],error:arguments[r-1]},a.params=n.call(arguments,0,r-2)):(u={success:arguments[r-1]},a.params=n.call(arguments,0,r-1)),s[""+ ++i]=u,a.id=i):a.params=n.call(arguments,0),e.namedParams&&a.params.length===1&&(a.params=a.params[0]),o(a)}}function a(e,t,n,r){if(!n){t&&o({id:t,error:{code:-32601,message:"Procedure not found."}});return}var i,s;t?(i=function(e){i=f,o({id:t,result:e})},s=function(e,n){s=f;var r={id:t,error:{code:-32099,message:e}};n&&(r.error.data=n),o(r)}):i=s=f,x(r)||(r=[r]);try{var u=n.method.apply(n.scope,r.concat([i,s]));R(u)||i(u)}catch(a){s(a.message)}}var n,r=t.serializer||U(),i=0,s={};return n={incoming:function(e,n){var i=r.parse(e);if(i.method)t.handle?t.handle(i,o):a(i.method,i.id,t.local[i.method],i.params);else{var u=s[i.id];i.error?u.error&&u.error(i.error):u.success&&u.success(i.result),delete s[i.id]}},init:function(){if(t.remote)for(var r in t.remote)t.remote.hasOwnProperty(r)&&(e[r]=u(t.remote[r],r));n.down.init()},destroy:function(){for(var r in t.remote)t.remote.hasOwnProperty(r)&&e.hasOwnProperty(r)&&delete e[r];n.down.destroy()}}},u.easyXDM=d}(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent),window.BV||(window.BV={}),window.BV.easyXDM=easyXDM.noConflict("BV")}),BV.define("bv/util/withRPC",["ENV","underscore","bv/api","bv/strings","util/url","window","framework/util/bvtracker","vendor/easyXDM"],function(e,t,n,r,i,s,o,u){function a(i,u,a){var f=25e3;a&&t.isNumber(a)&&(f=a);var l=t.delay(function(){i.state()!=="resolved"&&(o.error({name:r.errors.TIMEOUT,detail1:"RPC",detail2:h.remote}),i.reject())},f),c="https:"+e.get("config").apiconfig.baseUrl+"rpcfile?apiversion="+encodeURIComponent(n._config.apiversion)+"&passkey="+encodeURIComponent(e.get("config").apiconfig.passkey)+"&ve="+encodeURIComponent(n._config.virtualEnvironment||"")+"&displaycode="+encodeURIComponent(n._config.displaycode||""),h={hash:!0,swf:"https:"+e.get("config").utilPath+"easyxdm.swf",remote:c,onReady:function(){s.clearTimeout(l),i.resolve()},props:{role:"presentation",tabindex:"-1",title:"empty"}},p={local:{}};return p.local[r.rpc.localCallback]=u,new BV.easyXDM.Rpc(h,p)}return a}),BV.define("bv/c2013/view/photoupload",["bv/ui-core/buploadview","underscore","jquery","bv/util/withRPC","mf!bv/c2013/messages/submission","bv/util/focusManager","bv/strings","framework/util/bvtracker"],function(e,t,n,r,i,s,o,u){var a=6e4,f=6e4;return e.extend({name:"photoupload",mediaType:"photo",preview:".bv-media-preview-container",timedOut:!1,rpcReady:null,uploadTimeout:null,events:t.extend({},e.prototype.events,{'change input[name="photo"]':"mediaSelected"}),init:function(t){e.prototype.init.call(this,t),this.initRpc()},initRpc:function(){var e=this;this.rpcReady=n.Deferred(),this.rpc=r(this.rpcReady,function(t){e.processUpload(t)},a),this.model.set("channelId",this.rpc.channel)},mediaSelected:function(){var e=this;this.$el.find(this.preview).addClass("bv-media-uploading"),this.$el.find(this.controls).css("display","none"),this.updatePlaceholderText(),this.rpcReady.done(function(){n("#bv-photo-upload-form-"+e.model.get("channelId")).submit(),e.timedOut=!1,window.clearTimeout(e.uploadTimeout),e.uploadTimeout=setTimeout(function(){e.timedOut=!0,e._showError(),e._removeMedia(),u.error({name:o.errors.TIMEOUT,detail1:"Photo Upload"})},f)}).fail(function(){e._showError(),e._removeMedia(),e.initRpc()})},resizePreview:function(e,t){var n=this.$el.find(this.preview),r=parseInt(n.css("max-height"),10),i=n.parent().innerWidth(),s=this,o=new Image;o.onload=function(){var e={height:{original:this.height,max:r},width:{original:this.width,max:i}};s.setDimensions(n,e),s.displayMedia(o,t)},o.onerror=function(){s._showError()},o.src=e},setDimensions:function(e,t){var n=t.width,r=t.height;n.max=n.max||n.original;var i={width:n.max/n.original,height:r.max/r.original},s=Math.min(i.width,i.height),o;s<1?o={width:n.original*s,height:r.original*s}:o={width:n.original,height:r.original},e.width(o.width).height(o.height)},processUpload:function(e){var t,n;if(this.timedOut)return;window.clearTimeout(this.uploadTimeout),(!e||e.HasErrors)&&this._showError(e.FormErrors.FieldErrors.photo.Code),t=e.Photo,n={id:t.Id,url:t.Sizes.normal.Url,thumbUrl:t.Sizes.thumbnail.Url,caption:""},this.model.set(this.mediaType,n),this.resizePreview(e.Photo.Sizes.normal.Url,!0)},_showError:function(e){var t=i.error_AN_ERROR_OCCURRED();if(e)try{var n="error_"+e;t=i[n]()}catch(r){}this.showError(t);var o=this.fieldset+" "+this.input,u=this;setTimeout(function(){var e=u.$el.find(o);s.rescanFocusLayer(),s.moveFocus(e)},1e3);return},setupView:function(){var e=this.model.get(this.mediaType);e&&this.resizePreview(e.url)}})}),BV.define("hbs!facebookAlbumPickerMenu",["hbs","vendor/handlebars/runtime","template/helpers/equals"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){return' <button type="button" class=" bv-submission-button bv-facebook-button bv-facebook-album-list-back">Back to Albums</button> '}function d(e,t){var r="",i;return r+=' <button type="button" class="bv-submission-button bv-facebook-button bv-facebook-',(i=n.type)?i=i.call(e,{hash:{}}):(i=e.type,i=typeof i===f?i.apply(e):i),r+=l(i)+'-prev" data-bv-url="',(i=n.prevpage)?i=i.call(e,{hash:{}}):(i=e.prevpage,i=typeof i===f?i.apply(e):i),r+=l(i)+'">Previous</button> ',r}function v(e,t){var r="",i;return r+=' <button type="button" class="bv-submission-button bv-facebook-button bv-facebook-',(i=n.type)?i=i.call(e,{hash:{}}):(i=e.type,i=typeof i===f?i.apply(e):i),r+=l(i)+'-next" data-bv-url="',(i=n.nextpage)?i=i.call(e,{hash:{}}):(i=e.nextpage,i=typeof i===f?i.apply(e):i),r+=l(i)+'">Next</button> ',r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+='<div class="bv-facebook-album-list-menu"> ',a={hash:{},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.equals,o?o.call(t,t.type,"photo",a):h.call(t,"equals",t.type,"photo",a));if(u||u===0)s+=u;s+=" ",u=n["if"].call(t,t.prevpage,{hash:{},inverse:c.noop,fn:c.program(3,d,i)});if(u||u===0)s+=u;s+=" ",u=n["if"].call(t,t.nextpage,{hash:{},inverse:c.noop,fn:c.program(5,v,i)});if(u||u===0)s+=u;return s+=" </div> ",s});return t.registerPartial("facebookAlbumPickerMenu",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("template/helpers/largestFbPhoto",["vendor/handlebars/runtime","underscore"],function(e,t){function n(e,n){if(e.images&&e.images.length){var r=0,i;return t(e.images).forEach(function(e){e.height+e.width>r&&(r=e.height+e.width,i=e)}),i.source}return e.source}return e.registerHelper("largestFbPhoto",n),n}),BV.define("hbs!facebookAlbumPicker",["hbs","vendor/handlebars/runtime","hbs!facebookAlbumPickerMenu","template/helpers/equals","template/helpers/largestFbPhoto"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){return" Choose from your Facebook albums "}function d(e,t){return" Choose a picture from this album "}function v(e,t,r){var i="",s,o,u;i+=' <li class="bv-media-item bv-media-item-photo"> <div class="bv-media-item-wrapper"> <img src="https://graph.facebook.com/',u={hash:{},inverse:h.program(8,g,t),fn:h.program(6,m,t)},o=(s=n.equals,s?s.call(e,"album",r.type,u):c.call(e,"equals","album",r.type,u));if(o||o===0)i+=o;i+="/picture?access_token="+l((s=r.access_token,typeof s===f?s.apply(e):s))+'&amp;type=normal" ',u={hash:{},inverse:h.noop,fn:h.program(10,y,t)},o=(s=n.equals,s?s.call(e,"photo",r.type,u):c.call(e,"equals","photo",r.type,u));if(o||o===0)i+=o;i+=' title="',(o=n.name)?o=o.call(e,{hash:{}}):(o=e.name,o=typeof o===f?o.apply(e):o),i+=l(o)+'" data-bv-fb'+l((s=r.type,typeof s===f?s.apply(e):s))+'id="',(o=n.id)?o=o.call(e,{hash:{}}):(o=e.id,o=typeof o===f?o.apply(e):o),i+=l(o)+'" /> </div> <span class="bv-media-item-border" data-bv-fb'+l((s=r.type,typeof s===f?s.apply(e):s))+'id="',(o=n.id)?o=o.call(e,{hash:{}}):(o=e.id,o=typeof o===f?o.apply(e):o),i+=l(o)+'" ',u={hash:{},inverse:h.noop,fn:h.program(10,y,t)},o=(s=n.equals,s?s.call(e,"photo",r.type,u):c.call(e,"equals","photo",r.type,u));if(o||o===0)i+=o;return i+=" ></span> </li> ",i}function m(e,t){var r;return(r=n.cover_photo)?r=r.call(e,{hash:{}}):(r=e.cover_photo,r=typeof r===f?r.apply(e):r),l(r)}function g(e,t){var r;return(r=n.id)?r=r.call(e,{hash:{}}):(r=e.id,r=typeof r===f?r.apply(e):r),l(r)}function y(e,t){var r="",i,s;return r+=' data-bv-fbsource="',s={hash:{}},r+=l((i=n.largestFbPhoto,i?i.call(e,e,s):c.call(e,"largestFbPhoto",e,s)))+'" ',r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<div class="bv-facebook-album-selector"> <div class="bv-facebook-album-header"> ',a={hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i)},u=(o=n.equals,o?o.call(t,t.type,"album",a):c.call(t,"equals",t.type,"album",a));if(u||u===0)s+=u;s+=' </div> <div class="bv-facebook-album-list-container"> ',u=h.invokePartial(r.facebookAlbumPickerMenu,"facebookAlbumPickerMenu",t,n,r);if(u||u===0)s+=u;s+=' <ul class="bv-facebook-',(u=n.type)?u=u.call(t,{hash:{}}):(u=t.type,u=typeof u===f?u.apply(t):u),s+=l(u)+'-list bv-content-media-container" role="presentation"> ',u=n.each.call(t,t.photos,{hash:{},inverse:h.noop,fn:h.programWithDepth(v,i,t)});if(u||u===0)s+=u;s+=" </ul> ",u=h.invokePartial(r.facebookAlbumPickerMenu,"facebookAlbumPickerMenu",t,n,r);if(u||u===0)s+=u;return s+=" </div> </div> ",s});return t.registerPartial("facebookAlbumPicker",n),n.deps=["facebookAlbumPickerMenu"],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/facebookphotoupload",["ENV","bv/ui-core/buploadview","bv/c2013/view/photoupload","bv/util/loadingOverlay","bv/strings","underscore","jquery","bv/api","bv/util/withRPC","hbs!facebookAlbumPicker","framework/util/bvtracker"],function(e,t,n,r,i,s,o,u,a,f,l){return n.extend({name:"facebookphotoupload",label:".bv-facebookphoto-label",events:s.extend({},t.prototype.events,{"click .bv-facebook-album-list li":"selectAlbum","click .bv-facebook-photo-list li":"selectPhoto","click .bv-facebook-album-list-back":"backToAlbums","click .bv-facebook-album-prev":"showPrevAlbum","click .bv-facebook-album-next":"showNextAlbum","click .bv-facebook-photo-prev":"showPrevPhotos","click .bv-facebook-photo-next":"showNextPhotos"}),init:function(e){t.prototype.init.call(this,e);var n=this;this.rpcReady=o.Deferred(),this.rpc=a(this.rpcReady,function(e){n.processUpload(e)}),this.model.set("channelId",this.rpc.channel),this.model.set("token",e.token)},mediaSelected:function(){this.$(".bv-hidden-facebook").removeClass("bv-hidden");var e=o("#bv-photo-upload-form-"+this.model.get("channelId"));e.find('input[name="photourl"]').val(this.selectedPhoto.url),e.submit(),this.$(".bv-facebook-album-selector").addClass("bv-hidden"),this.$el.find(this.preview).addClass("bv-media-uploading")},_removeMedia:function(){return this.$(".bv-hidden-facebook").addClass("bv-hidden"),this.$(".bv-facebook-album-selector").removeClass("bv-hidden"),t.prototype._removeMedia.apply(this,arguments)},getAccessToken:function(e){var t=this.model.get("token");t?e(t):e(null,new Error("No access token"))},getNextPage:function(e,t){return o.getJSON(e,t)},getAlbums:function(e,t){var n=this,i={dataType:"jsonp",success:e};return t?i.url=t:s(i).extend({url:"https://graph.facebook.com/me/albums",data:{access_token:n.token}}),r.show(),o.ajax(i)},showAlbums:function(e){var t=this;e=e||{},r.hide();if(!e.data){alert("No albums found"),t.trigger("close"),l.error({name:i.errors.THIRD_PARTY,detail1:"Facebook",detail2:"showFacebookAlbums: No data returned"});return}var n=e.data;e.paging=e.paging||{},this.model.set({albumNextPage:e.paging.next,albumPrevPage:e.paging.previous}),this.$(".bv-facebook-photo-outer-container").html(f({type:"album",photos:n,access_token:t.token,nextpage:e.paging.next,prevpage:e.paging.previous})),this.trigger("scroll")},showAlbumPhotos:function(e){var t=this;e=e||{},r.hide();if(!e.data){alert("No albums found"),t.trigger("close"),l.error({name:i.errors.THIRD_PARTY,detail1:"Facebook",detail2:"showFacebookAlbumPhotos: No data returned"});return}var n=e.data;e.paging=e.paging||{},this.model.set({photosNextPage:e.paging.next,photosPrevPage:e.paging.previous});var s=this.$(".bv-facebook-photo-outer-container");s.html(f({type:"photo",photos:n,access_token:t.token,nextpage:e.paging.next,prevpage:e.paging.previous})),this.trigger("scroll")},getAlbumPhotos:function(e,t,n){var i=this,u={dataType:"jsonp",success:t};return n?u.url=n:s(u).extend({url:"https://graph.facebook.com/"+e+"/photos",data:{access_token:i.token}}),r.show(),o.ajax(u)},selectAlbum:function(e){var t=this,n=o(e.target).data("bv-fbalbumid");this.getAlbumPhotos(n).done(function(e){t.showAlbumPhotos(e)})},selectPhoto:function(e){var t=this,n=o(e.target),r=n.data("bv-fbphotoid"),i=n.data("bv-fbsource");this.selectedPhoto={id:r,url:i},this.$(".bv-media-item-border-selected").removeClass("bv-media-item-border-selected"),n.addClass("bv-media-item-border-selected"),this.mediaSelected(),this.trigger("scroll")},choosefacebookphoto:function(){var e=this;this.getAccessToken(function(t,n){if(n){alert("The correct permissions were not granted or the attempt failed."),e.trigger("close"),l.error({name:i.errors.THIRD_PARTY,detail1:"Facebook",detail2:"choosefacebookphoto: "+n});return}e.token=t,e.getAlbums().done(function(t){e.showAlbums(t)})})},backToAlbums:function(){var e=this;e.getAlbums().done(function(t){e.showAlbums(t)})},showPrevAlbum:function(e){return this.showNextAlbum.call(this,e)},showNextAlbum:function(e){var t=this,n=o(e.target),r=n.data("bv-url");this.getAlbums(null,r).done(function(e){var n;if(!e){n="Could not retrieve the next page.",alert(n),l.error({name:i.errors.THIRD_PARTY,detail1:"Facebook",detail2:"showNextFacebookAlbum: "+n});return}t.showAlbums(e)})},showPrevPhotos:function(e){return this.showNextPhotos.call(this,e)},showNextPhotos:function(e){var t=this,n=o(e.target),r=n.data("bv-url");this.getAlbumPhotos(null,null,r).done(function(e){var n;if(!e){n="Could not retrieve the next page.",alert(n),l.error({name:i.errors.THIRD_PARTY,detail1:"Facebook",detail2:"showNextFacebookAlbumPhoto: "+n});return}t.showAlbumPhotos(e)})},render:function(){return this.choosefacebookphoto(),t.prototype.render.apply(this,arguments)}})}),BV.define("bv/ui-core/bpopupview",["ENV","framework/bview","underscore","jquery","document","window","vendor/fastclick","bv/ui-core/focusableview","util/specialKeys","body"],function(e,t,n,r,i,s,o,u,a,f){var l="popup-container",c=t.extend(u);return c.extend({classList:["shared",l],isEventManager:!0,options:{delay:250,animDelay:20,containerClass:"bv-absolute-top-container",focusableClass:"bv-focusable",cleanslateClass:"bv-cleanslate",popupInClass:"bv-popup-in",popupOutClass:"bv-popup-out",popupClass:l,popupInEvent:"mouseenter",popupOutEvent:"mouseleave",popupPositionMargin:10,startDelay:180,arrowWidth:20,arrowHeight:10,alignArrow:!0},init:function(e){n(this.options).extend(e.options),this.popupId="bv-popup-"+Math.floor(Math.random()*1e10)},createFeatureViews:function(e,t,r){var i=[],s=this;return n(e[t]).forEach(function(e){e=e.replace("has:","");var t=r[e],n,o;t.model?o=new t.model({parent:s.model}):t.collection&&(o=new t.collection(undefined,{parent:s.model}),o.parent=s.model),t.view&&(n=t.view,o?i.push(new n({parent:s,model:o})):i.push(new n({parent:s})))}),i},enter:function(e){clearTimeout(this.keyEventId)},leave:function(e){var t=this;this.removeFocusLayer(),clearTimeout(this.keyEventId),t.keyEventId=setTimeout(function(){t.detach()},t.options.delay)},topPositionModifier:function(e){return e},leftPositionModifier:function(e){return e},_position:function(){function u(){var r,s,u=e.options.popupPositionMargin,a={width:"100%",height:e.height,maxWidth:e.width+u>i?i-u*2:e.width+2};return e.parent.options.positionPopupRelativeToLink?(r=e.leftPositionModifier(o.left)-(e.width+1)/2+e.parent.$targetEl.outerWidth(!1)/2,r<0||e.width+u>i?s=u:e.width+r>i?s=i-e.width-u:s=r,a=n.extend(a,{top:e.topPositionModifier(o.top)+e.parent.$targetEl.outerHeight(!1)+e.options.arrowHeight,left:s})):a=n.extend(a,{top:t.scrollTop()+(t.height()-e.height)/2,left:i/2-(e.width+1)/2}),a}function a(t){var n=e.options.arrowWidth,r=Math.min(i,e.width)-e.options.arrowWidth,s=e.leftPositionModifier(o.left)+e.parent.$targetEl.outerWidth(!1)/2-t.left+e.options.arrowWidth/4;return s<n?s=n:s>r&&(s=r),s}var e=this,t=r(s),i=t.outerWidth(),o=e.parent.$targetEl.offset(),f=u();e.$el.css(f),e.options.alignArrow&&(e.arrowStyleElement=e.injectArrowStyles(a(f)))},injectArrowStyles:function(e){var t="arrowStyles-"+this.popupId,n=i.getElementById(t);if(!n){var r=i.head||i.getElementsByTagName("head")[0]||i.body||i.getElementsByTagName("body")[0];n=i.createElement("style"),n.type="text/css",n.id=t,r.appendChild(n)}var s="#"+this.popupId+" .bv-popup",o=s+":before, "+s+":after { left:"+e+"px !important; } ";if(n.styleSheet)n.styleSheet.cssText=o;else{while(n.hasChildNodes())n.removeChild(n.lastChild);n.appendChild(i.createTextNode(o))}return n},render:function(t){var u=this,a=r(s),c=a.outerWidth(),h={};clearTimeout(u.detachKey);if(!u.$el||!u.$el.length)u.$el=r("<div/>").addClass(u.options.cleanslateClass).addClass(u.options.containerClass).addClass(u.options.popupOutClass);u.options.aboveModestBox&&u.$el.addClass("bv-above-mbox"),u.$el.attr("id",u.popupId),u.$el.html(u.toHTML(n.extend({},t,{version:e.get("config").version}))),u.attach(),new o(u.$el.get(0));var p=u.$el.find(".bv-"+l).css({position:"relative"});u._position(),u._positionHandler=function(){u._position()},r(i).off("orientationchange.bpopupview"),r(i).on("orientationchange.bpopupview",u._positionHandler),u.rendered||(u.$el.removeClass(u.options.popupInClass),u.startKey=setTimeout(function(){u.$el.appendTo(f()),setTimeout(function(){u.$el.addClass(u.options.popupInClass).removeClass(u.options.popupOutClass),u.model.trigger("dropdownRendered")},u.options.animDelay),u.rendered=!0,u.$el.find(".bv-popup").attr("aria-expanded","true")},u.options.startDelay))},needDetach:function(e){var t=this.$viewEl,n=t.offset(),r=t.outerWidth(),i=t.outerHeight(),s=(e.clientX<n.left||e.clientX>n.left+r||e.clientY<n.top||e.clientX>n.top+i)&&this.rendered;return s},detach:function(e){function s(){r(i).off("click.sharing"),n.getEventManager().undelegateSubviewEvents(n),n.$el.detach(),n.rendered=!1,n.options.alignArrow&&r(n.arrowStyleElement).remove()}t.prototype.detach.call(this);var n=this;r(i).off("orientationchange.bpopupview");if(!n.rendered)return;this.removeFocusLayer(),this.$focusables=r([]),n.$el.addClass(n.options.popupOutClass),n.$el.find(".bv-popup").attr("aria-expanded","false"),e?s():n.detachKey=setTimeout(s,n.options.delay)},attach:function(){var n=this,s=t.prototype.attach.apply(this,arguments),o=this.$el.find(".bv-"+this.options.popupClass).off(this.options.popupOutEvent).on(this.options.popupOutEvent,r.proxy(this.leave,this)).off(this.options.popupInEvent).on(this.options.popupInEvent,r.proxy(this.enter,this));return this.parent.options&&this.parent.options.toggleable&&(o.off(this.options.popupOutEvent),r(i).off("click.sharing").on("click.sharing",function(e){!r(e.currentTarget).is(this.linkEl)&&n.needDetach(e)&&n.detach(!0)})),this.$focusables=this.$el.find("."+this.options.focusableClass),this.$first=this.$focusables.first(),this.$last=this.$focusables.last(),this.focusLayer||(this.focusLayer=this.registerFocusableLayer(this.$el,"."+this.options.focusableClass)),this.listenTo(e,"focusLayerRemoved",this.focusLayerRemoved),this.setupKeyboardNavigation(),s},setupKeyboardNavigation:function(){var e=this;e.$focusables.off("focus.bpopupview").on("focus.bpopupview",function(){clearTimeout(e.keyEventId)}),e.$focusables.off("keydown.bpopupview").on("keydown.bpopupview",function(t){t.keyCode===a.ESCAPE&&(t.preventDefault(),t.stopPropagation(),e.deregisterFocusableLayerById(e.focusLayer))})},focusLayerRemoved:function(e){e.focusLayer.$layerRoot===this.$el&&(delete this.focusLayer,this.leave())},removeFocusLayer:function(){this.focusLayer&&(this.stopListening(e,"focusLayerRemoved"),this.deregisterFocusableLayerById(this.focusLayer,!1,this.parent.options&&this.parent.options.preserveFocus),delete this.focusLayer)}})}),BV.define("hbs!photouploadPopup",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/extmsg","template/helpers/ifHasFeature"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+=' <!--[if lt IE 7]> <div class="bv-compat bvie6 bvie-lt8 bvie"> <![endif]--> <!--[if IE 7]> <div class="bv-compat bvie7 bvie-lt8 bvie"> <![endif]--> <!--[if IE 8]> <div class="bv-compat bvie8 bvie"> <![endif]--> <!--[if IE 9]> <div class="bv-compat bvie9 bvie"> <![endif]--> <!--[if gt IE 9]> <!--><div class="bv-compat"> <!--<![endif]--> <div class="bv-popup bv-popup-photoupload"> <ul class="bv-fieldsets" role="presentation"> <li class="bv-fieldset bv-photoupload-action"> <button type="button" class="bv-upload-btn bv-focusable" data-bv-upload-type="upload"> ',o={hash:{prefix:"add_"}},r+=l((i=n.extmsg,i?i.call(e,"file",e.msgpack,e,o):f.call(e,"extmsg","file",e.msgpack,e,o)))+" </button> </li> ",s=n["if"].call(e,e.janrain_configured,{hash:{},inverse:c.noop,fn:c.program(2,d,t)});if(s||s===0)r+=s;return r+=" </ul> </div> </div> ",r}function d(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:c.noop,fn:c.program(3,v,t)},s=(i=n.ifHasFeature,i?i.call(e,"addSocialPhoto",o):f.call(e,"ifHasFeature","addSocialPhoto",o));if(s||s===0)r+=s;return r+=" ",r}function v(e,t){var r="",i,s;return r+=' <li class="bv-fieldset bv-photoupload-action"> <button type="button" class="bv-upload-btn bv-focusable" data-bv-upload-type="facebook"> ',s={hash:{prefix:"add_"}},r+=l((i=n.extmsg,i?i.call(e,"facebookphoto_1",e.msgpack,e,s):f.call(e,"extmsg","facebookphoto_1",e.msgpack,e,s)))+" </button> </li> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this,h="function";s+=' <div class="bv-core-container-',(o=n.version)?o=o.call(t,{hash:{}}):(o=t.version,o=typeof o===h?o.apply(t):o),s+=l(o)+'"> ',a={hash:{tag:"div"},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.view,o?o.call(t,t,a):f.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" </div> ",s});return t.registerPartial("photouploadPopup",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/photouploadPopup",["framework/bview","bv/ui-core/bpopupview","hbs!photouploadPopup","jquery","underscore","mf!bv/c2013/messages/submission"],function(e,t,n,r,i,s){return t.extend({name:"photouploadDropdown",options:i.extend({},t.prototype.options,{popupInClass:"bv-dropdown-in",popupOutClass:"bv-dropdown-out"}),width:160,height:400,events:{"click .bv-upload-btn":"uploadPhoto"},template:n,msgpacks:[s],uploadPhoto:function(e){this.detach();var t=r(e.target),n=t.data("bv-upload-type");if(n==="upload"&&this.parent.photoUpload)return this.parent.photoUpload(e);if(n==="facebook"&&this.parent.facebookPhotoUpload)return this.parent.facebookPhotoUpload(e)},topPositionModifier:function(e){return e-20},init:function(t){var n=e.config.vendorConfig||{};this.model.set("janrain_configured",n.janrain)}})}),BV.define("framework/video/abstractVideo",["jquery","underscore","framework/util/bvreporter"],function(e,t,n){function r(e){n.assert(this.constructor!==r,"AbstractVideo is an abstract class"),n.assert(t(e).isString(),"Video objects require a video url"),this.videoUrl=e;try{this.videoId=this._getVideoIdFromUrl(e)}catch(i){this.invalid=!0;return}this._fetchingVideoData=this._fetchVideoDataFromAPI()}return r.prototype._fetchVideoDataFromAPI=function(){var t=this,n=e.Deferred(),r=t._myAjaxConfig();return e.ajax(r).done(function(e){var r=t._normalizeVideoData(e);r.error?n.reject(r):n.resolve(r),t.videoData=r}),n.promise()},r.prototype.getVideoData=function(){return n.assert(!this.invalid,"Cannot get data on an invalid video."),this._fetchingVideoData},r.prototype._getVideoIdFromUrl=function(){n.assert(!1,'_getVideoIdFromUrl is "pure virtual" and should be overwritten.')},r.prototype._myAjaxConfig=function(){n.assert(!1,'_myAjaxConfig is "pure virtual" and should be overwritten.')},r.prototype._normalizeVideoData=function(e){n.assert(!1,'_normalizeVideoData is "pure virtual" and should be overwritten.')},r}),BV.define("util/objectCreateShim",[],function(){return Object.create?Object.create:function(e,t){function n(){}if(typeof t!="undefined")throw"The multiple-argument version of Object.create is not provided by this browser and cannot be shimmed.";return n.prototype=e,new n}}),BV.define("util/descendFrom",["util/objectCreateShim"],function(e){function t(t,n){n.prototype=e(t.prototype),n.prototype.constructor=n}return t}),BV.define("framework/video/youtubeVideo",["jquery","underscore","framework/util/bvreporter","framework/video/abstractVideo","util/descendFrom"],function(e,t,n,r,i){function u(e){r.apply(this,arguments)}var s=/(?:https?:\/\/)?(?:[0-9A-Z\-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w]*(?:['"][^<>]*>|<\/a>))[?=&+%\w\-]*/ig,o="AIzaSyD1aZoYVpIKzD79SPOp9QLX_X_118xcLUE";return i(r,u),u.prototype._getVideoIdFromUrl=function(e){var t=e.replace(s,"$1");if(e===t)throw new Error("The given url was not a valid youtube url");return t},u.prototype._myAjaxConfig=function(){return{dataType:"jsonp",type:"GET",url:"https://www.googleapis.com/youtube/v3/videos",data:{id:this.videoId,part:"snippet",fields:"items/snippet/thumbnails/default",key:o}}},u.prototype._normalizeVideoData=function(e){var n;return e.error?n={error:e.error}:t(e.items).isEmpty()?n={error:"Youtube returned 0 results"}:n={id:this.videoId,url:this.videoUrl,thumbUrl:e.items[0].snippet.thumbnails["default"].url},n},u}),BV.define("bv/c2013/view/videoupload",["bv/ui-core/buploadview","underscore","jquery","mf!bv/c2013/messages/submission","framework/util/bvreporter","framework/video/youtubeVideo","util/specialKeys"],function(e,t,n,r,i,s,o){return e.extend({name:"videoupload",mediaType:"video",label:".bv-media-picker-container .bv-helper-label",preview:".bv-media-preview-container",controls:".bv-media-toggle-controls",field:'input[name="videourl"]',events:t.extend({},e.prototype.events,{"click .bv-photo-submit":"validateVideo",'keydown input[name="videourl"]':"handleKeydown",'blur input[name="videourl"]':"checkInput"}),init:function(t){e.prototype.init.call(this,t),this.myVideo={videoUrl:""}},handleKeydown:function(e){e.type==="keydown"&&e.keyCode===o.ENTER&&(e.stopPropagation(),e.preventDefault(),this.checkInput())},checkInput:function(){var e=this._getVideoUrlFromView();this.myVideo.videoUrl!==e&&this.updateMedia(e)},updateMedia:function(e){this.removeMedia(!1);if(!e)return;this.myVideo=new s(e);if(this.myVideo.invalid)return;this.$el.find(this.preview).addClass("bv-media-uploading"),this.updatePlaceholderText();var t=this;this.myVideo.getVideoData().done(function(e){t._videoError=!1,t.processUpload(e)}).fail(function(e){t._videoError=!0,t.showError(r.error_message_invalid_url_video())})},_getVideoUrlFromView:function(){return this.$el.find(this.field).val()},_removeMedia:function(){this.myVideo={},this.removeMedia(!0)},processUpload:function(e){this.model.set("video",e),this.displayMedia(null,!0)},validateVideo:function(){if(this._videoError)return;var e=this._getVideoUrlFromView();e?this.myVideo.invalid?this.showError(r.error_message_invalid_url_video()):this.clearError():this.showError(r.error_message_require_url_video())}})}),BV.define("hbs!submissionSidebar",["hbs","vendor/handlebars/runtime","hbs!subjectInfo","template/helpers/view"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){var r="",i;r+=' <div class="bv-subject-info-section"> ',i=n["if"].call(e,e.subject,{hash:{},inverse:a.noop,fn:a.program(2,c,t)});if(i||i===0)r+=i;return r+=" </div> ",r}function c(e,t){var i="",s;i+=" ",s=a.invokePartial(r.subjectInfo,"subjectInfo",e.subject,n,r);if(s||s===0)i+=s;return i+=" ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s,o,u,a=this,f=n.helperMissing;return u={hash:{tag:"div",classList:"submission-sidebar"},inverse:a.noop,fn:a.program(1,l,i)},o=(s=n.view,s?s.call(t,t,u):f.call(t,"view",t,u)),o||o===0?o:""});return t.registerPartial("submissionSidebar",n),n.deps=["subjectInfo"],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/submissionSidebar",["ENV","framework/bview","underscore","hbs!submissionSidebar","jquery"],function(e,t,n,r,i){return t.extend({name:"submissionSidebar",classList:["submission-side"],events:{},template:r,_setupSubviews:function(){this.uniq=++this.getComponent().viewUniq}})}),BV.define("hbs!thumbnail",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/extmsg","template/helpers/renderIcon"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i;r+=" ",i=n.each.call(e,e.media,{hash:{},inverse:c.noop,fn:c.programWithDepth(d,t,e)});if(i||i===0)r+=i;return r+=" ",r}function d(e,t,r){var i="",s,o,u;i+=" <div data-bv-",(s=n.mediaType)?s=s.call(e,{hash:{}}):(s=e.mediaType,s=typeof s===f?s.apply(e):s),i+=l(s)+'-id="',(s=n.id)?s=s.call(e,{hash:{}}):(s=e.id,s=typeof s===f?s.apply(e):s),i+=l(s)+'" class="',s=n.each.call(e,e.classList,{hash:{},inverse:c.noop,fn:c.program(3,v,t)});if(s||s===0)i+=s;i+='"> <img src="',(s=n.thumbUrl)?s=s.call(e,{hash:{}}):(s=e.thumbUrl,s=typeof s===f?s.apply(e):s),i+=l(s)+'" title="',(s=n.caption)?s=s.call(e,{hash:{}}):(s=e.caption,s=typeof s===f?s.apply(e):s),i+=l(s)+'" alt="',(s=n.caption)?s=s.call(e,{hash:{}}):(s=e.caption,s=typeof s===f?s.apply(e):s),i+=l(s)+'"/> <a title="',u={hash:{prefix:"remove_"}},i+=l((s=n.extmsg,s?s.call(e,e.mediaType,r.msgpack,e,u):h.call(e,"extmsg",e.mediaType,r.msgpack,e,u)))+'" class="bv-thumbnail-close bv-focusable" tabindex="0" href="#"> ',u={hash:{ariaHidden:"true"},inverse:c.noop,fn:c.program(5,m,t)},o=(s=n.renderIcon,s?s.call(e,"bv-sprite-close",u):h.call(e,"renderIcon","bv-sprite-close",u));if(o||o===0)i+=o;return i+=' <span class="bv-off-screen">',u={hash:{prefix:"remove_"}},i+=l((s=n.extmsg,s?s.call(e,e.mediaType,r.msgpack,e,u):h.call(e,"extmsg",e.mediaType,r.msgpack,e,u)))+" ",(o=n.caption)?o=o.call(e,{hash:{}}):(o=e.caption,o=typeof o===f?o.apply(e):o),i+=l(o)+'</span> </a> <input type="hidden" name="',(o=n.urlFieldName)?o=o.call(e,{hash:{}}):(o=e.urlFieldName,o=typeof o===f?o.apply(e):o),i+=l(o)+'" value="',(o=n.url)?o=o.call(e,{hash:{}}):(o=e.url,o=typeof o===f?o.apply(e):o),i+=l(o)+'" /> <input type="hidden" name="',(o=n.captionFieldName)?o=o.call(e,{hash:{}}):(o=e.captionFieldName,o=typeof o===f?o.apply(e):o),i+=l(o)+'" value="',(o=n.caption)?o=o.call(e,{hash:{}}):(o=e.caption,o=typeof o===f?o.apply(e):o),i+=l(o)+'" /> </div> ',i}function v(e,t){var n="";return n+=l(typeof e===f?e.apply(e):e)+" ",n}function m(e,t){return" &#x2718; "}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+=" ",a={hash:{tag:"div"},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.view,o?o.call(t,t,a):h.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("thumbnail",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/thumbnail",["framework/bmodel","framework/bview","underscore","hbs!thumbnail","mf!bv/c2013/messages/submission","bv/util/contentType","jquery","bv/util/focusManager"],function(e,t,n,r,i,s,o,u){var a=/(photo|video)(caption|url)_(\d+)/;return t.extend({name:"thumbnail",el:".bv-media-thumbnail-strip",events:{"click .bv-thumbnail-close":"removeMedia","click .bv-thumbnail-container img":"editMedia"},template:r,msgpacks:[i],init:function(e){this.parent=e.parent,this.mediaType=e.mediaType||"media",this.classList=[this.mediaType+"-thumbnail-strip"],this.setElement(this.parent.$el.find(".bv-thumbnail-strip")),this.mediaErrors=this._getMediaErrors(),this._createModel()},_getMediaErrors:function(){var e=[],t=this.parent.model.get("formErrors");return t&&t.FieldErrors&&n.each(t.FieldErrors,function(t,n){n.match(a)&&e.push(n)}),e},_createModel:function(){var t=this,n=this.parent.model,r=n.get(s.nouns(this.mediaType));this.model=new e({media:this._generateData(r),parent:n})},_generateData:function(e){var t=this,r=n(e).map(function(e,r){var i=!1,s=e.id.match(a);if(s){var o=s[1]+"caption_"+s[3];i=n(t.mediaErrors).contains(o)}var u=i?["bv-thumbnail-container","bv-error"]:["bv-thumbnail-container"],f=r+1;return{id:e.id,caption:e.caption,url:e.url,thumbUrl:e.thumbUrl,mediaType:t.mediaType,urlFieldName:t.mediaType+"url_"+f,captionFieldName:t.mediaType+"caption_"+f,classList:u}});return r},editMedia:function(e){var t=o(e.target).closest(".bv-thumbnail-container"),n=t.attr("data-bv-"+this.mediaType+"-id"),r=this.model.get("parent").getMediaById(n,this.mediaType);this.parent.trigger("showupload",this.mediaType,r)},_confirmRemoval:function(){return confirm(i["remove_confirm_"+this.mediaType]())},removeMedia:function(e){e.preventDefault();var t=this._confirmRemoval();if(!t)return;var r=o(e.target).closest(".bv-thumbnail-container"),i="data-bv-"+this.mediaType+"-id",s=r.next(),u;s.length&&(u=s.attr(i));var a=r.attr(i),f=this.model.get("media");f=n(f).filter(function(e){return e.id!==a}),this.model.set("media",f),this.model.get("parent").removeMedia(a,this.mediaType),this.render(),this._removeDefereds(u,i)},_removeDefereds:function(e,t){n.defer(function(){var n,r;e?(n=o("["+t+"='"+e+"']"),r=n.find(".bv-focusable"),u.rescanFocusLayer(),u.moveFocus(r)):(u.focusNext(),u.rescanFocusLayer())})},update:function(){var e=this.model.get("parent").get(s.nouns(this.mediaType)),t=this.model.get("media");t.length!==e&&this.model.set("media",this._generateData(e))},render:function(e){this.update(),t.prototype.render.call(this,e);var n=this.model.get("parent").getMaxNumByMediaType(this.mediaType),r=this.model.get("parent"),i=n-this.model.get("media").length;this.parent.trigger("updateupload",this.mediaType,i)}})}),BV.define("bv/util/submissionSubviews",["ENV","underscore","bv/c2013/view/termsConditions","bv/c2013/view/submissionMessage","bv/c2013/view/photoupload","bv/c2013/view/facebookphotoupload","bv/c2013/view/photouploadPopup","bv/c2013/view/videoupload","bv/c2013/view/submissionSidebar","bv/c2013/view/thumbnail"],function(e,t,n,r,i,s,o,u,a,f){var l={TermsConditionsView:n,SubmissionMessageView:r,PhotoUploadView:i,FacebookPhotoUploadView:s,PhotoUploadPopupView:o,VideoUploadView:u,SidebarView:a,ThumbnailView:f};return l}),BV.define("bv/c2013/view/genericSubmission",["ENV","framework/bview","underscore","jquery","hbs!genericSubmission","mf!bv/c2013/messages/genericSubmission","mf!bv/c2013/messages/contentSearch","mf!bv/c2013/messages/submission","bv/ui-core/modestbox","framework/util/bvtracker","bv/util/productInfo","bv/util/cssLoadCheck","client!bv/util/submissionSubviews","window"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){return t.extend({name:"genericSubmission",template:i,msgpacks:[s,o,u],sb:null,rendered:!1,events:{"click .bv-category-breadcrumb-link":"breadcrumbCategory","click .bv-root-category-item":"categoryItem"},init:function(e){this.model.on("launchSubmissionForProduct",this.launchSubmissionForProduct,this),this.model.on("change:moreResultsEnabled",function(e,t){this.$(".bv-more-results").toggleClass("bv-hidden",!t)},this),this.model.on("categorySelected",this.categoryChange,this)},_render:function(e){var i=this.sb,o=this,u,h,p,d=r.Deferred(),v=d.promise();if(!i){p={},u=this.model.get("containerId"),u=u?"#"+u:null,h=this.model.get("inline"),h&&u&&r(u).empty(),this.sb=i=a.get("lightbox");var m=n.extend({},p,{view:this,title:s.product_picker_title(this.model.toJSON()),preventClose:this.model.get("preventClose"),inline:h,silentMode:this.model.get("silentMode"),container:u,beforeHide:n(function(){this.publish("bv-component-hide")}).bind(this),afterShow:n(function(){this.publish("bv-component-show")}).bind(this)});return i.once("afterClose",o.afterClose),i.replaceOrOpen(m),f.feature({type:"Used",name:"Click",detail1:"GenericReviewSubmission",bvProduct:l.RATINGSANDREVIEWS}),o.rendered?d.resolve():d.reject(),v}return this.rendered?(d.resolve(),v):(c.done(function(){var n=o.model;t.prototype._render.call(o,e),o.rendered=!0,d.resolve(),n.on("change:subCategories",function(){t.prototype._render.call(o,!1),o.$viewEl.find(".bv-text-field-search").val("")},o),n.on("change:showProducts",function(){o.$viewEl.find(".bv-product-picker, .bv-root-category-picker").toggleClass("bv-hidden")},o)}),v)},categoryChange:function(e){if(e==="bv_back_category")return this.model.backCategory();this.model.setCategory(e,null,!0)},breadcrumbCategory:function(e){var t=r(e.currentTarget).attr("data-bv-category-breadcrumb");e.preventDefault(),this.model.breadcrumbCategory(t)},afterClose:function(){},launchSubmissionForProduct:function(e){var t=this.model.get("clientAPIConfig").campaignId;p.$BV.ui("rr","submit_review",{productId:e,campaignId:t,push:!0,breadcrumbs:!1,closeAllPostSubmission:!this.model.get("preventClose"),isGenericSubmission:!0}),f.feature({type:"Used",name:"Click",detail1:"GenericReviewSubmission",productId:e})},categoryItem:function(e){var t=r(e.currentTarget).attr("data-bv-categoryId");this.model.setCategory(t,null,!0)}})}),BV.define("bv/c2013/model/searchBar",["ENV","framework/bmodel"],function(e,t){return t.extend({name:"searchBar",processData:function(e){this.set(e),t.prototype.processData.call(this,e)}})}),BV.define("hbs!searchBar",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/ifHasFeature","template/helpers/extmsg","template/helpers/renderIcon","template/helpers/mountView"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+=' <div class="bv-masthead-search bv-submission"> <div class="bv-fieldsets"> ',o={hash:{},inverse:f.program(4,v,t),fn:f.program(2,d,t)},s=(i=n.ifHasFeature,i?i.call(e,"contentFilter",o):l.call(e,"ifHasFeature","contentFilter",o));if(s||s===0)r+=s;r+=' <label for="bv-text-field-search-',(s=n.componentId)?s=s.call(e,{hash:{}}):(s=e.componentId,s=typeof s===c?s.apply(e):s),r+=h(s)+'" class="bv-off-screen">',o={hash:{prefix:"content_",includeComponentId:"true"}},r+=h((i=n.extmsg,i?i.call(e,"search_placeholder",e.msgpack,e,o):l.call(e,"extmsg","search_placeholder",e.msgpack,e,o)))+"</label> ",o={hash:{classList:"bv-search-control-icon",ariaHidden:"true"},inverse:f.noop,fn:f.program(6,m,t)},s=(i=n.renderIcon,i?i.call(e,"bv-sprite-search-control",o):l.call(e,"renderIcon","bv-sprite-search-control",o));if(s||s===0)r+=s;r+=' <input id="bv-text-field-search-',(s=n.componentId)?s=s.call(e,{hash:{}}):(s=e.componentId,s=typeof s===c?s.apply(e):s),r+=h(s)+'" class="bv-text bv-focusable bv-search-text" type="text" name="bv-search" placeholder="',o={hash:{prefix:"content_",includeComponentId:"true"}},r+=h((i=n.extmsg,i?i.call(e,"search_placeholder",e.msgpack,e,o):l.call(e,"extmsg","search_placeholder",e.msgpack,e,o)))+'" > <span class="bv-focusable bv-search-clear-icon bv-hidden"> ',o={hash:{ariaHidden:"true"},inverse:f.noop,fn:f.program(8,g,t)},s=(i=n.renderIcon,i?i.call(e,"bv-sprite-close",o):l.call(e,"renderIcon","bv-sprite-close",o));if(s||s===0)r+=s;r+=' <span class="bv-off-screen">',o={hash:{}},r+=h((i=n.extmsg,i?i.call(e,"close",e.msgpack,e,o):l.call(e,"extmsg","close",e.msgpack,e,o)))+'</span> </span> <button type="button" class="bv-content-btn bv-content-search-btn bv-focusable"> ',o={hash:{classList:"bv-search-control-icon",ariaHidden:"true"},inverse:f.noop,fn:f.program(6,m,t)},s=(i=n.renderIcon,i?i.call(e,"bv-sprite-search-control",o):l.call(e,"renderIcon","bv-sprite-search-control",o));if(s||s===0)r+=s;return r+=' <span class="bv-off-screen">',o={hash:{prefix:"content_",includeComponentId:"true"}},r+=h((i=n.extmsg,i?i.call(e,"search_button",e.msgpack,e,o):l.call(e,"extmsg","search_button",e.msgpack,e,o)))+"</span> </button> </div> ",o={hash:{}},r+=h((i=n.mountView,i?i.call(e,"contentFilterButton",o):l.call(e,"mountView","contentFilterButton",o)))+" </div> </div> ",r}function d(e,t){return' <div class="bv-expand-filter-button-offset-on"> '}function v(e,t){return' <div class="bv-expand-filter-button-offset-off"> '}function m(e,t){return"&#985;"}function g(e,t){return" &#x2718; "}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=this,l=n.helperMissing,c="function",h=this.escapeExpression;s+=" ",a={hash:{tag:"div",classList:"searchbar"},inverse:f.noop,fn:f.program(1,p,i)},u=(o=n.view,o?o.call(t,t,a):l.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("searchBar",n),n.deps=[],n.tplMountedViews=["contentFilterButton"],n}),BV.define("bv/c2013/view/searchBar",["ENV","framework/bview","framework/util/bvtracker","underscore","jquery","bv/util/loadingOverlay","bv/util/productInfo","hbs!searchBar","mf!bv/c2013/messages/contentSearch","mf!bv/c2013/messages/common","util/specialKeys"],function(e,t,n,r,i,s,o,u,a,f,l){return t.extend({name:"searchBar",region:"SearchBarRatingSummary",events:{"keydown .bv-search-text":"preventSubmit","keyup .bv-search-text":"searchInputChanged","click .bv-content-search-btn":"searchContent","click .bv-search-clear-icon":"clearSearch"},template:u,msgpacks:[a,f],init:function(e){this.debouncedSearch=r(this._searchContent).debounce(500),this.searchOnKeyup=this.hasFeature("searchOnKeyup")},formSetup:function(e){r(e).has("searchFor")&&!r(e.searchFor).isEmpty()&&this.$viewEl.find(".bv-search-text").val(e.searchFor.join(" "))},searchContent:function(e){var t=this.$viewEl.find(".bv-search-text").val();t=r.str.trim(t),this._searchContent(t)},_searchTracking:function(e){var t=this,i=this.model.get("coverageContentTypes");r(i).forEach(function(r){var i={Reviews:o.RATINGSANDREVIEWS,Questions:o.ASKANDANSWER}[r];i&&n.feature({type:"Used",name:"Search",detail1:"UserGeneratedContent",detail2:e,bvProduct:i,productId:o.getId(t),categoryId:o.getCategoryId(t)})})},searchInputChanged:function(e){if(e.keyCode===l.TAB)return;var t=this.$viewEl.find(".bv-search-text").val();t=r.str.trim(t),e.keyCode===l.ENTER?(e.preventDefault(),this._searchContent(t)):t?(this.$viewEl.find(".bv-search-clear-icon").removeClass("bv-hidden"),this.searchOnKeyup&&t.length>2&&this.debouncedSearch(t)):(this.$viewEl.find(".bv-search-clear-icon").addClass("bv-hidden"),this.debouncedSearch(t))},clearSearch:function(e){this.$viewEl.find(".bv-search-text").val(""),this.$viewEl.find(".bv-search-clear-icon").addClass("bv-hidden"),this.publish("searchcleared")},preventSubmit:function(e){e.keyCode===l.ENTER&&e.preventDefault()},_searchContent:function(e){e?(s.show(),this.publish("searchcontent",1,e),this._searchTracking(e)):this.publish("searchcleared")}})}),BV.define("bv/c2013/model/categorySelect",["ENV","framework/bmodel","underscore","framework/util/bvtracker"],function(e,t,n,r){return t.extend({name:"categorySelect",init:function(e){e.parent&&e.parent.on("change:subCategories",function(e,t){var n=e.get("categoryName");this.set("categoryName",n),this.set("subCategories",t)},this)},categorySelected:function(e){var t=this.get("parent");t&&t.trigger("categorySelected",e)},processData:function(e){return this.set(e),this.dataReady(e)}})}),BV.define("bv/ui-core/bhoverableview",["ENV","framework/bview","bv/ui-core/focusableview","util/specialKeys","jquery","underscore"],function(e,t,n,r,i,s){var o=t.extend(n),u=50;return o.extend({options:{delay:250},$targetEl:null,enter:s.debounce(function(e){var t=this;this.targetView||(this.targetView=new this.TargetView({model:this.model,parent:this,options:this.targetViewOptions}),this.$viewEl.closest(".bv-mbox-lightbox").length&&(this.targetView.options.aboveModestBox=!0)),clearTimeout(this.targetView.keyEventId),clearTimeout(this.targetView.startKey);var n=this.targetView.rendered;this.targetView.detach(!0),this.options.toggleable?n||this.targetView.render(e):this.targetView.render(e),(!this.targetView.$focusables||!this.targetView.$focusables.length)&&i(e.target).off("blur").on("blur",function(e){t.leave()}),e.preventDefault()},u,!0),leave:function(e){var t=this.targetView;t&&(clearTimeout(t.startKey),clearTimeout(t.keyEventId),t.keyEventId=setTimeout(function(){t.detach(),t.removeFocusLayer&&t.removeFocusLayer()},this.options.delay))},setupKeyboardNavigation:function(e){var t=this;e=e||t.$targetEl,e.off("focusManagerFocus.bhoverableview").on("focusManagerFocus.bhoverableview",function(n){t.targetViewOptions=s.extend({},t.targetViewOptions,{startDelay:0}),t.enter(n),e.off("keydown.bhoverableview").on("keydown.bhoverableview",function(e){e.keyCode===r.ESCAPE&&(e.preventDefault(),t.leave(e),t.deregisterFocusableLayer())})})}})}),BV.define("bv/ui-core/bselectview",["ENV","bv/ui-core/bhoverableview","jquery","underscore","body"],function(e,t,n,r,i){return t.extend({options:r.extend({},t.prototype.options,{toggleable:!0}),setText:function(e){this.$viewEl.find(".bv-dropdown-title").text(e)},attach:function(e){var r=this,i=t.prototype.attach.apply(r,[e]),s=r.$viewEl.find("button.bv-focusable");return r.$targetEl=r.$viewEl.on("touchstart",n.proxy(r._handleTouchstart,r)).on("mouseenter",n.proxy(r.enter,r)).on("mouseleave",n.proxy(r.leave,r)),r.$select=r.$viewEl.find("select"),s.length&&r.setupKeyboardNavigation(s),i},_handleTouchstart:function(e){this.targetView&&this.targetView.rendered?this.leave(e):(this.enter(e),n(i()).on("touchstart.bhoverable"+this.uniq,n.proxy(this._closeViewIfExternalTouch,this)))},_closeViewIfExternalTouch:function(e){this.$targetEl.has(n(e.target)).length<=0&&(n(i()).off("touchstart.bhoverable"+this.uniq),this.leave(e))}})}),BV.define("hbs!categorySelect",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/renderIcon","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i,s;r+=" ",s=n["if"].call(e,(i=e.subCategories,i==null||i===!1?i:i.length),{hash:{},inverse:c.program(7,g,t),fn:c.program(2,d,t)});if(s||s===0)r+=s;return r+=" ",r}function d(e,t){var r="",i,s,o;r+=' <div class="bv-dropdown"> <div class="bv-dropdown-target bv-button-proxy"> <button class="bv-focusable" aria-haspopup="true" role="menuitem"> <span class="bv-dropdown-title">',(i=n.categoryName)?i=i.call(e,{hash:{}}):(i=e.categoryName,i=typeof i===f?i.apply(e):i),r+=l(i)+"</span> ",o={hash:{classList:"bv-dropdown-arrow",ariaHidden:"true"},inverse:c.noop,fn:c.program(3,v,t)},s=(i=n.renderIcon,i?i.call(e,"bv-sprite-down-arrow-dark",o):h.call(e,"renderIcon","bv-sprite-down-arrow-dark",o));if(s||s===0)r+=s;r+=' <span class="bv-off-screen">',o={hash:{}},r+=l((i=n.extmsg,i?i.call(e,"offscreen_sort_arrow",e.msgpack,e,o):h.call(e,"extmsg","offscreen_sort_arrow",e.msgpack,e,o)))+'</span> </button> </div> <label for="bv-dropdown-select-'+l((i=(i=e._bview,i==null||i===!1?i:i.viewId),typeof i===f?i.apply(e):i))+'" class="bv-off-screen" aria-hidden="true"> ',(s=n.categoryName)?s=s.call(e,{hash:{}}):(s=e.categoryName,s=typeof s===f?s.apply(e):s),r+=l(s)+' </label> <select id="bv-dropdown-select-'+l((i=(i=e._bview,i==null||i===!1?i:i.viewId),typeof i===f?i.apply(e):i))+'" class="bv-select-cleanslate bv-dropdown-select" aria-hidden="true"> ',s=n.each.call(e,e.subCategories,{hash:{},inverse:c.noop,fn:c.program(5,m,t)});if(s||s===0)r+=s;return r+=" </select> </div> ",r}function v(e,t){return" &#x25BC; "}function m(e,t){var r="",i;return r+=' <option value="',(i=n.Id)?i=i.call(e,{hash:{}}):(i=e.Id,i=typeof i===f?i.apply(e):i),r+=l(i)+'"> ',(i=n.Name)?i=i.call(e,{hash:{}}):(i=e.Name,i=typeof i===f?i.apply(e):i),r+=l(i)+" </option> ",r}function g(e,t){var r="",i;return r+=' <span class="bv-category-select-category-label">',(i=n.categoryName)?i=i.call(e,{hash:{}}):(i=e.categoryName,i=typeof i===f?i.apply(e):i),r+=l(i)+"</span> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+=" ",a={hash:{tag:"div",classList:"category-select-target"},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.view,o?o.call(t,t,a):h.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("categorySelect",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("bv/ui-core/bselectdropdownview",["ENV","framework/bview","framework/util/bvtracker","underscore","jquery","document","vendor/fastclick","bv/ui-core/focusableview","bv/util/productInfo","util/specialKeys","body"],function(e,t,n,r,i,s,o,u,a,f,l){var c="dropdown-container",h=t.extend(u);return h.extend({name:"bselectdropdownview",classList:["shared",c],isEventManager:!0,moveNextFocusable:!0,options:{delay:250,animDelay:20,focusableClass:"bv-focusable",containerClass:"bv-absolute-top-container",cleanslateClass:"bv-cleanslate",dropdownInClass:"bv-dropdown-in",dropdownOutClass:"bv-dropdown-out",dropdownClass:c,allowToggle:!1,startDelay:120,rightAlign:!1},events:{"click .bv-dropdown-item":"select","keydown .bv-dropdown-item":"_select"},enter:function(e){clearTimeout(this.keyEventId)},leave:function(e){var t=this;this.removeFocusLayer(),clearTimeout(this.keyEventId),this.keyEventId=setTimeout(function(){t.detach()},this.options.delay)},topPositionModifier:function(e){return e},leftPositionModifier:function(e){return e},rightPositionModifier:function(e){return e},render:function(e){var n=this;if(!this.$el||!this.$el.length)this.$el=i("<div/>").addClass(this.options.cleanslateClass).addClass(this.options.containerClass).addClass(this.options.dropdownOutClass);this.options.aboveModestBox&&this.$el.addClass("bv-above-mbox"),e=r.extend({},e,{version:t.config.version}),this.$el.html(this.toHTML(e)),this.attach(),new o(this.$el.get(0)),this._position(),this._positionHandler=function(){n._position()},i(s).on("orientationchange",this._positionHandler),this.rendered?clearTimeout(this.detachKey):(this.$el.removeClass(this.options.dropdownInClass),this.startKey=setTimeout(function(){n.$el.appendTo(l()),setTimeout(function(){n.$el.addClass(n.options.dropdownInClass).removeClass(n.options.dropdownOutClass),n.model.trigger("dropdownRendered")},n.options.animDelay),n.rendered=!0},this.options.startDelay))},_position:function(){var e=this.parent.$targetEl.find(".bv-dropdown-target").first(),t=e.offset(),n=this.width,r=this.height,i,s=parseInt(e.css("margin-left"),10)||0,o=this.topPositionModifier(t.top)+e.outerHeight();typeof n=="function"&&(n=Math.ceil(n()+10)),typeof r=="function"&&(r=r()),this.options.rightAlign&&(i=t.left+e.outerWidth()-n-2+s,i=this.rightPositionModifier(i));if(i<0||!this.options.rightAlign)i=this.leftPositionModifier(t.left);var u={top:o+"px",left:i+"px",width:n+"px",height:r+"px"};this.$el.css(u)},detach:function(e){function n(){t.$el.detach(),t.rendered=!1}h.prototype.detach.call(this);var t=this;this.removeFocusLayer(),t.$el.addClass(t.options.dropdownOutClass),i(s).off("orientationchange",this._positionHandler),clearTimeout(this.detachKey),e?n():t.detachKey=setTimeout(n,260)},_select:function(e){e.keyCode===f.ENTER&&this.select(e)},select:function(e){var t=i(e.target).closest("[data-bv-dropdown-value]"),r=t.data("bv-dropdown-value");if(!this.options.allowToggle&&r===this._currentValue)return;this._currentValue=r,this.parent.$select.val(r).change(),this.detach(),this.parent.setText(i.trim(t.text()));var s=parseInt(r,10),o,u;s?(u="Filter",o=r+"Star"+(s>1?"s":"")):(u="Sort",o=r),n.feature({type:"Used",name:u,detail1:o,bvProduct:a.getType(this),productId:a.getId(this),categoryId:a.getCategoryId(this)})},attach:function(){var n=t.prototype.attach.apply(this,arguments),r=this.options;return this.$el.find(".bv-"+r.dropdownClass).off("mouseenter").on("mouseenter",i.proxy(this.enter,this)).off("mouseleave").on("mouseleave",i.proxy(this.leave,this)),this.$focusables=this.$el.find("."+r.focusableClass),this.$first=this.$focusables.first(),this.$last=this.$focusables.last(),this.focusLayer=this.registerFocusableLayer(this.$el,"."+r.focusableClass),this.listenTo(e,"focusLayerRemoved",this.focusLayerRemoved),this.$("ul").hover(function(){i(this).addClass("bv-dropdown-active")},function(){i(this).removeClass("bv-dropdown-active")}),this.setupKeyboardNavigation(),n},setupKeyboardNavigation:function(){var e=this;e.$focusables.off("focus.bselectddv").on("focus.bselectddv",function(){i(this).parent("ul").addClass("bv-dropdown-active"),i(this).addClass("bv-dropdown-item-hover"),clearTimeout(e.keyEventId)}),e.$focusables.off("blur.bselectddv").on("blur.bselectddv",function(){i(this).parent("ul").removeClass("bv-dropdown-active"),i(this).removeClass("bv-dropdown-item-hover")}),e.$focusables.off("keydown.bselectddv").on("keydown.bselectddv",function(t){t.keyCode===f.ESCAPE&&(t.preventDefault(),t.stopPropagation(),e.deregisterFocusableLayerById(e.focusLayer))})},focusLayerRemoved:function(e){e.focusLayer.$layerRoot===this.$el&&(delete this.focusLayer,this.leave())},removeFocusLayer:function(){this.focusLayer&&(this.stopListening(e,"focusLayerRemoved"),this.deregisterFocusableLayerById(this.focusLayer),delete this.focusLayer)}})}),BV.define("hbs!categorySelectDropdown",["hbs","vendor/handlebars/runtime","template/helpers/view"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i;r+=' <!--[if lt IE 7]> <div class="bv-compat bvie6 bvie-lt8 bvie"> <![endif]--> <!--[if IE 7]> <div class="bv-compat bvie7 bvie-lt8 bvie"> <![endif]--> <!--[if IE 8]> <div class="bv-compat bvie8 bvie"> <![endif]--> <!--[if IE 9]> <div class="bv-compat bvie9 bvie"> <![endif]--> <!--[if gt IE 9]><div class="bv-compat"><![endif]--> <div class="bv-dropdown"> <ul role="menuitem"> ',i=n.each.call(e,e.subCategories,{hash:{},inverse:c.noop,fn:c.program(2,d,t)});if(i||i===0)r+=i;return r+=" </ul> </div> <!--[if gte IE 7]></div><![endif]--> ",r}function d(e,t){var r="",i;return r+=' <li class="bv-dropdown-item bv-focusable" data-bv-dropdown-value="',(i=n.Id)?i=i.call(e,{hash:{}}):(i=e.Id,i=typeof i===f?i.apply(e):i),r+=l(i)+'" tabindex="0" role="menuitem"> ',(i=n.Name)?i=i.call(e,{hash:{}}):(i=e.Name,i=typeof i===f?i.apply(e):i),r+=l(i)+" </li> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+=' <div class="bv-core-container-',(o=n.version)?o=o.call(t,{hash:{}}):(o=t.version,o=typeof o===f?o.apply(t):o),s+=l(o)+'"> ',a={hash:{tag:"div",classList:"select-dropdown"},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.view,o?o.call(t,t,a):h.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" </div> ",s});return t.registerPartial("categorySelectDropdown",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/categorySelectDropdown",["bv/ui-core/bselectdropdownview","underscore","hbs!categorySelectDropdown","bv/util/focusManager","mf!bv/c2013/messages/genericSubmission","util/specialKeys","jquery"],function(e,t,n,r,i,s,o){return e.extend({name:"categorySelectDropdown",width:226,height:400,template:n,msgpacks:[i],init:function(){this.classList.push("category-select-dropdown"),this.options.rightAlign=!0},topPositionModifier:function(e){return e+5},rightPositionModifier:function(e){return e+15},select:function(e){this.detach(),this.deregisterFocusableLayer(!0),this.parent.change(e)},setupKeyboardNavigation:function(){var e=this,n={};t(["TAB","SPACE","UP","DOWN"]).each(function(e){n[s[e]]=!0}),e.$focusables.off("focus").on("focus",function(){o(this).parent("ul").addClass("bv-dropdown-active"),o(this).addClass("bv-dropdown-item-hover"),clearTimeout(e.keyEventId)}),e.$focusables.off("blur").on("blur",function(){o(this).parent("ul").removeClass("bv-dropdown-active"),o(this).removeClass("bv-dropdown-item-hover")}),e.$focusables.off("keyup").on("keyup",function(t){t.keyCode===s.ESCAPE&&(t.preventDefault(),t.stopPropagation(),e.deregisterFocusableLayer())}),e.$el.off("keydown.CategorySelectDropdownView").on("keydown.CategorySelectDropdownView",function(t){var i=t.keyCode;if(!n[i])return;var u=!1;switch(i){case s.TAB:u=!0,e.leave(t);var a=t.shiftKey?"focusPrev":"focusNext";r[a]();break;case s.SPACE:u=!0,o(t.target).click();break;case s.UP:document.activeElement===e.$first[0]&&(u=!0,r.moveFocus(e.$last));break;case s.DOWN:document.activeElement===e.$last[0]&&(u=!0,r.moveFocus(e.$first))}u&&(t.preventDefault(),t.stopPropagation())})}})}),BV.define("bv/c2013/view/categorySelect",["bv/ui-core/bselectview","underscore","hbs!categorySelect","bv/c2013/view/categorySelectDropdown","mf!bv/c2013/messages/genericSubmission","jquery","document","bv/util/focusManager","util/specialKeys"],function(e,t,n,r,i,s,o,u,a){return e.extend({targetEl:".bv-category-select-target",selectEl:".bv-dropdown-select",name:"categorySelect",events:{"change select":"change"},template:n,TargetView:r,msgpacks:[i],change:function(e){var t=s(e.target).closest("[data-bv-dropdown-value]"),n=t.data("bv-dropdown-value");this.model.categorySelected(n)},setupKeyboardNavigation:function(e){var n=this;e=e||n.$targetEl,e.off("click.bhoverableview").on("click.bhoverableview",function(r){r.preventDefault(),r.stopPropagation(),n.$viewEl.find(".bv-button-proxy")[0].focus(),n.targetViewOptions=t.extend({},n.targetViewOptions,{startDelay:0}),n.enter(r),e[0].focus()}),e.off("keyup.categorySelect").on("keyup.categorySelect",function(e){e.keyCode===a.ESCAPE&&(n.leave(e),e.preventDefault(),e.stopPropagation())})}})}),BV.define("mf!bv/c2013/messages/productItemCollection",["vendor/messageformat","framework/util/bvtrackerqueue"],function(e,t){return{product_item_collection_no_results:function(e){try{return function(e){var t="";return t+="No products found",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `product_item_collection_no_results`: "+n.toString())]),""}},product_item_collection_in_category:function(e){try{return function(e){var t="";return t+="in",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `product_item_collection_in_category`: "+n.toString())]),""}},product_item_collection_other_categories:function(e){try{return function(e){var t="";return t+="in all categories",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `product_item_collection_other_categories`: "+n.toString())]),""}}}}),BV.define("bv/c2013/collection/productItemCollection",["framework/bcollection","framework/bmodel","underscore","bv/api/fetch","util/url","ENV","bv/util/pageInfo","mf!bv/c2013/messages/productItemCollection"],function(e,t,n,r,i,s,o,u){return e.extend({name:"productItemCollection",pageSize:12,model:t,init:function(e,t){var r=this;n(this).extend(t);var i=this.getComponent().clientAPIConfig;this.categoryId=i.categoryId,this.rootCategoryId=i.withCategoryList?this.categoryId:-1,this.showProductList=!i.withCategoryList,this.familyProductId=i.familyProductId,this.productsPerRow=this.getComponent().productsPerRow||4,this.subscribe({searchcontent:this.fetchProducts,searchcleared:this.clearProducts,"change:categoryId":this.clearProducts}),this.hasFeature("searchOnly")?(this.isSearchOnly=!0,this.subscribeOnce("pageto",function(){this.subscribe("pageto",this.fetchProducts)})):this.subscribe({pageto:this.fetchProducts})},attachDataReady:function(){this.on("productDataReady",function(e,t){var n=o("product",this.currentPage,e.TotalResults===0?0:e.Results.length,e.TotalResults,this.pageSize,!1);n.start=n.orphanEnd?n.total:1,t&&this.reset(),this.loadMore(e.Results),e.TotalResults===0&&(n.message=u.product_item_collection_no_results()),this.isSearchOnly?n.inlineMessage=u.product_item_collection_other_categories():n.inlineMessage=u.product_item_collection_in_category(),this._dataReadyDfd.state()!=="resolved"&&(this.dataReady(e),this.dataProcessed(e)),this.publish("pageinfo",n,{instanceName:this.getInstanceName()})}),(this.isSearchOnly||!this.showProductList)&&this.trigger("productDataReady",{Results:[],TotalResults:0},!1)},fetchProducts:function(e,t,i){if(!this.showProductList){if(!t)return;this.showProductList=!0}if(this.hasFeature("instanceNameScope")&&i&&i.instanceName!==this.getInstanceName())return;if(this.hasFeature("instanceNameScope")&&t&&this.getInstanceName()==="unfiltered"&&(typeof this.categoryId=="undefined"||this.categoryId===null))return;var s=this;this.currentPage=e,t&&(t===""?this.searchText=null:this.searchText=t);var o=r.get("products").offset((e-1)*this.pageSize).sortBy("asc","Name").limit(this.pageSize).filterBy("isActive");this.familyProductId?o.filterBy("id","=",this.familyProductId).include("products").limitIncluded("products").to(20):(this.categoryId&&(this.hasFeature("filterByCategory")?o.filterBy("categoryancestorid","=",this.categoryId):this.hasFeature("filterWithoutCategory")&&o.filterBy("categoryancestorid","!=",this.categoryId)),this.searchText&&o.searchFor(this.searchText)),o.fetch(s.name).done(function(e){e=e.data,s.familyProductId&&e&&e.Results&&e.Includes&&e.Includes.Products&&n(e.Includes.ProductsOrder).forEach(function(t){var r=e.Includes.Products[t];n(e.Results).contains(r)||e.Results.push(r)}),s.trigger("productDataReady",e,!!t)})},clearProducts:function(e){e!==undefined?(this.categoryId=e,this.showProductList=e!==this.rootCategoryId):this.showProductList=this.categoryId!==this.rootCategoryId,this.reset(),delete this.searchText,this.isSearchOnly||!this.showProductList?this.trigger("productDataReady",{Results:[],TotalResults:0},!1):this.fetchProducts(1)},productItemSelected:function(e){this.publish("productItemSelected",e)}})}),BV.define("hbs!productItems",["hbs","vendor/handlebars/runtime","template/helpers/ensureProtocolRelative"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.Id,{hash:{},inverse:l.noop,fn:l.program(2,h,t)});if(i||i===0)r+=i;return r+=" ",r}function h(e,t){var r="",i,s,o;r+=' <li class="bv-product-item"> <button type="button" class="bv-product-item-btn bv-focusable" data-bv-product-id="',(i=n.Id)?i=i.call(e,{hash:{}}):(i=e.Id,i=typeof i===u?i.apply(e):i),r+=a(i)+'"> <ul class="bv-content-media-container" role="presentation"> <li class="bv-media-item bv-media-item-photo" itemprop="image" itemscope itemtype="http://schema.org/ImageObject"> <div class="bv-media-item-wrapper"> <meta itemprop="image" content="',o={hash:{}},r+=a((i=n.ensureProtocolRelative,i?i.call(e,e.ImageUrl,o):f.call(e,"ensureProtocolRelative",e.ImageUrl,o)))+'"> <img src="',(s=n.ImageUrl)?s=s.call(e,{hash:{}}):(s=e.ImageUrl,s=typeof s===u?s.apply(e):s),r+=a(s)+'" alt="" title="',(s=n.Name)?s=s.call(e,{hash:{}}):(s=e.Name,s=typeof s===u?s.apply(e):s),r+=a(s)+'" /> </div> </li> <li class="bv-media-item-name">',(s=n.Name)?s=s.call(e,{hash:{}}):(s=e.Name,s=typeof s===u?s.apply(e):s),r+=a(s)+"</li> ",s=n.each.call(e,e.ModelNumbers,{hash:{},inverse:l.noop,fn:l.program(3,p,t)});if(s||s===0)r+=s;return r+=" </ul> </button> </li> ",r}function p(e,t){var n="";return n+=' <li class="bv-media-item-name">'+a(typeof e===u?e.apply(e):e)+"</li> ",n}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=n.helperMissing,l=this;o=n.each.call(t,t,{hash:{},inverse:l.noop,fn:l.program(1,c,i)});if(o||o===0)s+=o;return s+=" ",s});return t.registerPartial("productItems",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!productItemCollection",["hbs","vendor/handlebars/runtime","hbs!productItems","template/helpers/view"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var i="",s;i+=" ",s=f.invokePartial(r.productItems,"productItems",e,n,r);if(s||s===0)i+=s;return i+=" ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=this,l=n.helperMissing;s+=" ",a={hash:{tag:"ol",alwaysRender:!0,role:"presentation"},inverse:f.noop,fn:f.program(1,c,i)},u=(o=n.view,o?o.call(t,t,a):l.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("productItemCollection",n),n.deps=["productItems"],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/productItemCollection",["ENV","framework/bview","hbs!productItemCollection","hbs!productItems","bv/ui-core/focusableview","jquery","underscore","bv/util/loadingOverlay"],function(e,t,n,r,i,s,o,u){var a=t.extend(i);return a.extend({name:"productItemCollection",template:n,events:{"click .bv-product-item-btn":"productItemSelected"},classList:["product-list"],init:function(){this.classList.push("product-list-"+this.model.productsPerRow+"-col")},modelDataReady:function(){t.prototype.modelDataReady.call(this),this.listenTo(this.model,{loadmore:this.loadMore}),this.model.on("reset",this.reset,this)},reset:function(){this.render(),this.rescanFocusLayer()},loadMore:function(e,t){var n=o(t).map(function(e){return e.toJSON()}),i=r(n);this.$viewEl.append(i),this.rescanFocusLayer(),this.model.searchText&&this.$viewEl.find(".bv-media-item-name").bvhighlight({searchFor:this.model.searchText}),u.hide()},productItemSelected:function(e){var t=s(e.currentTarget).attr("data-bv-product-id");this.model.productItemSelected(t)}})}),BV.define("bv/c2013/model/loadMore",["ENV","bv/c2013/model/pagination","underscore"],function(e,t,n){return t.extend({name:"loadMore",defaults:n.extend({},t.defaults,{loadMore:!0}),init:function(e,n){t.prototype.init.call(this,e,n),this.set("infiniteScroll",!this.get("clientAPIConfig").suppressScrollMore&&this.hasFeature("infiniteScroll"))}})}),BV.define("_i18n_paginationLoadMore",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";return t+="Load More",t}(e)}catch(t){return r.push(["error",new Error("MF error on `paginationLoadMore`: "+t.toString())]),""}}return t.registerHelper("_i18n_paginationLoadMore",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("hbs!loadMore",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/unlessHasFeature","_i18n_paginationLoadMore"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.total,{hash:{},inverse:l.noop,fn:l.program(2,p,t)});if(i||i===0)r+=i;return r+=" ",r}function p(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.showPages,{hash:{},inverse:l.noop,fn:l.program(3,d,t)});if(i||i===0)r+=i;return r+=" ",r}function d(e,t){var r="",i,s,o;r+='  <div class="bv-content-pagination-container"> ',o={hash:{},inverse:l.program(7,g,t),fn:l.program(4,v,t)},s=(i=n.unlessHasFeature,i?i.call(e,"infiniteScroll",o):c.call(e,"unlessHasFeature","infiniteScroll",o));if(s||s===0)r+=s;return r+=" </div> ",r}function v(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.allowNext,{hash:{},inverse:l.noop,fn:l.program(5,m,t)});if(i||i===0)r+=i;return r+=" ",r}function m(e,t){var r="",i;r+=' <button type="button" class="bv-content-btn bv-content-btn-pages bv-content-btn-pages-load-more bv-focusable"> <span class="bv-content-btn-pages-load-more-text">  ',(i=n._i18n_paginationLoadMore)?i=i.call(e,{hash:{}}):(i=e._i18n_paginationLoadMore,i=typeof i===f?i.apply(e):i);if(i||i===0)r+=i;return r+=" </span> </button> ",r}function g(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.allowNext,{hash:{},inverse:l.noop,fn:l.program(8,y,t)});if(i||i===0)r+=i;return r+=" ",r}function y(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.infiniteScroll,{hash:{},inverse:l.noop,fn:l.program(9,b,t)});if(i||i===0)r+=i;return r+=" ",r}function b(e,t){return' <div class="bv-load-more-spinner"/> '}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this,c=n.helperMissing;a={hash:{tag:"div",classList:"content-pagination",alwaysRender:!0},inverse:l.noop,fn:l.program(1,h,i)},u=(o=n.view,o?o.call(t,t,a):c.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("loadMore",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/loadMore",["bv/c2013/view/pagination","bv/util/productInfo","bv/util/loadingOverlay","framework/bview","jquery","underscore","hbs!loadMore"],function(e,t,n,r,i,s,o){return e.extend({name:"loadMore",events:{"click .bv-content-btn-pages-load-more":"morePageClicked"},template:o,modelDataReady:function(e){this.throttledPageTo=s(this.pageTo).throttle(100),this.model.get("infiniteScroll")&&(this.scrollEventName="scroll.bv-"+this.name+":"+this.uniq,this.registerScrollEvent(),this.subscribe("bv-component-show",this.registerScrollEvent,this),this.subscribe("bv-component-hide",this.unregisterScrollEvent,this))},stateChanged:function(t){e.prototype.stateChanged.call(this,t),this.scrollMore()},morePageClicked:function(e){if(this.parent.name==="secondaryContentList"){var t=this.parent.$viewEl.find(".bv-content-item-hidden");if(t.length>0){t.removeClass("bv-content-item-hidden");return}}var n=this.model.get("currentPage")+1;this.pageTo(n)},pageTo:function(e){var r={srcControl:this.parent.name==="genericSubmission"?"GWAR":"Next",loadMore:!0,bvProduct:t.getType(this),productId:t.getId(this)};n.show(),this.model.pageTo(e,r)},stopListening:function(e){this.unregisterScrollEvent(),r.prototype.stopListening.apply(this,arguments)},attach:function(t){var n=e.prototype.attach.call(this,t);return this.scrollMore(),n},scrollMore:function(){if(!this.model.get("infiniteScroll")||!this.$viewEl||!this.model.get("allowNext"))return;var e=i(window).height(),t=i(window).scrollTop(),n=this.$viewEl.offset().top,r=(t+e)/n;if(r>=.8){var s=this.model.get("currentPage")+1;this.throttledPageTo(s)}},registerScrollEvent:function(){this.scrollEventRegistered||(i(window).on(this.scrollEventName,s(s(this.scrollMore).debounce(200)).bind(this)),this.scrollEventRegistered=!0)},unregisterScrollEvent:function(){i(window).off(this.scrollEventName),this.scrollEventRegistered=!1}})}),BV.define("bv/c2013/model/ratingItem",["ENV","framework/bmodel","underscore"],function(e,t,n){return t.extend({options:{},name:"ratingItem",init:function(e,t){n.extend(this.options,t)},index:function(){return this.get("parent").indexOf(this)},remove:function(e){this.get("parent").remove(this,e)},toJSON:function(){return{Product:this.get("Product"),ClientName:e.get("config").clientname,IsRatingItem:!0}}})}),BV.define("bv/c2013/collection/ratingItemCollection",["framework/bcollection","underscore","bv/c2013/model/ratingItem","bv/api/fetch","util/url","util/array","ENV","jquery","vendor/json2","framework/util/ie"],function(e,t,n,r,i,s,o,u,a,f){return f=f(),e.extend({model:n,name:"ratingItemCollection",statsTypes:["Reviews"],_processProductIds:function(e){var n={};return t(e).each(function(e,r){if(e)if(t(e).isObject()){var i={_Id:e._origId||r};t(e.url).isEmpty()||(i._Url=e.url),t(e.containerId).isEmpty()||(i._ContainerId=e.containerId),n[r.toLowerCase()]=i}else{var s=(e+"").toLowerCase();n[s]={_Id:u.trim(e+"")}}}),n},_chunkProductIds:function(e){var n=s.chunk(e,100),r=f&&f<9?1800:null,i=[];return t(n).forEach(function(e){var t=s.chunkWithLimit(e,Number.MAX_VALUE,function(e){return e.length},r);i=i.concat(t)}),i},fetchContent:function(e,n){var i=this,s=t(e.productIds).isString()?e.productIds.split(","):e.productIds,o=this._processProductIds(s),u=this.subjectIds=t(o).keys();if(t(u).isEmpty())return;var f=this._chunkProductIds(u),l=[];t(f).forEach(function(e,n){var s=r.get("statistics").withStatsOn(i.statsTypes);s.filterBy("productid",e.join()),s.limit(e.length),s.fetch("inlineRatings"+n).done(function(n){var r=a.parse(a.stringify(n.data.Results));if(n.data.TotalResults<e.length){var s=t(r).map(function(e){return e.Product.Id.toLowerCase()}),u=t.difference(e,s);t(u).each(function(e){var t={Product:{Id:e,Reviews:{Statistics:{AverageOverallRating:0,OverallRatingRange:5,TotalCount:0,TotalReviewCount:0}}},Type:"statistics"};r.push(t)}),n.data.TotalResults=e.length}i._addClientInputs(r,e,o),i.add(r)})})},_addClientInputs:function(e,n,r){t(e).map(function(e){var i=e.Product.Id.toLowerCase();return t(n).contains(i)&&t(e.Product).extend(r[i]),e})}})}),BV.define("bv/c2013/model/ratingList",["ENV","jquery","framework/bmodel","util/url","underscore","bv/c2013/collection/ratingItemCollection","bv/util/pageInfo","BV","bv/api"],function(e,t,n,r,i,s,o,u,a){return n.extend({options:{},name:"ratingList",init:function(e,t){i.extend(this.options,t),this.subscribe("pageto",this.fetchContent);var n=this.get("content");this.dataReady()},setupDataProcessing:function(){},_initContent:function(){var e;return e=this.getFeatureModel("ratingItemCollection"),s?(this.set({content:e},{silent:!0}),e):null},processData:function(e){},getSubject:function(){return{type:"statistic",ids:this.get("clientAPIConfig").productIds,contentType:this.get("contentType")}},toJSON:function(){return n.prototype.toJSON.call(this)},getContent:function(){var e=this.get("content");if(!e){e=this._initContent();if(!e)return}return e},fetchContent:function(e){if(this.getComponent().model!==this)return;var t=this.get("activeFilters"),n=this.getContent();if(this.dataReadyPromise().state()!=="resolved"&&this.componentGet("initData"))return;n.fetchContent(this.get("clientAPIConfig"),t)}})}),BV.define("hbs!ratingList",["hbs","vendor/handlebars/runtime","template/helpers/view"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){return" "}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=this,l=n.helperMissing;s+=" ",a={hash:{tag:"div",classList:"ratingList"},inverse:f.noop,fn:f.program(1,c,i)},u=(o=n.view,o?o.call(t,t,a):l.call(t,"view",t,a));if(u||u===0)s+=u;return s});return t.registerPartial("ratingList",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/ratingList",["framework/bview","underscore","jquery","hbs!ratingList","window","bv/api","bv/util/productInfo","framework/util/bvtracker"],function(e,t,n,r,i,s,o,u){return e.extend({name:"ratingList",events:{"mouseenter .bv-shared":"hoverAnalytics"},classList:["core-container-"+e.config.version],template:r,toHTML:function(e,t){return arguments.length<2?"":n.Deferred().resolve("").promise()},hoverAnalytics:function(e){u.feature({type:"Used",name:"Hover",detail1:"InlineRatingDisplay",bvProduct:o.getType(this),productId:o.getId(this),categoryId:o.getCategoryId(this)})}})}),BV.define("hbs!prsStars",["hbs","vendor/handlebars/runtime","template/helpers/renderIcon","template/helpers/loop","template/helpers/ratingIconChar","template/helpers/percentage","template/helpers/ifHasFeature","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t,r){var i="",s,o,u;i+=" ",u={hash:{classList:"bv-rating-stars bv-rating-stars-off",ariaHidden:"true"},inverse:c.noop,fn:c.programWithDepth(d,t,r)},o=(s=n.renderIcon,s?s.call(e,"bv-sprite-prs-rating-stars-off",u):f.call(e,"renderIcon","bv-sprite-prs-rating-stars-off",u));if(o||o===0)i+=o;i+=' <span class="bv-rating-stars-on bv-rating-stars" style="width:',u={hash:{}},i+=l((s=n.percentage,s?s.call(e,e.AverageOverallRating,e.OverallRatingRange,1,u):f.call(e,"percentage",e.AverageOverallRating,e.OverallRatingRange,1,u)))+'% !important;" aria-hidden="true"> ',o=n.unless.call(e,r.IsRatingItem,{hash:{},inverse:c.program(6,g,t),fn:c.program(3,v,t)});if(o||o===0)i+=o;return i+=" </span> ",i}function d(e,t,r){var i="",s;i+=" ",s=n.unless.call(e,r.IsRatingItem,{hash:{},inverse:c.program(6,g,t),fn:c.program(3,v,t)});if(s||s===0)i+=s;return i+=" ",i}function v(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:c.noop,fn:c.program(4,m,t)},s=(i=n.loop,i?i.call(e,e.OverallRatingRange,e,o):f.call(e,"loop",e.OverallRatingRange,e,o));if(s||s===0)r+=s;return r+=" ",r}function m(e,t){var r,i;return i={hash:{}},l((r=n.ratingIconChar,r?r.call(e,"prs-rating-stars-on",i):f.call(e,"ratingIconChar","prs-rating-stars-on",i)))}function g(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:c.noop,fn:c.program(7,y,t)},s=(i=n.loop,i?i.call(e,e.OverallRatingRange,e,o):f.call(e,"loop",e.OverallRatingRange,e,o));if(s||s===0)r+=s;return r+=" ",r}function y(e,t){var r,i;return i={hash:{}},l((r=n.ratingIconChar,r?r.call(e,"category-rating-on",i):f.call(e,"ratingIconChar","category-rating-on",i)))}function b(e,t){var n="",r;return n+=' <meta itemprop="bestRating" content="'+l((r=(r=(r=(r=e.Product,r==null||r===!1?r:r.Reviews),r==null||r===!1?r:r.Statistics),r==null||r===!1?r:r.OverallRatingRange),typeof r===h?r.apply(e):r))+'"/> ',n}function w(e,t,r){var i="",s;i+=" ",s=n["if"].call(e,e.TotalCount,{hash:{},inverse:c.noop,fn:c.programWithDepth(E,t,r)});if(s||s===0)i+=s;return i+=" ",i}function E(e,t,r){var i="",s,o;return i+=' <span class="bv-off-screen">',o={hash:{}},i+=l((s=n.extmsg,s?s.call(e,"offscreen_summaryStars",r.msgpack,e,o):f.call(e,"extmsg","offscreen_summaryStars",r.msgpack,e,o)))+"</span> ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this,h="function";u=n["with"].call(t,(o=(o=t.Product,o==null||o===!1?o:o.Reviews),o==null||o===!1?o:o.Statistics),{hash:{},inverse:c.noop,fn:c.programWithDepth(p,i,t)});if(u||u===0)s+=u;s+=" ",a={hash:{},inverse:c.noop,fn:c.program(9,b,i)},u=(o=n.ifHasFeature,o?o.call(t,"aggregateRatingTag",a):f.call(t,"ifHasFeature","aggregateRatingTag",a));if(u||u===0)s+=u;s+=" ",u=n["with"].call(t,(o=(o=t.Product,o==null||o===!1?o:o.Reviews),o==null||o===!1?o:o.Statistics),{hash:{},inverse:c.noop,fn:c.programWithDepth(w,i,t)});if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("prsStars",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("template/helpers/fixedNumber",["vendor/handlebars/runtime"],function(e){function t(e,t){return e?e.toFixed(t):""}return e.registerHelper("fixedNumber",t),t}),BV.define("hbs!prsOverallRating",["hbs","vendor/handlebars/runtime","template/helpers/ifHasFeature","template/helpers/fixedNumber","template/helpers/mountView"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){var r="",i,s,o;r+=" ",o={hash:{}},s=(i=n.mountView,i?i.call(e,"histogram",e,o):f.call(e,"mountView","histogram",e,o));if(s||s===0)r+=s;return r+=" ",r}function p(e,t){var r="",i;r+=" ",i=n["with"].call(e,e.Product,{hash:{},inverse:l.noop,fn:l.program(4,d,t)});if(i||i===0)r+=i;return r+=" ",r}function d(e,t){var r="",i,s;r+=' <span class="bv-rating"><span',i=n["if"].call(e,e._Url,{hash:{},inverse:l.noop,fn:l.program(5,v,t)});if(i||i===0)r+=i;return r+=' itemprop="ratingValue" aria-hidden="true">',s={hash:{}},r+=c((i=n.fixedNumber,i?i.call(e,(i=(i=e.Reviews,i==null||i===!1?i:i.Statistics),i==null||i===!1?i:i.AverageOverallRating),1,s):f.call(e,"fixedNumber",(i=(i=e.Reviews,i==null||i===!1?i:i.Statistics),i==null||i===!1?i:i.AverageOverallRating),1,s)))+"</span></span> ",r}function v(e,t){return' class="bv-text-link"'}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this,c=this.escapeExpression;a={hash:{},inverse:l.program(3,p,i),fn:l.program(1,h,i)},u=(o=n.ifHasFeature,o?o.call(t,"histogram",t,a):f.call(t,"ifHasFeature","histogram",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("prsOverallRating",n),n.deps=[],n.tplMountedViews=["histogram"],n}),BV.define("_i18n_categoryTotalReviewCount",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(t){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalCount",i=t[r],s=0,o={one:function(e){var t="";t+="(";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalCount,t+=")",t},other:function(e){var t="";t+="(";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalCount,t+=")",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}(t)}catch(n){return r.push(["error",new Error("MF error on `categoryTotalReviewCount`: "+n.toString())]),""}}return t.registerHelper("_i18n_categoryTotalReviewCount",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("hbs!categoryTotalCount",["hbs","vendor/handlebars/runtime","_i18n_categoryTotalReviewCount"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){return" bv-text-link"}function c(e,t){var r="",i,s,o;r+="  ",o={hash:{}},s=(i=n._i18n_categoryTotalReviewCount,i?i.call(e,e,o):a.call(e,"_i18n_categoryTotalReviewCount",e,o));if(s||s===0)r+=s;return r+=" ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a=n.helperMissing,f=this;s+='<span class="bv-rating-label',u=n["if"].call(t,(o=t.Product,o==null||o===!1?o:o._Url),{hash:{},inverse:f.noop,fn:f.program(1,l,i)});if(u||u===0)s+=u;s+='"> ',u=n["with"].call(t,(o=(o=t.Product,o==null||o===!1?o:o.Reviews),o==null||o===!1?o:o.Statistics),{hash:{},inverse:f.noop,fn:f.program(3,c,i)});if(u||u===0)s+=u;return s+=" </span> ",s});return t.registerPartial("categoryTotalCount",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!categoryStars",["hbs","vendor/handlebars/runtime","hbs!prsStars","hbs!prsOverallRating","hbs!categoryTotalCount","template/helpers/ifHasFeature"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:l.program(6,m,t),fn:l.program(2,p,t)},s=(i=n.ifHasFeature,i?i.call(e,"aggregateRatingTag",o):c.call(e,"ifHasFeature","aggregateRatingTag",o));if(s||s===0)r+=s;r+=" ",o={hash:{},inverse:l.noop,fn:l.program(8,g,t)},s=(i=n.ifHasFeature,i?i.call(e,"stars",e,o):c.call(e,"ifHasFeature","stars",e,o));if(s||s===0)r+=s;r+=" ",o={hash:{},inverse:l.noop,fn:l.program(18,x,t)},s=(i=n.ifHasFeature,i?i.call(e,"overallRating",e,o):c.call(e,"ifHasFeature","overallRating",e,o));if(s||s===0)r+=s;r+=" ",o={hash:{},inverse:l.noop,fn:l.program(21,N,t)},s=(i=n.ifHasFeature,i?i.call(e,"reviewCount",e,o):c.call(e,"ifHasFeature","reviewCount",e,o));if(s||s===0)r+=s;return r+=" </dl> ",r}function p(e,t){var r="",i,s;r+=' <dl class="bv-stars-container" itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating" role="presentation"> ',s=n["if"].call(e,(i=e.Product,i==null||i===!1?i:i.Reviews),{hash:{},inverse:l.noop,fn:l.program(3,d,t)});if(s||s===0)r+=s;return r+=" ",r}function d(e,t){var r="",i,s;r+=" ",s=n["if"].call(e,(i=e.Product,i==null||i===!1?i:i.Name),{hash:{},inverse:l.noop,fn:l.program(4,v,t)});if(s||s===0)r+=s;return r+=" ",r}function v(e,t){var n="",r;return n+='<meta itemprop="itemReviewed" content="'+f((r=(r=e.Product,r==null||r===!1?r:r.Name),typeof r===a?r.apply(e):r))+'"/>',n}function m(e,t){return' <dl class="bv-stars-container" role="presentation"> '}function g(e,t){var r="",i,s;r+=" ",s=n["if"].call(e,(i=(i=e.Product,i==null||i===!1?i:i.Reviews),i==null||i===!1?i:i.Statistics),{hash:{},inverse:l.noop,fn:l.program(9,y,t)});if(s||s===0)r+=s;return r+=" ",r}function y(e,t){var i="",s,o;i+=' <dd class="bv-rating-ratio" role="presentation"> ',o=n["if"].call(e,(s=e.Product,s==null||s===!1?s:s._Url),{hash:{},inverse:l.program(12,w,t),fn:l.program(10,b,t)});if(o||o===0)i+=o;i+=" ",o=l.invokePartial(r.prsStars,"prsStars",e,n,r);if(o||o===0)i+=o;i+=" ",o=n["if"].call(e,(s=e.Product,s==null||s===!1?s:s._Url),{hash:{},inverse:l.program(16,S,t),fn:l.program(14,E,t)});if(o||o===0)i+=o;return i+=" </dd> ",i}function b(e,t){var n="",r;return n+=' <a href="'+f((r=(r=e.Product,r==null||r===!1?r:r._Url),typeof r===a?r.apply(e):r))+'" class="bv-rating-stars-container bv-focusable"> ',n}function w(e,t){return' <span class="bv-rating-stars-container"> '}function E(e,t){return" </a> "}function S(e,t){return" </span> "}function x(e,t){var r="",i,s;r+=" ",s=n["if"].call(e,(i=(i=(i=e.Product,i==null||i===!1?i:i.Reviews),i==null||i===!1?i:i.Statistics),i==null||i===!1?i:i.AverageOverallRating),{hash:{},inverse:l.noop,fn:l.program(19,T,t)});if(s||s===0)r+=s;return r+=" ",r}function T(e,t){var i="",s;i+=' <dd class="bv-rating-ratio-number" role="presentation"> ',s=l.invokePartial(r.prsOverallRating,"prsOverallRating",e,n,r);if(s||s===0)i+=s;return i+=" </dd> ",i}function N(e,t){var r="",i,s;r+=" ",s=n["if"].call(e,(i=(i=e.Product,i==null||i===!1?i:i.Reviews),i==null||i===!1?i:i.Statistics),{hash:{},inverse:l.noop,fn:l.program(22,C,t)});if(s||s===0)r+=s;return r+=" ",r}function C(e,t){var i="",s;i+=' <dd class="bv-rating-ratio-count" role="presentation"> ',s=l.invokePartial(r.categoryTotalCount,"categoryTotalCount",e,n,r);if(s||s===0)i+=s;return i+=" </dd> ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.helperMissing;u=n["if"].call(t,(o=(o=t.Product,o==null||o===!1?o:o.Reviews),o==null||o===!1?o:o.Statistics),{hash:{},inverse:l.noop,fn:l.program(1,h,i)});if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("categoryStars",n),n.deps=["prsStars","prsOverallRating","categoryTotalCount"],n.tplMountedViews=[],n}),BV.define("hbs!ratingItem",["hbs","vendor/handlebars/runtime","hbs!categoryStars","template/helpers/view"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var i="",s;i+=' <!--[if lt IE 7]> <div class="bv-compat bvie6 bvie-lt8 bvie"> <![endif]--> <!--[if IE 7]> <div class="bv-compat bvie7 bvie-lt8 bvie"> <![endif]--> <!--[if IE 8]> <div class="bv-compat bvie8 bvie"> <![endif]--> <!--[if IE 9]> <div class="bv-compat bvie9 bvie"> <![endif]--> <!--[if gt IE 9]> <!--><div class="bv-compat"> <!--<![endif]--> <div class="bv-inline-rating-container"> ',s=f.invokePartial(r.categoryStars,"categoryStars",e,n,r);if(s||s===0)i+=s;return i+=" </div> </div> ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=this,l=n.helperMissing;s+=' <div class="bv-cleanslate"> ',a={hash:{tag:"div",classList:"shared"},inverse:f.noop,fn:f.program(1,c,i)},u=(o=n.view,o?o.call(t,t,a):l.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" </div>",s});return t.registerPartial("ratingItem",n),n.deps=["categoryStars"],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/ratingItem",["framework/bview","framework/util/bvtracker","bv/strings","hbs!ratingItem","mf!bv/c2013/messages/common","jquery","bv/api","window"],function(e,t,n,r,i,s,o,u){return e.extend({name:"ratingItem",template:r,msgpacks:[i],classList:["core-container-"+e.config.version],events:{"click .bv-rating-ratio-number":"goToProductUrl","click .bv-rating-ratio-count":"goToProductUrl"},attach:function(e){var t=this,n=t.model.get("Product");t.triedOnce=!1;if(!n||!t.containerPrefix&&!n._ContainerId)return;t._findAndRender()},_findAndRender:function(){var e=this,r=e.model.get("Product"),i=r._ContainerId,o="#"+e.containerPrefix+"-"+r._Id,u="#"+e.containerPrefix+"-"+r.Id.toLowerCase(),a=i&&s("#"+i)[0]||s(o)[0]||s(u)[0];if(a)e._renderRating(s(a));else{if(s.isReady||e.triedOnce){t.error({name:n.errors.IMPLEMENTATION,detail1:"Could not find required element for inline ratings"});return}e.triedOnce=!0,s(function(){e._findAndRender()})}},_renderRating:function(e){e.length>0&&(this.setElement(e.empty()[0]),this.$el.append(this.toHTML()),this.getEventManager().delegateSubviewEvents(this))},goToProductUrl:function(){var e=this.model.get("Product"),t=e&&e._Url;t&&(u.location=t)}})}),BV.define("bv/c2013/view/ratingItemCollection",["bv/c2013/view/contentItemCollection","hbs!contentItemCollection","bv/c2013/view/ratingItem","bv/util/contentType","bv/util/cssLoadCheck"],function(e,t,n,r,i){return e.extend({name:"ratingItemCollection",templateName:"contentItemCollection",init:function(e){this.listenTo(this.model,{add:this.addContent})},modelDataReady:function(){this.views=[]},addContent:function(e,t,s){var o=e.get("Type")||e.contentType||e.get("contentType"),u=new n({model:e,config:e,componentId:e.componentId||e.get("componentId"),contentType:r.Nouns(o),secondaryContentType:e.secondaryContentType||e.get("secondaryContentType"),index:this.views.length,classList:["rating-top-"+r.noun(o)],parent:this});this.views.push(u),i.done(function(){u.render()})}})}),BV.define("bv/c2013/model/summary",["ENV","framework/bmodel","underscore","bv/api/fetch","util/url","bv/api/util/statsRequest"],function(e,t,n,r,i,s){return t.extend({options:{},name:"summary",init:function(t,r){n.extend(this.options,r);var i=this,s=e.get("componentManager"),o=s.find(i.get("componentId"));!n(o).isArray()&&!n(o).isEmpty()&&(this.set("coverageContentTypes",o.coverageContentTypes),this.set("submissionContentTypes",o.submissionContentTypes)),this.subscribe("pageto",this.fetchContent)},setupDataProcessing:function(){this.subscribe("contentresponse",this.processData)},processData:function(e){var t=n.clone(e);t.PrimaryContent=t.Content?t.Content.Reviews:{},this.set({Product:t,subject:t}),this.dataReady(this.attributes)},fetchContent:function(t){var i=this,o=e.get("config"),u=n.extend({},o.clientAPIConfig,this.get("clientAPIConfig")),a=u[r.noun(this.get("subjectType"))+"Id"],f=this.get("coverageContentTypes"),l=o.statistics.onlyShowDisplayedLocaleStatistics,c=r.get("batch",null,[s({subjectId:a})]);c.fetch(i.name).done(function(t){var s=n(t).find(function(e){return e.contentType==="products"}).data,u=s.Results[0],c=0;u.Id=u.Id||a,u.Content.Reviews&&(l?u.Content.Reviews.Statistics=u.Content.Reviews.FilteredStatistics:u.Content.Reviews.Statistics=u.Content.Reviews.RawStatistics),n(f).forEach(function(e){var t=r.Nouns(e);u.Content&&u.Content[t]?(u[t]=u.Content[t],c+=u[t].Statistics.TotalCount):u[t]={List:[],Statistics:{TotalCount:0,OverallRatingRange:o.submission.rating.range[1]}}}),u.TotalContentCount=c,e.get("references").set(u.Type,u.Id,u),i.publish("contentresponse",u)})},getSubject:function(){return{type:"product",id:this.get("clientAPIConfig").productId,contentType:this.get("contentType")}},toJSON:function(){var t=e.get("config");return{Product:this.get("Product"),TotalCount:this.get("Product").TotalReviewCount||0,clientLogo:t.clientLogo||null,clientDisplayName:t.clientDisplayName||null,readOnly:this.readOnly}}})}),BV.define("bv/util/baseConfig",{global:{},qa:{},sy:{},cp:{},rr:{},loy:{}}),BV.define("_i18n_appTotalContentCount",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(t){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalCount",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalCount,t+=" Review ",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalCount,t+=" Reviews ",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}(t)}catch(n){return r.push(["error",new Error("MF error on `appTotalContentCount`: "+n.toString())]),""}}return t.registerHelper("_i18n_appTotalContentCount",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("hbs!prsTotalCount",["hbs","vendor/handlebars/runtime","_i18n_appTotalContentCount"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){var r="",i,s,o;r+=' <a href="#" class="bv-rating-label bv-text-link bv-focusable">  ',o={hash:{}},s=(i=n._i18n_appTotalContentCount,i?i.call(e,e,o):a.call(e,"_i18n_appTotalContentCount",e,o));if(s||s===0)r+=s;return r+=" </a> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a=n.helperMissing,f=this;u=n["with"].call(t,(o=(o=t.Product,o==null||o===!1?o:o.Reviews),o==null||o===!1?o:o.Statistics),{hash:{},inverse:f.noop,fn:f.program(1,l,i)});if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("prsTotalCount",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!summaryMinimalistTotalCount",["hbs","vendor/handlebars/runtime"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){var r="",i;return r+=' <span class="bv-rating-ratio-count"> (<span itemprop="reviewCount">',(i=n.TotalCount)?i=i.call(e,{hash:{}}):(i=e.TotalCount,i=typeof i===u?i.apply(e):i),r+=a(i)+"</span>) </span> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s,o,u="function",a=this.escapeExpression,f=this;return o=n["with"].call(t,(s=(s=t.Product,s==null||s===!1?s:s.Reviews),s==null||s===!1?s:s.Statistics),{hash:{},inverse:f.noop,fn:f.program(1,l,i)}),o||o===0?o:""});return t.registerPartial("summaryMinimalistTotalCount",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!stars",["hbs","vendor/handlebars/runtime","hbs!prsStars","hbs!prsOverallRating","hbs!prsTotalCount","hbs!summaryMinimalistTotalCount","template/helpers/ifHasFeature","template/helpers/equals","template/helpers/unlessHasFeature"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:l.program(4,d,t),fn:l.program(2,p,t)},s=(i=n.ifHasFeature,i?i.call(e,"aggregateRatingTag",o):c.call(e,"ifHasFeature","aggregateRatingTag",o));if(s||s===0)r+=s;r+=" ",s=n["if"].call(e,(i=e.Product,i==null||i===!1?i:i.Reviews),{hash:{},inverse:l.noop,fn:l.program(6,v,t)});if(s||s===0)r+=s;r+=" ",o={hash:{},inverse:l.noop,fn:l.programWithDepth(g,t,e)},s=(i=n.ifHasFeature,i?i.call(e,"stars",e,o):c.call(e,"ifHasFeature","stars",e,o));if(s||s===0)r+=s;r+=" ",s=n["if"].call(e,(i=(i=(i=e.Product,i==null||i===!1?i:i.Reviews),i==null||i===!1?i:i.Statistics),i==null||i===!1?i:i.AverageOverallRating),{hash:{},inverse:l.noop,fn:l.program(18,S,t)});if(s||s===0)r+=s;r+=" ",o={hash:{},inverse:l.program(24,C,t),fn:l.program(20,x,t)},s=(i=n.unlessHasFeature,i?i.call(e,"minimalist",o):c.call(e,"unlessHasFeature","minimalist",o));if(s||s===0)r+=s;return r+=" </dl> ",r}function p(e,t){return' <dl class="bv-stars-container" itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating" role="presentation"> '}function d(e,t){return' <dl class="bv-stars-container" role="presentation"> '}function v(e,t){var r="",i,s;r+=" ",s=n["if"].call(e,(i=e.Product,i==null||i===!1?i:i.Name),{hash:{},inverse:l.noop,fn:l.program(7,m,t)});if(s||s===0)r+=s;return r+=" ",r}function m(e,t){var n="",r;return n+='<meta itemprop="itemReviewed" content="'+f((r=(r=e.Product,r==null||r===!1?r:r.Name),typeof r===a?r.apply(e):r))+'"/>',n}function g(e,t,i){var s="",o,u,a;s+=' <dd class="bv-rating-ratio" role="presentation"> ',a={hash:{},inverse:l.program(12,b,t),fn:l.program(10,y,t)},u=(o=n.equals,o?o.call(e,e.readOnly,!0,a):c.call(e,"equals",e.readOnly,!0,a));if(u||u===0)s+=u;s+=" ",u=l.invokePartial(r.prsStars,"prsStars",i,n,r);if(u||u===0)s+=u;s+=" ",a={hash:{},inverse:l.program(16,E,t),fn:l.program(14,w,t)},u=(o=n.equals,o?o.call(e,e.readOnly,!0,a):c.call(e,"equals",e.readOnly,!0,a));if(u||u===0)s+=u;return s+=" </dd> ",s}function y(e,t){return' <span class="bv-rating-stars-container bv-rating-none bv-focusable" aria-readonly="true"> '}function b(e,t){return' <a href="#" class="bv-rating-stars-container bv-focusable"> '}function w(e,t){return" </span> "}function E(e,t){return" </a> "}function S(e,t){var i="",s;i+=' <dd class="bv-rating-ratio-number" role="presentation"> ',s=l.invokePartial(r.prsOverallRating,"prsOverallRating",e,n,r);if(s||s===0)i+=s;return i+=" </dd> ",i}function x(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:l.noop,fn:l.program(21,T,t)},s=(i=n.ifHasFeature,i?i.call(e,"reviewCount",e,o):c.call(e,"ifHasFeature","reviewCount",e,o));if(s||s===0)r+=s;return r+=" ",r}function T(e,t){var r="",i,s;r+=" ",s=n["if"].call(e,(i=(i=(i=e.Product,i==null||i===!1?i:i.Reviews),i==null||i===!1?i:i.Statistics),i==null||i===!1?i:i.TotalCount),{hash:{},inverse:l.noop,fn:l.program(22,N,t)});if(s||s===0)r+=s;return r+=" ",r}function N(e,t){var i="",s;i+=' <dd class="bv-rating-ratio-count" role="presentation"> <span itemprop="reviewCount">',s=l.invokePartial(r.prsTotalCount,"prsTotalCount",e,n,r);if(s||s===0)i+=s;return i+="</span> </dd> ",i}function C(e,t){var r="",i,s;r+=" ",s=n["if"].call(e,(i=(i=(i=e.Product,i==null||i===!1?i:i.Reviews),i==null||i===!1?i:i.Statistics),i==null||i===!1?i:i.TotalCount),{hash:{},inverse:l.noop,fn:l.program(25,k,t)});if(s||s===0)r+=s;return r+=" ",r}function k(e,t){var i="",s;i+=' <dd class="bv-rating-ratio-count"> ',s=l.invokePartial(r.summaryMinimalistTotalCount,"summaryMinimalistTotalCount",e,n,r);if(s||s===0)i+=s;return i+=" </dd> ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.helperMissing;u=n["if"].call(t,(o=(o=t.Product,o==null||o===!1?o:o.Reviews),o==null||o===!1?o:o.Statistics),{hash:{},inverse:l.noop,fn:l.program(1,h,i)});if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("stars",n),n.deps=["prsStars","prsOverallRating","prsTotalCount","summaryMinimalistTotalCount"],n.tplMountedViews=[],n}),BV.define("_i18n_recommendationCount",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.RecommendedCount,t+=" out of ";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.TotalRecommendedCount,t+=" (";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.percentage,t+="%) reviewers recommend this product",t}(e)}catch(t){return r.push(["error",new Error("MF error on `recommendationCount`: "+t.toString())]),""}}return t.registerHelper("_i18n_recommendationCount",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("hbs!percentrecommend",["hbs","vendor/handlebars/runtime","hbs!firstToWriteReview","template/helpers/ifHasFeature","template/helpers/withIf","template/helpers/conditionalContainer","template/helpers/withPercentage","_i18n_recommendationCount"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var r="",i,s,o;r+=" ",o={hash:{tag:"div",classList:"percent-recommend-container"},inverse:l.noop,fn:l.program(2,h,t)},s=(i=n.conditionalContainer,i?i.call(e,e,o):f.call(e,"conditionalContainer",e,o));if(s||s===0)r+=s;return r+=" ",r}function h(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:l.noop,fn:l.programWithDepth(p,t,e)},s=(i=n.withIf,i?i.call(e,(i=(i=e.Product,i==null||i===!1?i:i.Reviews),i==null||i===!1?i:i.Statistics),o):f.call(e,"withIf",(i=(i=e.Product,i==null||i===!1?i:i.Reviews),i==null||i===!1?i:i.Statistics),o));if(s||s===0)r+=s;return r+=" ",r}function p(e,t,r){var i="",s;i+=" ",s=n["if"].call(e,e.TotalRecommendedCount,{hash:{},inverse:l.programWithDepth(m,t,r),fn:l.program(4,d,t)});if(s||s===0)i+=s;return i+=" ",i}function d(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:l.noop,fn:l.program(5,v,t)},s=(i=n.withPercentage,i?i.call(e,e.RecommendedCount,e.TotalRecommendedCount,1,o):f.call(e,"withPercentage",e.RecommendedCount,e.TotalRecommendedCount,1,o));if(s||s===0)r+=s;return r+=" ",r}function v(e,t){var r="",i,s,o;r+="  ",o={hash:{}},s=(i=n._i18n_recommendationCount,i?i.call(e,e,o):f.call(e,"_i18n_recommendationCount",e,o));if(s||s===0)r+=s;return r+=" ",r}function m(e,t,r){var i="",s;i+=" ",s=n.unless.call(e,e.TotalCount,{hash:{},inverse:l.noop,fn:l.programWithDepth(g,t,r)});if(s||s===0)i+=s;return i+=" ",i}function g(e,t,r){var i="",s;i+=" ",s=n["with"].call(e,r,{hash:{},inverse:l.noop,fn:l.program(9,y,t)});if(s||s===0)i+=s;return i+=" ",i}function y(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:l.noop,fn:l.program(10,b,t)},s=(i=n.ifHasFeature,i?i.call(e,"writeReviews",o):f.call(e,"ifHasFeature","writeReviews",o));if(s||s===0)r+=s;return r+=" ",r}function b(e,t){var i="",s;i+=" ",s=l.invokePartial(r.firstToWriteReview,"firstToWriteReview",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function w(e,t,r){var i="",s,o,u;i+=" ",u={hash:{},inverse:l.noop,fn:l.programWithDepth(m,t,r)},o=(s=n.withIf,s?s.call(e,(s=(s=e.Product,s==null||s===!1?s:s.Reviews),s==null||s===!1?s:s.Statistics),u):f.call(e,"withIf",(s=(s=e.Product,s==null||s===!1?s:s.Reviews),s==null||s===!1?s:s.Statistics),u));if(o||o===0)i+=o;return i+=" ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=n.helperMissing,l=this;s+=" ",a={hash:{},inverse:l.programWithDepth(w,i,t),fn:l.program(1,c,i)},u=(o=n.ifHasFeature,o?o.call(t,"recommended",a):f.call(t,"ifHasFeature","recommended",a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("percentrecommend",n),n.deps=["firstToWriteReview"],n.tplMountedViews=[],n}),BV.define("template/helpers/withPercentage",["vendor/handlebars/runtime","template/helpers/percentage","underscore"],function(e,t,n){function i(e,r,i,s){var o=t(e,r,i,{hash:{}}),u=n(this).extend({percentage:o});return s.fn(u)}var r=this;return e.registerHelper("withPercentage",i),i}),BV.define("_i18n_totalAAStats",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(t){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalCount",i=t[r],s=0,o={one:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalSecondaryCount",i=t[r],s=0,o={one:function(e){var t="";t+='<a href="#" class="bv-qa-stats bv-qa-stats-questions bv-focusable">';if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.TotalCount,t+=' question </a> and <a href="#" class="bv-qa-stats bv-qa-stats-answers bv-focusable">';if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalSecondaryCount,t+=" answer </a> for this product",t},other:function(e){var t="";t+='<a href="#" class="bv-qa-stats bv-qa-stats-questions bv-focusable">';if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.TotalCount,t+=' question </a> and <a href="#" class="bv-qa-stats bv-qa-stats-answers bv-focusable">';if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalSecondaryCount,t+=" answers </a> for this product",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n+=" ",n},other:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalSecondaryCount",i=t[r],s=0,o={one:function(e){var t="";t+='<a href="#" class="bv-qa-stats bv-qa-stats-questions bv-focusable">';if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.TotalCount,t+=' questions </a> and <a href="#" class="bv-qa-stats bv-qa-stats-answers bv-focusable">';if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalSecondaryCount,t+=" answer </a> for this product",t},other:function(e){var t="";t+='<a href="#" class="bv-qa-stats bv-qa-stats-questions bv-focusable">';if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.TotalCount,t+=' questions </a> and <a href="#" class="bv-qa-stats bv-qa-stats-answers bv-focusable">';if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalSecondaryCount,t+=" answers </a> for this product",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n+=" ",n}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}(t)}catch(n){return r.push(["error",new Error("MF error on `totalAAStats`: "+n.toString())]),""}}return t.registerHelper("_i18n_totalAAStats",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("hbs!stats",["hbs","vendor/handlebars/runtime","template/helpers/ifHasFeature","template/helpers/withIf","_i18n_totalAAStats"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:l.noop,fn:l.program(2,h,t)},s=(i=n.withIf,i?i.call(e,(i=(i=e.Product,i==null||i===!1?i:i.Questions),i==null||i===!1?i:i.Statistics),o):f.call(e,"withIf",(i=(i=e.Product,i==null||i===!1?i:i.Questions),i==null||i===!1?i:i.Statistics),o));if(s||s===0)r+=s;return r+=" ",r}function h(e,t){var r="",i;r+=' <div class="bv-stats-container"> ',i=n["if"].call(e,e.TotalCount,{hash:{},inverse:l.noop,fn:l.program(3,p,t)});if(i||i===0)r+=i;return r+=" </div> ",r}function p(e,t){var r="",i,s,o;r+="  ",o={hash:{}},s=(i=n._i18n_totalAAStats,i?i.call(e,e,o):f.call(e,"_i18n_totalAAStats",e,o));if(s||s===0)r+=s;return r+=" ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this;a={hash:{},inverse:l.noop,fn:l.program(1,c,i)},u=(o=n.ifHasFeature,o?o.call(t,"askQuestions",t,a):f.call(t,"ifHasFeature","askQuestions",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("stats",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!details",["hbs","vendor/handlebars/runtime","hbs!percentrecommend","hbs!stats","template/helpers/conditionalContainer","template/helpers/unlessHasFeature"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var i="",s,o,u;i+=" ",s=f.invokePartial(r.percentrecommend,"percentrecommend",e,n,r);if(s||s===0)i+=s;i+=" ",u={hash:{},inverse:f.noop,fn:f.program(2,h,t)},o=(s=n.unlessHasFeature,s?s.call(e,"minimalist",u):l.call(e,"unlessHasFeature","minimalist",u));if(o||o===0)i+=o;return i+=" ",i}function h(e,t){var i="",s;i+=" ",s=f.invokePartial(r.stats,"stats",e,n,r);if(s||s===0)i+=s;return i+=" ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=this,l=n.helperMissing;a={hash:{tag:"div",classList:"details-bar"},inverse:f.noop,fn:f.program(1,c,i)},u=(o=n.conditionalContainer,o?o.call(t,t,a):l.call(t,"conditionalContainer",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("details",n),n.deps=["percentrecommend","stats"],n.tplMountedViews=[],n}),BV.define("hbs!readReviews",["hbs","vendor/handlebars/runtime","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function f(e,t){var r="",i,s;return r+=' <div class="bv-read-review-container bv-read-container"> <button type="button" class="bv-read-review bv-focusable bv-read-reviews-button"> ',s={hash:{}},r+=u((i=n.extmsg,i?i.call(e,"readReviews",e.msgpack,e,s):o.call(e,"extmsg","readReviews",e.msgpack,e,s)))+" </button> </div> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s,o=n.helperMissing,u=this.escapeExpression,a=this;return s=n["if"].call(t,t.TotalCount,{hash:{},inverse:a.noop,fn:a.program(1,f,i)}),s||s===0?s:""});return t.registerPartial("readReviews",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!summaryBar",["hbs","vendor/handlebars/runtime","hbs!stars","hbs!details","hbs!writeReview","hbs!askQuestion","hbs!readReviews","hbs!clientLogo","template/helpers/ifHasFeature","template/helpers/unlessHasFeature"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){return"bv-summary-bar-minimalist bv-summary-bar-minimalist-horizontal"}function h(e,t){return"bv-summary-bar-minimalist bv-summary-bar-minimalist-vertical"}function p(e,t){var i="",s;i+=" ",s=f.invokePartial(r.details,"details",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function d(e,t){return' <div class="bv-action-bar"> '}function v(e,t){var i="",s;i+=" ",s=f.invokePartial(r.writeReview,"writeReview",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function m(e,t){var i="",s;i+=" ",s=f.invokePartial(r.askQuestion,"askQuestion",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function g(e,t){var i="",s;i+=" ",s=f.invokePartial(r.readReviews,"readReviews",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function y(e,t){var i="",s;i+=" ",s=f.invokePartial(r.clientLogo,"clientLogo",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function b(e,t){return" </div> "}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=this,l=n.helperMissing;s+='<div class="bv-summary-bar ',a={hash:{},inverse:f.noop,fn:f.program(1,c,i)},u=(o=n.ifHasFeature,o?o.call(t,"minimalistHorizontal",a):l.call(t,"ifHasFeature","minimalistHorizontal",a));if(u||u===0)s+=u;s+=" ",a={hash:{},inverse:f.noop,fn:f.program(3,h,i)},u=(o=n.ifHasFeature,o?o.call(t,"minimalistVertical",a):l.call(t,"ifHasFeature","minimalistVertical",a));if(u||u===0)s+=u;s+='"> ',u=f.invokePartial(r.stars,"stars",t,n,r);if(u||u===0)s+=u;s+=" ",a={hash:{},inverse:f.noop,fn:f.program(5,p,i)},u=(o=n.unlessHasFeature,o?o.call(t,"minimalist",a):l.call(t,"unlessHasFeature","minimalist",a));if(u||u===0)s+=u;s+=" ",a={hash:{},inverse:f.noop,fn:f.program(7,d,i)},u=(o=n.unlessHasFeature,o?o.call(t,"minimalistHorizontal",a):l.call(t,"unlessHasFeature","minimalistHorizontal",a));if(u||u===0)s+=u;s+=" ",a={hash:{},inverse:f.noop,fn:f.program(9,v,i)},u=(o=n.ifHasFeature,o?o.call(t,"writeReviews",a):l.call(t,"ifHasFeature","writeReviews",a));if(u||u===0)s+=u;s+=" ",a={hash:{},inverse:f.noop,fn:f.program(11,m,i)},u=(o=n.ifHasFeature,o?o.call(t,"askQuestions",t,a):l.call(t,"ifHasFeature","askQuestions",t,a));if(u||u===0)s+=u;s+=" ",a={hash:{},inverse:f.noop,fn:f.program(13,g,i)},u=(o=n.ifHasFeature,o?o.call(t,"readReviews",a):l.call(t,"ifHasFeature","readReviews",a));if(u||u===0)s+=u;s+=" ",a={hash:{},inverse:f.noop,fn:f.program(15,y,i)},u=(o=n.ifHasFeature,o?o.call(t,"clientLogo",a):l.call(t,"ifHasFeature","clientLogo",a));if(u||u===0)s+=u;s+=" ",a={hash:{},inverse:f.noop,fn:f.program(17,b,i)},u=(o=n.unlessHasFeature,o?o.call(t,"minimalistHorizontal",a):l.call(t,"unlessHasFeature","minimalistHorizontal",a));if(u||u===0)s+=u;return s+=" </div> ",s});return t.registerPartial("summaryBar",n),n.deps=["stars","details","writeReview","askQuestion","readReviews","clientLogo"],n.tplMountedViews=[],n}),BV.define("hbs!prs",["hbs","vendor/handlebars/runtime","hbs!summaryBar","template/helpers/ifHasFeature","template/helpers/view"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var r="",i,s,o;r+=' <div class="bv-cleanslate"> ',o={hash:{},inverse:f.noop,fn:f.program(2,h,t)},s=(i=n.ifHasFeature,i?i.call(e,"seoMicrodata",e,o):l.call(e,"ifHasFeature","seoMicrodata",e,o));if(s||s===0)r+=s;r+=" ",o={hash:{tag:"div",classList:"shared"},inverse:f.noop,fn:f.program(5,d,t)},s=(i=n.view,i?i.call(e,e,o):l.call(e,"view",e,o));if(s||s===0)r+=s;r+=" ",o={hash:{},inverse:f.noop,fn:f.program(7,v,t)},s=(i=n.ifHasFeature,i?i.call(e,"seoMicrodata",e,o):l.call(e,"ifHasFeature","seoMicrodata",e,o));if(s||s===0)r+=s;return r+=" </div> ",r}function h(e,t){var r="",i,s;r+=' <div itemscope itemtype="http://schema.org/Product"> ',s=n["if"].call(e,(i=e.Product,i==null||i===!1?i:i.Name),{hash:{},inverse:f.noop,fn:f.program(3,p,t)});if(s||s===0)r+=s;return r+=" ",r}function p(e,t){var n="",r;return n+=' <meta itemprop="name" content="'+a((r=(r=e.Product,r==null||r===!1?r:r.Name),typeof r===u?r.apply(e):r))+'" /> ',n}function d(e,t){var i="",s;i+=' <!--[if lt IE 7]> <div class="bv-compat bvie6 bvie-lt8 bvie"> <![endif]--> <!--[if IE 7]> <div class="bv-compat bvie7 bvie-lt8 bvie"> <![endif]--> <!--[if IE 8]> <div class="bv-compat bvie8 bvie"> <![endif]--> <!--[if IE 9]> <div class="bv-compat bvie9 bvie"> <![endif]--> <!--[if gt IE 9]> <!--><div class="bv-compat"> <!--<![endif]--> <div class="bv-prs-container"> <div class="bv-primarySummary-rating-container"> ',s=f.invokePartial(r.summaryBar,"summaryBar",e,n,r);if(s||s===0)i+=s;return i+=" </div> </div> </div> ",i}function v(e,t){return" </div> "}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u="function",a=this.escapeExpression,f=this,l=n.helperMissing;s+=" ",o=n["with"].call(t,t,{hash:{},inverse:f.noop,fn:f.program(1,c,i)});if(o||o===0)s+=o;return s+=" ",s});return t.registerPartial("prs",n),n.deps=["summaryBar"],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/summary",["ENV","framework/bview","bv/ui-core/focusableview","bv/util/loadingOverlay","bv/util/productInfo","bv/util/baseConfig","bv/util/bvLocal","underscore","jquery","hbs!prs","window","$BV","BV","mf!bv/c2013/messages/common","bv/c2013/model/contentList","framework/util/bvtracker"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){function g(e,t){return function(n){var r=this.model.get("Product")[e];v.feature({type:"Used",name:"Click",detail1:t,detail2:this.region,quantity:r&&r.Statistics?r.Statistics.TotalCount:0,bvProduct:e==="Reviews"?i.RATINGSANDREVIEWS:i.ASKANDANSWER,productId:i.getId(this),categoryId:i.getCategoryId(this)}),this["_scrollTo"+e](n),n.preventDefault(),n.stopPropagation()}}var m=t.extend(n);return m.extend({name:"summary",region:"PrimaryRatingSummary",classList:["core-container-"+t.config.version],msgpacks:[p],template:f,events:{"click .bv-write-review, .bv-write-review-label, .bv-recommend-label":"loadReviewSubmission","click .bv-read-review":"clickReadReview","click .bv-ask-question, .bv-ask-question-label":"loadQuestionSubmission","hover .bv-shared":"preloadSubmission","click .bv-summary-bar .bv-rating-stars-container":"clickSummaryStars","click .bv-rating-label":"clickReviewCount","click .bv-write-review-label":"clickWriteReviewLabel","click .bv-qa-stats":"clickSummaryQuestionStats","mouseenter .bv-rating":"hoverHistogram"},clickSummaryStars:g("Reviews","SummaryStars"),clickReadReview:g("Reviews","ReadReviewsButton"),clickWriteReviewLabel:g("Reviews","WriteReviewLabel"),clickSummaryQuestionStats:g("Questions","SummaryQuestionStats"),clickReviewCount:g("Reviews","ReviewCount"),attach:function(){o.isBVLocal()&&o.attachLogoHandler(this);var e=this.model.getClosestAncestor({modelType:d});return e&&this.listenTo(e,"pageinfo",this.renderAnchor),this.subscribe("readreviews",this.handleReadReviewsClick),t.prototype.attach.apply(this,arguments)},preloadSubmission:u.once(function(e){h._internal.nopreload||h.require(["secondary"],function(){})}),loadReviewSubmission:u.debounce(function(e){e.preventDefault();var t=s.rr._actions&&s.rr._actions.show_reviews||{},n=a.extend({},this.clientAPIConfig,{campaignId:"BV_RATING_SUMMARY",mobileRedirect:!0});n.doShowContent=n.doShowContent||t.doShowContent,this.getTopModel().trigger("showreviewsubmission",n),v.feature({type:"Used",name:"Write",detail1:"Button",detail2:this.region,bvProduct:i.RATINGSANDREVIEWS,productId:i.getId(this),categoryId:i.getCategoryId(this)})},1e3,!0),loadQuestionSubmission:u.debounce(function(e){e.preventDefault(),r.show();var t=s.qa._actions&&s.qa._actions.show_questions||{},n=a.extend({},this.clientAPIConfig,{campaignId:"BV_QUESTION_SUMMARY",mobileRedirect:!0,silentMode:!1});n.doShowContent=t.doShowContent,this.getTopModel().trigger("showquestionsubmission",n),v.feature({type:"Used",name:"Ask",detail1:"Button",detail2:this.region,bvProduct:i.ASKANDANSWER,productId:i.getId(this),categoryId:i.getCategoryId(this)})},1e3,!0),handleReadReviewsClick:function(e){this._scrollToReviews(e)},_scrollToReviews:function(e){var t=this.model.get("Product").Reviews;t&&t.Statistics&&t.Statistics.TotalCount>0?this.getTopModel().trigger("showreviews",e):this.readOnly||this.loadReviewSubmission(e)},_scrollToQuestions:function(e){var t=this.model.get("Product").Questions;t&&t.Statistics&&t.Statistics.TotalCount>0?this.getTopModel().trigger("showquestions",e):this.loadQuestionSubmission(e)},renderAnchor:function(){var e=this.$("a.bv-focusable");if(e){var t=this.model.componentGet("currentPage")||1;e.each(function(){this.href="#review/page/"+t})}},hoverHistogram:function(){v.feature({type:"Used",name:"Hover",detail1:"Histogram",detail2:this.region,bvProduct:i.RATINGSANDREVIEWS,productId:i.getId(this),categoryId:i.getCategoryId(this)})}})}),BV.define("bv/c2013/model/histogram",["ENV","framework/bmodel","underscore"],function(e,t,n){return t.extend({name:"histogram",init:function(e,t){n.extend(this.options,t)},processData:function(){var e=this.get("parent");e&&(this.set("Product",e.get("Product")),e.onDataReady(function(){this.set(e),this.dataReady()},this))}})}),BV.define("bv/ui-core/bpopuptargetview",["ENV","bv/ui-core/bhoverableview","jquery","underscore","bv/util/focusManager","util/specialKeys"],function(e,t,n,r,i,s){return t.extend({linkEl:".bv-popup-target",options:r.extend({},t.prototype.options,{popupInTriggerEvent:"mouseenter",popupOutTriggerEvent:"mouseleave",positionPopupRelativeToLink:!0,toggleable:!1,preserveFocus:!0}),attach:function(){var e=t.prototype.attach.apply(this,arguments);return this.$targetEl=this.$viewEl.find(this.linkEl).on(this.options.popupInTriggerEvent,n.proxy(this.enter,this)).on(this.options.popupOutTriggerEvent,n.proxy(this.leave,this)).on("click",function(e){e.preventDefault()}),this.options.toggleable&&this.$targetEl.off(this.options.popupOutTriggerEvent),this.setupKeyboardNavigation(),e},enter:function(e){var n=this;t.prototype.enter.call(this,e),e.type!=="mouseenter"&&this.targetView.model.once("dropdownRendered",function(){i.moveFocus(n.targetView.$viewEl.find(".bv-focusable"))})},_isOpened:function(){return this.targetView&&this.targetView.rendered},_openPopup:function(e){e.preventDefault(),e.stopPropagation(),this._isOpened()||this.enter(e)},_closePopup:function(e){e.preventDefault(),e.stopPropagation(),this.leave(e)},_onKeydown:function(e){switch(e.keyCode){case s.SPACE:case s.ENTER:this._openPopup(e);break;case s.ESCAPE:this._closePopup(e)}},_onClick:function(e){this._isOpened()?this._closePopup(e):this._openPopup(e)},setupKeyboardNavigation:function(e){e=e||this.$targetEl,e.off("click.bpopuptargetview").on("click.bpopuptargetview",r.bind(this._onClick,this)),e.off("keydown.bpopuptargetview").on("keydown.bpopuptargetview",r.bind(this._onKeydown,this))}})}),BV.define("hbs!histogram",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/withIf","template/helpers/extmsg","template/helpers/fixedNumber"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:c.noop,fn:c.programWithDepth(p,t,e)},s=(i=n.withIf,i?i.call(e,(i=(i=e.Product,i==null||i===!1?i:i.Reviews),i==null||i===!1?i:i.Statistics),o):f.call(e,"withIf",(i=(i=e.Product,i==null||i===!1?i:i.Reviews),i==null||i===!1?i:i.Statistics),o));if(s||s===0)r+=s;return r+=" ",r}function p(e,t,r){var i="",s,o;return i+=' <a class="bv-rating bv-text-link bv-popup-target bv-focusable" aria-label="',o={hash:{}},i+=l((s=n.extmsg,s?s.call(e,"offscreen_ratingSummaryText",r.msgpack,e,o):f.call(e,"extmsg","offscreen_ratingSummaryText",r.msgpack,e,o)))+'" href="#histogram" tabindex="0"> <span itemprop="ratingValue" aria-hidden="true">',o={hash:{}},i+=l((s=n.fixedNumber,s?s.call(e,e.AverageOverallRating,1,o):f.call(e,"fixedNumber",e.AverageOverallRating,1,o)))+"</span> </a> ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this;s+=" ",a={hash:{tag:"div"},inverse:c.noop,fn:c.program(1,h,i)},u=(o=n.view,o?o.call(t,t,a):f.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("histogram",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("template/helpers/reverseEach",["vendor/handlebars/runtime","underscore"],function(e,t){function n(e,t){var n=t.fn,r=t.inverse,i="";if(e&&e.length>0)for(var s=0,o=e.length;s<o;s++)i+=n(e[o-s-1]);else i=r(this);return i}return e.registerHelper("reverseEach",n),n}),BV.define("hbs!histogramPopup",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/withIf","template/helpers/reverseEach","template/helpers/ratingIconChar","template/helpers/extmsg","template/helpers/percentage"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t,r){var i="",s,o,u;i+=' <!--[if lt IE 7]> <div class="bv-compat bvie6 bvie-lt8 bvie"> <![endif]--> <!--[if IE 7]> <div class="bv-compat bvie7 bvie-lt8 bvie"> <![endif]--> <!--[if IE 8]> <div class="bv-compat bvie8 bvie"> <![endif]--> <!--[if IE 9]> <div class="bv-compat bvie9 bvie"> <![endif]--> <!--[if gt IE 9]> <!--><div class="bv-compat"> <!--<![endif]--> ',u={hash:{},inverse:h.noop,fn:h.programWithDepth(d,t,e,r)},o=(s=n.withIf,s?s.call(e,(s=(s=e.Product,s==null||s===!1?s:s.Reviews),s==null||s===!1?s:s.Statistics),u):c.call(e,"withIf",(s=(s=e.Product,s==null||s===!1?s:s.Reviews),s==null||s===!1?s:s.Statistics),u));if(o||o===0)i+=o;return i+=" </div> ",i}function d(e,t,r,i){var s="",o,u,a;s+=' <div class="bv-popup-histogram-ratings" role="tooltip" aria-expanded="false"> <table role="presentation"> ',a={hash:{},inverse:h.noop,fn:h.programWithDepth(v,t,e,r)},u=(o=n.reverseEach,o?o.call(e,e.RatingDistribution,a):c.call(e,"reverseEach",e.RatingDistribution,a));if(u||u===0)s+=u;return s+=' </table> <div class="bv-action-bar"> <ul class="bv-toplevel-actions" role="presentation"> <li class="bv-histogram-action"><button type="button" class="bv-read-review bv-focusable">',a={hash:{}},s+=l((o=n.extmsg,o?o.call(e,"histogram_readReviews",i.msgpack,e,a):c.call(e,"extmsg","histogram_readReviews",i.msgpack,e,a)))+"</button></li> </ul> </div> </div> ",s}function v(e,t,r,i){var s="",o,u,a;return s+=' <tr class="bv-focusable" tabindex="0"> <td class="bv-popup-histogram-ratings-star" data-bv-histogram-rating-value="',(o=n.RatingValue)?o=o.call(e,{hash:{}}):(o=e.RatingValue,o=typeof o===f?o.apply(e):o),s+=l(o)+'" role="presentation"> ',(o=n.RatingValue)?o=o.call(e,{hash:{}}):(o=e.RatingValue,o=typeof o===f?o.apply(e):o),s+=l(o)+'<span class="bv-glyph">',a={hash:{}},s+=l((o=n.ratingIconChar,o?o.call(e,"prs-rating-stars-on",a):c.call(e,"ratingIconChar","prs-rating-stars-on",a)))+'</span> <span class="bv-off-screen">',a={hash:{}},s+=l((o=n.extmsg,o?o.call(e,"offscreen_histogram_stars",i.msgpack,e,a):c.call(e,"extmsg","offscreen_histogram_stars",i.msgpack,e,a)))+'</span> </td> <td class="bv-popup-histogram-ratings-bar" data-bv-histogram-rating-value="',(u=n.RatingValue)?u=u.call(e,{hash:{}}):(u=e.RatingValue,u=typeof u===f?u.apply(e):u),s+=l(u)+'" role="presentation"> <span class="bv-content-secondary-ratings-container"> <span class="bv-content-secondary-ratings-value" style="width:',a={hash:{}},s+=l((o=n.percentage,o?o.call(e,e.Count,r.TotalCount,1,a):c.call(e,"percentage",e.Count,r.TotalCount,1,a)))+'% !important;"></span> </span> </td> <td class="bv-popup-histogram-ratings-score" role="presentation"> ',(u=n.Count)?u=u.call(e,{hash:{}}):(u=e.Count,u=typeof u===f?u.apply(e):u),s+=l(u)+' <span class="bv-off-screen">',a={hash:{}},s+=l((o=n.extmsg,o?o.call(e,"offscreen_histogram_count",i.msgpack,e,a):c.call(e,"extmsg","offscreen_histogram_count",i.msgpack,e,a)))+"</span> </td> </tr> ",s}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+=' <div class="bv-core-container-',(o=n.version)?o=o.call(t,{hash:{}}):(o=t.version,o=typeof o===f?o.apply(t):o),s+=l(o)+'"> ',a={hash:{tag:"div",classList:"popup popup-histogram"},inverse:h.noop,fn:h.programWithDepth(p,i,t)},u=(o=n.view,o?o.call(t,t,a):c.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" </div> ",s});return t.registerPartial("histogramPopup",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("mf!bv/c2013/messages/histogram",["vendor/messageformat","framework/util/bvtrackerqueue"],function(e,t){return{ratingSnapshotHeader:function(e){try{return function(e){var t="";return t+="Rating Snapshot",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `ratingSnapshotHeader`: "+n.toString())]),""}},offscreen_histogram_stars:function(e){try{return function(e){var t="";return t+="stars",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_histogram_stars`: "+n.toString())]),""}},offscreen_histogram_count:function(e){try{return function(e){var t="";return t+="reviews",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_histogram_count`: "+n.toString())]),""}},histogram_filter:function(n){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="RatingValue",i=t[r],s=0,o={one:function(e){var t="";t+="Select to filter reviews with ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.RatingValue,t+=" star.",t},other:function(e){var t="";t+="Select to filter reviews with ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.RatingValue,t+=" stars.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}(n||{})}catch(r){return t.push(["error",new Error("MF error on `histogram_filter`: "+r.toString())]),""}},histogram_select_to_filter:function(e){try{return function(e){var t="";return t+="Select a row below to filter reviews.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `histogram_select_to_filter`: "+n.toString())]),""}},offscreen_histogram_ratingDistribution:function(n){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="Count",i=t[r],s=0,o={one:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="RatingValue",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.Count,t+=" review with ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.RatingValue,t+=" star.",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.Count,t+=" review with ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.RatingValue,t+=" stars.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n+=" ",n},other:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="RatingValue",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.Count,t+=" reviews with ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.RatingValue,t+=" star.",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.Count,t+=" reviews with ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.RatingValue,t+=" stars.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n+=" ",n}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}(n||{})}catch(r){return t.push(["error",new Error("MF error on `offscreen_histogram_ratingDistribution`: "+r.toString())]),""}},histogram_readReviews:function(n){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="Gender",i=t[r],s=0,o={other:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalCount",i=t[r],s=0,o={one:function(e){var t="";return t+="Read a Review",t},other:function(e){var t="";t+="Read ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalCount,t+=" Reviews",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}};return n+=(o[i]||o.other)(t),n}(n||{})}catch(r){return t.push(["error",new Error("MF error on `histogram_readReviews`: "+r.toString())]),""}}}}),BV.define("bv/c2013/view/histogramPopup",["bv/ui-core/bpopupview","bv/util/productInfo","hbs!histogramPopup","mf!bv/c2013/messages/histogram","jquery","framework/util/bvtracker"],function(e,t,n,r,i,s){return e.extend({name:"histogramPopup",width:262,height:400,events:{"click .bv-read-review":"readReviews","click .bv-popup-histogram-ratings-star, .bv-popup-histogram-ratings-bar":"filterContent"},template:n,msgpacks:[r],filterContent:function(e){var n;if(this.parent.hasFeature("filterButton")){n=i(e.currentTarget).data("bv-histogram-rating-value");if(n){this.getTopModel().trigger("filtercontent","Rating",n);var r=n+"Star"+(parseInt(n,10)>1?"s":"");s.feature({type:"Used",name:"Filter",detail1:r,detail2:"Histogram",bvProduct:t.RATINGSANDREVIEWS,productId:t.getId(this),categoryId:t.getCategoryId(this)})}}},readReviews:function(e){s.feature({type:"Used",name:"Click",detail1:"ReadReviewButton",detail2:"Histogram",bvProduct:t.RATINGSANDREVIEWS,productId:t.getId(this),categoryId:t.getCategoryId(this)}),this.detach(),this.model.publish("readreviews")},leftPositionModifier:function(e){return e-10},topPositionModifier:function(e){return e+10}})}),BV.define("bv/c2013/view/histogram",["bv/ui-core/bpopuptargetview","underscore","hbs!histogram","bv/c2013/view/histogramPopup","mf!bv/c2013/messages/common"],function(e,t,n,r,i){return e.extend({name:"histogram",classList:["histogram-target"],template:n,TargetView:r,msgpacks:[i]})}),BV.define("mf!bv/c2013/messages/contentFilter",["vendor/messageformat","framework/util/bvtrackerqueue"],function(e,t){return{content_filter_ratings:function(e){try{return function(e){var t="";return t+="Rating",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `content_filter_ratings`: "+n.toString())]),""}},content_filter_list_title:function(e){try{return function(e){var t="";return t+="Active Filters",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `content_filter_list_title`: "+n.toString())]),""}},content_filter_button_clear:function(e){try{return function(e){var t="";return t+="Clear All",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `content_filter_button_clear`: "+n.toString())]),""}},content_filter_locale:function(e){try{return function(e){var t="";return t+="Locale",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `content_filter_locale`: "+n.toString())]),""}},content_filter_clear_label:function(e){try{return function(e){var t="";return t+="Clear All",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `content_filter_clear_label`: "+n.toString())]),""}},content_filter_show_all_label:function(e){try{return function(e){var t="";return t+="Show All",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `content_filter_show_all_label`: "+n.toString())]),""}},content_filter_expand_label:function(e){try{return function(e){var t="";t+="Filter ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.contentType,t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `content_filter_expand_label`: "+n.toString())]),""}},content_filter_star_ratings:function(n){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="rating",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.rating,t+=" star",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.rating,t+=" stars",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}(n||{})}catch(r){return t.push(["error",new Error("MF error on `content_filter_star_ratings`: "+r.toString())]),""}},offscreen_filter_label:function(e){try{return function(e){var t="";return t+="Filter by",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_filter_label`: "+n.toString())]),""}},offscreen_remove_filter:function(e){try{return function(e){var t="";return t+="Remove Filter",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_remove_filter`: "+n.toString())]),""}},offscreen_clear_all_filters:function(e){try{return function(e){var t="";return t+="Clear All Filters",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_clear_all_filters`: "+n.toString())]),""}}}}),BV.define("bv/util/localeMapping",[],function(){var e={zh_CN:{en:"Chinese (China)","native":"æ™®é€šè©± (ä¸­å›½)"},da_DK:{en:"Danish (Denmark)","native":"Dansk (Danmark)"},nl_BE:{en:"Dutch (Belgium)","native":"Nederlands (BelgiÃ«)"},en_US:{en:"English (United States)","native":"English (United States)"},en_GB:{en:"English (United Kingdom)","native":"English (United Kingdom)"},en_CA:{en:"English (Canada)","native":"English (Canada)"},fi_FI:{en:"Finnish (Finland)","native":"Suomi (Suomi)"},fr_BE:{en:"French (Belgium)","native":"franÃ§ais (Belgique)"},fr_CA:{en:"French (Canada)","native":"franÃ§ais (Canada)"},fr_FR:{en:"French (France)","native":"franÃ§ais (France)"},fr_CH:{en:"French (Switzerland)","native":"franÃ§ais (Suisse)"},de_AT:{en:"German (Austria)","native":"Deutsch (Ã–sterreich)"},de_DE:{en:"German (Germany)","native":"Deutsch (Deutschland)"},de_CH:{en:"German (Switzerland)","native":"Deutsch (Schweiz)"},it_IT:{en:"Italian (Italy)","native":"Italiano (Italia)"},it_CH:{en:"Italian (Switzerland)","native":"Italiano (Svizzera)"},ja_JP:{en:"Japanese (Japan)","native":"æ—¥æœ¬èªž (æ—¥æœ¬)"},ko_KR:{en:"Korean (Korea)","native":"í•œêµ­ì–´ (í•œêµ­)"},no_NO:{en:"Norwegian (Norway)","native":"Norsk (Norge)"},pl_PL:{en:"Polish (Poland)","native":"Polski (Polska)"},pt_BR:{en:"Portuguese (Brazil)","native":"PortuguÃªs (Brasil)"},pt_PT:{en:"Portuguese (Portugal)","native":"PortuguÃªs (Portugal)"},ru_RU:{en:"Russian (Russia)","native":"Ð ÑƒÑÑÐºÐ¸Ð¹ (Ð Ð¾ÑÑÐ¸Ñ)"},es_AR:{en:"Spanish (Argentina)","native":"EspaÃ±ol (Argentina)"},es_CL:{en:"Spanish (Chile)","native":"EspaÃ±ol (Chile)"},es_CO:{en:"Spanish (Colombia)","native":"EspaÃ±ol (Colombia)"},es_MX:{en:"Spanish (Mexico)","native":"EspaÃ±ol (MÃ©xico)"},es_ES:{en:"Spanish (Spain)","native":"EspaÃ±ol (EspaÃ±a)"},es_US:{en:"Spanish (United States)","native":"EspaÃ±ol (Estados Unidos)"},sv_SE:{en:"Swedish (Sweden)","native":"Svenska (Sverige)"},tr_TR:{en:"Turkish (Turkey)","native":"TÃ¼rkÃ§e (TÃ¼rkiye)"}};return e}),BV.define("dimsumFields!filters",[],[{id:"ContentLocale",options:[{id:"en_CA",label:"en_CA"},{id:"en_US",label:"en_US"}],labelRef:"content_filter_locale"}]),BV.define("bv/c2013/model/contentFilter",["framework/bmodel","backbone","underscore","mf!bv/c2013/messages/contentFilter","jquery","util/lookup","bv/util/localeMapping","bv/util/configFieldInfo","dimsumFields!filters"],function(e,t,n,r,i,s,o,u,a){var f=e.extend({name:"FilterOptionModel",defaults:{enabled:!1},toggleEnabled:function(){this.set("enabled",!this.get("enabled"))}}),l=e.extend({name:"FilterModel",options:[],defaults:{enabled:!1,activeCount:0},init:function(e,t){var r=this;this.options=t,n(t).forEach(function(e){r.listenTo(e,"change:enabled",r.filterOptionChanged)}),this.on("change:activeCount",this.activeCountChanged,this)},toggleFilterEnabled:function(){this.set("enabled",!this.get("enabled"))},filterOptionChanged:function(e,t){var n=this.get("activeCount"),r=t?1:-1;this.set("activeCount",n+r),this.trigger("filterOptionChanged",e,t)},activeCountChanged:function(e,t){t===0?this.set("enabled",!1):this.set("enabled",!0)},showAll:function(){n(this.options).forEach(function(e){e.set("enabled",!1)})},clear:function(e){e=e||{},n(this.options).each(function(t){t.set("enabled",!1,e)})},disableOption:function(e){var t=this.getOption(e);t.set("enabled",!1)},getOption:function(e){var t=n(this.options).find(function(t){return t.id===""+e});return t},toJSON:function(){var t=e.prototype.toJSON.apply(this,arguments),r=n(this.options).map(function(e){return e.toJSON()});return t.options=r,t}});return e.extend({name:"contentFilter",filters:[],activeFilters:[],defaults:{expanded:!1},init:function(e,t){n.extend(this.options,t),this.subscribe("filtercontent",this.filterContent);var r=this;this.triggerFilter=n.debounce(function(){r.getTopModel().trigger("filterresults",r.activeFilters)},500)},processData:function(e){this.initContentFilter(),this.dataReady(e)},filterContent:function(e,t,r,i){var s=i&&!!i.replace;this.onDataReady(function(){s&&this.clearAllFilters();var i=n(t).isArray()?t:[t];n(i).forEach(function(t){var n=this.getFilter(e),i=n.getOption(t);i.set("enabled",!r)},this)},this)},filterEnabledChanged:function(e,t){t===!0?this.activeFilters.push(e):this.activeFilters=n(this.activeFilters).without(e),this.trigger("filterEnabledChanged",e,t)},_clearAllFilters:function(e){n(this.filters).invoke("clear",e||{}),this.activeFilters=[]},clearAllFilters:function(e){this._clearAllFilters(e),this.trigger("allFiltersCleared")},getFilter:function(e){var t=n(this.filters).find(function(t){return t.id===e});return t},toggleContentFilter:function(){this.set("expanded",!this.get("expanded"))},initContentFilter:function(){this.filters.length>0&&(this.clearAllFilters(),this.filters=[]);var e=this.filters,t=this.get("contentType"),r=this.getTopModel().get("subject");r&&(r=r.Content?r.Content.Reviews||null:null);var i=s(this.get("parent").get("subject"),"Content.Reviews.Statistics.TagDistribution",{undefinedDefault:[]});this._initRatingsFilter(r),this._initCDVFilters(r),n(a).each(this._initFilter,this),n(i).each(this._initTagFilter,this),this.trigger("filtersInitialized"),n(this.filters).each(function(e){this.listenTo(e,"change:enabled",this.filterEnabledChanged),this.listenTo(e,"filterOptionChanged",this.triggerFilter)},this)},_initTagFilter:function(e){var t=n(e.Values).map(function(e){return new f({id:e.Value,label:e.Value,active:!1,parent:this})},this),r=u.getLabel("tag",e.Id);r||(r=e.Label);var i=new l({id:"tag_"+e.Id,label:r,activeCount:0,parent:this},t);this.filters.push(i)},_initFilter:function(e){var t=n(e.options).map(function(t){var n=t.label,r;return e.id==="ContentLocale"&&(r=o[n],r&&(n=r["native"])),new f({id:t.id,label:n,active:!1,parent:this})},this),i=e.id,s=e.labelRef?r[e.labelRef]:e.label,u=new l({id:i,label:s,activeCount:0,parent:this},t);this.filters.push(u)},_initRatingsFilter:function(e){var t=s(e,"Statistics.OverallRatingRange");if(!t)return;var n=[],i,o;for(var u=1;u<=t;u++)i=r.content_filter_star_ratings({rating:u}),n.push(new f({id:String(u),label:i,active:!1,parent:this}));o=new l({id:"Rating",label:r.content_filter_ratings(),activeCount:0,parent:this},n),this.filters.push(o)},_initCDVFilters:function(e){var t=s(e,"Statistics.ContextDataDistribution");if(!t)return;var r,i=this;n(t).forEach(function(e){var t=u.getField("cdv",e.Id);if(!t||!t.filterable)return;var s=u.getLabel(t),o=u.getValueLabels(t);r=n(e.Values).map(function(e){return new f({id:e.Value,label:o[e.Value],active:!1,parent:i})}),i.filters.push(new l({id:"contextdatavalue_"+e.Id,label:s,activeCount:0,parent:i},r))})},toJSON:function(){var t=e.prototype.toJSON.call(this);return t.filters=[],n(this.filters).forEach(function(e){var r=e.toJSON();r.options=n(e.options).map(function(e){return e.toJSON()}),t.filters.push(r)}),t.activeCount=this.activeFilters.length,t}})}),BV.define("hbs!contentFilterButton",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/renderIcon","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){var r="",i,s,o;r+=" ",o={hash:{classList:"bv-filter-control-icon",ariaHidden:"true"},inverse:f.noop,fn:f.program(2,p,t)},s=(i=n.renderIcon,i?i.call(e,"bv-sprite-filter-control",o):l.call(e,"renderIcon","bv-sprite-filter-control",o));if(s||s===0)r+=s;return r+=' <span class="bv-filter-control-text">',o={hash:{prefix:"content_filter_"}},r+=c((i=n.extmsg,i?i.call(e,"expand_label",e.msgpack,e,o):l.call(e,"extmsg","expand_label",e.msgpack,e,o)))+"</span> ",r}function p(e,t){return"&equiv;"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=this,l=n.helperMissing,c=this.escapeExpression;s+=" ",a={hash:{tag:"button",elemType:"button",classList:"content-btn filter-control expand-filter-button focusable"},inverse:f.noop,fn:f.program(1,h,i)},u=(o=n.view,o?o.call(t,t,a):l.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("contentFilterButton",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/contentFilterButton",["jquery","underscore","framework/bview","bv/ui-core/focusableview","hbs!contentFilterButton","mf!bv/c2013/messages/contentFilter"],function(e,t,n,r,i,s){var o=n.extend({name:"contentFilterButton",events:{"click button":"filterControlButtonClicked"},template:i,msgpacks:[s],init:function(){this.listenTo(this.model,"change:expanded",this.toggleExpandFilter)},filterControlButtonClicked:function(e){var t=this.$el.find(".bv-filters-option"),n=this.$el.find(".bv-filters-option-all"),r=n.add(t);t.attr("tabindex")?(n.removeAttr("tabindex",0),t.removeAttr("tabindex",0),n.removeClass("bv-focusable"),t.removeClass("bv-focusable"),this.removeFocusables(r)):(n.attr("tabindex",0),t.attr("tabindex",0),n.addClass("bv-focusable"),t.addClass("bv-focusable"),this.addFocusables(r,this.$viewEl)),this.model.toggleContentFilter()},toggleExpandFilter:function(){this.$viewEl.toggleClass("bv-filter-active")}});return o.extend(r)}),BV.define("hbs!contentFilter",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/mountView"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){var r="",i,s;return r+=" ",s={hash:{}},r+=l((i=n.mountView,i?i.call(e,"FilterControls",e,s):f.call(e,"mountView","FilterControls",e,s)))+" ",s={hash:{}},r+=l((i=n.mountView,i?i.call(e,"ActiveFilters",e,s):f.call(e,"mountView","ActiveFilters",e,s)))+" ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this;s+="  ",a={hash:{tag:"div",classList:"content-filter",alwaysRender:!0},inverse:c.noop,fn:c.program(1,h,i)},u=(o=n.view,o?o.call(t,t,a):f.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("contentFilter",n),n.deps=[],n.tplMountedViews=["FilterControls","ActiveFilters"],n}),BV.define("bv/c2013/view/contentFilter",["framework/bview","bv/c2013/view/contentFilterButton","jquery","backbone","underscore","BV","hbs!contentFilter","mf!bv/c2013/messages/contentFilter"],function(e,t,n,r,i,s,o,u){return e.extend({name:"contentFilter",template:o,msgpacks:[u],init:function(){this._loaded=!1,this.hasFeature("filterButton")&&this.parent.views.push(new t({model:this.model,parent:this.parent})),this._filterInitDfd=n.Deferred(),this.listenTo(this.model,{filtersInitialized:this._onFiltersInitialized,filterEnabledChanged:this._checkViewState,"change:expanded":this.toggleExpandFilter})},_onFiltersInitialized:function(){this._filterInitDfd.resolve()},_createViews:function(){this.views||(this.views=[]);var e=this,t=n.Deferred();return this._loaded?(t.resolve(),t.promise()):(this._filterInitDfd.done(function(){s.require(["secondary"],function(n){var r=new n.FilterControlsView({model:e.model,parent:e.parent,componentId:e.componentId});e.views.push(r),r.createFilterViews();var i=new n.ActiveFiltersView({model:e.model,parent:e.parent,componentId:e.componentId});e.views.push(i),e._loaded=!0,t.resolve()})}),t.promise())},attach:function(){e.prototype.attach.apply(this,arguments),this._checkViewState()},_checkViewState:function(){function r(){e.$viewEl.toggleClass("bv-filter-controls-visible",t),e.$viewEl.toggleClass("bv-active-filters-visible",n),e.$viewEl.toggleClass("bv-filter-controls-hidden",!t),e.$viewEl.toggleClass("bv-active-filters-hidden",!n)}if(this.isBeforeAttach())return;var e=this,t=this.model.get("expanded"),n=this.model.activeFilters.length>0;this._loaded?r():this._createViews().done(function(){e.render(),r()})},toggleExpandFilter:function(e,t){if(this.isBeforeAttach())return;this.$(".bv-filters").toggleClass("bv-hidden",!t),this._checkViewState()},isBeforeAttach:function(){return!this.$viewEl||!this.$viewEl.length}})}),BV.define("bv/c2013/model/relevancyLink",["ENV","framework/bmodel","underscore"],function(e,t,n){return t.extend({name:"relevancyLink",init:function(e,t){n.extend(this.options,t),this.subscribe("setupcontentsort",this.setupContentSort),this.subscribe("sortcontent",this.sortContent)},sortContent:function(e){this.trigger("sortcontent",e)},setupContentSort:function(e){this.set({defaultSort:e.get("defaultSort"),currentSort:e.get("currentSort")}),this.trigger("setupcontentsort",this)}})}),BV.define("hbs!relevancyLink",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){var r="",i,s;return r+=' <span class="bv-sort-relevancy"> <button type="button" class="bv-relevancy-popup-target bv-focusable"> <span aria-hidden="true">?</span> <span class="bv-off-screen">',s={hash:{}},r+=l((i=n.extmsg,i?i.call(e,"offscreen_relevancy_link_description",e.msgpack,e,s):f.call(e,"extmsg","offscreen_relevancy_link_description",e.msgpack,e,s)))+"</span> </button> </span> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this;s+=" ",a={hash:{tag:"div"},inverse:c.noop,fn:c.program(1,h,i)},u=(o=n.view,o?o.call(t,t,a):f.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("relevancyLink",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("_i18n_relevancyPopup",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";return t+="<strong>Relevancy sort</strong> puts the best reviews at the top. We look at things like helpfulness votes, latest reviews, pictures and other traits that readers look for in their reviews.",t}(e)}catch(t){return r.push(["error",new Error("MF error on `relevancyPopup`: "+t.toString())]),""}}return t.registerHelper("_i18n_relevancyPopup",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("hbs!relevancyPopup",["hbs","vendor/handlebars/runtime","template/helpers/view","_i18n_relevancyPopup"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i;r+=' <!--[if lt IE 7]> <div class="bv-compat bvie6 bvie-lt8 bvie"> <![endif]--> <!--[if IE 7]> <div class="bv-compat bvie7 bvie-lt8 bvie"> <![endif]--> <!--[if IE 8]> <div class="bv-compat bvie8 bvie"> <![endif]--> <!--[if IE 9]> <div class="bv-compat bvie9 bvie"> <![endif]--> <!--[if gt IE 9]> <!--><div class="bv-compat"> <!--<![endif]--> <div class="bv-popup bv-focusable" tabindex="0">  ',(i=n._i18n_relevancyPopup)?i=i.call(e,{hash:{}}):(i=e._i18n_relevancyPopup,i=typeof i===f?i.apply(e):i);if(i||i===0)r+=i;return r+=" </div> </div> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+=' <div class="bv-core-container-',(o=n.version)?o=o.call(t,{hash:{}}):(o=t.version,o=typeof o===f?o.apply(t):o),s+=l(o)+'"> ',a={hash:{tag:"div",classList:"popup-relevancy-link"},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.view,o?o.call(t,t,a):h.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" </div> ",s});return t.registerPartial("relevancyPopup",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/relevancyPopup",["bv/ui-core/bpopupview","hbs!relevancyPopup","jquery"],function(e,t,n){return e.extend({name:"relevancyPopup",width:350,height:200,template:t,topPositionModifier:function(e){return e+10}})}),BV.define("mf!bv/c2013/messages/sort",["vendor/messageformat","framework/util/bvtrackerqueue"],function(e,t){return{content_sort_link:function(e){try{return function(e){var t="";return t+="Sort",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `content_sort_link`: "+n.toString())]),""}},featured:function(e){try{return function(e){var t="";return t+="Featured",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `featured`: "+n.toString())]),""}},mostRecent:function(e){try{return function(e){var t="";return t+="Most Recent",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `mostRecent`: "+n.toString())]),""}},oldest:function(e){try{return function(e){var t="";return t+="Oldest",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `oldest`: "+n.toString())]),""}},negative:function(e){try{return function(e){var t="";return t+="Lowest to Highest Rating",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `negative`: "+n.toString())]),""}},positive:function(e){try{return function(e){var t="";return t+="Highest to Lowest Rating",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `positive`: "+n.toString())]),""}},mostHelpful:function(e){try{return function(e){var t="";return t+="Most Helpful",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `mostHelpful`: "+n.toString())]),""}},mostUnhelpful:function(e){try{return function(e){var t="";return t+="Least Helpful",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `mostUnhelpful`: "+n.toString())]),""}},relevancy:function(e){try{return function(e){var t="";return t+="Most Relevant",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `relevancy`: "+n.toString())]),""}},recentAnswersFirst:function(e){try{return function(e){var t="";return t+="Newest answers",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `recentAnswersFirst`: "+n.toString())]),""}},recentAnswersLast:function(e){try{return function(e){var t="";return t+="Oldest answers",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `recentAnswersLast`: "+n.toString())]),""}},mostAnsweredQuestionsFirst:function(e){try{return function(e){var t="";return t+="Most answered",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `mostAnsweredQuestionsFirst`: "+n.toString())]),""}},mostAnsweredQuestionsLast:function(e){try{return function(e){var t="";return t+="Answers needed",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `mostAnsweredQuestionsLast`: "+n.toString())]),""}},answersWithAffiliationStaffFirst:function(e){try{return function(e){var t="";return t+="Staff answers",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `answersWithAffiliationStaffFirst`: "+n.toString())]),""}},recentQuestionsFirst:function(e){try{return function(e){var t="";return t+="Newest questions",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `recentQuestionsFirst`: "+n.toString())]),""}},recentQuestionsLast:function(e){try{return function(e){var t="";return t+="Oldest questions",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `recentQuestionsLast`: "+n.toString())]),""}},helpfulnessAnswersFirst:function(e){try{return function(e){var t="";return t+="Most helpful answers",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `helpfulnessAnswersFirst`: "+n.toString())]),""}},helpfulnessAnswersLast:function(e){try{return function(e){var t="";return t+="Least helpful answers",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `helpfulnessAnswersLast`: "+n.toString())]),""}},featuredQuestionsFirst:function(e){try{return function(e){var t="";return t+="Featured questions first",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `featuredQuestionsFirst`: "+n.toString())]),""}},offscreen_sort_arrow:function(e){try{return function(e){var t="";return t+="Menu, press enter to show options",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_sort_arrow`: "+n.toString())]),""}},offscreen_sort_label:function(e){try{return function(e){var t="";return t+="Sort by",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_sort_label`: "+n.toString())]),""}},offscreen_relevancy_link_description:function(e){try{return function(e){var t="";return t+="Display a popup with information about Relevancy Sort.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_relevancy_link_description`: "+n.toString())]),""}}}}),BV.define("bv/c2013/view/relevancyLink",["bv/ui-core/bpopuptargetview","underscore","hbs!relevancyLink","bv/c2013/view/relevancyPopup","mf!bv/c2013/messages/sort"],function(e,t,n,r,i){return e.extend({linkEl:".bv-relevancy-popup-target",name:"relevancyLink",classList:["relevancy-link-target"],msgpacks:[i],options:{delay:250,popupInTriggerEvent:"mouseenter",popupOutTriggerEvent:"mouseleave",positionPopupRelativeToLink:!0},template:n,TargetView:r,init:function(e){this.listenTo(this.model,{sortcontent:this.sortContent,setupcontentsort:this.setupContentSort})},attach:function(){var t=e.prototype.attach.apply(this,arguments),n=this.model.get("currentSort");return n&&this.sortContent(n),t},sortContent:function(e){this.$viewEl&&this.$viewEl.toggleClass("bv-relevancy-link-target-visible",e==="relevancy")},setupContentSort:function(e){this.sortContent(e.get("currentSort"))}})}),BV.define("mf!bv/c2013/messages/headToHead",["vendor/messageformat","framework/util/bvtrackerqueue"],function(e,t){return{show_full_Review:function(e){try{return function(e){var t="";return t+="Show Full Review",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `show_full_Review`: "+n.toString())]),""}},show_full_offscreen_Review:function(e){try{return function(e){var t="";return t+="This action will open a modal dialog.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `show_full_offscreen_Review`: "+n.toString())]),""}},mostHelpfulFavorable_Reviews:function(e){try{return function(e){var t="";return t+="Most Helpful Favorable Review",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `mostHelpfulFavorable_Reviews`: "+n.toString())]),""}},mostHelpfulCritical_Reviews:function(e){try{return function(e){var t="";return t+="Most Helpful Critical Review",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `mostHelpfulCritical_Reviews`: "+n.toString())]),""}},morePositiveLink_Reviews:function(e){try{return function(e){var t="";return t+="See more 4 and 5 star reviews",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `morePositiveLink_Reviews`: "+n.toString())]),""}},moreCriticalLink_Reviews:function(e){try{return function(e){var t="";return t+="See more 1, 2, and 3 star reviews",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `moreCriticalLink_Reviews`: "+n.toString())]),""}}}}),BV.define("bv/c2013/model/headToHead",["ENV","framework/bmodel","underscore","bv/api/fetch","bv/c2013/model/contentItem","mf!bv/c2013/messages/headToHead"],function(e,t,n,r,i,s){return t.extend({options:{},name:"headToHead",statsTypes:["Reviews","Questions"],minContent:10,minVotes:3,init:function(e,t){n.extend(this.options,t),this.set("contentType",this.getTopModel().get("contentType")),this.listenTo(this.getTopModel(),"filterresults",this.handleFilter),this.subscribe({pageto:this.fetchMostHelpful,showinlightbox:this.fetchMostHelpful}),this.set("hasContentFilter",this.getTopModel().hasFeature("contentFilter"))},handleFilter:function(e){this.set("filterActive",e.length)},setupDataProcessing:function(){this.on("dataready",this.processData,this)},processData:function(e){e.mostHelpfulPositive&&e.mostHelpfulNegative&&e.totalResults>=this.minContent&&(e.mostHelpfulPositive.parent=this,e.mostHelpfulPositive.isSimple=!0,e.mostHelpfulPositive.contentTitle=s["mostHelpfulFavorable_"+this.get("contentType")](),e.mostHelpfulNegative.parent=this,e.mostHelpfulNegative.isSimple=!0,e.mostHelpfulNegative.contentTitle=s["mostHelpfulCritical_"+this.get("contentType")](),this.set({mostHelpfulPositiveModel:new i(e.mostHelpfulPositive),mostHelpfulNegativeModel:new i(e.mostHelpfulNegative),hasResults:!0})),this.trigger("contentInitialized"),t.prototype.processData.call(this,e)},fetchMostHelpful:function(){var e=this,t=this.makeRequest(!0),n=this.makeRequest(!1),i=this.makeContentRequest();this.unsubscribe("pageto",this.fetchMostHelpful),r.get("batch",null,[i,t,n]).fetch(e.name).done(function(t){e.trigger("dataready",{totalResults:t[0].data.TotalResults,mostHelpfulPositive:t[1].data.Results[0],mostHelpfulNegative:t[2].data.Results[0]})})},makeRequest:function(t){var i=n.extend({},e.get("config").clientAPIConfig,this.get("clientAPIConfig")),s=i[r.noun(this.get("subjectType"))+"Id"],o=r.nouns(this.get("contentType")),u=r.get(o),a=t?">":"<=";return this.unsubscribe("pageto",this.fetchMostHelpful),u.filterBy("productid",s).filterBy("isRatingsOnly","false").include(["Authors",r.Nouns(o),"Products"]),u.filterBy("rating",a,"3"),u.filterBy("TotalPositiveFeedbackCount",">=",this.minVotes),u.sortBy("desc","TotalPositiveFeedbackCount"),u.limit("1"),u},makeContentRequest:function(){var t=n.extend({},e.get("config").clientAPIConfig,this.get("clientAPIConfig")),i=t[r.noun(this.get("subjectType"))+"Id"],s=r.nouns(this.get("contentType")),o=r.get(s).forProduct(i).limit("1");return o},showMorePositive:function(){this.getTopModel().trigger("showhelpfulpositive")},showMoreCritical:function(){this.getTopModel().trigger("showhelpfulcritical")}})}),BV.define("template/helpers/urlForRoute",["vendor/handlebars/runtime","util/url","window"],function(e,t,n){function r(){var e=Array.prototype.slice.call(arguments,0);typeof e[e.length-1]=="object"&&e.pop();var r,i,s;e.length===2?(r=n.location.href||"",i=e[0],s=e[1]):(r=e[0],i=e[1],s=e[2]);var o=i+"/"+s;r=t.splice(r,"bvroute");var u=t.push(r,"bvroute",o);return u}return e.registerHelper("urlForRoute",r),r}),BV.define("hbs!headToHead",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/mountView","template/helpers/urlForRoute","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.hasResults,{hash:{},inverse:c.noop,fn:c.program(2,p,t)});if(i||i===0)r+=i;return r+=" ",r}function p(e,t){var r="",i,s,o;r+=" <td> ",o={hash:{}},r+=l((i=n.mountView,i?i.call(e,"mostHelpfulPositive",o):f.call(e,"mountView","mostHelpfulPositive",o)))+" ",s=n["if"].call(e,e.hasContentFilter,{hash:{},inverse:c.noop,fn:c.program(3,d,t)});if(s||s===0)r+=s;r+=" </td> <td> ",o={hash:{}},r+=l((i=n.mountView,i?i.call(e,"mostHelpfulNegative",o):f.call(e,"mountView","mostHelpfulNegative",o)))+" ",s=n["if"].call(e,e.hasContentFilter,{hash:{},inverse:c.noop,fn:c.program(5,v,t)});if(s||s===0)r+=s;return r+=" </td> ",r}function d(e,t){var r="",i,s;return r+=' <a class="bv-head-to-head-see-more-positive bv-focusable" href="',s={hash:{}},r+=l((i=n.urlForRoute,i?i.call(e,e.contentType,"showHelpfulPositive",s):f.call(e,"urlForRoute",e.contentType,"showHelpfulPositive",s)))+'"> ',s={hash:{prefix:"morePositiveLink_"}},r+=l((i=n.extmsg,i?i.call(e,e.contentType,e.msgpack,e,s):f.call(e,"extmsg",e.contentType,e.msgpack,e,s)))+" </a> ",r}function v(e,t){var r="",i,s;return r+=' <a class="bv-head-to-head-see-more-critical bv-focusable" href="',s={hash:{}},r+=l((i=n.urlForRoute,i?i.call(e,e.contentType,"showHelpfulCritical",s):f.call(e,"urlForRoute",e.contentType,"showHelpfulCritical",s)))+'"> ',s={hash:{prefix:"moreCriticalLink_"}},r+=l((i=n.extmsg,i?i.call(e,e.contentType,e.msgpack,e,s):f.call(e,"extmsg",e.contentType,e.msgpack,e,s)))+" </a> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this;s+=" ",a={hash:{tag:"tr",classList:"head-to-head head-to-head-list"},inverse:c.noop,fn:c.program(1,h,i)},u=(o=n.view,o?o.call(t,t,a):f.call(t,"view",t,a));if(u||u===0)s+=u;return s});return t.registerPartial("headToHead",n),n.deps=[],n.tplMountedViews=["mostHelpfulPositive","mostHelpfulNegative"],n}),BV.define("hbs!simpleContentItem",["hbs","vendor/handlebars/runtime","hbs!content","hbs!previewMessage","hbs!contentActions","template/helpers/view","template/helpers/equals","template/helpers/withIf"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var i="",s,o,u;i+=' <h3 class="bv-content-title">',(s=n.contentTitle)?s=s.call(e,{hash:{}}):(s=e.contentTitle,s=typeof s===f?s.apply(e):s),i+=l(s)+"</h3> ",u={hash:{},inverse:c.noop,fn:c.program(2,d,t)},o=(s=n.equals,s?s.call(e,e.Type,"review",u):h.call(e,"equals",e.Type,"review",u));if(o||o===0)i+=o;i+=' <div class="bv-content-item-avatar-offset bv-content-item-avatar-offset-off"> ',o=c.invokePartial(r.content,"content",e,n,r);if(o||o===0)i+=o;i+=" ",o=c.invokePartial(r.previewMessage,"previewMessage",e,n,r);if(o||o===0)i+=o;i+=" ",o=c.invokePartial(r.contentActions,"contentActions",e,n,r);if(o||o===0)i+=o;return i+=" </div> ",i}function d(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:c.noop,fn:c.program(3,v,t)},s=(i=n.withIf,i?i.call(e,e.Reference,o):h.call(e,"withIf",e.Reference,o));if(s||s===0)r+=s;return r+=" ",r}function v(e,t){var r="",i;r+=" ",i=n["if"].call(e,e.Name,{hash:{},inverse:c.noop,fn:c.program(4,m,t)});if(i||i===0)r+=i;return r+=" ",r}function m(e,t){var r="",i;return r+='<meta itemprop="itemReviewed" content="',(i=n.Name)?i=i.call(e,{hash:{}}):(i=e.Name,i=typeof i===f?i.apply(e):i),r+=l(i)+'"/>',r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+=" ",a={hash:{tag:"div",classList:"content-item section-summary-block",dataContentId:!0},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.view,o?o.call(t,t,a):h.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("simpleContentItem",n),n.deps=["content","previewMessage","contentActions"],n.tplMountedViews=[],n}),BV.define("hbs!viewFullContentLink",["hbs","vendor/handlebars/runtime","template/helpers/urlForRoute","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<a class="bv-text-link bv-show-more-link bv-focusable" href="',u={hash:{}},s+=f((o=n.urlForRoute,o?o.call(t,t.contentType,t.reviewId,u):a.call(t,"urlForRoute",t.contentType,t.reviewId,u)))+'"> ',u={hash:{prefix:"show_full_"}},s+=f((o=n.extmsg,o?o.call(t,t.contentType,t.msgpack,t,u):a.call(t,"extmsg",t.contentType,t.msgpack,t,u)))+' <span class="bv-off-screen">',u={hash:{prefix:"show_full_offscreen_"}},s+=f((o=n.extmsg,o?o.call(t,t.contentType,t.msgpack,t,u):a.call(t,"extmsg",t.contentType,t.msgpack,t,u)))+"</span> </a>",s});return t.registerPartial("viewFullContentLink",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/headToHead",["framework/bview","underscore","jquery","hbs!headToHead","hbs!simpleContentItem","hbs!viewFullContentLink","bv/c2013/view/contentItem","bv/util/contentType","mf!bv/c2013/messages/headToHead"],function(e,t,n,r,i,s,o,u,a){return e.extend({name:"headToHead",template:r,msgpacks:[a],maxCharacters:100,events:{"click .bv-head-to-head-see-more-positive":"showMorePositive","click .bv-head-to-head-see-more-critical":"showMoreCritical"},init:function(){this.listenTo(this.model,{contentInitialized:this.initComparison,"change:filterActive":this.handleFilter})},initComparison:function(){var e=this,t=e.model.get("mostHelpfulPositiveModel"),n=e.model.get("mostHelpfulNegativeModel");this.views=this.views||[],t&&n&&(e.initContentView(t,0,"mostHelpfulPositive"),e.initContentView(n,1,"mostHelpfulNegative"))},initContentView:function(e,t,n){var r,s=e.get("Type")||e.contentType||e.get("contentType"),a=this;return r=new o({model:e,config:e,componentId:e.componentId||e.get("componentId"),contentType:u.Nouns(s),secondaryContentType:e.secondaryContentType||e.get("secondaryContentType"),index:t,classList:["content-top-"+u.noun(s)],parent:a,viewAlias:n}),r.template=i,a.views.push(r),r},attach:function(t){var r=this;e.prototype.attach.call(this,t),this.$viewEl.find(".bv-content-summary-body p:nth-child(n+2)").remove(),this.$viewEl.find(".bv-content-summary-body p").each(function(e,t){var i=s({msgpack:a,reviewId:r.views[e].model.get("Id"),contentType:u.Noun(r.model.get("contentType"))}),o=n(t).text().substring(0,r.maxCharacters);n(t).html(o+"&hellip;"+i)})},handleFilter:function(e,t){if(!this.$viewEl&&t){this.classList.push("hidden");return}this.$viewEl.toggleClass("bv-hidden",t>0)},showMorePositive:function(e){if(e.isDefaultPrevented()||e.metaKey||e.ctrlKey)return;e.preventDefault(),this.model.showMorePositive()},showMoreCritical:function(e){if(e.isDefaultPrevented()||e.metaKey||e.ctrlKey)return;e.preventDefault(),this.model.showMoreCritical()}})}),BV.define("bv/c2013/model/inlineHistogram",["ENV","underscore","framework/bmodel"],function(e,t,n){return n.extend({name:"inlineHistogram",init:function(e,n){t.extend(this.options,n)},setupDataProcessing:function(){var e=this.getTopModel();e.onDataReady(function(){this.processData(e.get("initData"))},this)},processData:function(e){this.set({Statistics:e.Statistics}),n.prototype.processData.call(this,e)}})}),BV.define("hbs!inlineHistogram",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/withIf","template/helpers/extmsg","template/helpers/reverseEach","template/helpers/ratingIconChar","template/helpers/percentage"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:h.noop,fn:h.programWithDepth(d,t,e)},s=(i=n.withIf,i?i.call(e,e.Statistics,o):f.call(e,"withIf",e.Statistics,o));if(s||s===0)r+=s;return r+=" ",r}function d(e,t,r){var i="",s,o,u;i+=' <div class="bv-inline-histogram-ratings"> <div class="bv-inline-histogram-header"> <h3 class="bv-content-title" role="presentation">',u={hash:{}},i+=l((s=n.extmsg,s?s.call(e,"ratingSnapshotHeader",r.msgpack,e,u):f.call(e,"extmsg","ratingSnapshotHeader",r.msgpack,e,u)))+"</h3> </div> <table role=\"presentation\"> <caption class='bv-histogram-filter-helper'>",u={hash:{}},i+=l((s=n.extmsg,s?s.call(e,"histogram_select_to_filter",r.msgpack,e,u):f.call(e,"extmsg","histogram_select_to_filter",r.msgpack,e,u)))+"</caption> ",u={hash:{},inverse:h.noop,fn:h.programWithDepth(v,t,e,r)},o=(s=n.reverseEach,s?s.call(e,e.RatingDistribution,u):f.call(e,"reverseEach",e.RatingDistribution,u));if(o||o===0)i+=o;return i+=" </table> </div> ",i}function v(e,t,r,i){var s="",o,u,a;return s+=' <tr class="bv-inline-histogram-ratings-star-container" title="',a={hash:{}},s+=l((o=n.extmsg,o?o.call(e,"histogram_filter",i.msgpack,e,a):f.call(e,"extmsg","histogram_filter",i.msgpack,e,a)))+'"> <td class="bv-inline-histogram-ratings-star" data-bv-histogram-rating-value="',(u=n.RatingValue)?u=u.call(e,{hash:{}}):(u=e.RatingValue,u=typeof u===c?u.apply(e):u),s+=l(u)+'"> ',(u=n.RatingValue)?u=u.call(e,{hash:{}}):(u=e.RatingValue,u=typeof u===c?u.apply(e):u),s+=l(u)+'<span class="bv-glyph" aria-hidden="true">',a={hash:{}},s+=l((o=n.ratingIconChar,o?o.call(e,"rating-stars-on",a):f.call(e,"ratingIconChar","rating-stars-on",a)))+'</span> <span class="bv-off-screen">',a={hash:{}},s+=l((o=n.extmsg,o?o.call(e,"offscreen_histogram_stars",i.msgpack,e,a):f.call(e,"extmsg","offscreen_histogram_stars",i.msgpack,e,a)))+'</span> </td> <td class="bv-inline-histogram-ratings-bar" data-bv-histogram-rating-value="',(u=n.RatingValue)?u=u.call(e,{hash:{}}):(u=e.RatingValue,u=typeof u===c?u.apply(e):u),s+=l(u)+'" role="presentation"> <span class="bv-content-secondary-ratings-container"> <span class="bv-content-secondary-ratings-value" style="width:',a={hash:{}},s+=l((o=n.percentage,o?o.call(e,e.Count,r.TotalCount,1,a):f.call(e,"percentage",e.Count,r.TotalCount,1,a)))+'% !important;"></span> </span> </td> <td class="bv-inline-histogram-ratings-score"> <span aria-hidden="true"> ',(u=n.Count)?u=u.call(e,{hash:{}}):(u=e.Count,u=typeof u===c?u.apply(e):u),s+=l(u)+' </span> <span class="bv-off-screen"> ',a={hash:{}},s+=l((o=n.extmsg,o?o.call(e,"offscreen_histogram_ratingDistribution",i.msgpack,e,a):f.call(e,"extmsg","offscreen_histogram_ratingDistribution",i.msgpack,e,a)))+' </span> <button type="button" class="bv-focusable bv-off-screen">',a={hash:{}},s+=l((o=n.extmsg,o?o.call(e,"histogram_filter",i.msgpack,e,a):f.call(e,"extmsg","histogram_filter",i.msgpack,e,a)))+"</button> </td> </tr> ",s}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;s+=" ",a={hash:{tag:"td",classList:"inline-histogram section-summary-block"},inverse:h.noop,fn:h.program(1,p,i)},u=(o=n.view,o?o.call(t,t,a):f.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("inlineHistogram",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/inlineHistogram",["framework/bview","underscore","jquery","bv/ui-core/focusableview","hbs!inlineHistogram","mf!bv/c2013/messages/histogram","util/specialKeys"],function(e,t,n,r,i,s,o){return e.extend({name:"inlineHistogram",template:i,msgpacks:[s],events:{"click .bv-inline-histogram-ratings-star-container":"filterContent","keydown .bv-inline-histogram-ratings-star-container button":"filterContent","mouseenter .bv-inline-histogram-ratings tr":"mouseenter","mouseleave .bv-inline-histogram-ratings tr":"mouseleave","focus .bv-inline-histogram-ratings tr button":"focus","blur .bv-inline-histogram-ratings tr button":"blur"},init:function(){this._hasContentFilter=this.getTopModel().hasFeature("contentFilter")},filterContent:function(e){if(!this._hasContentFilter)return;if(e.type.substr(0,3)==="key"&&e.keyCode!==o.ENTER&&e.keyCode!==o.SPACE)return;e.preventDefault();var t=n(e.currentTarget).closest("tr"),i=t.children(".bv-inline-histogram-ratings-bar").first().data("bv-histogram-rating-value");i&&this.publish("filtercontent","Rating",i,!1,{replace:!0}),r.moveFocus(t.find("button"))},mouseenter:function(e){if(!this._hasContentFilter)return;n(e.target).closest("tr").addClass("bv-inline-histogram-row-active")},mouseleave:function(e){if(!this._hasContentFilter)return;n(e.target).closest("tr").removeClass("bv-inline-histogram-row-active")},focus:function(e){if(!this._hasContentFilter)return;n(e.target).closest("tr").addClass("bv-inline-histogram-row-active bv-pseudo-focused")},blur:function(e){if(!this._hasContentFilter)return;n(e.target).closest("tr").removeClass("bv-inline-histogram-row-active bv-pseudo-focused")}})}),BV.define("mf!bv/c2013/messages/secondaryRatingSummary",["vendor/messageformat","framework/util/bvtrackerqueue"],function(e,t){return{secondaryRatingSummaryHeader:function(e){try{return function(e){var t="";return t+="Average Customer Ratings",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `secondaryRatingSummaryHeader`: "+n.toString())]),""}},secondaryRatingSummaryOverallRatingLabel:function(e){try{return function(e){var t="";return t+="Overall",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `secondaryRatingSummaryOverallRatingLabel`: "+n.toString())]),""}},offscreen_secondary_rating_summary:function(e){try{return function(e){var t="";t+="average rating value is ";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.AverageRating,t+=" of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.RatingRange,t+=".",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_secondary_rating_summary`: "+n.toString())]),""}},offscreen_secondary_rating_summary_value_of_one_means:function(e){try{return function(e){var t="";return t+="Rating of 1 means",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_secondary_rating_summary_value_of_one_means`: "+n.toString())]),""}},offscreen_secondary_rating_summary_value_max_means:function(e){try{return function(e){var t="";t+="Rating of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.RatingRange,t+=" means",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_secondary_rating_summary_value_max_means`: "+n.toString())]),""}},offscreen_secondary_rating_summary_stars:function(e){try{return function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.AverageRating,t+=" out of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.RatingRange,t+=" stars.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `offscreen_secondary_rating_summary_stars`: "+n.toString())]),""}}}}),BV.define("bv/c2013/model/secondaryRatingSummary",["ENV","underscore","framework/bmodel","dimsumFields!fields","mf!bv/c2013/messages/secondaryRatingSummary"],function(e,t,n,r,i){return n.extend({name:"secondaryRatingSummary",init:function(e,n){t.extend(this.options,n)},setupDataProcessing:function(){var e=this.getTopModel();e.onDataReady(function(){this.processData(e.get("initData"))},this)},processData:function(e){var s=e.Statistics.SecondaryRatingsAverages,o=e.Statistics.SecondaryRatingsAveragesOrder,u=e.Statistics.OverallRatingRange||5,a=[];t(o).forEach(function(e){var t=s[e],n=r&&r.rating&&r.rating[e];n&&(t.HideDisplay=n.hideDisplay,t.DisplayType=n.type,t.Label=n.displayLabel,n.type==="SLIDER"&&(t.RatingRange=t.RatingRange||n.sliderSize,t.MinLabel=n.sliderDimension1Label,t.MaxLabel=n.sliderDimension2Label)),t.RatingRange=t.RatingRange||u,a.push(t)}),this.set({OverallRating:{AverageRating:e.Statistics.AverageOverallRating,Id:i.secondaryRatingSummaryOverallRatingLabel(),RatingRange:u},SecondaryRatings:a}),n.prototype.processData.call(this,e)}})}),BV.define("hbs!secondaryRatingSummary",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/extmsg","template/helpers/renderIcon","template/helpers/loop","template/helpers/ratingIconChar","template/helpers/percentage","template/helpers/fixedNumber","template/helpers/equals","template/helpers/renderSlider"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t,r){var i="",s,o,u;i+=' <div class="bv-secondary-rating-summary-header"> <h3 class="bv-content-title" role="presentation">',u={hash:{}},i+=l((s=n.extmsg,s?s.call(e,"secondaryRatingSummaryHeader",e.msgpack,e,u):f.call(e,"extmsg","secondaryRatingSummaryHeader",e.msgpack,e,u)))+'</h3> </div> <table class="bv-secondary-rating-summary-list" role="presentation"> ',o=n["with"].call(e,e.OverallRating,{hash:{},inverse:c.noop,fn:c.programWithDepth(p,t,e,r)});if(o||o===0)i+=o;i+=" ",o=n.each.call(e,e.SecondaryRatings,{hash:{},inverse:c.noop,fn:c.programWithDepth(m,t,e)});if(o||o===0)i+=o;return i+=" </table> ",i}function p(e,t,r,i){var s="",o,u,a;s+=' <tr class="bv-secondary-rating-summary-stars"> <td class="bv-secondary-rating-summary-id bv-td">',a={hash:{prefix:"rating_",defaultDisplay:e.Id}},s+=l((o=n.extmsg,o?o.call(e,e.Id,r.msgpack,e,a):f.call(e,"extmsg",e.Id,r.msgpack,e,a)))+'</td> <td class="bv-rating-ratio bv-td"> <span class="bv-rating-stars-container"> ',a={hash:{classList:"bv-rating-stars bv-rating-stars-off",ariaHidden:"true"},inverse:c.noop,fn:c.program(3,d,t)},u=(o=n.renderIcon,o?o.call(e,"bv-sprite-prs-rating-stars-off",a):f.call(e,"renderIcon","bv-sprite-prs-rating-stars-off",a));if(u||u===0)s+=u;s+=' <span style="width:',a={hash:{}},s+=l((o=n.percentage,o?o.call(e,e.AverageRating,5,1,a):f.call(e,"percentage",e.AverageRating,5,1,a)))+'% !important;" class="bv-rating-stars bv-rating-stars-on" aria-hidden="true"> ',a={hash:{},inverse:c.noop,fn:c.program(4,v,t)},u=(o=n.loop,o?o.call(e,e.RatingRange,e,a):f.call(e,"loop",e.RatingRange,e,a));if(u||u===0)s+=u;return s+=' </span> </span> <span class="bv-secondary-rating-summary-rating" aria-label="',a={hash:{}},s+=l((o=n.extmsg,o?o.call(e,"offscreen_secondary_rating_summary",i.msgpack,e,a):f.call(e,"extmsg","offscreen_secondary_rating_summary",i.msgpack,e,a)))+'"> ',a={hash:{}},s+=l((o=n.fixedNumber,o?o.call(e,e.AverageRating,1,a):f.call(e,"fixedNumber",e.AverageRating,1,a)))+" </span> </td> </tr> ",s}function d(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:c.noop,fn:c.program(4,v,t)},s=(i=n.loop,i?i.call(e,e.RatingRange,e,o):f.call(e,"loop",e.RatingRange,e,o));if(s||s===0)r+=s;return r+=" ",r}function v(e,t){var r,i;return i={hash:{}},l((r=n.ratingIconChar,r?r.call(e,"rating-stars-on",i):f.call(e,"ratingIconChar","rating-stars-on",i)))}function m(e,t,r){var i="",s;i+=" ",s=n.unless.call(e,e.HideDisplay,{hash:{},inverse:c.noop,fn:c.programWithDepth(g,t,e,r)});if(s||s===0)i+=s;return i+=" ",i}function g(e,t,r,i){var s="",o,u,a;s+=' <tr class="bv-secondary-rating-summary-bars-container"> <td class="bv-secondary-rating-summary-id bv-td">',a={hash:{prefix:"rating_",defaultDisplay:e.Id}},s+=l((o=n.extmsg,o?o.call(e,e.Id,r.msgpack,e,a):f.call(e,"extmsg",e.Id,r.msgpack,e,a)))+'</td> <td class="bv-rating-ratio bv-td"> ',a={hash:{},inverse:c.programWithDepth(b,t,i),fn:c.programWithDepth(y,t,i)},u=(o=n.equals,o?o.call(e,e.DisplayType,"SLIDER",a):f.call(e,"equals",e.DisplayType,"SLIDER",a));if(u||u===0)s+=u;return s+=" </td> </tr> ",s}function y(e,t,r){var i="",s,o;return i+=' <span class="bv-secondary-rating-summary-container bv-content-slider"> ',o={hash:{}},i+=l((s=n.renderSlider,s?s.call(e,r.msgpack,e,o):f.call(e,"renderSlider",r.msgpack,e,o)))+" </span> ",i}function b(e,t,r){var i="",s,o,u;i+=' <span class="bv-secondary-rating-summary-container"> <ul class="bv-secondary-rating-summary-bars" role="presentation"> ',u={hash:{},inverse:c.noop,fn:c.programWithDepth(w,t,e)},o=(s=n.loop,s?s.call(e,e.RatingRange,u):f.call(e,"loop",e.RatingRange,u));if(o||o===0)i+=o;return i+=' <li class="bv-secondary-rating-summary-value" style="width:',u={hash:{}},i+=l((s=n.percentage,s?s.call(e,e.AverageRating,e.RatingRange,1,u):f.call(e,"percentage",e.AverageRating,e.RatingRange,1,u)))+'% !important;"></li> </ul> </span> <span class="bv-secondary-rating-summary-rating" aria-label="',u={hash:{}},i+=l((s=n.extmsg,s?s.call(e,"offscreen_secondary_rating_summary",r.msgpack,e,u):f.call(e,"extmsg","offscreen_secondary_rating_summary",r.msgpack,e,u)))+'">',u={hash:{}},i+=l((s=n.fixedNumber,s?s.call(e,e.AverageRating,1,u):f.call(e,"fixedNumber",e.AverageRating,1,u)))+"</span> ",i}function w(e,t,r){var i="",s,o;return i+='<li class="bv-secondary-rating-summary-bar" style="width:',o={hash:{}},i+=l((s=n.percentage,s?s.call(e,1,r.RatingRange,1,o):f.call(e,"percentage",1,r.RatingRange,1,o)))+'% !important;"></li>',i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this;s+=" ",a={hash:{tag:"td",classList:"secondary-rating-summary section-summary-block"},inverse:c.noop,fn:c.programWithDepth(h,i,t)},u=(o=n.view,o?o.call(t,t,a):f.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("secondaryRatingSummary",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/secondaryRatingSummary",["framework/bview","underscore","jquery","hbs!secondaryRatingSummary","mf!bv/c2013/messages/secondaryRatingSummary"],function(e,t,n,r,i){return e.extend({name:"secondaryRatingSummary",events:{"click a.bv-rating-stars-container":"clickStars"},template:r,msgpacks:[i],clickStars:function(e){e.preventDefault()}})}),BV.define("util/md5",[],function(){function e(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535}function t(e,t){return e<<t|e>>>32-t}function n(n,r,i,s,o,u){return e(t(e(e(r,n),e(s,u)),o),i)}function r(e,t,r,i,s,o,u){return n(t&r|~t&i,e,t,s,o,u)}function i(e,t,r,i,s,o,u){return n(t&i|r&~i,e,t,s,o,u)}function s(e,t,r,i,s,o,u){return n(t^r^i,e,t,s,o,u)}function o(e,t,r,i,s,o,u){return n(r^(t|~i),e,t,s,o,u)}function u(t,n){t[n>>5]|=128<<n%32,t[(n+64>>>9<<4)+14]=n;var u,a,f,l,c,h=1732584193,p=-271733879,d=-1732584194,v=271733878;for(u=0;u<t.length;u+=16)a=h,f=p,l=d,c=v,h=r(h,p,d,v,t[u],7,-680876936),v=r(v,h,p,d,t[u+1],12,-389564586),d=r(d,v,h,p,t[u+2],17,606105819),p=r(p,d,v,h,t[u+3],22,-1044525330),h=r(h,p,d,v,t[u+4],7,-176418897),v=r(v,h,p,d,t[u+5],12,1200080426),d=r(d,v,h,p,t[u+6],17,-1473231341),p=r(p,d,v,h,t[u+7],22,-45705983),h=r(h,p,d,v,t[u+8],7,1770035416),v=r(v,h,p,d,t[u+9],12,-1958414417),d=r(d,v,h,p,t[u+10],17,-42063),p=r(p,d,v,h,t[u+11],22,-1990404162),h=r(h,p,d,v,t[u+12],7,1804603682),v=r(v,h,p,d,t[u+13],12,-40341101),d=r(d,v,h,p,t[u+14],17,-1502002290),p=r(p,d,v,h,t[u+15],22,1236535329),h=i(h,p,d,v,t[u+1],5,-165796510),v=i(v,h,p,d,t[u+6],9,-1069501632),d=i(d,v,h,p,t[u+11],14,643717713),p=i(p,d,v,h,t[u],20,-373897302),h=i(h,p,d,v,t[u+5],5,-701558691),v=i(v,h,p,d,t[u+10],9,38016083),d=i(d,v,h,p,t[u+15],14,-660478335),p=i(p,d,v,h,t[u+4],20,-405537848),h=i(h,p,d,v,t[u+9],5,568446438),v=i(v,h,p,d,t[u+14],9,-1019803690),d=i(d,v,h,p,t[u+3],14,-187363961),p=i(p,d,v,h,t[u+8],20,1163531501),h=i(h,p,d,v,t[u+13],5,-1444681467),v=i(v,h,p,d,t[u+2],9,-51403784),d=i(d,v,h,p,t[u+7],14,1735328473),p=i(p,d,v,h,t[u+12],20,-1926607734),h=s(h,p,d,v,t[u+5],4,-378558),v=s(v,h,p,d,t[u+8],11,-2022574463),d=s(d,v,h,p,t[u+11],16,1839030562),p=s(p,d,v,h,t[u+14],23,-35309556),h=s(h,p,d,v,t[u+1],4,-1530992060),v=s(v,h,p,d,t[u+4],11,1272893353),d=s(d,v,h,p,t[u+7],16,-155497632),p=s(p,d,v,h,t[u+10],23,-1094730640),h=s(h,p,d,v,t[u+13],4,681279174),v=s(v,h,p,d,t[u],11,-358537222),d=s(d,v,h,p,t[u+3],16,-722521979),p=s(p,d,v,h,t[u+6],23,76029189),h=s(h,p,d,v,t[u+9],4,-640364487),v=s(v,h,p,d,t[u+12],11,-421815835),d=s(d,v,h,p,t[u+15],16,530742520),p=s(p,d,v,h,t[u+2],23,-995338651),h=o(h,p,d,v,t[u],6,-198630844),v=o(v,h,p,d,t[u+7],10,1126891415),d=o(d,v,h,p,t[u+14],15,-1416354905),p=o(p,d,v,h,t[u+5],21,-57434055),h=o(h,p,d,v,t[u+12],6,1700485571),v=o(v,h,p,d,t[u+3],10,-1894986606),d=o(d,v,h,p,t[u+10],15,-1051523),p=o(p,d,v,h,t[u+1],21,-2054922799),h=o(h,p,d,v,t[u+8],6,1873313359),v=o(v,h,p,d,t[u+15],10,-30611744),d=o(d,v,h,p,t[u+6],15,-1560198380),p=o(p,d,v,h,t[u+13],21,1309151649),h=o(h,p,d,v,t[u+4],6,-145523070),v=o(v,h,p,d,t[u+11],10,-1120210379),d=o(d,v,h,p,t[u+2],15,718787259),p=o(p,d,v,h,t[u+9],21,-343485551),h=e(h,a),p=e(p,f),d=e(d,l),v=e(v,c);return[h,p,d,v]}function a(e){var t,n="";for(t=0;t<e.length*32;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function f(e){var t,n=[];n[(e.length>>2)-1]=undefined;for(t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<e.length*8;t+=8)n[t>>5]|=(e.charCodeAt(t/8)&255)<<t%32;return n}function l(e){return a(u(f(e),e.length*8))}function c(e,t){var n,r=f(e),i=[],s=[],o;i[15]=s[15]=undefined,r.length>16&&(r=u(r,e.length*8));for(n=0;n<16;n+=1)i[n]=r[n]^909522486,s[n]=r[n]^1549556828;return o=u(i.concat(f(t)),512+t.length*8),a(u(s.concat(o),640))}function h(e){var t="0123456789abcdef",n="",r,i;for(i=0;i<e.length;i+=1)r=e.charCodeAt(i),n+=t.charAt(r>>>4&15)+t.charAt(r&15);return n}function p(e){return unescape(encodeURIComponent(e))}function d(e){return l(p(e))}function v(e){return h(d(e))}function m(e,t){return c(p(e),p(t))}function g(e,t){return h(m(e,t))}function y(e,t,n){return t?n?m(t,e):g(t,e):n?d(e):v(e)}return y}),BV.define("util/parseuri",[],function(){function e(t){var n=e.options,r=n.parser[n.strictMode?"strict":"loose"].exec(t),i={},s=14;while(s--)i[n.key[s]]=r[s]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,function(e,t,r){t&&(i[n.q.name][t]=r)}),i}return e.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},e}),BV.define("bv/util/domainPolice",["ENV","underscore","util/parseuri","util/url","window"],function(e,t,n,r,i){function s(i){i||(i=r.origin);var s=n(i).authority,u=t(e.get("config").allowedDomains).clone(),a;for(var f=0;f<u.length;f++)if(o(u[f].domainAddress,s))return a=u[f].domainAddress,a.match(/^(\.\d+){4}$/)&&(a=a.substr(1)),a;return undefined}function o(e,t){if(e.charAt(0)!==".")return t===e;var n=/^([^:]*)(:\d+)?$/.exec(t),r=n&&n[1];if(r){var i=("."+r).lastIndexOf(e);return i>=0&&i===1+r.length-e.length}}function u(){if(!i.location||!i.location.host)return!1;var n=t(e.get("config").allowedDomains).clone();for(var r=0;r<n.length;r++){var s=o(n[r].domainAddress,i.location.host);if(s&&n[r].thirdPartyCookieEnabled)return!0}return!1}return{allowedDomain:t.memoize(s),thirdPartyCookieEnabled:t.memoize(u)}}),BV.define("bv/util/session",["ENV","backbone","jquery","underscore","window","client!util/cookie","util/checksum","util/md5","bv/util/domainPolice","BV"],function(e,t,n,r,i,s,o,u,a,f){var l="bvf_"+o(e.get("config").clientname)+(e.get("config").environment==="production"?"":"s"),c=s.read?s.read(l):null,h=n.Deferred(),p=e.get("config").utilPath,d=r.once(function(){f.require(["secondary"],function(e){var t=new f.easyXDM.Rpc({hash:!0,remote:"https:"+p+"storage.htm",swf:"https:"+p+"easyxdm.swf",props:{role:"presentation",tabindex:"-1",title:"empty"}},{remote:{set:{},get:{},remove:{}}});h.resolve(t)})}),v={};return{id:function(){return c},setup:function(){return d(),h},create:function(){this.setup();var e=u(l+n.now());return s.create(l,e,null,a.allowedDomain()),c=s.read(l),c},set:function(e,t,r,i){r=r||n.noop,i=i||n.noop,c||this.create(),this.setup().done(function(s){s.set(l+"_"+e,c,t,function(t){v[e]=n.Deferred().resolve(t),r(t)},i)})},_get:function(e,t){t=t||n.noop,c?this.setup().done(function(n){n.get(l+"_"+e,c,t)}):t()},get:function(e,t){t=t||n.noop,c?(v[e]||(v[e]=v[e]||n.Deferred(),this._get(e,function(t){v[e].resolve(t)})),v[e].done(t)):t()},remove:function(e,t){t=t||n.noop,c?(delete v[e],this.setup().done(function(n){n.remove(l+"_"+e,t)})):t()}}}),BV.define("bv/c2013/model/feedback",["ENV","framework/bmodel","underscore","bv/util/session","bv/util/contentType"],function(e,t,n,r,i){return t.extend({name:"feedback",processData:function(e){var t=this,i=n({}).extend(e,this.toJSON());t.set(i),r.get("feedbacks",function(e){if(!e){t.dataReady(t.toJSON());return}var r=t.get("Type"),i=t.get("Id"),s;r&&i&&(s=e[r+"-h-"+i],s&&s.v&&s.c&&n(["Positive","Negative"]).forEach(function(e){var n=e.toLowerCase(),r="Total"+e+"FeedbackCount",i={_FeedbackVoted:n};s.v===n.charAt(0)&&(i[r]=Math.max(s.c,t.get(r)),t.set(i))}),e[r+"-i-"+i]&&t.set("_MarkedAsInappropriate",!0)),t.dataReady(t.toJSON())})},getSubmitType:function(){var e=i.noun(this.get("contentType"));if(e==="comment"){var t=this.getTopModel();t&&(e=i.noun(t.get("contentType"))+"_"+e)}return e},toJSON:function(){var e=t.prototype.toJSON.call(this);return e.contentSelectType=i.noun(e.contentType),e.Title&&(e.hasTitle=!0),e}})}),BV.define("_i18n_contentReportedBtn",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";return t+="Reported",t}(e)}catch(t){return r.push(["error",new Error("MF error on `contentReportedBtn`: "+t.toString())]),""}}return t.registerHelper("_i18n_contentReportedBtn",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("_i18n_contentReportBtn",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";return t+="Report",t}(e)}catch(t){return r.push(["error",new Error("MF error on `contentReportBtn`: "+t.toString())]),""}}return t.registerHelper("_i18n_contentReportBtn",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("hbs!inappropriate",["hbs","vendor/handlebars/runtime","_i18n_contentReportedBtn","_i18n_contentReportBtn"],function(e,t){var n=t.template(function(e,t,n,r,i){function a(e,t){var r="",i;r+="  ",(i=n._i18n_contentReportedBtn)?i=i.call(e,{hash:{}}):(i=e._i18n_contentReportedBtn,i=typeof i===o?i.apply(e):i);if(i||i===0)r+=i;return r+=" ",r}function f(e,t){var r="",i;r+="  ",(i=n._i18n_contentReportBtn)?i=i.call(e,{hash:{}}):(i=e._i18n_contentReportBtn,i=typeof i===o?i.apply(e):i);if(i||i===0)r+=i;return r+=" ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s,o="function",u=this;return s=n["if"].call(t,t,{hash:{},inverse:u.program(3,f,i),fn:u.program(1,a,i)}),s||s===0?s:""});return t.registerPartial("inappropriate",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!feedback",["hbs","vendor/handlebars/runtime","hbs!inappropriate","template/helpers/view","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i;r+=" ",i=n.unless.call(e,e.isSimple,{hash:{},inverse:h.program(10,b,t),fn:h.program(2,d,t)});if(i||i===0)r+=i;return r+=" ",r}function d(e,t){var r="",i;r+=" ",i=n.unless.call(e,e.IsSyndicated,{hash:{},inverse:h.noop,fn:h.program(3,v,t)});if(i||i===0)r+=i;return r+=" ",r}function v(e,t){var i="",s,o,u;i+=' <span class="bv-off-screen bv-off-screen-positive-rating">',u={hash:{}},i+=l((s=n.extmsg,s?s.call(e,"positiveFeedback",e.msgpack,e,u):c.call(e,"extmsg","positiveFeedback",e.msgpack,e,u)))+'</span> <span class="bv-off-screen bv-off-screen-negative-rating">',u={hash:{}},i+=l((s=n.extmsg,s?s.call(e,"negativeFeedback",e.msgpack,e,u):c.call(e,"extmsg","negativeFeedback",e.msgpack,e,u)))+'</span> <dl class="bv-content-feedback-vote ',o=n["if"].call(e,e._FeedbackVoted,{hash:{},inverse:h.program(6,g,t),fn:h.program(4,m,t)});if(o||o===0)i+=o;i+='" role="presentation"> <dt class="bv-content-feedback-vote-request" role="presentation"> <h4>',u={hash:{}},i+=l((s=n.extmsg,s?s.call(e,"contentHelpfulQuestion",e.msgpack,e,u):c.call(e,"extmsg","contentHelpfulQuestion",e.msgpack,e,u)))+'</h4> </dt> <dd class="bv-content-feedback-btn-container" role="presentation"> <button type="button" class="bv-content-btn bv-content-btn-feedback-yes bv-focusable" aria-label="',u={hash:{protectString:!0}},i+=l((s=n.extmsg,s?s.call(e,"markAsHelpful",e.msgpack,e,u):c.call(e,"extmsg","markAsHelpful",e.msgpack,e,u)))+'"> <span aria-hidden="true"> ',u={hash:{}},i+=l((s=n.extmsg,s?s.call(e,"contentIsHelpful",e.msgpack,e,u):c.call(e,"extmsg","contentIsHelpful",e.msgpack,e,u)))+' &middot; <span class="bv-content-btn-count" aria-hidden="true">',(o=n.TotalPositiveFeedbackCount)?o=o.call(e,{hash:{}}):(o=e.TotalPositiveFeedbackCount,o=typeof o===f?o.apply(e):o),i+=l(o)+'</span> </span> <span class="bv-off-screen">',u={hash:{}},i+=l((s=n.extmsg,s?s.call(e,"offscreenHelpful",e.msgpack,e,u):c.call(e,"extmsg","offscreenHelpful",e.msgpack,e,u)))+'</span> </button> <button type="button" class="bv-content-btn bv-content-btn-feedback-no bv-focusable" aria-label="',u={hash:{protectString:!0}},i+=l((s=n.extmsg,s?s.call(e,"markAsNotHelpful",e.msgpack,e,u):c.call(e,"extmsg","markAsNotHelpful",e.msgpack,e,u)))+'"> <span aria-hidden="true"> ',u={hash:{}},i+=l((s=n.extmsg,s?s.call(e,"contentIsNotHelpful",e.msgpack,e,u):c.call(e,"extmsg","contentIsNotHelpful",e.msgpack,e,u)))+' &middot; <span class="bv-content-btn-count" aria-hidden="true">',(o=n.TotalNegativeFeedbackCount)?o=o.call(e,{hash:{}}):(o=e.TotalNegativeFeedbackCount,o=typeof o===f?o.apply(e):o),i+=l(o)+'</span> </span> <span class="bv-off-screen">',u={hash:{}},i+=l((s=n.extmsg,s?s.call(e,"offscreenNotHelpful",e.msgpack,e,u):c.call(e,"extmsg","offscreenNotHelpful",e.msgpack,e,u)))+'</span> </button> </dd> <dd class="bv-content-feedback-vote ',o=n["if"].call(e,e._MarkedAsInappropriate,{hash:{},inverse:h.program(6,g,t),fn:h.program(8,y,t)});if(o||o===0)i+=o;i+='" role="presentation"> <button type="button" class="bv-content-report-btn bv-focusable" aria-label="',u={hash:{protectString:!0}},i+=l((s=n.extmsg,s?s.call(e,"markAsInappropriate",e.msgpack,e,u):c.call(e,"extmsg","markAsInappropriate",e.msgpack,e,u)))+'"> ',o=h.invokePartial(r.inappropriate,"inappropriate",e._MarkedAsInappropriate,n,r);if(o||o===0)i+=o;return i+=" </button> </dd> </dl> ",i}function m(e,t){var r="",i;return r+="bv-content-feedback-voted-",(i=n._FeedbackVoted)?i=i.call(e,{hash:{}}):(i=e._FeedbackVoted,i=typeof i===f?i.apply(e):i),r+=l(i),r}function g(e,t){return"bv-content-feedback-vote-active"}function y(e,t){return"bv-content-feedback-voted-inappropriate"}function b(e,t){var r="",i,s;return r+=" <div>",s={hash:{}},r+=l((i=n.extmsg,i?i.call(e,"helpfulStats",e.msgpack,e,s):c.call(e,"extmsg","helpfulStats",e.msgpack,e,s)))+"</div> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;a={hash:{tag:"div",classList:"feedback-container"},inverse:h.noop,fn:h.program(1,p,i)},u=(o=n.view,o?o.call(t,t,a):c.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("feedback",n),n.deps=["inappropriate"],n.tplMountedViews=[],n}),BV.define("mf!bv/c2013/messages/feedback",["vendor/messageformat","framework/util/bvtrackerqueue"],function(e,t){return{aria_alert_voted_positive:function(e){try{return function(e){var t="";t+="Your vote was successful. The number of positive helpfulness votes is now ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.Count,t+=".",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `aria_alert_voted_positive`: "+n.toString())]),""}},aria_alert_voted_negative:function(e){try{return function(e){var t="";t+="Your vote was successful. The number of negative votes is now ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.Count,t+=".",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `aria_alert_voted_negative`: "+n.toString())]),""}},aria_alert_voted_inappropriate:function(e){try{return function(e){var t="";return t+="You have successfully reported this content as inappropriate.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `aria_alert_voted_inappropriate`: "+n.toString())]),""}},markAsHelpful:function(e){try{return function(e){var t="";t+="Yes, ";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.contentSelectType,t+=" by ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.authorDisplayName,t+=" is helpful.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `markAsHelpful`: "+n.toString())]),""}},markAsNotHelpful:function(e){try{return function(e){var t="";t+="No, ";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.contentSelectType,t+=" by ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.authorDisplayName,t+=" is not helpful.",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `markAsNotHelpful`: "+n.toString())]),""}},markAsInappropriate:function(e){try{return function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");var n="hasTitle",r=e[n],i=0,s={"true":function(e){var t="";t+="Mark ";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.Title,t+=" by ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.authorDisplayName,t+=" as inappropriate. ",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");var n="contentSelectType",r=e[n],i=0,s={review:function(e){var t="";t+="Mark this review by ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.authorDisplayName,t+=" as inappropriate. ",t},comment:function(e){var t="";t+="Mark this comment by ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.authorDisplayName,t+=" as inappropriate. ",t},clientresponse:function(e){var t="";t+="Mark this response by ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.authorDisplayName,t+=" as inappropriate. ",t},question:function(e){var t="";t+="Mark this question by ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.authorDisplayName,t+=" as inappropriate. ",t},answer:function(e){var t="";t+="Mark this answer by ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.authorDisplayName,t+=" as inappropriate. ",t},other:function(e){var t="";t+="Mark this content by ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.authorDisplayName,t+=" as inappropriate. ",t}};return t+=(s[r]||s.other)(e),t+=" ",t}};return t+=(s[r]||s.other)(e),t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `markAsInappropriate`: "+n.toString())]),""}},positiveFeedback:function(n){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="Type",i=t[r],s=0,o={review:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalPositiveFeedbackCount",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalPositiveFeedbackCount,t+=" person found this review helpful.",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalPositiveFeedbackCount,t+=" people found this review helpful.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n},answer:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalPositiveFeedbackCount",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalPositiveFeedbackCount,t+=" person found this answer helpful.",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalPositiveFeedbackCount,t+=" people found this answer helpful.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n},comment:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalPositiveFeedbackCount",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalPositiveFeedbackCount,t+=" person found this comment helpful.",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalPositiveFeedbackCount,t+=" people found this comment helpful.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n},other:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalPositiveFeedbackCount",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalPositiveFeedbackCount,t+=" person found this comment helpful.",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalPositiveFeedbackCount,t+=" people found this comment helpful.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}};return n+=(o[i]||o.other)(t),n}(n||{})}catch(r){return t.push(["error",new Error("MF error on `positiveFeedback`: "+r.toString())]),""}},negativeFeedback:function(n){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="Type",i=t[r],s=0,o={review:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalNegativeFeedbackCount",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalNegativeFeedbackCount,t+=" person did not find this review helpful.",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalNegativeFeedbackCount,t+=" people did not find this review helpful.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n},answer:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalNegativeFeedbackCount",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalNegativeFeedbackCount,t+=" person did not find this answer helpful.",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalNegativeFeedbackCount,t+=" people did not find this answer helpful.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n},comment:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalNegativeFeedbackCount",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalNegativeFeedbackCount,t+=" person did not find this comment helpful.",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalNegativeFeedbackCount,t+=" people did not find this comment helpful.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n},other:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalNegativeFeedbackCount",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalNegativeFeedbackCount,t+=" person did not find this comment helpful.",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalNegativeFeedbackCount,t+=" people did not find this comment helpful.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}};return n+=(o[i]||o.other)(t),n}(n||{})}catch(r){return t.push(["error",new Error("MF error on `negativeFeedback`: "+r.toString())]),""}},offscreenHelpful:function(n){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="Gender",i=t[r],s=0,o={other:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="contentSelectType",i=t[r],s=0,o={review:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalPositiveFeedbackCount",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalPositiveFeedbackCount,t+=" person found this review helpful. Click to agree.",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalPositiveFeedbackCount,t+=" people found this review helpful. Click to agree.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n},comment:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalPositiveFeedbackCount",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalPositiveFeedbackCount,t+=" person found this comment helpful. Click to agree.",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalPositiveFeedbackCount,t+=" people found this comment helpful. Click to agree.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n},clientresponse:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalPositiveFeedbackCount",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalPositiveFeedbackCount,t+=" person found this response helpful. Click to agree.",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalPositiveFeedbackCount,t+=" people found this response helpful. Click to agree.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n},question:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalPositiveFeedbackCount",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalPositiveFeedbackCount,t+=" person found this question helpful. Click to agree.",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalPositiveFeedbackCount,t+=" people found this question helpful. Click to agree.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n},answer:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalPositiveFeedbackCount",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalPositiveFeedbackCount,t+=" person found this answer helpful. Click to agree.",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalPositiveFeedbackCount,t+=" people found this answer helpful. Click to agree.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n},other:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalPositiveFeedbackCount",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalPositiveFeedbackCount,t+=" person found this content helpful. Click to agree.",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalPositiveFeedbackCount,t+=" people found this content helpful. Click to agree.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}};return n+=(o[i]||o.other)(t),n}};return n+=(o[i]||o.other)(t),n}(n||{})}catch(r){return t.push(["error",new Error("MF error on `offscreenHelpful`: "+r.toString())]),""}},offscreenNotHelpful:function(n){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="Gender",i=t[r],s=0,o={other:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="contentSelectType",i=t[r],s=0,o={review:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalNegativeFeedbackCount",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalNegativeFeedbackCount,t+=" person did not find this review helpful. Click to agree.",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalNegativeFeedbackCount,t+=" people did not find this review helpful. Click to agree.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n},comment:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalNegativeFeedbackCount",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalNegativeFeedbackCount,t+=" person did not find this comment helpful. Click to agree.",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalNegativeFeedbackCount,t+=" people did not find this comment helpful. Click to agree.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n},clientresponse:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalNegativeFeedbackCount",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalNegativeFeedbackCount,t+=" person did not find this response helpful. Click to agree.",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalNegativeFeedbackCount,t+=" people did not find this response helpful. Click to agree.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n},question:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalNegativeFeedbackCount",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalNegativeFeedbackCount,t+=" person did not find this question helpful. Click to agree.",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalNegativeFeedbackCount,t+=" people did not find this question helpful. Click to agree.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n},answer:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalNegativeFeedbackCount",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalNegativeFeedbackCount,t+=" person did not find this answer helpful. Click to agree.",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalNegativeFeedbackCount,t+=" people did not find this answer helpful. Click to agree.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n},other:function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalNegativeFeedbackCount",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalNegativeFeedbackCount,t+=" person did not find this content helpful. Click to agree.",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalNegativeFeedbackCount,t+=" people did not find this content helpful. Click to agree.",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}};return n+=(o[i]||o.other)(t),n}};return n+=(o[i]||o.other)(t),n}(n||{})}catch(r){return t.push(["error",new Error("MF error on `offscreenNotHelpful`: "+r.toString())]),""}},contentHelpfulQuestion:function(e){try{return function(e){var t="";return t+="Helpful?",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `contentHelpfulQuestion`: "+n.toString())]),""}},contentHelpfulStatement:function(e){try{return function(e){var t="";return t+="helpful",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `contentHelpfulStatement`: "+n.toString())]),""}},contentIsHelpful:function(e){try{return function(e){var t="";return t+="Yes",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `contentIsHelpful`: "+n.toString())]),""}},contentIsNotHelpful:function(e){try{return function(e){var t="";return t+="No",t}(e||{})}catch(n){return t.push(["error",new Error("MF error on `contentIsNotHelpful`: "+n.toString())]),""}},helpfulStats:function(n){try{return function(t){var n="";if(!t)throw new Error("MessageFormat: No data passed to function.");var r="TotalPositiveFeedbackCount",i=t[r],s=0,o={one:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.TotalPositiveFeedbackCount,t+=" of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalFeedbackCount,t+=" people found this helpful",t},other:function(e){var t="";if(!e)throw new Error("MessageFormat: No data passed to function.");t+=e.TotalPositiveFeedbackCount,t+=" of ";if(!e)throw new Error("MessageFormat: No data passed to function.");return t+=e.TotalFeedbackCount,t+=" people found this helpful",t}};return o[i+""]?n+=o[i+""](t):n+=(o[e.locale.en(i-s)]||o.other)(t),n}(n||{})}catch(r){return t.push(["error",new Error("MF error on `helpfulStats`: "+r.toString())]),""}}}}),BV.define("bv/c2013/view/feedback",["ENV","framework/bview","framework/util/bvtracker","hbs!feedback","hbs!inappropriate","underscore","jquery","bv/api","BV","bv/util/session","bv/util/loadingOverlay","bv/util/productInfo","bv/util/focusManager","mf!bv/c2013/messages/feedback"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){return t.extend({name:"feedback",events:{"click .bv-content-feedback-vote-active .bv-content-btn-feedback-yes":"positive","click .bv-content-feedback-vote-active .bv-content-btn-feedback-no":"negative","click .bv-content-feedback-vote-active .bv-content-report-btn":"inappropriate"},template:r,msgpacks:[p],init:function(){this.listenTo(this.model,{"change:_FeedbackVoted":this.render,"change:_MarkedAsInappropriate":this.render})},_feedback:s.debounce(function(e,t){function l(){var s=o(t.target).closest("button"),a=s.find(".bv-content-btn-count");s.closest(".bv-content-feedback-vote").addClass("bv-content-feedback-voted-"+e).removeClass("bv-content-feedback-vote-active"),a.text(u),s.siblings("button").addBack().prop("disabled",!0),h.moveFocus(s.closest(".bv-content-item")),e==="inappropriate"&&s.html(i(!0)),r.done(function(){n.showAriaAlert(p["aria_alert_voted_"+e]({Count:u}))})}var n=this,r=o.Deferred(),u=(n.model.get("Total"+s.string.capitalize(e)+"FeedbackCount")||0)+1,f=this.model.getSubmitType();return a.require(["secondary"],function(t){t.Submission.feedback[e](f,n.model.get("Id"),u).then(r.resolve,r.reject)}),r.fail(function(r,i){n._undoFeedback(e,t,u-1)}),o.isReady?l():o(l),r},1e3,!0),_undoFeedback:function(e,t,n){var r=o(t.target),s;e==="inappropriate"?r.html(i(!1)):(s=r.find(".bv-content-btn-count"),r.closest(".bv-content-feedback-vote").removeClass("bv-content-feedback-voted-"+e).addClass("bv-content-feedback-vote-active"),s.text(n))},_analytics:function(e){n.feature({type:"Used",name:"Click",bvProduct:c.getType(this),contentType:this.model.get("Type"),contentId:this.model.get("Id"),productId:c.getId(this),detail1:e,categoryId:c.getCategoryId(this)})},positive:function(e){this._feedback("positive",e),this._analytics("YesHelpfulVote")},negative:function(e){this._feedback("negative",e),this._analytics("NoHelpfulVote")},inappropriate:function(e){this._feedback("inappropriate",e),this._analytics("ReportLink")},modelDataReady:function(){this.$viewEl&&this.render()}})}),BV.define("bv/c2013/model/contentSort",["ENV","framework/bmodel","underscore"],function(e,t,n){return t.extend({name:"contentSort",init:function(e,t){var r=e.dimsumConfig;n.extend(this.options,t),this.set({defaultSort:r.sortDefault,sortTypes:n(r.sortTypes).isEmpty()?[]:r.sortTypes,currentSort:r.sortDefault})},initReady:function(e){this.trigger("setupme",this),t.prototype.initReady.apply(this,arguments)},sort:function(e){if(this.get("currentSort")===e)return;this.set("currentSort",e),this.trigger("sortcontent",e)},lookup:function(e){var t={featured:{primary:[["IsFeatured","desc"]]},sortReviewsExpertDescending:{primary:[["IsExpert","desc"]]},sortReviewsStaffDescending:{primary:[["IsStaff","desc"]]},mostRecent:{primary:[["SubmissionTime","desc"]]},oldest:{primary:[["SubmissionTime","asc"]]},positive:{primary:[["Rating","desc"]]},negative:{primary:[["Rating","asc"]]},mostHelpful:{primary:[["Helpfulness","desc"],["TotalPositiveFeedbackCount","desc"]]},mostUnhelpful:{primary:[["Helpfulness","asc"],["TotalPositiveFeedbackCount","asc"]]},sortReviewsHelpfulnessAscending:{primary:[["Helpfulness","asc"],["TotalNegativeFeedbackCount","desc"]]},sortReviewsLengthDescending:{primary:[["Length","desc"]]},sortReviewsLengthAscending:{primary:[["Length","asc"]]},relevancy:{primary:[["Relevancy","a1"]]},recentQuestionsFirst:{primary:[["SubmissionTime","desc"]],secondary:{answers:[["SubmissionTime","asc"]]}},recentQuestionsLast:{primary:[["SubmissionTime","asc"]],secondary:{answers:[["SubmissionTime","asc"]]}},recentAnswersFirst:{primary:[["LastApprovedAnswerSubmissionTime","desc"]],secondary:{answers:[["SubmissionTime","desc"]]}},recentAnswersLast:{primary:[["LastApprovedAnswerSubmissionTime","asc"]],secondary:{answers:[["SubmissionTime","asc"]]}},mostAnsweredQuestionsFirst:{primary:[["TotalAnswerCount","desc"]],secondary:{answers:[["SubmissionTime","asc"]]}},mostAnsweredQuestionsLast:{primary:[["TotalAnswerCount","asc"]],secondary:{answers:[["SubmissionTime","asc"]]}},answersWithAffiliationStaffFirst:{primary:[["HasStaffAnswers","desc"]],secondary:{answers:[["SubmissionTime","asc"]]}},featuredQuestionsFirst:{primary:[["IsFeatured","desc"]],secondary:{answers:[["SubmissionTime","asc"]]}},helpfulnessAnswersFirst:{primary:[["TotalAnswerCount","desc"]],secondary:{answers:[["TotalPositiveFeedbackCount","desc"],["TotalNegativeFeedbackCount","asc"]]}},helpfulnessAnswersLast:{primary:[["TotalAnswerCount","desc"]],secondary:{answers:[["TotalNegativeFeedbackCount","desc"],["TotalPositiveFeedbackCount","asc"]]}}};if(n(t).has(e))return t[e]},toJSON:function(){var e=t.prototype.toJSON.call(this);return e.sortTypes=n(e.sortTypes).map(function(e){return{name:e}}),e}})}),BV.define("hbs!contentSortHover",["hbs","vendor/handlebars/runtime","template/helpers/extmsg","template/helpers/renderIcon","template/helpers/equals"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){return" &#x25BC; "}function d(e,t,r){var i="",s,o,u;i+=' <option value="',(s=n.name)?s=s.call(e,{hash:{}}):(s=e.name,s=typeof s===f?s.apply(e):s),i+=l(s)+'" ',u={hash:{},inverse:c.noop,fn:c.program(4,v,t)},o=(s=n.equals,s?s.call(e,e.name,r.defaultSort,u):h.call(e,"equals",e.name,r.defaultSort,u));if(o||o===0)i+=o;return i+="> ",u={hash:{}},i+=l((s=n.extmsg,s?s.call(e,e.name,r.msgpack,e.name,u):h.call(e,"extmsg",e.name,r.msgpack,e.name,u)))+" </option> ",i}function v(e,t){return"selected"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+=' <div class="bv-dropdown"> <div class="bv-dropdown-target"> <button type="button" class="bv-focusable" aria-haspopup="true" role="menuitem"> <span class="bv-dropdown-title"> ',a={hash:{prefix:"content_sort_"}},s+=l((o=n.extmsg,o?o.call(t,"link",t.msgpack,t,a):h.call(t,"extmsg","link",t.msgpack,t,a)))+" </span> ",a={hash:{classList:"bv-dropdown-arrow",ariaHidden:"true",role:"presentation"},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.renderIcon,o?o.call(t,"bv-sprite-down-arrow-dark",a):h.call(t,"renderIcon","bv-sprite-down-arrow-dark",a));if(u||u===0)s+=u;s+=' <span class="bv-off-screen">',a={hash:{}},s+=l((o=n.extmsg,o?o.call(t,"offscreen_sort_arrow",t.msgpack,t,a):h.call(t,"extmsg","offscreen_sort_arrow",t.msgpack,t,a)))+'</span> </button> </div> <label for="bv-dropdown-select-'+l((o=(o=t._bview,o==null||o===!1?o:o.viewId),typeof o===f?o.apply(t):o))+'" class="bv-off-screen" aria-hidden="true"> ',a={hash:{}},s+=l((o=n.extmsg,o?o.call(t,"offscreen_sort_label",t.msgpack,t,a):h.call(t,"extmsg","offscreen_sort_label",t.msgpack,t,a)))+' </label> <select id="bv-dropdown-select-'+l((o=(o=t._bview,o==null||o===!1?o:o.viewId),typeof o===f?o.apply(t):o))+'" class="bv-select-cleanslate bv-dropdown-select" aria-hidden="true"> ',u=n.each.call(t,t.sortTypes,{hash:{},inverse:c.noop,fn:c.programWithDepth(d,i,t)});if(u||u===0)s+=u;return s+=" </select> </div> ",s});return t.registerPartial("contentSortHover",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!contentSortNative",["hbs","vendor/handlebars/runtime","template/helpers/extmsg","template/helpers/equals"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t,r){var i="",s,o,u;i+=' <option value="',(s=n.name)?s=s.call(e,{hash:{}}):(s=e.name,s=typeof s===f?s.apply(e):s),i+=l(s)+'" ',u={hash:{},inverse:c.noop,fn:c.program(2,d,t)},o=(s=n.equals,s?s.call(e,e.name,r.defaultSort,u):h.call(e,"equals",e.name,r.defaultSort,u));if(o||o===0)i+=o;return i+="> ",u={hash:{}},i+=l((s=n.extmsg,s?s.call(e,e.name,r.msgpack,e.name,u):h.call(e,"extmsg",e.name,r.msgpack,e.name,u)))+" </option> ",i}function d(e,t){return"selected"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+=' <div class="bv-sort-native"> <label for="bv-dropdown-select-'+l((o=(o=t._bview,o==null||o===!1?o:o.viewId),typeof o===f?o.apply(t):o))+'"> ',a={hash:{prefix:"content_sort_"}},s+=l((o=n.extmsg,o?o.call(t,"link",t.msgpack,t,a):h.call(t,"extmsg","link",t.msgpack,t,a)))+': </label> <select id="bv-dropdown-select-'+l((o=(o=t._bview,o==null||o===!1?o:o.viewId),typeof o===f?o.apply(t):o))+'" class="bv-focusable"> ',u=n.each.call(t,t.sortTypes,{hash:{},inverse:c.noop,fn:c.programWithDepth(p,i,t)});if(u||u===0)s+=u;return s+=" </select> </div> ",s});return t.registerPartial("contentSortNative",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!contentSort",["hbs","vendor/handlebars/runtime","hbs!contentSortHover","hbs!contentSortNative","template/helpers/view","template/helpers/ifHasFeature"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:f.program(4,p,t),fn:f.program(2,h,t)},s=(i=n.ifHasFeature,i?i.call(e,"hoverDropdown",o):l.call(e,"ifHasFeature","hoverDropdown",o));if(s||s===0)r+=s;return r+=" ",r}function h(e,t){var i="",s;i+=" ",s=f.invokePartial(r.contentSortHover,"contentSortHover",e,n,r);if(s||s===0)i+=s;return i+=" ",i}function p(e,t){var i="",s;i+=" ",s=f.invokePartial(r.contentSortNative,"contentSortNative",e,n,r);if(s||s===0)i+=s;return i+=" ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=this,l=n.helperMissing;a={hash:{tag:"div",classList:"control-bar-sort"},inverse:f.noop,fn:f.program(1,c,i)},u=(o=n.view,o?o.call(t,t,a):l.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("contentSort",n),n.deps=["contentSortHover","contentSortNative"],n.tplMountedViews=[],n}),BV.define("hbs!contentSortDropdown",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/equals","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i;r+=' <!--[if lt IE 7]> <div class="bv-compat bvie6 bvie-lt8 bvie"> <![endif]--> <!--[if IE 7]> <div class="bv-compat bvie7 bvie-lt8 bvie"> <![endif]--> <!--[if IE 8]> <div class="bv-compat bvie8 bvie"> <![endif]--> <!--[if IE 9]> <div class="bv-compat bvie9 bvie"> <![endif]--> <!--[if gt IE 9]> <!--><div class="bv-compat"> <!--<![endif]--> <div class="bv-dropdown"> <ul role="menuitem"> ',i=n.each.call(e,e.sortTypes,{hash:{},inverse:f.noop,fn:f.programWithDepth(d,t,e)});if(i||i===0)r+=i;return r+=" </ul> </div> </div> ",r}function d(e,t,r){var i="",s,o,u;i+=' <li class="bv-dropdown-item',u={hash:{},inverse:f.noop,fn:f.program(3,v,t)},o=(s=n.equals,s?s.call(e,e.name,r.currentSort,u):l.call(e,"equals",e.name,r.currentSort,u));if(o||o===0)i+=o;return i+=' bv-focusable" data-bv-dropdown-value="',(o=n.name)?o=o.call(e,{hash:{}}):(o=e.name,o=typeof o===c?o.apply(e):o),i+=h(o)+'" tabindex="0" role="menuitem"> ',u={hash:{}},i+=h((s=n.extmsg,s?s.call(e,e.name,r.msgpack,e.name,u):l.call(e,"extmsg",e.name,r.msgpack,e.name,u)))+" </li> ",i}function v(e,t){return" bv-dropdown-item-selected"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=this,l=n.helperMissing,c="function",h=this.escapeExpression;s+='<div class="bv-core-container-',(o=n.version)?o=o.call(t,{hash:{}}):(o=t.version,o=typeof o===c?o.apply(t):o),s+=h(o)+'"> ',a={hash:{tag:"div",classList:"select-dropdown"},inverse:f.noop,fn:f.program(1,p,i)},u=(o=n.view,o?o.call(t,t,a):l.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" </div> ",s});return t.registerPartial("contentSortDropdown",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/contentSortDropdown",["jquery","bv/ui-core/bselectdropdownview","hbs!contentSortDropdown","underscore","mf!bv/c2013/messages/sort","bv/util/focusManager","util/specialKeys","framework/util/bvreporter"],function(e,t,n,r,i,s,o,u){return t.extend({name:"contentSortDropdown",width:226,height:400,template:n,msgpacks:[i],setupKeyboardNavigation:function(){var t=this,n=t.parent;t.$viewEl.off("keydown.contentSortDropdown").on("keydown.contentSortDropdown",function(i){var u=e(i.target),a={};r(["TAB","ENTER","ESCAPE","SPACE","LEFT","UP","RIGHT","DOWN"]).each(function(e){a[o[e]]=!0});if(!a[i.keyCode])return;i.preventDefault(),i.stopPropagation();var f=function(){t.deregisterFocusableLayer(),n.leave(i)},l=function(){document.activeElement===t.$last[0]?s.moveFocus(t.$first):s.focusNext()},c=function(){document.activeElement===t.$first[0]?s.moveFocus(t.$last):s.focusPrev()};switch(i.keyCode){case o.SPACE:case o.ENTER:u.click(),f();break;case o.ESCAPE:f();break;case o.TAB:f();var h=i.shiftKey?"focusPrev":"focusNext";s[h]();break;case o.LEFT:case o.UP:c();break;case o.RIGHT:case o.DOWN:l()}})},focusElement:function(e){var t=["$first","$last"];r.indexOf(t,e)<0&&(u.warn("Invalid string passed to contentSortDropdown.focusElement. Please pass in '$first' or '$last'. Defaulting to '$first'"),e="$first");var n=this[e];s.moveFocus(n)},init:function(){this.classList.push("content-sort-dropdown"),this.options.rightAlign=!0,this.getComponent().lightbox&&(this.options.aboveModestBox=!0),this.model.on("focusElement.contentSort",this.focusElement,this)},topPositionModifier:function(e){return e-5},rightPositionModifier:function(e){return e+parseInt(this.parent.$viewEl.find(".bv-dropdown-target").css("paddingRight"),10)}})}),BV.define("bv/c2013/view/contentSort",["jquery","bv/ui-core/bhoverableview","bv/ui-core/bselectview","hbs!contentSort","underscore","mf!bv/c2013/messages/sort","bv/c2013/view/contentSortDropdown","bv/util/productInfo","framework/util/bvtracker","bv/util/focusManager","util/specialKeys","framework/util/bvreporter"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=!1;return n.extend({targetEl:".bv-control-bar-sort",selectEl:".bv-dropdown-select",dropdownFocusables:".bv-content-sort-dropdown .bv-focusable",name:"contentSort",events:{"change select":"change"},template:r,TargetView:o,msgpacks:[s],setupKeyboardNavigation:function(e){var t=this;e=e||t.$targetEl,e.off("keydown.contentSort").on("keydown.contentSort",function(e){var n={};i(["TAB","ENTER","ESCAPE","SPACE","LEFT","UP","RIGHT","DOWN"]).each(function(e){n[l[e]]=!0});if(!n[e.keyCode])return;e.preventDefault(),e.stopPropagation();var r=function(n){var r=["$first","$last"];i.indexOf(r,n)<0&&(c.warn("Invalid string passed to contentSort.enterAndSelect. Please pass in '$first' or '$last'. Defaulting to '$first'"),n="$first"),h?t.model.trigger("focusElement.contentSort",n):(t.model.once("dropdownRendered",function(){t.model.trigger("focusElement.contentSort",n)}),t.enter(e))};switch(e.keyCode){case l.SPACE:case l.ENTER:h?t.leave(e):t.enter(e);break;case l.RIGHT:case l.DOWN:r("$first");break;case l.LEFT:case l.UP:r("$last");break;case l.TAB:h&&t.leave(e);var s=e.shiftKey?"focusPrev":"focusNext";f[s]();break;case l.ESCAPE:h&&t.leave(e)}})},enter:function(e){h=!0;if(this.hasFeature("hoverDropdown"))return t.prototype.enter.apply(this,arguments)},leave:function(e){h=!1;if(this.hasFeature("hoverDropdown"))return t.prototype.leave.apply(this,arguments)},change:function(e){var t=e.target.value;this.model.sort(t)}})}),BV.define("bv/c2013/model/avatar",["ENV","framework/bmodel","underscore","bv/util/socialAvatar","dimsumFields!fieldCategories"],function(e,t,n,r,i){return t.extend({options:{},name:"avatar",init:function(e,t){var r=this.get("parent"),i,s;n.extend(this.options,t),r&&(i=n.extend({},r.get("Author")),s=r.get("_isPreview"),this.combineStats(i),i.TypeContext=r.get("Type"),i.TypeContext==="review"&&(i.Location=r.get("UserLocation")||i.Location),i.DisplayContext="popup",i.TypeContext==="review"&&!i.DisplayName&&(i.TotalReviewCount=1),i.communityAnswer=r.get("CampaignId")==="BVCROWDSOURCE",this.set({Author:i,_isPopup:!0,_isPreview:s})),this.hasFeature("socialAvatar")&&this.generateAvatarImage(i)},combineStats:function(e){if(!e||!e.Content)return;var t={TotalCount:0,HelpfulVoteCount:0},n=(e.Content.Reviews||{}).Statistics,r=(e.Content.Questions||{}).Statistics;n&&(t.TotalCount=t.TotalCount+n.TotalCount,t.HelpfulVoteCount=t.HelpfulVoteCount+n.HelpfulVoteCount),r&&(t.TotalCount=t.TotalCount+r.TotalCount+r.TotalSecondaryCount,t.HelpfulVoteCount=t.HelpfulVoteCount+(r.HelpfulVoteCount||0)+(r.AnswerHelpfulVoteCount||0)),e.TotalStatistics=t},generateAvatarImage:function(e){var t=this.get("parent");if(e){e._avatarImage=r.image(e);var n=t.get("Author");t&&n&&(n._avatarImage=e._avatarImage,n.lazyLoad=t.get("lazyLoad"))}},toJSON:function(){var e=t.prototype.toJSON.call(this);return e.Author.ContextDataValues||(e.Author.ContextDataValuesOrdered=[],e.Author.ContextDataValues={},e.Author.ContextDataValuesOrder=[],n(e.parent.get("ContextDataValuesOrdered")).each(function(t){i.fieldCategoryMap["contextdatavalue_"+t.Id]==="people"&&(e.Author.ContextDataValuesOrdered.push(t),e.Author.ContextDataValuesOrder.push(t.Id),e.Author.ContextDataValues[t.Id]=t)})),e.Author.DisplayName||(e.Author.DisplayName=e.parent.get("UserNickname")),e}})}),BV.define("hbs!authorName",["hbs","vendor/handlebars/runtime","template/helpers/equals"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var n="",r;return n+=" <h4>"+l((r=(r=e.Author,r==null||r===!1?r:r.DisplayName),typeof r===f?r.apply(e):r))+"</h4> ",n}function d(e,t){var n="",r;return n+=" <h3>"+l((r=(r=e.Author,r==null||r===!1?r:r.DisplayName),typeof r===f?r.apply(e):r))+"</h3> ",n}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+=" ",a={hash:{},inverse:c.program(3,d,i),fn:c.program(1,p,i)},u=(o=n.equals,o?o.call(t,t.contentType,"Answers",a):h.call(t,"equals",t.contentType,"Answers",a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("authorName",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!contentAuthorAvatar",["hbs","vendor/handlebars/runtime","hbs!authorName","template/helpers/view","template/helpers/withIf","template/helpers/equals","template/helpers/schemaType","template/helpers/ifHasFeature"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:h.noop,fn:h.programWithDepth(d,t,e)},s=(i=n.withIf,i?i.call(e,e.Author,o):c.call(e,"withIf",e.Author,o));if(s||s===0)r+=s;return r+=" ",r}function d(e,t,r){var i="",s,o,u;i+="  ",u={hash:{},inverse:h.programWithDepth(w,t,r),fn:h.programWithDepth(v,t,r)},o=(s=n.equals,s?s.call(e,e.ModerationStatus,"APPROVED",u):c.call(e,"equals",e.ModerationStatus,"APPROVED",u));if(o||o===0)i+=o;return i+=" ",i}function v(e,t,r){var i="",s,o,u;i+=" ",u={hash:{},inverse:h.program(6,g,t),fn:h.program(4,m,t)},o=(s=n.ifHasFeature,s?s.call(e,"fullProfileLink",r,u):c.call(e,"ifHasFeature","fullProfileLink",r,u));if(o||o===0)i+=o;return i+=" ",i}function m(e,t){var i="",s,o,u;i+=' <button id="bv-avatar-popup-target-',(s=n.componentId)?s=s.call(e,{hash:{}}):(s=e.componentId,s=typeof s===f?s.apply(e):s),i+=l(s)+"-"+l((s=(s=e._bview,s==null||s===!1?s:s.viewId),typeof s===f?s.apply(e):s))+'" class="bv-avatar-popup-target bv-focusable" itemprop="',u={hash:{comment:"creator",def:"author"}},i+=l((s=n.schemaType,s?s.call(e,e.Type,u):c.call(e,"schemaType",e.Type,u)))+'"> ',o=h.invokePartial(r.authorName,"authorName",e,n,r);if(o||o===0)i+=o;return i+=" </button> ",i}function g(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:h.program(9,b,t),fn:h.program(7,y,t)},s=(i=n.ifHasFeature,i?i.call(e,"hoverProfile",e,o):c.call(e,"ifHasFeature","hoverProfile",e,o));if(s||s===0)r+=s;return r+=" ",r}function y(e,t){var i="",s,o;i+=' <button id="bv-avatar-popup-target-',(s=n.componentId)?s=s.call(e,{hash:{}}):(s=e.componentId,s=typeof s===f?s.apply(e):s),i+=l(s)+"-"+l((s=(s=e._bview,s==null||s===!1?s:s.viewId),typeof s===f?s.apply(e):s))+'" class="bv-avatar-popup-target bv-focusable" itemprop="author"> ',o=h.invokePartial(r.authorName,"authorName",e,n,r);if(o||o===0)i+=o;return i+=" </button> ",i}function b(e,t){var i="",s,o,u;i+=' <span class="bv-avatar-author-name" itemprop="',u={hash:{comment:"creator",def:"author"}},i+=l((s=n.schemaType,s?s.call(e,e.Type,u):c.call(e,"schemaType",e.Type,u)))+'"> ',o=h.invokePartial(r.authorName,"authorName",e,n,r);if(o||o===0)i+=o;return i+=" </span> ",i}function w(e,t,i){var s="",o,u,a;s+=' <span class="bv-avatar-author-name" itemprop="',a={hash:{comment:"creator",def:"author"}},s+=l((o=n.schemaType,o?o.call(e,e.Type,a):c.call(e,"schemaType",e.Type,a)))+'"> ',u=h.invokePartial(r.authorName,"authorName",i,n,r);if(u||u===0)s+=u;return s+=" </span> ",s}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+=" ",a={hash:{tag:"span",classList:"author"},inverse:h.noop,fn:h.program(1,p,i)},u=(o=n.view,o?o.call(t,t,a):c.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("contentAuthorAvatar",n),n.deps=["authorName"],n.tplMountedViews=[],n}),BV.define("hbs!contentAuthorProfile",["hbs","vendor/handlebars/runtime","hbs!contentAuthorIcon","hbs!contentAuthor","hbs!contentAuthorLocation","hbs!contentAuthorStats","hbs!userBadges","hbs!contentAuthorCDVs","template/helpers/ifHasFeature"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var i="",s;i+=" ",s=f.invokePartial(r.contentAuthorIcon,"contentAuthorIcon",e.Author,n,r);if(s||s===0)i+=s;return i+=" ",i}function h(e,t){return"bv-contains-profile-button"}function p(e,t){var i="",s;i+=" ",s=f.invokePartial(r.contentAuthorLocation,"contentAuthorLocation",e,n,r);if(s||s===0)i+=s;i+=" ",s=f.invokePartial(r.contentAuthorStats,"contentAuthorStats",e,n,r);if(s||s===0)i+=s;i+=" ",s=f.invokePartial(r.userBadges,"userBadges",e,n,r);if(s||s===0)i+=s;i+=" ",s=f.invokePartial(r.contentAuthorCDVs,"contentAuthorCDVs",e,n,r);if(s||s===0)i+=s;return i+=" ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=this,l=n.helperMissing;s+='<div class="bv-author-avatar"> ',a={hash:{},inverse:f.noop,fn:f.program(1,c,i)},u=(o=n.ifHasFeature,o?o.call(t,"socialAvatar",a):l.call(t,"ifHasFeature","socialAvatar",a));if(u||u===0)s+=u;s+=' <div class="bv-author-avatar-nickname"> ',u=f.invokePartial(r.contentAuthor,"contentAuthor",t,n,r);if(u||u===0)s+=u;s+=' </div> </div> <dl class="bv-popup-prosnap-userinfo ',a={hash:{},inverse:f.noop,fn:f.program(3,h,i)},u=(o=n.ifHasFeature,o?o.call(t,"fullProfileLink",t,a):l.call(t,"ifHasFeature","fullProfileLink",t,a));if(u||u===0)s+=u;s+='" role="presentation"> ',u=f.invokePartial(r.contentAuthor,"contentAuthor",t,n,r);if(u||u===0)s+=u;s+=" ",u=n.unless.call(t,t._isPreview,{hash:{},inverse:f.noop,fn:f.program(5,p,i)});if(u||u===0)s+=u;return s+=" </dl> ",s});return t.registerPartial("contentAuthorProfile",n),n.deps=["contentAuthorIcon","contentAuthor","contentAuthorLocation","contentAuthorStats","userBadges","contentAuthorCDVs"],n.tplMountedViews=[],n}),BV.define("_i18n_fullProfileLink",["vendor/messageformat","vendor/handlebars/runtime","underscore","framework/util/bvtrackerqueue"],function(e,t,n,r){function i(e){try{return function(e){var t="";return t+="See My Profile",t}(e)}catch(t){return r.push(["error",new Error("MF error on `fullProfileLink`: "+t.toString())]),""}}return t.registerHelper("_i18n_fullProfileLink",function(){var e={},t=[].slice.call(arguments,0,arguments.length-1);return n(t).forEach(function(t){n.extend(e,t)}),i(e)}),i}),BV.define("hbs!contentAuthorFullProfileLink",["hbs","vendor/handlebars/runtime","_i18n_fullProfileLink"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function";s+='<div class="bv-action-bar"> <button type="button" class="bv-view-profile bv-focusable">  ',(o=n._i18n_fullProfileLink)?o=o.call(t,{hash:{}}):(o=t._i18n_fullProfileLink,o=typeof o===u?o.apply(t):o);if(o||o===0)s+=o;return s+=" </button> </div>",s});return t.registerPartial("contentAuthorFullProfileLink",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!contentAuthorAvatarPopup",["hbs","vendor/handlebars/runtime","hbs!contentAuthorProfile","hbs!contentAuthorFullProfileLink","template/helpers/view","template/helpers/ifHasFeature"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var i="",s,o;i+=' <!--[if lt IE 7]> <div class="bv-compat bvie6 bvie-lt8 bvie"> <![endif]--> <!--[if IE 7]> <div class="bv-compat bvie7 bvie-lt8 bvie"> <![endif]--> <!--[if IE 8]> <div class="bv-compat bvie8 bvie"> <![endif]--> <!--[if IE 9]> <div class="bv-compat bvie9 bvie"> <![endif]--> <!--[if gt IE 9]> <!--><div class="bv-compat"> <!--<![endif]--> <div class="bv-author-profile bv-popup-inner bv-focusable" tabindex="0"> ',s=f.invokePartial(r.contentAuthorProfile,"contentAuthorProfile",e,n,r);if(s||s===0)i+=s;i+=" ",o=n["if"].call(e,(s=e.Author,s==null||s===!1?s:s.showProfileLink),{hash:{},inverse:f.noop,fn:f.program(2,d,t)});if(o||o===0)i+=o;return i+=" </div> </div> ",i}function d(e,t){var r="",i,s,o;r+=" ",o={hash:{},inverse:f.noop,fn:f.program(3,v,t)},s=(i=n.ifHasFeature,i?i.call(e,"fullProfileLink",e,o):l.call(e,"ifHasFeature","fullProfileLink",e,o));if(s||s===0)r+=s;return r+=" ",r}function v(e,t){var i="",s;i+=" ",s=f.invokePartial(r.contentAuthorFullProfileLink,"contentAuthorFullProfileLink",e,n,r);if(s||s===0)i+=s;return i+=" ",i}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f=this,l=n.helperMissing,c="function",h=this.escapeExpression;s+=' <div class="bv-core-container-',(o=n.version)?o=o.call(t,{hash:{}}):(o=t.version,o=typeof o===c?o.apply(t):o),s+=h(o)+'" role="tooltip" aria-describedby="bv-avatar-popup-target-',(o=n.componentId)?o=o.call(t,{hash:{}}):(o=t.componentId,o=typeof o===c?o.apply(t):o),s+=h(o)+"-"+h((o=(o=t._bview,o==null||o===!1?o:o.parentViewId),typeof o===c?o.apply(t):o))+'"> ',a={hash:{tag:"div",classList:"popup popup-prosnap"},inverse:f.noop,fn:f.program(1,p,i)},u=(o=n.view,o?o.call(t,t,a):l.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("contentAuthorAvatarPopup",n),n.deps=["contentAuthorProfile","contentAuthorFullProfileLink"],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/avatarPopup",["bv/ui-core/bpopupview","bv/util/productInfo","underscore","hbs!contentAuthorAvatarPopup","mf!bv/c2013/messages/avatar","framework/util/bvtracker","bv/util/focusManager"],function(e,t,n,r,i,s,o){return e.extend({name:"avatarPopup",options:n.extend({},e.prototype.options,{alignArrow:!1}),width:320,height:300,events:{"click .bv-view-profile":"viewFullProfile"},template:r,msgpacks:[i],attach:function(t){e.prototype.attach.apply(this,arguments),this.model.once("dropdownRendered",function(){o.moveFocus(this.$viewEl.find(".bv-focusable"))},this)},topPositionModifier:function(e){return e+this.parent.$targetEl.outerHeight(!0)},viewFullProfile:function(e){this.detach(),this.getTopModel().trigger("showfullprofile",this.model.get("Author")),s.feature({type:"Used",name:"Click",detail1:"ViewProfileButton",detail2:"AuthorAvatar",bvProduct:t.getType(this),productId:t.getId(this),categoryId:t.getCategoryId(this)})}})}),BV.define("bv/c2013/view/avatar",["jquery","bv/ui-core/bpopuptargetview","bv/util/productInfo","underscore","hbs!contentAuthorAvatar","bv/c2013/view/avatarPopup","framework/util/bvtracker"],function(e,t,n,r,i,s,o){return t.extend({name:"avatar",linkEl:".bv-avatar-popup-target",template:i,TargetView:s,setupKeyboardNavigation:function(e){e=e||this.$targetEl,t.prototype.setupKeyboardNavigation.call(this,e),e.off("mouseenter.avatar").on("mouseenter.avatar",r.bind(this._onMouseenter,this))},_onMouseenter:function(e){o.feature({type:"Used",name:"Hover",detail1:"Profile",bvProduct:n.getType(this),productId:n.getId(this),categoryId:n.getCategoryId(this)})}})}),BV.define("bv/c2013/model/crowdSourcedAnswerBadge",["framework/bmodel"],function(e){return e.extend({name:"crowdSourcedAnswerBadge"})}),BV.define("hbs!crowdSourcedAnswerBadge",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function h(e,t){var r="",i,s;return r+=' <button class="bv-focusable bv-crowdSourcedAnswerBadge-popup-target" tabindex="0"> <span aria-hidden="true">&#x2139;</span> <span class="bv-off-screen">',s={hash:{prefix:"display_"}},r+=l((i=n.extmsg,i?i.call(e,"crowdSourcedAnswerText",e.msgpack,e,s):f.call(e,"extmsg","crowdSourcedAnswerText",e.msgpack,e,s)))+"</span> </button> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this;s+=" ",a={hash:{tag:"dl",classList:"badge-summary crowdSourcedAnswerBadge-icon",role:"presentation"},inverse:c.noop,fn:c.program(1,h,i)},u=(o=n.view,o?o.call(t,t,a):f.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" ",s});return t.registerPartial("crowdSourcedAnswerBadge",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("hbs!crowdSourcedAnswerBadgePopup",["hbs","vendor/handlebars/runtime","template/helpers/view","template/helpers/extmsg"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+=' <!--[if lt IE 7]> <div class="bv-compat bvie6 bvie-lt8 bvie"> <![endif]--> <!--[if IE 7]> <div class="bv-compat bvie7 bvie-lt8 bvie"> <![endif]--> <!--[if IE 8]> <div class="bv-compat bvie8 bvie"> <![endif]--> <!--[if IE 9]> <div class="bv-compat bvie9 bvie"> <![endif]--> <!--[if gt IE 9]> <!--><div class="bv-compat"> <!--<![endif]--> <div class="bv-popup bv-popup-crowdSourcedAnswerBadgePopup bv-focusable" tabindex="0"> ',s={hash:{prefix:"display_",defaultDisplay:"Answer provided by third party; accuracy not guaranteed."}},r+=l((i=n.extmsg,i?i.call(e,"crowdSourcedAnswerText",e.msgpack,e,s):f.call(e,"extmsg","crowdSourcedAnswerText",e.msgpack,e,s)))+" </div> </div> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;s+=' <div class="bv-core-container-',(o=n.version)?o=o.call(t,{hash:{}}):(o=t.version,o=typeof o===c?o.apply(t):o),s+=l(o)+'"> ',a={hash:{tag:"div"},inverse:h.noop,fn:h.program(1,p,i)},u=(o=n.view,o?o.call(t,t,a):f.call(t,"view",t,a));if(u||u===0)s+=u;return s+=" </div> ",s});return t.registerPartial("crowdSourcedAnswerBadgePopup",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/crowdSourcedAnswerBadgePopup",["bv/ui-core/bpopupview","hbs!crowdSourcedAnswerBadgePopup","jquery","underscore"],function(e,t,n,r){return e.extend({name:"crowdSourcedAnswerBadgePopup",options:r.extend({},e.prototype.options,{popupInClass:"bv-dropdown-in",popupOutClass:"bv-dropdown-out"}),width:325,template:t})}),BV.define("bv/c2013/view/crowdSourcedAnswerBadge",["framework/bmodel","bv/ui-core/bpopuptargetview","underscore","hbs!crowdSourcedAnswerBadge","bv/c2013/view/crowdSourcedAnswerBadgePopup"],function(e,t,n,r,i){return t.extend({linkEl:".bv-crowdSourcedAnswerBadge-popup-target",name:"crowdSourcedAnswerBadge",classList:["crowdSourcedAnswerBadge-target"],template:r,TargetView:i,targetViewOptions:{startDelay:500}})}),BV.define("mappings!nonsubmission",["bv/c2013/model/fullProfile","bv/c2013/view/fullProfile","bv/c2013/model/sidebar","bv/c2013/view/sidebar","bv/c2013/model/tabs","bv/c2013/view/tabs","bv/c2013/model/profileContentList","bv/c2013/view/profileContentList","bv/c2013/model/profileContentList","bv/c2013/view/profileContentList","bv/c2013/model/profileContentList","bv/c2013/view/profileContentList","bv/c2013/collection/contentItemCollection","bv/c2013/view/contentItemCollection","bv/c2013/model/ugcCount","bv/c2013/view/ugcCount","bv/c2013/model/pagination","bv/c2013/view/pagination","bv/c2013/model/secondaryContentList","bv/c2013/view/secondaryContentList","bv/c2013/collection/secondaryContentItemCollection","bv/c2013/view/secondaryContentItemCollection","bv/c2013/model/mediaViewer","bv/c2013/view/mediaViewer","bv/c2013/model/genericSubmission","bv/c2013/view/genericSubmission","bv/c2013/model/searchBar","bv/c2013/view/searchBar","bv/c2013/model/categorySelect","bv/c2013/view/categorySelect","bv/c2013/model/ugcCount","bv/c2013/view/ugcCount","bv/c2013/model/ugcCount","bv/c2013/view/ugcCount","bv/c2013/collection/productItemCollection","bv/c2013/view/productItemCollection","bv/c2013/collection/productItemCollection","bv/c2013/view/productItemCollection","bv/c2013/model/loadMore","bv/c2013/view/loadMore","bv/c2013/model/loadMore","bv/c2013/view/loadMore","bv/c2013/model/ratingList","bv/c2013/view/ratingList","bv/c2013/collection/ratingItemCollection","bv/c2013/view/ratingItemCollection","bv/c2013/model/summary","bv/c2013/view/summary","bv/c2013/model/histogram","bv/c2013/view/histogram","bv/c2013/model/contentList","bv/c2013/view/contentList","bv/c2013/model/contentFilter","bv/c2013/view/contentFilter","bv/c2013/model/relevancyLink","bv/c2013/view/relevancyLink","bv/c2013/model/headToHead","bv/c2013/view/headToHead","bv/c2013/model/inlineHistogram","bv/c2013/view/inlineHistogram","bv/c2013/model/secondaryRatingSummary","bv/c2013/view/secondaryRatingSummary","bv/c2013/model/feedback","bv/c2013/view/feedback","bv/c2013/collection/secondaryContentItemCollection","bv/c2013/view/secondaryContentItemCollection","bv/c2013/model/contentSort","bv/c2013/view/contentSort","bv/c2013/model/avatar","bv/c2013/view/avatar","bv/c2013/model/crowdSourcedAnswerBadge","bv/c2013/view/crowdSourcedAnswerBadge"],function(e,t,n,r,i,s,o,u,o,u,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,l,c,l,c,C,k,C,k,L,A,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,m,g,Y,Z,et,tt,nt,rt){var it={bvRouter:{name:"bvRouter"},fullProfile:{name:"fullProfile",model:e,view:t},sidebar:{name:"sidebar",model:n,view:r},tabs:{name:"tabs",model:i,view:s},profileContentList:{name:"profileContentList",type:[],model:o,view:u},contentItemCollection:{name:"contentItemCollection",collection:a,view:f},ugcCount:{name:"ugcCount",model:l,view:c},pagination:{name:"pagination",model:h,view:p},secondaryContentList:{name:"secondaryContentList",model:d,view:v},secondaryContentItemCollection:{name:"secondaryContentItemCollection",collection:m,view:g},mediaViewer:{name:"mediaViewer",model:y,view:b},genericSubmission:{name:"genericSubmission",model:w,view:E},searchBar:{name:"searchBar",model:S,view:x},categorySelect:{name:"categorySelect",model:T,view:N},productItemCollection:{name:"productItemCollection",collection:C,view:k},loadMore:{name:"loadMore",model:L,view:A},ratingList:{name:"ratingList",model:O,view:M},ratingItemCollection:{name:"ratingItemCollection",collection:_,view:D},summary:{name:"summary",model:P,view:H},histogram:{name:"histogram",model:B,view:j},contentList:{name:"contentList",model:F,view:I},contentFilter:{name:"contentFilter",model:q,view:R},relevancyLink:{name:"relevancyLink",model:U,view:z},headToHead:{name:"headToHead",model:W,view:X},inlineHistogram:{name:"inlineHistogram",model:V,view:$},secondaryRatingSummary:{name:"secondaryRatingSummary",model:J,view:K},feedback:{name:"feedback",model:Q,view:G},secondaryContentItemCollection:{name:"secondaryContentItemCollection",type:[],collection:m,view:g},contentSort:{name:"contentSort",has:{name:"contentSort"},model:Y,view:Z},avatar:{name:"avatar",model:et,view:tt},crowdSourcedAnswerBadge:{name:"crowdSourcedAnswerBadge",model:nt,view:rt},stars:{name:"stars",has:{name:"stars"}},productImage:{name:"productImage",has:{name:"productImage"}},prosCons:{name:"prosCons",has:{name:"prosCons"}},contentBadges:{name:"contentBadges",has:{name:"contentBadges"}},secondarySubmission:{name:"secondarySubmission",has:{name:"secondarySubmission"}},secondaryContentLink:{name:"secondaryContentLink",has:{name:"secondaryContentLink"}},secondaryContentBtn:{name:"secondaryContentBtn",has:{name:"secondaryContentBtn"}},userBadges:{name:"userBadges",has:{name:"userBadges"}},searchOnKeyup:{name:"searchOnKeyup",has:{name:"searchOnKeyup"}},infiniteScroll:{name:"infiniteScroll",has:{name:"infiniteScroll"}},instanceNameScope:{name:"instanceNameScope",has:{name:"instanceNameScope"}},filterByCategory:{name:"filterByCategory",has:{name:"filterByCategory"}},filterWithoutCategory:{name:"filterWithoutCategory",has:{name:"filterWithoutCategory"}},searchOnly:{name:"searchOnly",has:{name:"searchOnly"}},overallRating:{name:"overallRating",has:{name:"overallRating"}},reviewCount:{name:"reviewCount",has:{name:"reviewCount"}},aggregateRatingTag:{name:"aggregateRatingTag",has:{name:"aggregateRatingTag"}},writeReviews:{name:"writeReviews",has:{name:"writeReviews"}},askQuestions:{name:"askQuestions",has:{name:"askQuestions"}},minimalistHorizontal:{name:"minimalistHorizontal",has:{name:"minimalistHorizontal"}},minimalist:{name:"minimalist",has:{name:"minimalist"}},filterButton:{name:"filterButton",has:{name:"filterButton"}},secondaryRatings:{name:"secondaryRatings",has:{name:"secondaryRatings"}},reviewPhotos:{name:"reviewPhotos",has:{name:"reviewPhotos"}},reviewVideos:{name:"reviewVideos",has:{name:"reviewVideos"}},tags:{name:"tags",has:{name:"tags"}},recommended:{name:"recommended",has:{name:"recommended"}},reviewAttribution:{name:"reviewAttribution",has:{name:"reviewAttribution"}},productFamiliesAttribution:{name:"productFamiliesAttribution",has:{name:"productFamiliesAttribution"}},hoverDropdown:{name:"hoverDropdown",has:{name:"hoverDropdown"}},inlineSubmission:{name:"inlineSubmission",has:{name:"inlineSubmission"}},socialAvatar:{name:"socialAvatar",has:{name:"socialAvatar"}},hoverProfile:{name:"hoverProfile",has:{name:"hoverProfile"}},fullProfileLink:{name:"fullProfileLink",has:{name:"fullProfileLink"}}};return it.profileContentList.type.push("Reviews"),it.profileContentList.type.push("Questions"),it.profileContentList.type.push("Answers"),it.secondaryContentItemCollection.type.push("ClientResponses"),it}),BV.define("bv/util/userToken",[],function(){function e(e){var t=e.length;if(t%2)return null;var n=[];for(var r=0;r<t;r+=2){var i=parseInt(e[r]+e[r+1],16);n[r/2]=String.fromCharCode(i)}return n.join("")}function t(t){var n=(t||"").substr(32),r=e(n),i=r.match(/userid=([^&]+)/i);return i&&i.length>1?i[1]:null}function n(t){var n=(t||"").substr(32);return e(n)}var r={getId:t,getData:n};return r}),BV.define("bv/util/user",["ENV","backbone","underscore","window","client!util/cookie","bv/util/session","bv/util/userToken","util/checksum","jquery"],function(e,t,n,r,i,s,o,u,a){function h(e){var t=a.Deferred();return e?s.get(f,function(n){var r=(n||{}).token,i=r&&o.getId(r)!==o.getId(e);i&&s.create(),t.resolve(i)}):t.resolve(!1),t.promise()}if(r.BV&&r.BV.serverRender)return{};var f="user",l=n(e.get("config").siteAuth).reduce(function(e,t){return e||t}),c=function(e){this.name=e};n(c.prototype).extend({save:function(e,t){s.set(this.name,e,function(e){t(e)})},read:function(e,t){s.get(this.name,function(e){t.success(e||{})})},create:function(e,t){this.save(e.attributes,t.success)},update:function(e,t){this.save(e.attributes,t.success)},destroy:function(e,t){s.remove(this.name,function(e){t.success(e)})}});var p=t.Model.extend({name:f,initialize:function(){var t=this;this.on("change:token",function(e,n){n&&h(n).done(function(){t.tokenDfd.resolve(n)})}),e.on("firstUI",function(e){var n=t.get("token");s.id()?t.fetch({success:function(){h(n).done(function(){n?t.set({token:n},{silent:!0}):l&&t.unset("token",{silent:!0}),t.fetchDfd.resolve()})}}):t.fetchDfd.resolve()})},storage:new c(f),tokenDfd:a.Deferred(),fetchDfd:a.Deferred(),sync:function(e,t,n){e=e==="delete"?"destroy":e,t.storage[e](t,n)},thirdPartyIds:function(){var e=this,t={};return n(["gravatar","facebook"]).forEach(function(n){var r=e.get(n);r&&(t["thirdpartyid_"+n]=r)}),t},thirdPartyIdsArray:function(){var e=this,t=[];return n(e.thirdPartyIds()).forEach(function(e,n){t.push({Name:n.substr("thirdpartyid_".length),Id:e})}),t},token:function(){var e=a.Deferred(),t=this;return t.fetchDfd.done(function(){e.resolve(t.get("token"))}),e.promise()},promise:function(){var e=this;return this.tokenDfd.state()==="resolved"?a.Deferred().resolve(e.get("token")).promise():this.tokenDfd.promise()},checksum:function(){return u(o.getId(this.get("token"))||"")},getAuthor:function(){return{ThirdPartyIds:this.thirdPartyIdsArray()}}});return new p({})}),BV.define("dimsumFields!fieldIdMap",[],{Value:{prefix:"rating_Value"},Quality:{prefix:"rating_Quality"},Fit_22:{prefix:"rating_Fit_22"},Width_1:{prefix:"rating_Width_1"},IntendedUse:{prefix:"tag_IntendedUse"}}),BV.define("bv/util/sanitize",{subjectId:function(e){return e?e.replace(/\W/g,"_"):""}}),BV.define("bv/ugc/auth",["backbone","underscore"],function(e,t){var n={error:function(e){this.trigger("error",e)}};return t(n).extend(e.Events),n}),BV.define("bv/c2013/model/submission",["ENV","framework/bmodel","underscore","jquery","bv/api/fetch","window","vendor/json2","bv/util/user","bv/util/domainPolice","bv/util/userToken","bv/strings","util/url","dimsumFields!fieldCategories","dimsumFields!fields","dimsumFields!fieldIdMap","framework/util/bvtracker","framework/util/bvreporter","bv/util/sanitize","bv/ugc/auth","bv/strings"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b){var w=e.get("config"),E={useremail:!0,usernickname:!0,userlocation:!0,hostedauthentication_authenticationemail:!0,agreedtotermsandconditions:!0},S=n.extend({},E,{rating:!0,title:!0,reviewtext:!0,isrecommended:!0,netpromoterscore:!0,netpromotercomment:!0,wildcards:["^contextdatavalue.*","^rating.*","^photourl_.*","photocaption_.*","videourl_.*","videocaption_.*","^additionalfield_.*","^tagid_.*"]}),x=n.extend({},E,{commenttext:!0}),T=n.extend({},E,{questionsummary:!0}),N=n.extend({},E,{answertext:!0}),C={review:S,comment:x,question:T,answer:N},k={rating:!0,title:!0,reviewtext:!0,isrecommended:!0,agreedtotermsandconditions:!0,netpromoterscore:!0,commenttext:!0,questionsummary:!0,answertext:!0};return t.extend({name:"submission",init:function(e){var t=this,r=e.clientAPIConfig||this.get("clientAPIConfig")||{},a=i.noun(r.subjectType||e.subjectType),f=i.noun(r.contentType||e.contentType),l=n({}).extend(h,{fieldCategoryMap:h.fieldCategoryMap||{},fieldCategoryOrder:h.fieldCategoryOrder||[]}),d=c.getParam(s.location.href,"bvinjecteddata"),v=o.parse(d);n(v).each(function(e,t){var n=t.indexOf("_"),r=t.substr(0,t.indexOf("_")),i=t.substr(t.indexOf("_")+1),s=k[t]||k[r]||k[i];s&&(v[t]=null)}),t.set({subjectType:a,clientAPIConfig:r,subjectId:r[a+"Id"],contentType:f,submitSchema:null,fieldCategories:l,dimsumFields:p,photos:[],videos:[],Author:u.getAuthor(),injectedDataFromUrl:v,postCallback:b.rpc.postCallback,isGenericSubmission:r.isGenericSubmission}),t.off("load").on("load",t.loadTrigger,t),t.off("queryError").on("queryError",y.error,y)},setupDataProcessing:function(){},_validationRules:function(){var e={},t=function(t,n){var r='[name="'+n+'"]';e[r]=t.validation};return n(this.get("formFields")).forEach(t),n(this.get("specialFields")).forEach(function(e,r){n(e.formFields).forEach(t)}),{rules:e}},_processFields:function(e,t,r){var i=this,s=C[i.get("contentType")],o={},a={contextdatavalue:"default",additionalfield:"default",tagid:"default",rating:"ratings"},f=i.get("formFields")||{},l=i.get("fieldCategories").fieldCategoryMap,c=i.get("dimsumFields"),h=i.get("injectedDataFromToken"),p=i.get("injectedDataFromUrl"),d=i.get("injectedDataFromRejectedReview"),v=n.extend({},d,p,h),m=n.omit(v,n(h).keys());n(e).forEach(function(e,r){var u,h=l[r],p=r.substr(0,r.indexOf("_")),d=r.substr(r.indexOf("_")+1),g=c[p]||{},y,b,w,E,S,x=p==="tagid",T=g[d]&&g[d].hideOnSubmission,N=m[r]||m[d];x&&(y=r.substr(r.indexOf("_")+1).split("/"),b=y[0],E="tag_"+b,h=l[E],T=c.tag[b]&&c.tag[b].hideOnSubmission),n(l).size()||(h=a[p]),n(s).has(r)?u=i.calculateRules(r,T):n(s).has("wildcards")&&n(s.wildcards).forEach(function(e){r.match(e)&&(u=i.calculateRules(r,T,e))}),N&&u&&(m=n.omit(m,[r,d]),u.schema.Type==="SelectInput"&&!T?n(u.schema.Options).each(function(e){e.Selected=e.Value===N}):u.schema.Value=N),u&&h?(o[h]=o[h]||{formFields:{}},x?(w=o[h].formFields[E]||{schema:{Type:"TagGroup"},label:t[E].Label,hidden:T,id:t[E].Id,type:t[E].Type,tags:[]},n(t[E+"_id"].SubElements).forEach(function(e,t){e.Id===r&&(S=t)}),w.tags[S]=n(u).extend({tagIndex:S,parentSchemaId:w.id}),o[h].formFields[E]=w):(p==="rating"?g[d]&&(u.dimsumField=g[d],u.dimsumField.type==="SLIDER"&&(u.range[1]=u.dimsumField.sliderSize)):p==="contextdatavalue"&&!v[r]&&!v[d]&&g[d]&&g[d].autoPopulate===!1&&u.schema.Options&&(u.schema.Options=n.map(u.schema.Options,function(e,t){return e.Selected=t===0&&!e.Label,e}),u.schema.Value=null),o[h].formFields[r]=u)):u&&(f[r]=u)}),this._appendAsHiddenFields(m,o,r),this._createOrderedFormFields(o,r);var g=e.contextdatavalue_VerifiedPurchaser||{};i.set({formFields:f,specialFields:o,hostedAuth:n(e).has("hostedauthentication_authenticationemail"),verifiedPurchaser:g.Value==="true"});if(f.hostedauthentication_authenticationemail||f.useremail)f.emailField=f.hostedauthentication_authenticationemail||f.useremail,f.emailField.schema.Value=f.emailField.schema.Value||u.get("email")},_appendAsHiddenFields:function(e,t,r){m.assert(n(t).isObject(),"A specialFields object is required for _appendAsHiddenFields"),m.assert(n(r).isArray(),"A myFieldOrder array is required for _appendAsHiddenFields");if(n(e).isEmpty())return;var i=this.get("fieldCategories").fieldCategoryOrder;t.injected=t.injected||{formFields:{}},n(i).indexOf("injected")===-1&&n(i).push("injected"),n(e).each(function(e,i){if(t.injected.formFields[i]||n(e).isUndefined()||n(e).isNull())return;d[i]&&(i=d[i].prefix);var s={Id:i,Value:e,Type:"HiddenInput",hidden:!0,enabled:!0,schema:{Id:i,Value:e,Type:"HiddenInput"}};t.injected.formFields[i]=s,r.push(i)})},_createOrderedFormFields:function(e,t){var r=/^tagid_.+\/.+$/;n(e).forEach(function(e){var i=n.keys(e.formFields),s=e.formFields;if(i.length>1){var o=[],u={};n(t).forEach(function(e){var t=r.test(e)?"tag_"+e.split("/")[0].substring(6):e;if(u[t])return;n(s).has(t)&&o.push(s[t]),u[t]=!0}),e.orderedFormFields=o}else e.orderedFormFields=i.length?[s[i[0]]]:null})},reset:function(e){this.init(e)},calculateRules:function(e,t,i){var s=w.submission[e]||{};i&&(s=w.submission[e.split("_")[0]]||s);var o=this.get("submitSchema").Data.Fields[e],u={enabled:!!o,hidden:t||this._hiddenIfValue(e,o),validation:{},schema:o};n.isEmpty(s.range)||(u.range=n(s.range).clone());var a={};if(o){a.required=!!o.Required||e==="agreedtotermsandconditions"||e==="hostedauthentication_authenticationemail";if(o.MaxLength||s.maxlength)a.maxlength=o.MaxLength||s.maxlength;if(o.MinLength||s.minlength)a.minlength=o.MinLength||s.minlength;r.extend(u.validation,{},a)}return u},getMaxNumByMediaType:function(e){var t=this.get("submitSchema").Data.FieldsOrder,r=n(t).filter(function(t){return t.indexOf(e+"url_")===0});return r.length},getSubject:function(){return{id:this.get("subjectId"),type:this.get("subjectType"),contentType:this.get("contentType")}},apiCall:function(){var e="https:"+w.apiconfig.baseUrl,t,n=this.getSubject(),r=this.get("user"),s=this.get("hasSubmitted");n.contentType==="comment"?t="submit"+n.type+n.contentType:t="submit"+n.contentType;var o=i.get(t).limitTo(!1).withSubject(n.type+"id",n.id).inLocale(w.locale).withBaseUrl(e);return r&&(o=o.withUser(r)),s&&(o=o.withHasSubmitted()),o},fetchSubmitSchema:function(){function h(e,t){var n=new Error(e);v.error({name:l.errors.API,detail1:t||"Error fetching submission schema",detail2:i.serialize()}),s.reject(n)}function p(e){var t={};return n(e).each(function(e,n){var r=e.Value;r!==null&&typeof r!="undefined"&&(t[n]=r)}),t}function d(r){r=r.data,t.set("submitSchema",r);if(!n.isEmpty(r.Errors)){var u={ERROR_DUPLICATE_SUBMISSION:n.partial(s.reject,"duplicate")},f="Error fetching submission schema: "+i.serialize()+" -- "+o.stringify(r),l=n.partial(h,f),c=u[r.Errors[0].Code]||l;c()}else if(r&&r.Data&&r.Data.Fields){if(!n.isEmpty(r.FormErrors)){var d=p(r.Data.Fields),v=n.extend(d,{PreviousSubmissionId:r.PreviousSubmissionId});t.set("injectedDataFromRejectedReview",v)}t._setupERRErrors(r.FormErrors),e.get("references").get(a.type,a.id).done(function(e){t.set("subjectData",e),t._processFields(r.Data.Fields,r.Data.Groups,r.Data.FieldsOrder),t.dataReady(e),s.resolve(r.Data.Fields)})}else{var m="Unexpected submission schema: "+i.serialize()+" -- "+o.stringify(r),g="Unexpected submission schema";h(m,g)}}var t=this,i,s=r.Deferred(),a=t.getSubject();return u.token().done(function(e){e&&t.set("user",e),u.get("hasSubmitted-"+a.id+"-"+a.contentType)&&t.set("hasSubmitted",!0),i=t.apiCall(),i.fetch("submissionSchema").done(d).fail(function(e,t){var n="Submission schema load fail: "+i.serialize()+" -- "+e+" -- "+t;h(n)});var n=c.toQueryParams(f.getData(e));t.set("injectedDataFromToken",n)}),s},_setupERRErrors:function(e){if(n.isEmpty(e))return;this.set("formErrors",e);var t=[],r=[].concat(e.GeneralErrors,n(e.FieldErrors).values());n(r).each(function(e){var n=e.SubCodes.split(" ");t.push.apply(t,n)}),t=n(t).uniq(),this.set("rejectionErrors",t)},loadTrigger:function(){var e=this;e.publish("updateprofile",e,u.getAuthor()),this.fetchSubmitSchema().done(function(){e.trigger("loadsucceeded",e)}).fail(function(t){y.error(t),e.trigger("loadfailed",e,t)})},toJSON:function(){var e=this.get("subjectData");if(n(e).isUndefined()||n(e.Type).isUndefined()||n(e.Id).isUndefined())throw new Error("Incomplete subject data",e);e.SanitizedId=g.subjectId(e.Id);var t={apiConfig:i._config,author:this.get("Author"),campaignId:this.get("clientAPIConfig").campaignId||"",channelId:this.get("channelId"),clientName:w.clientDisplayName||w.clientname,contentType:this.get("contentType"),hostedAuth:this.get("hostedAuth"),hostedAuthCallbackUrl:this.hostedAuthUrl(),fieldCategoryOrder:this.get("fieldCategories").fieldCategoryOrder,formFields:this.get("formFields"),locale:w.locale,maxPhotos:this.getMaxNumByMediaType("photo"),modelCid:this.cid,postCallback:this.get("postCallback"),Product:this.get("subjectData"),rejectionErrors:this.get("rejectionErrors"),specialFields:this.get("specialFields"),subject:e,user:this.get("user"),validationRules:this._validationRules(),verifiedPurchaser:this.get("verifiedPurchaser")};return t[t.contentType]=!0,n(t.specialFields).forEach(function(e){e.rawData=t}),t},getFields:function(){var e=n.pluck(this.get("specialFields"),"formFields"),t=n.union(e,[this.get("formFields")]);return n.reduce(t,function(e,t){function r(t,n){e[n]=t}return n(t).each(r),e},{})},hostedAuthUrl:function(){function e(){var e=r('link[rel="canonical"]').attr("href"),n=r("<a/>",{href:e})[0].href;return e&&a.allowedDomain(n)?n:t()}function t(){var e=s.location.href;return e=c.splice(e,"userToken"),e=c.splice(e,"authToken"),e=c.splice(e,"action"),e}function n(){var e=c.protocol,t={qa:{production:"display-qa",staging:"display-qa"},production:{production:"display",staging:"display-stg"}},n=t[w.workspace][w.environment]+".ugc.bazaarvoice.com",r=["static",w.clientname,w.locale];w.site&&r.splice(2,0,encodeURIComponent(w.site));var i=r.join("/")+"/container.htm";return e+"//"+n+"/"+i}if(!this.get("hostedAuth"))return;return this.get("isGenericSubmission")?BV._internal.container?e():n():w.container.subjectRedirect?BV._internal.container?e():t():n()},addMedia:function(e,t){var n=this.get(i.nouns(e)),r=this._indexOfMediaId(t.id,e,n);r===-1?n.push(t):n[r]=t,this.set(i.nouns(e),n)},removeMedia:function(e,t){var n=this.get(i.nouns(t)),r=this._indexOfMediaId(e,t,n);r>-1&&n.splice(r,1),this.set(i.nouns(t),n)},_indexOfMediaId:function(e,t,n){n=n||this.get(i.nouns(t));var r=0,s=-1,o=n[r];while(o){if(o.id===e)return s=r,s;r+=1,o=n[r]}return s},_hiddenIfValue:function(e,t){var n={usernickname:!0,userlocation:!0};return n[e]&&t&&t.Value},getMediaById:function(e,t,n){return n=n||this.get(i.nouns(t)),n[this._indexOfMediaId(e,t,n)]}})}),BV.define("bv/c2013/model/thankYouPage",["ENV","framework/bmodel","underscore","bv/util/contentType"],function(e,t,n,r){return t.extend({name:"thankYouPage",init:function(e){n.extend(this.options,e),this.set({icon:"&#x2714;",messageContentType:r.noun(this.get("contentType"))})}})}),BV.define("bv/c2013/model/dropdownable",["framework/bmodel"],function(e){return e.extend({name:"dropdownable"})}),BV.define("mappings!submission/models",["bv/c2013/model/submission","bv/c2013/model/thankYouPage","bv/c2013/model/dropdownable"],function(e,t,n){var r={submission:{name:"submission",model:e},thankYouPage:{name:"thankYouPage",model:t},dropdownable:{name:"dropdownable",model:n},starHoverHeatMap:{name:"starHoverHeatMap",has:{name:"starHoverHeatMap"}},submissionPreview:{name:"submissionPreview",has:{name:"submissionPreview"}},reviewHelperText:{name:"reviewHelperText",has:{name:"reviewHelperText"}},mbox:{name:"mbox",has:{name:"mbox"}}};return r}),BV.define("bv/util/normalizeParams",["underscore"],function(e){return function(t){var n=e.clone(t);return e(n).forEach(function(t,r){e(["Id","Type","Token"]).forEach(function(e){var i=new RegExp(e.toLowerCase()+"$");r.match(i)&&(delete n[r],n[r.replace(i,e)]=t)})}),n}}),BV.define("framework/approuter",["backbone","ENV","underscore","bv/util/contentType","framework/util/bvreporter","util/url","bv/util/normalizeParams","window"],function(e,t,n,r,i,s,o,u){function c(t){e.history.getHash=function(e){var t=e||this,n=t.location.href,r=null,i=null,s=n.match(/(?:&|\?)bvroute=(.*?)(?:&|$)/);return s&&(r=decodeURIComponent(s[1])),s=n.match(/#(.*)$/),s&&(i=s[1]),r&&i?h(i)?i:r:r?r:i?i:""};if(t)return;e.history._updateHash=function(e,t,n){return}}function h(t){typeof t=="undefined"&&(t=l(u));var r=n.any(e.history.handlers,function(e){return e.route.test(t)});return r}var a="",f=function(e){this.routes=n(e.route).isArray()?e.route:[e.route],this.handler=e.handler};f.prototype.initialize=function(e){var t=this;this.router=e,n(t.routes).forEach(function(n){e.route(a+n,null,t.handler)})},f.prototype.reverse=function(e){return this.routes[0].replace(/:(\w+)/g,function(t,n){return e[n]||""})},f.prototype.match=function(e){var t,r=n(this.routes).detect(function(n){var r=this.router._routeToRegExp(n);return r.test(e)?(t=this.router._extractParameters(r,e),!0):!1},this);return r?(this.handler.apply(this,t),!0):!1};var l=e.history.getHash;return e.Router.extend({initialize:function(e){var r=this;r.clientAPIConfig=e.clientAPIConfig,n(e.routes).forEach(function(e,u){var a=e.name,l=new f({route:e.paths,handler:function(){i.log("Handling route",a,e);var u={},f=n(arguments).toArray();n(e.params).forEach(function(e,t){if(e==="urlData"){var r=s.toQueryParams(f[t]);n(u).extend(r)}else u[e]=f[t]}),n(e.actions).forEach(function(e,s){if(e.event){var a=t.get("componentManager").find(e.component);a?a.triggerRouteEvent(a.scopeEvent(e.event),u):i.warn("Tried to trigger event on",e.component,"but couldn't find it")}else e.action?(n(u).extend({componentId:e.component},r.clientAPIConfig),$BV.ui(e.scope,e.action,u)):e.bvdata&&(u=n({}).extend(r.clientAPIConfig,o(u)),$BV.ui(u.scope,u.action,u))})}});l.initialize(r),r[a]=l}),delete r.routes;var a=l(u),p=h(a),d=a===""||p;c(d)},getRouteByName:function(e){var t=this[e];return t instanceof f?t:null},matchFragmentToRoute:function(e,t){var n=this.getRouteByName(t);if(!n||n.routes.length!==1)return;return n.match(e)}})}),BV.define("bv/ugc/postInjectTriggers",["ENV","$BV","jquery"],function(e,t,n){function i(e,t,i){r&&(r=!1,BV._internal.loadCSS&&n(function(){BV._internal.loadCSS()}),e._onLoad&&e._onLoad({loadTime:new Date-BV._internal.startTime,apiTime:t,initData:i}))}var r=!0;return i}),BV.define("framework/util/hasFeature",["ENV","underscore","framework/util/featureHelper"],function(e,t,n){function r(e,r,o,u,a,f){e=t(e).isString()?s(e):e;var l=e&&e.features&&e.features[r];return l=n.getFeaturesForInstance(l,u,a),l&&i(l,o,f)}function i(t,r,i){var s,o,u,a,f=e.get("mappings"),l,c=i?[i]:["has","model","collection","view"];for(s=0;s<t.length;s++){o=n.getName(t[s]),u=f[o];if(u)for(var h=0;h<c.length;h++){l=c[h],a=u[l];if(a&&u.name===r)return!0}}return!1}function s(n){var r=e.get("componentManager");return t(n).isUndefined()?!1:r?r.find(n):!1}return r}),BV.define("framework/outlet",["ENV","underscore","framework/util/bvreporter","bv/util/baseConfig"],function(e,t,n,r){var i=function(e){n.assert(e.originatingComponent,"Originating component required to set up outlet"),n.assert(e.target,"Target required to set up outlet"),n.assert(e.key,"Key required to set up outlet"),n.assert(e.target.event||e.target.action,"Target for outlet has event or action"),this.originatingComponent=e.originatingComponent,this.target=e.target,this.key=e.key,this.allowedParams=/\d*Id|Type|able|Mode|mobile|doShowContent\d*/,this.createHandler()};return i.prototype.createHandler=function(){var e=this.event="outlet:"+this.key;this.target.event&&this.originatingComponent.on(e,this._eventHandler()),this.target.action&&this.originatingComponent.on(e,this._actionHandler())},i.prototype._eventHandler=function(){n.assert(this.target.component,"Event outlet target must have component");var i=this,s=this.target;return function(){var o=e.get("componentManager").find(s.component);n.info("Handling outlet event",s.event,"originated by",i.originatingComponent.getScope());if(!o)return;if(o&&!o.model&&s.scope&&s.fallback){var u=r[s.scope][s.fallback];t(u).isFunction()&&u(arguments);return}var a=[o.scopeEvent(s.event)].concat([].slice.call(arguments));o.trigger.apply(o,a);return}},i.prototype._actionHandler=function(){var e=this.target,r=this;return function(i){n.info("Handling outlet action",e.action,e.scope,"originated by",r.originatingComponent.getScope()),i=i||{};var s={};t(i).chain().keys().forEach(function(e){r.allowedParams.test(e)&&(s[e]=i[e])}),s.componentId=e.component,s.onShow=i.onShow,$BV.ui(e.scope,e.action,s);return}},i.prototype.detach=function(){this.originatingComponent.off(this.event)},i}),BV.define("util/pixelsDisplayed",["window","document"],function(e,t){function r(t){var r=t.getBoundingClientRect(),i,s=e.innerHeight||n.clientHeight;return r.top<=0?(i=Math.max(r.top+r.height,0),i=Math.min(i,s),i):r.top>=s?0:Math.min(s-r.top,r.height)}var n=t&&t.documentElement;return r}),BV.define("util/visibilityObserver",["window","document","jquery","underscore","backbone","framework/util/bvreporter","util/pixelsDisplayed"],function(e,t,n,r,i,s,o){function g(){r(p).each(function(e){e.state===u&&e.checkVisibility()})}function y(e){delete p[e.id]}function b(e){e.id||(e.el.id?e.id=e.el.id:e.id=d++),p[e.id]=e}function w(){v||(v=new Date),g()}function S(e){r.extend(this,m,e),s.assert(this.el,"VisibilityObserver has an element"),this.state=u,b(this)}var u="waiting",a="pending",f="visible",l=150,c=n(e),h=n(t),p={},d=0,v,m={visibleThreshold:100,viewObserved:5e3},E=r.debounce(w,l);return e&&e.BV&&e.BV.serverRender||(t.readyState==="complete"?w():c.on("load",w),c.on("resize scroll",E),h.on("click",g)),S.prototype={isVisible:function(){return o(this.el)>this.visibleThreshold},checkVisibility:function(){var e=new Date;if(this.state===f)return;this.isVisible()&&(this.timeFirstVisible||(this.timeFirstVisible=e,this.trigger("firstVisible",this.viewObserved,e-v)),this.setState(a),setTimeout(r.bind(this.confirmVisibility,this),this.viewObserved))},confirmVisibility:function(){var e=new Date;if(this.isVisible()){this.timeVisible=e,this.setState(f),this.trigger("fullyVisible",this.viewObserved,e-v),y(this);return}this.setState(u)},setState:function(e){this.state=e,this.trigger("visibility",e)},stop:function(){y(this)}},r.extend(S.prototype,i.Events),S}),BV.define("framework/bcomponent",["window","ENV","underscore","backbone","jquery","bv/util/contentType","bv/ugc/postInjectTriggers","framework/async-queue","framework/util/bvreporter","framework/util/bvtracker","framework/util/hasFeature","framework/util/scoped","framework/util/experiments","framework/outlet","bv/util/baseConfig","client!util/visibilityObserver","framework/performance","bv/util/bvLocal"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){var y=r.Model.extend({initialize:function(e){a.assert(function(){return[n(e).isObject(),"config is object"]}),a.log("Initializing component",e.componentId,"with config",e);var t=this;n.extend(this,e),this.componentData=e,this.isRouter=this.type==="bvRouter",this.isAutoloadComponent=this.autoload,this._startTime=new Date,this.uniqueId=(this.container||this.containerPrefix)+"_"+this.componentId,this.sortString=(this.autoload?"":"~")+(this.priority?"":"~")+this.componentId,this._eventQueue=[],this.monitorVisibility&&this._monitorVisibility(),this._rendered=!1,this.on("viewRendered",function(){t._rendered=!0}),this._asyncRender=!!h.asyncRender,this._asyncDataProcessing=!!h.asyncDataProcessing,this._asyncComponentRender=!!h.asyncComponentRender}});return y.prototype.updateContainer=function(e,t){a.assert(function(){return[n(e).isObject(),"config is object"]}),a.assert(function(){return[n(t).isObject(),"clientAPIConfig is object"]}),a.debug("Updating container for",this.componentId);var r=n(e.containers).has(this.container)?e.containers[this.container]:this.container,i=null;t.contentType&&(i=s.Nouns(t.contentType));var o;!n(t[r]).isEmpty()&&(i===this.contentType||n(this.coverageContentTypes).contains(i))&&(n(e.injectionZone).chain().keys().contains(this.container).value()&&(o=e.injectionZone[this.container],delete e.injectionZone[this.container],e.injectionZone[t[r]]=o),this.container=t[r]),t.containerPrefix&&(this.containerPrefix=t.containerPrefix),this.uniqueId=(this.container||this.containerPrefix)+"_"+this.componentId},y.prototype.getOutlets=function(e,t){a.assert(function(){return[n(e).isString(),"actionKey is string"]}),a.assert(function(){return[n(t).isObject(),"uiActions is object"]}),a.debug("Getting outlets for",this.componentId);var r=t[e];return n(r).contains(this.componentId)?n(this.outlets).chain().values().flatten().filter(function(e){return!n.isUndefined(e.event)}).pluck("component").value():[]},y.prototype.initView=function(e,r,s){var f=this.clientAPIConfig;a.assert(function(){return[n(e).isNumber(),"index is number"]}),a.assert(function(){return[n(f).isObject(),"clientAPIConfig is object"]}),a.assert(function(){return[n(r).isObject(),"injectionZoneReadyDfds is object"]}),a.assert(!!s.promise,"domReadyDfd is deferred"),a.debug("Initializing view for",this.componentId);var l=this._startTime,c=t.get("componentManager"),h=this.uniqueId,p=c&&c.views?c.views()[h]:null,d=this.model;p||(p=this.createView(e));if(p&&this.inject&&this.type!=="submission"){var v=[d.dataProcessedPromise()],m=this;n(d.subModels).each(function(e){e&&v.push(e.dataProcessedPromise())}),i.when.apply(i,v).done(function(){setTimeout(function(){function t(){e.push(m.renderView(r,s))}function a(){var t=n.partial(o,f,new Date-l,m.get("initData"));n.all(e)?t():i(t)}var e=[];m._asyncComponentRender?(u.push(t),u.push(a)):(t(),a())},0)})}return p},y.prototype.createView=function(e){a.assert(function(){return[n(e).isNumber(),"index is number"]}),a.debug("Creating view for",this.componentId);var r=t.get("mappings"),i=n(r).has(this.type)?r[this.type].view:null,s=this.model;if(!i){a.warn("No view for",this.componentId);return}return new i({model:s,parent:{name:this.type,containerId:this.container,containerPrefix:this.containerPrefix||s.get("clientAPIConfig").containerPrefix,uniq:e},isTopView:!0})},y.prototype.setTopView=function(e){this.view=e},y.prototype.initModel=function(e){a.debug("Initializing model for",this.componentId);var n=t.get("componentManager");this.model=n&&n.models?n.models()[this.uniqueId]:null,this.model||(this.model=this.createModel(e),this._initOutlets());if(this._eventQueue.length>0){var r;while(this._eventQueue.length)r=this._eventQueue.shift(),this.trigger(r.event,r.data)}return this.model},y.prototype.createModel=function(e){var r=this.clientAPIConfig;a.assert(function(){return[n(r).isObject(),"clientAPIConfig is object"]}),a.debug("Creating model for component",this.componentId);var i=t.get("mappings"),s=n(i).has(this.type)?i[this.type].model:null;if(!s){a.warn("No model for",this.componentId,this.type,i);return}var o=n.extend({},r,{subjectType:this.subjectType,contentType:this.contentType,secondaryContentType:this.secondaryContentType}),u={initData:e,clientAPIConfig:o,dimsumConfig:this.componentData,component:this};return this.apiName&&(u.apiName=this.apiName),new s(u)},y.prototype._initOutlets=function(){var e=this.outlets,t=this;this._registeredOutlets&&this._detachOutlets();var r=this._registeredOutlets=[];if(n(e).isEmpty())return;n(e).each(function(e,i){n(e).each(function(e){var n=new p({originatingComponent:t,target:e,key:i});r.push(n)})}),this._scheduledEvents&&(n(this._scheduledEvents).each(function(e){this.trigger("outlet:"+e)},this),this._scheduledEvents=[])},y.prototype._detachOutlets=function(){n(this._registeredOutlets).invoke("detach")},y.prototype.reset=function(){a.group(a.INFO,"Reset Component",this.componentId),this._detachOutlets(),this.clear(),this.view&&this.view.remove(),this.model&&this.model.destroy(),delete this.model,delete this.view,a.groupEnd(a.INFO,"Reset Component")},y.prototype.restore=function(){var e=this.view.parent.uniq,n=t.get("componentManager");n.reset(this);var r=this.initModel(),s=this.initView(e,[],i.Deferred().resolve());n.models()[this.uniqueId]=r,n.views()[this.uniqueId]=s,t.trigger("bv:initReady")},y.prototype.triggerAction=function(e){a.assert(this.model,"model exists on component"),a.debug("Triggering action on component",this.componentId);var n=e||t.get("config").page.initPageNum||1,r=this.model,i=this.get(c("currentPage",r.getContentType()));r.get("autoload")&&(!i||n!==i&&n!==1)&&r.publish("pageto",n)},y.prototype.isRenderRequired=function(e,t,r,i){var s=t[e];return n(s).contains(this.componentId)?(this.inject=!0,!0):n(r).contains(this.componentId)&&n(i).contains(this.type)?(this.inject=!1,!0):!1},y.prototype.renderView=function(r,s,o){function c(e,t){function n(){l._asyncRender?e.renderAsync().done(t):(e.render(),t())}if(g.isBVLocal()){g.shouldRender().done(function(e){e?n():a.error("Bazaarvoice Local is disabled for this node. Contact Bazaarvoice for support.")});return}n()}var u=t.get("config"),f=this.view,l=this;a.assert(function(){return[n(r).isObject(),"injectionZoneReadyDfds is object"]}),a.assert(function(){return[f&&n(f.render).isFunction(),"view is defined"]}),a.assert(function(){return[n(u).isObject(),"config is object"]}),a.assert(!!s.promise,"domReadyDfd is promise"),a.debug("Rendering view for",this.componentId);if(!e.BV.serverRender){m.mark(this.componentId+"-render-start");var h=m.getEntriesByName("scoutStart")[0];h?m.measure(this.componentId+"-render-ready","scoutStart",this.componentId+"-render-start"):a.warn("performance does not have a scoutStart mark")}if(!this.container)return c(f,function(){e.BV.serverRender||(m.mark(l.componentId+"-render-end"),m.measure(l.componentId+"-render",l.componentId+"-render-start",l.componentId+"-render-end"))}),!0;var p="#"+this.container,d=i(p),v=t.get("cssLoaded");if(d.length)return u.page.reInject?(f.detach(),f.setElement(d.empty()[0]),v.done(function(){c(f,function(){l.trigger("viewRendered"),e.BV.serverRender||(m.mark(l.componentId+"-render-end"),m.measure(l.componentId+"-render",l.componentId+"-render-start",l.componentId+"-render-end"))})}),!0):(f.attach(d[0]),this.trigger("viewRendered"),!0);if(o)return a.warn("Failed to render view for ",this.componentId),l.trigger("viewFailedToRender"),!1;var b;return n(u.injectionZone).find(function(e,t){var i=n(e).contains(f.componentId);return i&&(b=r[t]),i}),b||(b=s),b.done(n.bind(function(){y.prototype.renderView.apply(this,[r,s,!0])},this)),!1},y.prototype.registerView=function(e){var t=e.parent,n=[t.name,t.uniq,e.name,e.uniq].join("_");this.views[n]||(this.views[n]={}),this.views[n][e.uniq]=e},y.prototype.getScope=function(e){return e=s.Nouns(e||this.contentType),this.container+"["+this.componentId+"<"+e+">]"},y.prototype.hasFeature=function(e,t,n,r,i){return l(this,e,t,n,r,i)},y.prototype.scopeEvent=function(e){return c(e,s.Nouns(this.contentType))},y.prototype.triggerRouteEvent=function(e,t){return this.model?this.trigger(e,t):this._eventQueue.push({event:e,data:t}),this},y.prototype._monitorVisibility=function(){var e=this;this.once("viewRendered",function(){function t(t){return function(n,r){f[t]({detail1:n,elapsedMs:r},e)}}if(e.model.get("TotalResults")){var n=new v({el:e.view.el});n.on("firstVisible",t("inView")),n.on("fullyVisible",t("viewedUGC"))}})},y.prototype.isAsyncDataProcessing=function(){return this._asyncDataProcessing?!this._rendered:!1},y}),BV.define("framework/binjectionzone",["underscore","jquery","vendor/fastclick"],function(e,t,n){function r(e){e.preventDefault()}function i(e,t){new n(t.get(0)),e.on("click",'a[href="#"]',r)}function s(e){return t("<div/>").attr("id",e)}var o=function(n){var r=[],i=n.zone,s=n.components;this.dfd=new t.Deferred,this.$temporaryElement=t("<div />"),e(i).each(function(e){var t=s[e];t&&t.container&&r.push(t.container)}),this.injected=this._createContainers(r,n.key,n.isDomReady)};return o.prototype._createContainers=function(n,r,o){e(n).each(function(e){var n=t("#"+e),o,u=n;n.length?e===r&&(o=n.html(),n=s(e).html(o).appendTo(this.$temporaryElement),this.$temporaryElement.find("script").remove(),u=this.$temporaryElement):(n=s(e).appendTo(this.$temporaryElement),u=this.$temporaryElement),i(n,u)},this);var u=t("#"+r);return u.length?(u.replaceWith(this.$temporaryElement.children()),this.dfd.resolve(),!0):o?(this.dfd.resolve(),!0):!1},o}),BV.define("framework/componentManager",["underscore","framework/bcomponent","framework/binjectionzone","ENV","jquery","framework/util/bvreporter"],function(e,t,n,r,i,s){var o=i.Deferred(),u={},a={};i(o.resolve);var f=["contentSort","fullProfile","mediaViewer"],l=function(n,r){return s.assert(function(){return[e(n).isObject(),"componentData is object"]}),s.debug("Initializing component manager"),this.isServerRender=!!r,this.components={},this.requiredRenderComponents={},this.domReadyDfd=o,this.injectionZoneReadyDfds={},s.group(s.INFO,"Component Initialization"),e(n).each(function(e,n){var r=new t(e);this.components[n]=r},this),s.groupEnd(s.INFO,"Component Initialization"),this};return l.prototype.models=function(){return u},l.prototype.views=function(){return a},l.prototype.forEach=function(t,n){e(this.components).each(t,n)},l.prototype.each=l.prototype.forEach,l.prototype.find=function(t,n){if(e(t).isFunction())return e(this.components).find(t,n);var r=t;return this.components[r]},l.prototype.getRouter=function(t){var n=e(this.components).chain().values().find(function(e){return e.isRouter}).value();return n?(n=n.componentData,n.clientAPIConfig=t,n):{}},l.prototype.getClientRenderComponents=function(t,n){s.assert(function(){return[e(t).isString(),"method is string"]}),s.assert(function(){return[e(n).isObject(),"uiActions is object"]}),s.debug("ComponentManager getting client render components");var r=n[t],i=t,o=[];return this.requiredRenderComponents[i]||(s.group(s.INFO,"Getting outlets for render components"),e(this.components).each(function(r){o=e(o).union(r.getOutlets(t,n))}),s.groupEnd(s.INFO,"Getting outlets for render components"),this.requiredRenderComponents[i]=e(this.components).chain().values().sortBy(function(e){return e.sortString}).filter(function(e){return e.isRenderRequired(t,n,o,f)}).value()),this.requiredRenderComponents[i]},l.prototype.getServerRenderComponents=function(){return s.debug("ComponentManager getting server render compnents"),e(this.components).chain().values().sortBy(function(e){return e.sortString}).filter(function(e){return e.serverRender}).value()},l.prototype.getInjectComponents=function(t,n){s.assert(function(){return[e(t).isString(),"method is string"]}),s.assert(function(){return[e(n).isObject(),"uiActions is object"]}),s.debug("ComponentManager getting inject components");var r=this.getClientRenderComponents(t,n);return e(r).chain().filter(function(e){return e.inject}).pluck("componentId").value()},l.prototype.updateContainers=function(t,n,r){s.assert(function(){return[e(t).isString(),"method is string"]}),s.assert(function(){return[e(n).isObject(),"config is object"]}),s.assert(function(){return[e(r).isObject(),"clientAPIConfig is object"]}),s.group(s.INFO,"Updating containers");var i=this.getClientRenderComponents(t,n.uiActions);e(i).each(function(e){e.updateContainer(n,r)}),s.groupEnd(s.INFO,"Updating containers")},l.prototype.initModels=function(t,n,o){s.assert(function(){return[e(t).isString(),"method is string"]}),s.assert(function(){return[e(n).isObject(),"config is object"]}),s.assert(function(){return[e(o).isObject(),"clientAPIConfig is object"]}),s.group(s.INFO,"Init Models");var a=this.getClientRenderComponents(t,n.uiActions),f=[],l={};return e(a).each(function(e){e.clientAPIConfig=o;var t=u[e.uniqueId];t&&!e.createOnce&&(this.reset(e),t=null),t=t||e.initModel(n.initData),f.push(t.initializedPromise()),l[e.uniqueId]=t},this),r.trigger("bv:initReady"),i.when.apply(i,f).done(function(){r.get("modelsInitializedDfds")[t].resolve()}),u=e(u).extend(l),s.groupEnd(s.INFO,"Init Models"),l},l.prototype.reset=function(e){e.reset(),delete u[e.uniqueId],delete a[e.uniqueId]},l.prototype.initViews=function(t,n,o){function d(){h++,c===h&&(s.info("Views rendered for",t,f),r.trigger("init:viewsRendered",t),p.resolve(u))}s.assert(function(){return[e(t).isString(),"method is string"]}),s.assert(function(){return[e(n).isObject(),"config is object"]}),s.assert(function(){return[e(o).isObject(),"clientAPIConfig is object"]}),s.group(s.INFO,"Init Views");var u={},f=this.getClientRenderComponents(t,n.uiActions),l=this.injectionZoneReadyDfds,c=0,h=0,p=i.Deferred();return e(f).each(function(e,t){e.clientAPIConfig=o;var n=a[e.uniqueId]||e.initView(t,l,this.domReadyDfd),r=e.model;u[e.uniqueId]=n,e.autoload&&(c++,e.on("viewRendered",d,e),e.on("viewFailedToRender",d,e))},this),a=e(a).extend(u),s.groupEnd(s.INFO,"Init Views"),p.promise()},l.prototype.prepareInjectionZones=function(t,n){s.assert(function(){return[e(t).isString(),"method is string"]}),s.assert(function(){return[e(n).isObject(),"config is object"]}),s.debug("ComponentManager preparing injection zones");var r=n.injectionZone,o={},u=this.getInjectComponents(t,n.uiActions),a=this.injectionZoneReadyDfds;e(r).each(function(e,t){a[t]=i.Deferred()}),e(r).each(function(t,n){e.intersection(t,u).length&&a[n].state()!=="resolved"&&(o[n]=t)}),this._initInjectionZones(o)},l.prototype._initInjectionZones=function(t,r){var i={},s=this.injectionZoneReadyDfds,o=this,u=this.components;e(t).forEach(function(e,t){var o=new n({zone:e,key:t,isDomReady:r,components:u});o.injected?s[t].resolve():(i[t]=e,r&&(s[t].resolve(),delete i[t]))},this),e(i).isEmpty()||this.domReadyDfd.done(function(){o._initInjectionZones(i,!0)})},l.prototype.restore=function(t){var n=this,s=[];e(t).forEach(function(e,t){s[t]=e.view.parent.uniq,n.reset(e),u[e.uniqueId]=e.initModel()}),r.trigger("bv:initReady"),e(t).forEach(function(e,t){a[e.uniqueId]=e.initView(s[t],[],i.Deferred().resolve())})},l}),BV.define("framework/util/filteredAPIData",["ENV","underscore","framework/util/bvreporter"],function(e,t,n){var r=e.get("references");return function(e,i,s,o){n.assert(e,"subjectType is defined"),n.assert(i,"subjectId is defined");var u=r.get(e,i).then(function(e){return s&&s.length?t(e).pick(s):e});return t(o).isFunction()&&u.done(o),u}}),BV.define("framework/clientEvents",["client!window","bv/util/baseConfig","framework/util/bvreporter","framework/util/filteredAPIData","backbone","underscore","BV"],function(e,t,n,r,i,s,o){var u=["Id","TotalContentCount","TotalReviewCount","TotalAnswerCount","TotalQuestionCount"],a={submissionLoad:u,submissionSubmitted:u,submissionClose:u,bvRender:1,error:1},f=s.extend({},i.Events);return f=s.extend(f,{eventProperties:{product:u},recent:[],register:function(e){n.assert(function(){return[s.isObject(e),"event object is object"]}),this.on(e)},trigger:function(e,t,u){function p(t){t=s.extend(t,u),n.info("Triggering client event",e,t),i.Events.trigger.apply(l,[e,t])}var f=this.recent[this.recent.length]={name:e,data:t,extras:u,timestamp:(new Date).getTime()};this.recent.length>20&&(this.recent=s.rest(this.recent,1));if(!o.options.triggerPrivateEvents&&!a[e])return;var l=this,c=t.subjectType,h=c&&t[c+"Id"];try{if(c&&h){r(c,h,a[e]).then(p);return}p(t)}catch(d){n.warn("Error in client event for "+e+": "+d.message),f.error=d,s.defer(function(){throw d})}},uiActionComplete:function(e,t){var n=s.clone(t);n.method=e,i.Events.trigger.apply(this,["bvRender",n])},_publicEvents:function(){return s.keys(a)}}),f}),BV.define("framework/uiActionResolver",["underscore","framework/util/bvreporter","framework/clientEvents","framework/util/filteredAPIData"],function(e,t,n,r){var i=n.eventProperties.product,s={rr_show_reviews:i,qa_show_questions:i},o=function(n){t.assert(n.clientAPIConfig,"clientAPIConfig option is set"),t.assert(!!n.initViewsPromise,"initViewsPromise is set");if(!n.clientAPIConfig.loadedDeferred)return this;this.clientAPIConfig=n.clientAPIConfig,this.method=n.method,n.initViewsPromise.done(e(this.resolve).bind(this))};return o.prototype.resolve=function(){function u(e){i.resolve(e),n.uiActionComplete(o.method,e)}var e=this.clientAPIConfig.subjectType,t=this.clientAPIConfig[e+"Id"],i=this.clientAPIConfig.loadedDeferred,o=this;if(s[this.method]){r(e,t,s[this.method]).then(u);return}u({})},o}),BV.define("bv/util/urlstate",["underscore","window","framework/util/bvtracker","bv/strings"],function(e,t,n,r){function i(t,i){var s={};return i=i||"",t&&e(t.split("&")).forEach(function(e){var t=e.split("="),o=t[0];if(o.indexOf(i)===0)try{s[o.substr(i.length)]=t[1]!==undefined?decodeURIComponent(t[1]):undefined}catch(u){s[o.substr(i.length)]="",n.error({name:r.errors.IMPLEMENTATION,detail1:"Invalid URI component",detail2:e})}}),s}function s(e){return i(e||t.location.search.substr(1))}function o(n){var r=i(t.location.search.substr(1),n),s=n?i(r.data):{},o=i(t.location.hash.substr(1),n);return e.extend(r,s,o)}function u(e,t){return o(t)[e]}var a={get:u,bvParams:o,queryParams:s};return a}),BV.define("bv/util/queryrouter",["ENV","underscore","util/url","$BV","BV","window","jquery","framework/util/bvreporter","bv/util/urlstate","bv/util/bvstate","bv/util/bvstateManager","bv/util/normalizeParams","bv/util/baseConfig","bv/api","bv/util/domainPolice"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){function m(e){if(!e.pg||!e.ct)return;return"bvstate/"+e.ct+"/"+e.pg}function g(t){var n=m(t);if(!n)return;var r=e.get("appRouter");r.matchFragmentToRoute(n,"bvstateRR"),r.matchFragmentToRoute(n,"bvstateQA")}function y(e){if(!e.pg||!e.ct)return;var t=o("link[rel=canonical]"),n=t.attr("href"),r=f.parseURL(n),i=f.updateURL(n,e);u.info("Changing page's canonical URL from:",n,"to:",i),t.attr("href",i)}function w(e){function i(e,t){var n=t[0]==="?"?"?":"";return e.replace(t,n)}var n=new RegExp("[\\?&](bvqap|bvrrp)="+b,"g"),r=e.match(n);return t.reduce(r,i,e)}function E(){var e=o("link[rel=canonical]");e.length===0&&(e=o("<link />").attr({rel:"canonical",href:w(s.location.href)}),e.appendTo("head"))}function S(e,t){var n=t.match(new RegExp("^"+b+"$"));if(!n)return null;try{var r={pg:Number(n[4]),ct:p.noun(n[2])};return r.ct!==e?null:T(r)?r:null}catch(i){return null}}function x(e){t(i.setUser).isFunction()&&d.thirdPartyCookieEnabled()&&i.setUser(e)}function T(e){if(!t.isObject(e))return!1;try{p.noun(e.ct)}catch(n){return!1}return t.isNumber(e.pg)}var v,b="([^\\/]+)\\/([^\\/]+)\\/([^\\/]+)\\/([^\\/]+)\\/([^\\/]+).htm",N={bvrrp:t(S).partial("review"),bvqap:t(S).partial("question")},C={bv_authtoken:function(t){var n=e.get("config").apiconfig;n.authToken=t,o(function(){r.ui("global","auth_user",n)})},bvdata:function(i){setTimeout(function(){var s=e.get("config").apiconfig,o,u,a,f,l,d,v;i=n.toQueryParams(i),i=t.extend({},s,c(i)),a=i.action?i.action.split("_"):[],a.length===3&&(f=a[0],l=t(a).rest(1).join("_"),d=a[1],v=a[2],o=(h[f]||{})._actions||{},u=o[l],!u&&d==="submit"&&(u=o["show_"+p.nouns(v)]||{},u={doShowContent:u.doShowContent})),i=t.extend({},u,i),x(i.userToken),r.ui(i.scope,i.action,i)},0)},bvuserToken:function(e){x(e)}};return{start:function(){function i(e,t){var i=n[t];if(i)return e.call(r,i)}function o(e,n){var r=i(N[n],n);return t(e).extend(r)}v=e.get("config");var n=a.queryParams(),r=this,u=["bvqap","bvrrp"],c=t(u).reduce(o,{});t(C).forEach(i);var h=f.parseURL(s.location.toString());T(h)&&(c=h),v.queryRouter&&v.queryRouter.editCanonicalTags&&!t.isEmpty(c)&&(E(c),y(c)),g(c),l.start()}}}),BV.define("bv/analytics/vendor",["underscore"],function(e){return{configure:function(t){this.config=e(t).defaults(this.defaults)},defaults:{},trackEvent:function(e,t){},trackPageView:function(e){},trackError:function(e){},trackTransaction:function(e,t){},trackConversion:function(e,t){},trackImpressions:function(e,t){}}}),BV.define("bv/analytics/magpie",["ENV","underscore","bv/analytics/vendor","util/url","bv/util/contentType","bv/util/domainPolice","window","document","vendor/json2","framework/util/bvreporter","bv/util/isDev","jquery","BV"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=250;o._bvaq=o._bvaq||[];var d=t.extend({},n,{_flushBatch:t.throttle(function(){o._bvaq.push(["flushBatch"])},p,{trailing:!0}),trackEvent:function(e,t){this.initialize(),o._bvaq.push(["addBatchItem",e,t]),this._flushBatch()},trackPageView:function(e){this.initialize(),o._bvaq.push(["trackPageView",e])},trackError:function(e){this.initialize(),o._bvaq.push(["trackEvent","Error",e])},trackConversion:function(e){this.initialize(),o._bvaq.push(["trackConversion",e])},trackImpression:function(e){this.initialize(),this.trackEvent("Impression",e)},initialized:!1,initialize:function(n){if(h._internal.nopreload)return;if(this.initialized===!0&&!n)return;var i=e.get("config"),a="magpie";o._bvaq.push(["setClient",i.clientname]),o._bvaq.push(["setDisplay",i.displaycode]),o._bvaq.push(["setStaging",i.environment!=="production"]),o._bvaq.push(["setSource","firebird"]),o._bvaq.push(["disableTiming"]),o._bvaq.push(["setAnonymous",!s.thirdPartyCookieEnabled()]),i.sci.enabled&&i.sci.waps.length&&(a="magpie-sci",t(i.sci.waps).forEach(function(e){o._bvaq.push(["configureSCIProvider",e.name,e])})),l&&o._bvaq.push(["enableValidation",function(e,t){if(e.error){if(e.message.match("Error:firebird"))return;f.warn("Magpie validation issue:",e.message,t)}}]);if(!o._bva){var c=u.createElement("script");c.type="text/javascript",c.async=!0;var p=r.protocol,v="magpie-static.ugc.bazaarvoice.com",m="2";c.src=p+"//"+v+"/magpiejs/"+m+"/"+a+".js";var g=u.getElementsByTagName("script")[0];g.parentNode.insertBefore(c,g)}d.initialized=!0}});return d}),BV.define("util/performance",["window","underscore","jquery","backbone"],function(e,t,n,r){function u(){var e=[];t(s).forEach(function(t){e.push(i.timing[t])}),o.timing=i.timing,o.timingArray=e,o.ready=!0,o.trigger("ready")}var i=e.performance||e.webkitPerformance||e.mozPerformance||e.oPerformance||e.msPerformance||!1,s=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],o=t.extend({supported:i!==!1,ready:!1,timing:{},timingArray:[]},r.Events);return i!==!1&&n(e).on("load",function(){setTimeout(u,0)}),o}),BV.define("bv/analytics",["ENV","window","underscore","bv/analytics/magpie","bv/util/contentType","bv/util/productInfo","util/performance","framework/util/bvtracker","framework/util/bvreporter","framework/clientEvents"],function(e,t,n,r,i,s,o,u,a,f){function p(e){var t=[],r=n.toArray(arguments).slice(1);return n(c).each(function(i){if(n(i[e]).isFunction())try{t.push(i[e].apply(i,r))}catch(s){a.error("Unable to invoke vendor method: "+e,s)}}),t}function d(){var e={};return e.version="2.0",e.context="Read",l.site&&(e.site=l.site),e}function v(){var e={};return l.testId&&(e.testId=l.testId),e}var l=e.get("config"),c=[r],h={bvProductVersion:t.BV._internal.uiVersion};u.on("error",function(e){return e=n(e).defaults({name:e instanceof Error?e.message:"Exception",type:"firebird"},h),p("trackError",e)}),u.on("event",function(e,t){return n(t).defaults(d(),v(),h),p("trackEvent",e,t)}),u.on("feature",function(e){return n(e).defaults(d(),v(),h),f.trigger("_feature",e),p("trackEvent","Feature",e)}),u.on("impression",function(e,t){n(e).defaults(d(),v(),h);if(!e.brand&&e.type==="UGC"){var r=t.get("Type")==="comment"?t.get("parentContentItem"):t,i=r&&r.get("Reference");i&&i.Brand&&i.Brand.Name&&(e.brand=i.Brand.Name)}return f.trigger("_impression",e),p("trackImpression",e)}),u.on("conversion",function(e){return n(e).defaults(d(),h),p("trackConversion",e)}),n(["Rendered","Loaded","Completed","Waited"]).each(function(e){u.on(e.toLowerCase(),function(t){return a.assert(n.isNumber(t.elapsedMs),"elapsedMs property set for event"),t=n(t).defaults({type:"Used",interaction:!1},h),t.name=e+": "+t.name,p("trackEvent","Feature",t)})}),u.on("pageview",function(t,r){n(t).defaults(d(),v(),h),t.initial=e.get("initialPageViewHappened")!==!0,e.get("initialPageViewHappened")!==!0&&e.set("initialPageViewHappened",!0);if(r){n(t).defaults({pages:r.get("numPages"),currentPage:r.get("currentPage")});var s=r.getSubject();t.subjectType=i.Noun(s.type),t.subjectId=s.id,t.contentType=i.Noun(s.contentType);if(s.type==="product"){var u=r.toJSON(),a=u.Product,f=!a||!a.PrimaryContent?{}:a.PrimaryContent.Statistics||{};a.Brand&&a.Brand.Name&&(t.brand=t.brand||a.Brand.Name),n(t).defaults({categoryId:a?a.CategoryId:null,numReviews:f.TotalCount,numRatingsOnlyReviews:f.RatingsOnlyCount||0,percentRecommend:((f.RecommendedCount||0)/(a?a.TotalCount:0)*100).toFixed(2),avgRating:f.AverageOverallRating||0})}}return o.supported&&o.ready&&(t.t=o.timingArray),p("trackPageView",t)}),u.on("viewedUGC",function(e,t){return e=n(e).defaults({type:"Used",name:"viewedUGC",interaction:!0,bvProduct:s.getType(t),categoryId:s.getCategoryId(t),productId:s.getId(t)},h),f.trigger("_viewedUGC",e),p("trackEvent","Feature",e)}),u.on("inView",function(e,t){return e=n(e).defaults({type:"Used",name:"InView",interaction:!0,bvProduct:s.getType(t),categoryId:s.getCategoryId(t),productId:s.getId(t)},h),f.trigger("_inView",e),p("trackEvent","Feature",e)}),u.on("performance",function(e){return n(e).defaults({type:"Performance"},h),p("trackEvent","Diagnostic",e)})}),BV.define("bv/ugc/init",["ENV","components!","mappings!nonsubmission","mappings!submission/models","backbone","framework/bview","framework/approuter","framework/bcomponent","framework/componentManager","framework/uiActionResolver","bv/util/queryrouter","bv/util/contentType","bv/api/fetch","bv/prefetch","jquery","underscore","bv/util/focusManager","bv/ugc/postInjectTriggers","body","bv/analytics","bv/util/loadingOverlay"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){function w(t,n){var r=new o(t.getRouter(n));e.set("appRouter",r)}function E(e,t){return p.setAPI(h),p.startPrefetch(b),v(e).forEach(function(e){e.triggerAction(t)}),p.endPrefetch(b++)}function S(e,t){return new a(e,t)}function x(i){if(!e.get("appInitialized")){var s=e.get("config"),o=e.get("mappings")||{},u=S(t);w(u,i),m.init(),e.set({componentManager:u,mappings:d.extend(!0,{},o,r,n),modelsInitializedDfds:{},appInitialized:!0})}T()}function T(){function e(){i.history&&!i.history.started&&(i.history.started=!0,i.history.start(),l.start())}y()?e():d(e)}function N(t,n,r){var i=e.get("modelsInitializedDfds");i[t]=d.Deferred();var s=e.get("config"),o=e.get("componentManager")||S(o),u=o.getClientRenderComponents(t,s.uiActions);o.updateContainers(t,s,n),o.initModels(t,s,n);if(r)return;o.prepareInjectionZones(t,s),i[t].done(function(){new f({method:t,clientAPIConfig:n,initViewsPromise:o.initViews(t,s,n)}),E(u)})}function C(t){var n=e.get("componentManager")||S(t,!0);return n.getServerRenderComponents()}function k(e,t,n){return e.initModel(t,n)}function L(e,t,n){return e.model=t,e.createView(n)}function A(e,t,n,r){e.updateContainer(n,r)}function O(e){return e.uniqueId}var b=0;return{initialize:x,actionInit:N,startRouters:T,triggerAction:E,componentsFromComponentData:S,getRenderComponents:C,initModel:k,initView:L,updateContainer:A,getUniqId:O}}),BV.define("bv/c2013/model/seoCanary",["ENV","window","backbone","BV","bv/api","bv/util/bvstateManager","framework/util/bvreporter","util/lookup","vendor/moment","underscore"],function(e,t,n,r,i,s,o,u,a,f){var l={review:"rr",question:"qa"},c={reviews:"mostRecent",questions:"recentQuestionsFirst"},h=n.Model.extend({name:"seoCanary",initialize:function(){var t=e.get("config");this.set({date:this._getDate(),env:this._getEnv(t),firebirdVersion:this._getVersion(),locale:t.locale,subjectId:this._getSubjectId()}),s.subscribe(this.handleBVState,this),r.extensions.data.get("bvapi").getLast("products").done(f.bind(this.handleResponse,this))},_getSubjectId:function(){var t=e.get("appRouter").clientAPIConfig,n=i.noun(t.subjectType),r=t[n+"Id"];return r},_getEnv:function(e){return e.environment==="production"?"prd":"stg"},_getVersion:function(){return r._internal&&r._internal.uiVersion?r._internal.uiVersion:"unversioned"},_getDate:function(){var e=a().format("YYYY-MM-DD"),t=a().format("hh:mmZ");return e+"T"+t},handleResponse:function(t){var n=e.get("config"),r=t.results.Results[0],i=r.Content.Reviews.FilteredStatistics,s=r.Content.Reviews.RawStatistics,o,u;n.statistics.onlyShowDisplayedLocaleStatistics?(o=i.TotalCount,u=o-i.RatingsOnlyCount):(o=s.TotalCount,u=i.TotalCount-i.RatingsOnlyCount);var a=o?"hasreviews":"noreviews",f=this._getHasQuestions(r);this.set({hasReviews:a,hasQuestions:f,reviewCount:o,filteredReviewCount:u,renderContentCount:!0}),this.trigger("rerenderView")},_getHasQuestions:function(e){var t;return e.TotalQuestionCount?e.TotalAnswerCount?t="hasquestionsanswers":t="hasquestions":t="noquestions",t},handleBVState:function(e){if(this._lastUrl&&this._lastUrl===t.location.toString())return;this._lastUrl=t.location.toString(),e=this._setDefaultStateValues(e);var n=l[e.ct],r=e.pg===1?"bvpage1":"bvpage2n";this.set({bvPage:r,bvProduct:l[e.ct],page:e.pg,sortName:this._getSortName(e.ct),renderPageAndBVProduct:!0}),this.trigger("rerenderView")},_setDefaultStateValues:function(e){var t={};return t.ct=e.ct||"review",t.pg=e.pg||1,t},_getSortName:function(t){if(!t)return;var n=e.get("config"),r=n.sort,s=i.nouns(t),o=r[s],u;return f(o).isArray()?u=o[0]:u=o,u=u||c[s],u}});return h}),BV.define("hbs!seoCanary",["hbs","vendor/handlebars/runtime"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){var r="",i;return r+='  <li data-bvseo="ps">bvseo_fps, prod_bv',(i=n.bvProduct)?i=i.call(e,{hash:{}}):(i=e.bvProduct,i=typeof i===u?i.apply(e):i),r+=a(i)+", vn_firebird_",(i=n.firebirdVersion)?i=i.call(e,{hash:{}}):(i=e.firebirdVersion,i=typeof i===u?i.apply(e):i),r+=a(i)+"</li> "+' <li data-bvseo="cp">cp_',(i=n.page)?i=i.call(e,{hash:{}}):(i=e.page,i=typeof i===u?i.apply(e):i),r+=a(i)+", ",(i=n.bvPage)?i=i.call(e,{hash:{}}):(i=e.bvPage,i=typeof i===u?i.apply(e):i),r+=a(i)+"</li> "+' <li data-bvseo="cf">loc_',(i=n.locale)?i=i.call(e,{hash:{}}):(i=e.locale,i=typeof i===u?i.apply(e):i),r+=a(i)+", ",(i=n.subjectId)?i=i.call(e,{hash:{}}):(i=e.subjectId,i=typeof i===u?i.apply(e):i),r+=a(i)+", ",(i=n.env)?i=i.call(e,{hash:{}}):(i=e.env,i=typeof i===u?i.apply(e):i),r+=a(i)+", sort_",(i=n.sortName)?i=i.call(e,{hash:{}}):(i=e.sortName,i=typeof i===u?i.apply(e):i),r+=a(i)+"</li> ",r}function c(e,t){var r="",i;return r+='  <li data-bvseo="co">co_',(i=n.hasReviews)?i=i.call(e,{hash:{}}):(i=e.hasReviews,i=typeof i===u?i.apply(e):i),r+=a(i)+", co_",(i=n.hasQuestions)?i=i.call(e,{hash:{}}):(i=e.hasQuestions,i=typeof i===u?i.apply(e):i),r+=a(i)+", tv_",(i=n.reviewCount)?i=i.call(e,{hash:{}}):(i=e.reviewCount,i=typeof i===u?i.apply(e):i),r+=a(i)+", tr_",(i=n.filteredReviewCount)?i=i.call(e,{hash:{}}):(i=e.filteredReviewCount,i=typeof i===u?i.apply(e):i),r+=a(i)+"</li> ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=this;s+=' <ul id="BVSEO_meta" style="display:none!important">  <li data-bvseo="bvDateModified">',(o=n.date)?o=o.call(t,{hash:{}}):(o=t.date,o=typeof o===u?o.apply(t):o),s+=a(o)+"</li> "+" ",o=n["if"].call(t,t.renderPageAndBVProduct,{hash:{},inverse:f.noop,fn:f.program(1,l,i)});if(o||o===0)s+=o;s+="  ",o=n["if"].call(t,t.renderContentCount,{hash:{},inverse:f.noop,fn:f.program(3,c,i)});if(o||o===0)s+=o;return s+=" </ul> ",s});return t.registerPartial("seoCanary",n),n.deps=[],n.tplMountedViews=[],n}),BV.define("bv/c2013/view/seoCanary",["jquery","body","backbone","underscore","bv/c2013/model/seoCanary","hbs!seoCanary"],function(e,t,n,r,i,s){var o=n.View.extend({initialize:function(){this.model=new i,this.model.on("rerenderView",this.render,this)},render:function(){var n=this.model.toJSON(),r=s(n);if(!this.alreadyAppended)this.$el=e(r),e(t()).append(this.$el),this.alreadyAppended=!0;else{var i=e(r);this.$el.replaceWith(i),this.setElement(i)}}});return o}),BV.define("bv/util/uiValidators",["ENV"],function(e){var t={assertReviewSubmissionAllowed:function(){if(e.get("config").rrReadOnlyEnabled&&!e.isContainer())return{error:"Attempting submission on a read-only page."}}};return t}),BV.define("bv/c2013/methods",["underscore","bv/c2013/view/seoCanary","bv/util/uiValidators"],function(e,t,n){function r(){window.console&&console.error&&console.error.apply(console,arguments)}function i(t){if(e(t.productId).isEmpty())return{error:"BV: IMPL: No productId is defined",type:"IMPLEMENTATION"}}var s=e.once(function(){var e=new t;e.render()});return[{method:"global_auth_user",only:function(e){BV.require(["secondary"],function(t){t.AuthUser(e)})}},{method:"global_unsubscribe_user",only:function(e){BV.require(["secondary"],function(t){t.UnsubscribeUser(e)})}},{method:"rr_show_reviews",configProps:{contentType:"review",subjectType:"product"},after:function(){s()},validate:i},{method:"rr_submit_review",configProps:{contentType:"review",subjectType:"product"},validate:n.assertReviewSubmissionAllowed,after:function(e,t){t(e,"products",e.productId,"rr_submit_review")},isSubmission:!0},{method:"rr_submit_comment",configProps:{contentType:"comment",subjectType:"product"},after:function(e,t){t(e,"reviews",e.reviewId,"rr_submit_comment")},isSubmission:!0},{method:"rr_submit_generic",configProps:{contentType:"review",subjectType:"product"}},{method:"rr_inline_ratings",validate:function(t){t.productId&&(t.productIds=t.productIds||[t.productId]);if(e(t.productIds).isEmpty()&&e(t.categoryId).isEmpty())return{error:"BV: IMPL: Neither categoryId nor productIds is defined.",type:"IMPLEMENTATION"}}},{method:"qa_show_summary",configProps:{contentType:"question",subjectType:"product"},validate:i,after:function(e,t,n){n.SI_trackProductPageView(e.productId)},inactive:!0},{method:"qa_show_questions",configProps:{contentType:"question",subjectType:"product"},after:function(){s()},validate:i},{method:"qa_submit_question",configProps:{contentType:"question",subjectType:"product"},isSubmission:!0,after:function(e,t){t(e,"products",e.productId,"qa_submit_question")}},{method:"qa_submit_answer",configProps:{contentType:"answer",subjectType:"product"},isSubmission:!0,after:function(e,t){t(e,"questions",e.questionId,"qa_submit_answer")}},{method:"cp_show_profile",configProps:{contentType:"author",subjectType:"author",silentMode:!0}},{method:"loy_show_leaderboard",validate:function(){r("Loyalty is no longer supported")}}]}),BV.define("util/consoleError",["window"],function(e){function t(){var t=e.console;t&&t.error&&t.error.apply(t,arguments)}return t}),BV.define("bv/ugc/submit/redirectToContainer",["bv/api/fetch","underscore","jquery","window"],function(e,t,n,r){function i(i,s){var o=e.noun(s.subject),u=t.extend({bvaction:s.action,bvsubjectType:s.modelSubject,bvcampaignId:s.clientAPIConfig.campaignId},i),a;s.submissionModel&&(a=s.submissionModel.get("user"),a&&(u.bvuserToken=a)),u["bv"+o+"Id"]=s.id,r.location.href=s.containerPageUrl+n.param(u)}return i}),BV.define("bv/ugc/submit/getRedirectUrl",["util/url"],function(e){return function(t){var n=t.redirectUrl,r=t.bvdata,i=t.bvinjecteddata,s=[e.caboose(n),"bvdata="+encodeURIComponent(e.stringifyObject(r))];return i&&s.push("&bvinjecteddata="+encodeURIComponent(i)),s.push(e.hash(n)),s.join("")}}),BV.define("bv/ugc/submit",["ENV","jquery","underscore","bv/api/fetch","util/url","window","BV","bv/ugc/init","framework/bcomponent","bv/util/urlstate","bv/util/user","bv/util/session","bv/ugc/auth","bv/ui-core/modestbox","bv/util/submissionSubviews","mf!bv/c2013/messages/submission","bv/ugc/submit/redirectToContainer","bv/ugc/submit/getRedirectUrl"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){function y(e,t){var r=e.get("clientAPIConfig")||{};n(["doShowContent","doLogin"]).forEach(function(e){r[e]&&(t[e]=t[e]||r[e])})}function b(u,a,b,w){function S(t,i,s){var o=e.get("componentManager");if(s){var a=o.find(s);if(a)return a.clientAPIConfig=u,a.initModel()}return n(o.models()).find(function(e){return e&&e.name==="submission"&&r.noun(e.get("subjectType"))===r.noun(t)&&r.noun(e.get("contentType"))===r.noun(i)})}function x(){function M(e){o.require(["secondary"],function(t){t.Submission.lightbox(e,u)})}function D(){if(u.loginReturnUrl)return u.loginReturnUrl;var e=s.location;return e.protocol+"//"+e.host+e.pathname+(e.search?e.search:"")+(e.hash?e.hash:"")}function P(e){if(!N.loginPage)throw new Error("Login page not defined");var n=(new Date).getTime().toString(16),r=A+"Id",a={action:w,subjectType:L,campaignId:u.campaignId,isContainer:!!o._internal.container,returnUrl:D()};a[r]=u[r];var f={bveventid:n},l=i.caboose(N.loginPage)+t.param(f);c.set(n,a,function(){s.location.href=l},function(t){if(t.message.indexOf("QuotaExceededError")===-1)throw t;var n=p.get("lightbox"),r=new d.SubmissionMessageView({componentId:e,message:v.error_ERROR_PRIVATE_BROWSING_MODE(),classList:["unknown-error"],icon:"&#x2718;"});n.pushOrOpen({view:r})})}function H(t){var r,i=t.data,a=e.get("appRouter"),f;try{f=i.Results[0],f.Id=f.Id||b,r=f.Url,e.get("references").set(f.Type,f.Id,f)}catch(l){}if(r){var c={action:w,campaignId:u.campaignId,userToken:u.userToken};n(u).forEach(function(e,t){t.match(/Id$/)&&u[t]&&(c[t]=u[t])}),s.location=g({redirectUrl:r,bvdata:c,bvinjecteddata:u&&u.injecteddata?u.injecteddata:null})}else!o._internal.container&&C?m({},j):M(T)}function B(){if(O){T.set({subjectType:A,subjectId:b}),M(T);return}if(o._internal.container&&(x||!N.container.subjectRedirect)){M(T);return}if(u.isGenericSubmission){M(T);return}if(x&&C&&!o._internal.container&&u.mobileRedirect){m({bvmobile:!0},j);return}if(!o._internal.container&&T&&!n.isUndefined(b)&&T.getSubject().id===b){M(T);return}E=r.get(a,b).limitTo(1),E.fetch("subject").done(H)}var E,x=o._internal.mobile||navigator.userAgent.match(/(iPhone|iPod|Android|BlackBerry)/),T,N=e.get("config"),C=i.caboose(u.containerPageUrl)||N.container.url,k=u.componentId,L=r.noun(u.subjectType),A=r.noun(a),O=L!==A;delete u.componentId,T=S(u.subjectType,u.contentType,k);if(!T)return;var j={id:b,subject:a,action:w,modelSubject:L,clientAPIConfig:u,submissionModel:T,containerPageUrl:C};y(T,u),T.reset({clientAPIConfig:u});if(N.siteAuth[u.contentType]===!0){var F=u.userToken||f.get("userToken","bv");if(!F){if(u.doLogin){u.doLogin(function(e){e.error&&h.on("error",e.error);var t=e.userToken;if(!t){h.error(new Error("Bazaarvoice: Empty authentication credentials"));return}try{l.set({token:t}),T.set("user",t),$BV.configure("global",{userToken:t}),B()}catch(n){h.error(new Error("Bazaarvoice: Wrong authentication credentials"))}});return}P(k);return}l.set({token:F}),T.set("user",F)}B()}var E=e.get("modelsInitializedDfds")[w];if(!E)throw new Error("No model has not been initialized yet.");E.done(x)}return b}),BV.define("bv/clientapi/defineMethod",["underscore","bv/ugc/submit","bv/ugc/init","bv/util/baseConfig","util/consoleError","framework/util/bvtracker","bv/strings"],function(e,t,n,r,i,s,o){function u(e,t,n){var i=r[e]._actions=r[e]._actions||{};i[t]=n}function a(t,n){return n.configProps?e(t).extend(n.configProps):t}return function(r,f){var l=r.method,c=l.split("_"),h=c[0],p=c.slice(1).join("_"),d,v;return function(c){c=a(c||{},r);if(r.only){r.only(c);return}var m;if(e(r.validate).isFunction()){m=r.validate(c);if(m&&m.error){d=m.error+" (scope: "+l+")",v=m.type||"IMPLEMENTATION",s.error({name:o.errors[v],detail1:d}),i(d);return}}r.inactive||(u(h,p,c),n.actionInit(l,c,r.isSubmission)),e(r.after).isFunction()&&r.after(c,t,f)}}}),BV.define("bv/clientapi/extensions",["BV","underscore","framework/util/bvreporter"],function(e,t,n){function i(e){return t(r.getAll()).each(function(t){if(e[t])return;var n=r.get(t);e[t]=function(e){n.init({config:e})}}),r.on("register",function(r){if(!r.name){n.warn("Tried to register extension without a name.");return}if(!t.isFunction(r.init)){n.warn("Tried to register extension without an init method");return}if(e[r.name]){n.warn("Tried to register extension "+r.name+" but it is already registered.");return}e[r.name]=function(e){r.init({config:e})}}),e}var r=e.extensions&&e.extensions.ui;return{init:i}}),BV.define("bv/clientapi/sanitizeConfig",["underscore","jquery","framework/util/bvtracker","bv/strings"],function(e,t,n,r){function s(e,t){var i=["IMPL:",e,"for inline ratings should not contain non-alphanumeric characters except underscore and dash."].join(" ");throw n.error({name:r.errors.IMPLEMENTATION,detail1:i,detail2:t}),new Error(i)}function o(n){return e(n).forEach(function(r,i){e(r).isString()&&t.trim(r)===""&&delete n[i]}),n}function u(t){if(!e(t.doShowContent).isFunction())return t;var n=t.doShowContent;return t.doShowContent=function(){try{return n.apply(t,arguments)}catch(e){throw new Error("IMPL: doShowContent: "+e.toString())}},t}function a(n){return n.productIds?(e(n.productIds).each(function(r,o){if(!r)return;var u;e(r).isObject()?(u=t.trim(o.toLowerCase()),i.test(u)&&(e(r.containerId).isEmpty()||i.test(r.containerId))&&s("productId",u),!e(r.containerId).isEmpty()&&i.test(r.containerId)&&s("containerId",r.containerId),u!==o&&(r._origId=t.trim(o),n.productIds[u]=r,delete n.productIds[o])):(u=t.trim((r+"").toLowerCase()),i.test(u)&&s("productId",u),n.productIds[o]=t.trim(r))}),n):n}var i=/[^a-zA-Z0-9_\-]/ig,f={sanitize:function(e){return e=f.deleteWhitespaceValues(e),e=f.wrapDoShowContent(e),e=f.cleanProductIds(e),e},wrapDoShowContent:u,cleanProductIds:a,deleteWhitespaceValues:o};return f}),BV.define("bv/clientapi/performanceMeasurements",["underscore","framework/performance","framework/util/bvreporter","framework/util/bvtracker","window","BV"],function(e,t,n,r,i,s){var o=i.console&&(i.console.timeEnd||i.console.timelineEnd||!1);return function(r){return function(u){n.timeEnd("UI method render "+u),u==="rr_show_reviews"&&o&&o.call(i.console,"scout-to-render");var a=r._timings[u],f=s._internal.timing=s._internal.timing||{ui:{}};a.init=f.ui[u]&&f.ui[u].init,a.end=(new Date).getTime();var l={name:"$BV.ui "+u,elapsedMs:a.end-a.start},c={name:"$BV.ui "+u,elapsedMs:a.end-a.init};e(["productId","categoryId"]).each(function(e){l[e]=a.config[e],c[e]=f.ui[u]&&f.ui[u].config[e]}),t.getEntriesByName("primaryStart").length>0&&t.log.warn("bv-"+u+"-rendered","primaryStart");var h=u+"-call";t.getEntriesByName(h).length>0&&t.log.warn("bv-"+u+"-completed",h),t.getEntriesByName("bv-preload-start").length>0&&t.getEntriesByName("bv-preload-end").length>0&&t.getEntriesByName("bv-preload").length<1&&t.log.warn("bv-preload","bv-preload-start","bv-preload-end")}}}),BV.define("bv/clientapi/firstUI",["underscore","ENV","bv/clientapi/performanceMeasurements"],function(e,t,n){return e.once(function(e,r){t.trigger("firstUI",e),t.on("init:viewsRendered",n(r))})}),BV.define("bv/clientapi/checkUserToken",["bv/util/user"],function(e){return function(t){var n=t.userToken||t.authToken;n&&e.set({token:n})}}),BV.define("bv/clientapi/normalizeTransactionData",["underscore"],function(e){return function(t){t=e.extend({},t||{}),e(t).has("transaction_id")&&(t.orderId=t.transaction_id,delete t.transaction_id),e(t).has("products")&&(t.items=t.products,delete t.products);if(e.isArray(t.items)){var n,r;for(n=0,r=t.items.length;n<r;n++)t.items[n].orderId=t.orderId,e(t.items[n]).has("product_id")&&(t.items[n].sku=t.items[n].product_id,delete t.items[n].product_id)}return e(t).defaults({type:"Transaction",label:"TransactionThankYou",value:null}),t}}),BV.define("bv/clientapi",["ENV","jquery","window","underscore","BV","bv/clientAPISetup","bv/ugc/init","bv/util/domainPolice","bv/util/productInfo","bv/strings","framework/clientEvents","framework/util/bvreporter","framework/util/extensionsRegistry","bv/util/baseConfig","framework/util/bvtracker","bv/c2013/methods","bv/util/isDev","util/consoleError","bv/util/bvLocal","bv/clientapi/defineMethod","bv/clientapi/extensions","bv/clientapi/sanitizeConfig","bv/clientapi/performanceMeasurements","bv/clientapi/firstUI","bv/clientapi/checkUserToken","bv/clientapi/normalizeTransactionData"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N){var C=e.get("config");E=E.sanitize;var k={categoryId:C.categoryId,productIds:C.productIds,productId:C.productId};s();var L={},A=v;r(A).each(function(e){var t=e.method;L[t]=b(e,O)}),L=w.init(L);var O={_timings:{},ui:function(){function S(){L[v](b)}var e=y.config.isLocalNode||!!u.allowedDomain();if(!e)return g("Bazaarvoice is not configured for this domain: "+n.location.host);var i=[].slice.call(arguments),s=i[i.length-1],a=i[0],l=[],v,b=t.extend({},k,p.global,p[a],s);a&&l.push(a),i.length>2&&l.push(i[1]),v=l.join("_").toLowerCase();var w=h["ui."+v];w&&O.queueProcessed&&w.trigger("call",b),E(b),T(b),x(b,O),o.initialize(b),w&&w.trigger("invoke",b),c.group(c.INFO,"UI method",v),c.time("UI method render "+v),O._timings[v]={start:(new Date).getTime(),config:s};if(m&&!b.logUncaughtExceptions){S(),c.groupEnd(c.INFO,"UI method",v);return}try{S()}catch(N){var C=["BV:",r(N).isString()?N:N.message,"("+(i.length===2?"method: "+i[0]:"scope: "+i[0]+" method: "+i[1])+")"].join(" ");d.error({name:f.errors.UNCAUGHT,detail1:C})}},startRouters:function(){o.startRouters()},container:function(e,t){E(t),r.extend(i._internal,{preload:null,container:!0}),i.require(["secondary"],function(e){e.Container.init(t)})},configure:function(e,n){E(n),t.extend(p[e],n);var i;if(n.events){if(e!=="global")throw i=new Error("IMPL: event handlers can only be set in global config"),d.error({name:f.errors.IMPLEMENTATION,detail1:i.message}),i;if(!r(n.events).isObject())throw i=new Error("IMPL: events property in global config must be an object"),d.error({name:f.errors.IMPLEMENTATION,detail1:i.message}),i;l.register(n.events)}},ready:function(e){r.isFunction(e)&&e()},SI_trackProductPageView:function(e){d.pageview({type:"Product",label:"Default",subjectType:"product",subjectId:e,productId:a.getId(this)})},SI_trackGenericPageView:function(){d.pageview({type:"Product",label:"Default",productId:a.getId(this)})},SI_trackTransactionPageView:function(e){e=N(e),d.conversion(e)},SI_trackConversion:function(e){var t={};r(["type","label","value"]).each(function(n){r(e).has(n)&&(t[n]=e[n],delete e[n])}),d.conversion(t,e)},SI_disable:function(){},SI_enable:function(){},SI_setDebugEnabled:function(e){},product:null,DSI_trackBVPageView:function(){O.product?O.SI_trackProductPageView(O.product):O.SI_trackGenericPageView()},DSI_trackProduct:function(e){O.product=e},DSI_trackTransaction:function(e){O.SI_trackTransactionPageView(e)}};return O}),BV.define("bv/bootstrap/callHandler",["client!$BV","BV","bv/clientapi"],function(e,t,n){return function(r){var i=r.shift(),s=[r.shift()];i==="ui"&&s.push(r.shift()),s.push(r.shift()||{}),i==="ui"&&!e._apiQueue&&t._internal.timing&&(t._internal.timing.ui[s.slice(0,2).join("_")]={init:(new Date).getTime(),config:s[s.length-1]}),n[i].apply(n,s)}}),BV.define("util/pluralform",["underscore"],function(e){var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=function(){throw new Error("Environment unsupported.")},s={},o="@locale",u=".js",a={},f;return typeof window!="undefined"&&window.navigator&&window.document?(n=function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;for(t=0;t<3;t++){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}if(!e)throw new Error("getXhr(): XMLHttpRequest not available");return e},i=function(e,t){var r=n();~e.indexOf("http")||(e=window.location.protocol+e),r.open("GET",e,!0),r.onreadystatechange=function(n){r.readyState===4&&(r.status===200?t(null,r.responseText):require.onError&&t(new Error("Failure to load: "+e)))},r.send(null)}):typeof process!="undefined"&&process.versions&&!!process.versions.node&&(t=require.nodeRequire("fs"),i=function(e,n){try{var r=t.readFileSync(e,"utf8");n(null,r)}catch(i){n(i)}}),f=function(e,t,n,r,s){if(r.turbo){BV.require(["messageLocaleMap"],function(n){var r=n[e+t];if(!r){var i=t.indexOf("-")!==-1?t.split("-")[0]:"UNKNOWN";r=n[e+i]}s(!r,r)});return}a[n]?s(null,a[n]):i(n,function(e,t){a[n]=t,s.call(this,e,t)})},{load:function(e,t,n,r){},write:function(e,t,n){}}}),BV.define("util/pluralform!",["vendor/messageformat"],function(e){return e.locale.en=function(e){return e===1?"one":"other"},e}),BV.define("bv/bootstrap/slowPath",["vendor/jquery/importantizer","underscore","util/has","ENV","bv/clientapi","client!bv/util/cssLoadCheck","window","client!$BV","BV","framework/util/bvtracker","framework/performance","bv/bootstrap/callHandler","util/pluralform!"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=new Date,d=a._internal,v=d.perfResults={};return l.mark("slowPathStart"),!a.serverRender&&l.getEntriesByName("primaryStart").length>0&&t.defer(function(){var t=l.getEntriesByName("scoutStart")[0];l.track({name:"bv-scout-start",startTime:0,duration:t.startTime}),l.log.warn("bv-primary-ready","scoutStart","primaryStart"),l.log.warn("bv-primary-run","primaryStart","primaryEnd"),l.log.warn("bv-slow-path-ready","primaryStart","slowPathStart"),l.log.warn("bv-core-app","scoutStart","slowPathStart"),o.performance&&o.performance.timing&&(o.performance.timing.loadEventStart?l.log.warn("bv-host-load","scoutStart","loadEventStart"):e(o).on("load",function(){l.log.warn("bv-host-load","scoutStart","loadEventStart")}))}),function(){var e=a.options||{};r.set("cssLoaded",s),l.mark("queued-ui-calls-start"),l.measure("queued-ui-calls-ready","scoutStart","queued-ui-calls-start");while(u._apiQueue&&u._apiQueue.length)c(u._apiQueue.shift());l.mark("queued-ui-calls-end"),l.measure("queued-ui-calls-run","queued-ui-calls-start","queued-ui-calls-end"),delete u._apiQueue,u.push=c,i.queueProcessed=!0,t(e.has).forEach(function(e,t){n.add(t,function(){return e})})}}),function(){if(BV.serverRender)return;BV.require({baseUrl:BV._internal?BV._internal.baseUrl+"/scripts/":"/",context:typeof window.DimSum!="undefined"?"_":"_BV",paths:{template:"../template",underscore:"vendor/_",backbone:"vendor/backbone",jquery:"vendor/jquery",hbs:"require_plugins/hbs",mf:"require_plugins/mf",components:"require_plugins/components",views:"require_plugins/views",client:"require_plugins/client",text:"require_plugins/text",serverFetch:"require_plugins/serverFetch",dimsumFields:"require_plugins/dimsumFields",cssdata:"require_plugins/cssdata",mappings:"require_plugins/mappings",ratingIconCharMap:"require_plugins/ratingIconCharMap",badges:"require_plugins/badges",staticAssets:"require_plugins/staticAssetService",dimsum:"../../../../../../../dimsum"},components:BV.options.components,style:BV.options.style,has:BV.options.has,locale:BV.options.locale,locales:BV.options.locales,contentLocales:BV.options.contentLocales,views:BV.options.views,siteConfig:BV.options.siteConfig,dimsumFields:BV.options.dimsumFields,fqhn:BV.options.fqhn,exists:BV.options.exists,waitSeconds:20},["require","bv/bootstrap/slowPath"],function(e,t){BV.require=e,t()})}(),BV.define("primary",[],function(){}),window.BV.serverRender||(window.BV.performance.mark("primaryEnd"),window.BV._internal.primaryEndTime=new Date)}();