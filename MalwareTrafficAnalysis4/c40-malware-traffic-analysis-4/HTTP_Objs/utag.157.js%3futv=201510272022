//~~tv:20010.20140827
//~~tc: Tealium Custom Container

/*
Tealium Custom Container Notes:
- Add sending code between "Start Tag Sending Code" and "End Tag Sending Code".
- Add JavaScript tag library code between "Start Tag Library Code" and "End Tag Library Code".
- Add JavaScript code only, do not add HTML code in this file.
- Remove any <script> and </script> tags from the code you place in this file.

Loading external JavaScript files (Loader):
- If you need to load an additional external JavaScript file, un-comment the singe-line JavaScript comments ("//") within the following Loader sections near the bottom of this file:
- "Start Loader Function Call"
- "End Loader Function Call"
- "Start Loader Callback Function"
- "End Loader Callback Function"
- After un-commenting, insert the path to the external JavaScript file you want to load.
- Finally, within the Loader callback function, insert the JavaScript code that should run after the external JavaScript file has loaded.
*/

/* Start Tag Library Code */
window._axq = window._axq || [];
/* End Tag Library Code */

//tealium universal tag - utag.sender.custom_container ut4.0.201508201754, Copyright 2015 Tealium.com Inc. All Rights Reserved.
try {
  (function (id, loader) {
    var u = {};
    utag.o[loader].sender[id] = u;
    
    // Start Tealium loader 4.32
    // Please do not modify
    if (utag === undefined) { utag = {}; } if (utag.ut === undefined) { utag.ut = {}; } if (utag.ut.loader === undefined) { u.loader = function (o) { var a, b, c, l; a = document; if (o.type === "iframe") { b = a.createElement("iframe"); b.setAttribute("height", "1"); b.setAttribute("width", "1"); b.setAttribute("style", "display:none"); b.setAttribute("src", o.src); } else if (o.type === "img") { utag.DB("Attach img: " + o.src); b = new Image(); b.src = o.src; return; } else { b = a.createElement("script"); b.language = "javascript"; b.type = "text/javascript"; b.async = 1; b.charset = "utf-8"; b.src = o.src; } if (o.id) { b.id = o.id; } if (typeof o.cb === "function") { if (b.addEventListener) { b.addEventListener("load", function () { o.cb(); }, false); } else { b.onreadystatechange = function () { if (this.readyState === "complete" || this.readyState === "loaded") { this.onreadystatechange = null; o.cb(); } }; } } l = o.loc || "head"; c = a.getElementsByTagName(l)[0]; if (c) { utag.DB("Attach to " + l + ": " + o.src); if (l === "script") { c.parentNode.insertBefore(b, c); } else { c.appendChild(b); } } }; } else { u.loader = utag.ut.loader; }
    // End Tealium loader
    
    u.ev = {'view' : 1};
    
    u.initialized = false;
    
      u.map={"CustomerEmail":"user_id","adchemix_page_type":"page_type"};
  u.extend=[function(a,b){/** A JavaScript implementation of the RSA Data Security, Inc. MD5 Message
 * Digest Algorithm, as defined in RFC 1321.
 * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for more info.*/
var hexcase=0;var b64pad="";function hex_md5(a){return rstr2hex(rstr_md5(str2rstr_utf8(a)))}function rstr_md5(a){return binl2rstr(binl_md5(rstr2binl(a),a.length*8))}function rstr2hex(c){try{hexcase}catch(g){hexcase=0}var f=hexcase?"0123456789ABCDEF":"0123456789abcdef";var b="";var a;for(var d=0;d<c.length;d++){a=c.charCodeAt(d);b+=f.charAt((a>>>4)&15)+f.charAt(a&15)}return b}function str2rstr_utf8(c){var b="";var d=-1;var a,e;while(++d<c.length){a=c.charCodeAt(d);e=d+1<c.length?c.charCodeAt(d+1):0;if(55296<=a&&a<=56319&&56320<=e&&e<=57343){a=65536+((a&1023)<<10)+(e&1023);d++}if(a<=127){b+=String.fromCharCode(a)}else{if(a<=2047){b+=String.fromCharCode(192|((a>>>6)&31),128|(a&63))}else{if(a<=65535){b+=String.fromCharCode(224|((a>>>12)&15),128|((a>>>6)&63),128|(a&63))}else{if(a<=2097151){b+=String.fromCharCode(240|((a>>>18)&7),128|((a>>>12)&63),128|((a>>>6)&63),128|(a&63))}}}}}return b}function rstr2binl(b){var a=Array(b.length>>2);for(var c=0;c<a.length;c++){a[c]=0}for(var c=0;c<b.length*8;c+=8){a[c>>5]|=(b.charCodeAt(c/8)&255)<<(c%32)}return a}function binl2rstr(b){var a="";for(var c=0;c<b.length*32;c+=8){a+=String.fromCharCode((b[c>>5]>>>(c%32))&255)}return a}function binl_md5(p,k){p[k>>5]|=128<<((k)%32);p[(((k+64)>>>9)<<4)+14]=k;var o=1732584193;var n=-271733879;var m=-1732584194;var l=271733878;for(var g=0;g<p.length;g+=16){var j=o;var h=n;var f=m;var e=l;o=md5_ff(o,n,m,l,p[g+0],7,-680876936);l=md5_ff(l,o,n,m,p[g+1],12,-389564586);m=md5_ff(m,l,o,n,p[g+2],17,606105819);n=md5_ff(n,m,l,o,p[g+3],22,-1044525330);o=md5_ff(o,n,m,l,p[g+4],7,-176418897);l=md5_ff(l,o,n,m,p[g+5],12,1200080426);m=md5_ff(m,l,o,n,p[g+6],17,-1473231341);n=md5_ff(n,m,l,o,p[g+7],22,-45705983);o=md5_ff(o,n,m,l,p[g+8],7,1770035416);l=md5_ff(l,o,n,m,p[g+9],12,-1958414417);m=md5_ff(m,l,o,n,p[g+10],17,-42063);n=md5_ff(n,m,l,o,p[g+11],22,-1990404162);o=md5_ff(o,n,m,l,p[g+12],7,1804603682);l=md5_ff(l,o,n,m,p[g+13],12,-40341101);m=md5_ff(m,l,o,n,p[g+14],17,-1502002290);n=md5_ff(n,m,l,o,p[g+15],22,1236535329);o=md5_gg(o,n,m,l,p[g+1],5,-165796510);l=md5_gg(l,o,n,m,p[g+6],9,-1069501632);m=md5_gg(m,l,o,n,p[g+11],14,643717713);n=md5_gg(n,m,l,o,p[g+0],20,-373897302);o=md5_gg(o,n,m,l,p[g+5],5,-701558691);l=md5_gg(l,o,n,m,p[g+10],9,38016083);m=md5_gg(m,l,o,n,p[g+15],14,-660478335);n=md5_gg(n,m,l,o,p[g+4],20,-405537848);o=md5_gg(o,n,m,l,p[g+9],5,568446438);l=md5_gg(l,o,n,m,p[g+14],9,-1019803690);m=md5_gg(m,l,o,n,p[g+3],14,-187363961);n=md5_gg(n,m,l,o,p[g+8],20,1163531501);o=md5_gg(o,n,m,l,p[g+13],5,-1444681467);l=md5_gg(l,o,n,m,p[g+2],9,-51403784);m=md5_gg(m,l,o,n,p[g+7],14,1735328473);n=md5_gg(n,m,l,o,p[g+12],20,-1926607734);o=md5_hh(o,n,m,l,p[g+5],4,-378558);l=md5_hh(l,o,n,m,p[g+8],11,-2022574463);m=md5_hh(m,l,o,n,p[g+11],16,1839030562);n=md5_hh(n,m,l,o,p[g+14],23,-35309556);o=md5_hh(o,n,m,l,p[g+1],4,-1530992060);l=md5_hh(l,o,n,m,p[g+4],11,1272893353);m=md5_hh(m,l,o,n,p[g+7],16,-155497632);n=md5_hh(n,m,l,o,p[g+10],23,-1094730640);o=md5_hh(o,n,m,l,p[g+13],4,681279174);l=md5_hh(l,o,n,m,p[g+0],11,-358537222);m=md5_hh(m,l,o,n,p[g+3],16,-722521979);n=md5_hh(n,m,l,o,p[g+6],23,76029189);o=md5_hh(o,n,m,l,p[g+9],4,-640364487);l=md5_hh(l,o,n,m,p[g+12],11,-421815835);m=md5_hh(m,l,o,n,p[g+15],16,530742520);n=md5_hh(n,m,l,o,p[g+2],23,-995338651);o=md5_ii(o,n,m,l,p[g+0],6,-198630844);l=md5_ii(l,o,n,m,p[g+7],10,1126891415);m=md5_ii(m,l,o,n,p[g+14],15,-1416354905);n=md5_ii(n,m,l,o,p[g+5],21,-57434055);o=md5_ii(o,n,m,l,p[g+12],6,1700485571);l=md5_ii(l,o,n,m,p[g+3],10,-1894986606);m=md5_ii(m,l,o,n,p[g+10],15,-1051523);n=md5_ii(n,m,l,o,p[g+1],21,-2054922799);o=md5_ii(o,n,m,l,p[g+8],6,1873313359);l=md5_ii(l,o,n,m,p[g+15],10,-30611744);m=md5_ii(m,l,o,n,p[g+6],15,-1560198380);n=md5_ii(n,m,l,o,p[g+13],21,1309151649);o=md5_ii(o,n,m,l,p[g+4],6,-145523070);l=md5_ii(l,o,n,m,p[g+11],10,-1120210379);m=md5_ii(m,l,o,n,p[g+2],15,718787259);n=md5_ii(n,m,l,o,p[g+9],21,-343485551);o=safe_add(o,j);n=safe_add(n,h);m=safe_add(m,f);l=safe_add(l,e)}return Array(o,n,m,l)}function md5_cmn(h,e,d,c,g,f){return safe_add(bit_rol(safe_add(safe_add(e,h),safe_add(c,f)),g),d)}function md5_ff(g,f,k,j,e,i,h){return md5_cmn((f&k)|((~f)&j),g,f,e,i,h)}function md5_gg(g,f,k,j,e,i,h){return md5_cmn((f&j)|(k&(~j)),g,f,e,i,h)}function md5_hh(g,f,k,j,e,i,h){return md5_cmn(f^k^j,g,f,e,i,h)}function md5_ii(g,f,k,j,e,i,h){return md5_cmn(k^(f|(~j)),g,f,e,i,h)}function safe_add(a,d){var c=(a&65535)+(d&65535);var b=(a>>16)+(d>>16)+(c>>16);return(b<<16)|(c&65535)}function bit_rol(a,b){return(a<<b)|(a>>>(32-b))};try{b['CustomerEmail']=hex_md5(b['CustomerEmail'])}catch(e){}}
,
function(a,b,c,d,e,f,g){d=b['Page'];if(typeof d=='undefined')return;c=[{'product':'product'}];var m=false;for(e=0;e<c.length;e++){for(f in c[e]){if(d==f){b['adchemix_page_type']=c[e][f];m=true};};if(m)break};if(!m)b['adchemix_page_type']='';}];

      
      u.send = function(a, b) {
	if (u.ev[a] || u.ev.all !== undefined) {
	  //##UTENABLEDEBUG##utag.DB("send:##UTID##");
	  
	  var c, d, e, f, i;
	  
	  u.data = {
	    /* Initialize default tag parameter values here */
	    "base_url" : "//data.adchemix.com/a.js",
	    "site_id" : "999974",
	    "page_type" : "",
	    "user_id" : "", // MD5 Hased Email
	    // Product Data:
	    "product_sku" : "",
	    "product_name" : "",
	    "product_category" : "",
	    "product_price" : "",
	    "product_quantity" : "",
	    // Order Data:
	    "order_id" : "",
	    "order_subtotal" : "",
	    "order_grandtotal" : "",
	    "discount_offered" : "",
	    "tax_amount" : "",
	    "shipping_amount" : "",
	    "discount_offered" : ""
	    /* A value mapped to "account_id" or "base_url" in TiQ will replace these default values. */
	  };
	  
	  
	  /* Start Tag-Scoped Extensions Code */
	  /* Please Do Not Edit This Section */
	  for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};
	    /* End Tag-Scoped Extensions Code */
	    
	    
	    /* Start Mapping Code */
	    for (d in utag.loader.GV(u.map)) {
	      if (b[d] !== undefined && b[d] !== "") {
		e = u.map[d].split(",");
		for (f = 0; f < e.length; f++) {
		  u.data[e[f]] = b[d];
		}
	      }
	    }
	  /* End Mapping Code */
	  
	  
	  /* Start Tag Sending Code */
	  
	  u.data.site_id = u.data.site_id || "";
	  u.data.page_type = u.data.page_type || "";
	  u.data.user_id = u.data.user_id || b._ccust || ""; // MD5 Hashed Email
	  // Product-level
	  u.data.product_sku = u.data.product_sku || b._csku || "";
	  u.data.product_name = u.data.product_name || b._cprodname || "";
	  u.data.product_category = u.data.product_category || b._ccat || "";
	  u.data.product_price = u.data.product_price || b._cprice || "";
	  u.data.product_quantity = u.data.product_quantity || b._cquan || "";
	  // Order-level
	  u.data.order_id = u.data.order_id || b._corder || "";
	  u.data.order_grandtotal = u.data.order_grandtotal || b._ctotal || "0.00";
	  u.data.order_subtotal = u.data.order_subtotal || b._csubtotal || "0.00";
	  u.data.tax_amount = u.data.tax_amount || b._ctax || "0.00";
	  u.data.shipping_amount = u.data.shipping_amount || b._cship || "0.00";
	  u.data.discount_offered = u.data.discount_offered || b._cpdisc || "0.00";

	  if (u.data.site_id) {
	    window._axq.push(['setSiteId', u.data.site_id]);
	    
	    // Tracking Identified User Sessions (MD5 Hased Email)
	    if (u.data.user_id) {
	      window._axq.push(['setCustomData', {'user_id': u.data.user_id}]);
	    }
	    
	    if (u.data.page_type == 'product') {
	      window._axq.push(['setEcommerceView',
				u.data.product_sku,
				u.data.product_name,
				u.data.product_category,
				u.data.product_price
			       ]);
	    } else if (u.data.page_type == 'confirmation' || (b._corder)) {
	      // Send E-commerce Product-level data
	      if (u.data.product_sku.length > 0) {
		for (var i = 0; i < u.data.product_sku.length; i++) {
		  window._axq.push(['addEcommerceItem',
				    u.data.product_sku[i],
				    u.data.product_name[i],
				    u.data.product_category[i],
				    u.data.product_price[i],
				    u.data.product_quantity[i]
				   ]);
		}
	      }
	      // Send E-commerce  Order-level data
	      window._axq.push(['trackEcommerceOrder',
				u.data.order_id,
				u.data.order_grandtotal,
				u.data.order_subtotal,
				u.data.tax_amount,
				u.data.shipping_amount,
				u.data.discount_offered
			       ]);
	    } else {
	      // Track Pageview
	      window._axq.push(['trackPageView']);
	    }
	  } else {
	    console.log('Error: no Site ID set!  Exiting 157');
	    return false;
	  }
	  
	  u.data.base_url = document.location.protocol + u.data.base_url;
	  
	  /* End Tag Sending Code */
	  
	  
	  /* Start Loader Callback Function */
	  /* Un-comment the single-line JavaScript comments ("//") to use this Loader callback function. */
	  
	  u.loader_cb = function () {
	    u.initialized = true;
	    /* Start Loader Callback Tag Sending Code */
	    
	    // Insert your post-Loader tag sending code here.
	    
	    /* End Loader Callback Tag Sending Code */
	  };
	  
	  /* End Loader Callback Function */
	  
	  
	  /* Start Loader Function Call */
	  /* Un-comment the single-line JavaScript comments ("//") to use Loader. */
	  
	  if (!u.initialized) {
	    //u.loader({"type" : "iframe", "src" : u.data.base_url + c.join(u.data.qsp_delim), "cb" : u.loader_cb, "loc" : "body", "id" : 'utag_157' });
	    u.loader({"type" : "script", "src" : u.data.base_url, "cb" : u.loader_cb, "loc" : "script", "id" : 'utag_157' });
	  } else {
	    u.loader_cb();
	  }
	  
	  //u.loader({"type" : "img", "src" : u.data.base_url + c.join(u.data.qsp_delim) });
	  
	  /* End Loader Function Call */
	  
	  
	  //##UTENABLEDEBUG##utag.DB("send:##UTID##:COMPLETE");
	}
      };
    utag.o[loader].loader.LOAD(id);
  })("157", "sportsman.newmain");
} catch (error) {
  utag.DB(error);
}
//end tealium universal tag

