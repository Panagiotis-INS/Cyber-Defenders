var OHUB=OHUB||{};OHUB.tracker_url="http://st.ohub.us";OHUB.clickthru_url="http://ct.ohub.us";OHUB.DEBUG=false;if(typeof(OHUB.loaded)=="undefined"){OHUB.loaded=[]}OHUB.get_nhz=function(){OHUB.debug("get_nhz()");var a=0;$_("*:visible").each(function(b){var c=$_(this).css("zIndex");if(typeof(c)!="undefined"&&c!="auto"){a=(parseInt(c,10)>a)?c:a}});return parseInt(a,10)+99999+1};OHUB.cachebust=function(b){if(typeof(b)!="undefined"){var a=b.toString().replace(/\[timestamp\]/gi,String(new Date().getTime())+Math.round(Math.random(1)*1000000));a=a.replace(/\[random\]/gi,String(new Date().getTime())+Math.round(Math.random(1)*1000000));a=a.replace(/ord\=\%n/gi,"ord="+String(new Date().getTime())+Math.round(Math.random(1)*1000000));return a}else{return}};OHUB.stat=function(b){OHUB.debug("stat: "+typeof(b));if(typeof(b)!="object"){return}else{var a={};if(typeof(b.o)!="undefined"){a.o=b.o}if(typeof(b.a)!="undefined"){a.a=b.a}if(typeof(b.b)!="undefined"){a.b=b.b}if(typeof(b.c)!="undefined"){a.c=b.c}if(typeof(b.s)!="undefined"){a.s=b.s}if(typeof(b.p)!="undefined"){a.p=b.p}if(typeof(b.x)!="undefined"){a.x=b.x}if(typeof(b.t)!="undefined"){a.t=b.t}if(typeof(b.r)!="undefined"){a.r=b.r}if(typeof(b.f)!="undefined"){a.f=b.f}if(typeof(b.v)!="undefined"){a.v=b.v}if(typeof(b.w)!="undefined"){a.w=b.w}if(typeof(b.wp)!="undefined"){if(typeof(b.wp.p)!="undefined"){a.wp.p=b.wp.p}if(typeof(b.wp.t)!="undefined"){a.wp.s=b.wp.s}if(typeof(b.wp.t)!="undefined"){a.wp.t=b.wp.t}}if(typeof(b.yt)!="undefined"){if(typeof(b.yt.c)!="undefined"){a.yt.c=b.yt.c}if(typeof(b.yt.p)!="undefined"){a.yt.p=b.yt.p}if(typeof(b.yt.v)!="undefined"){a.yt.v=b.yt.v}}if(typeof(b.ref)!="undefined"){a.ref=b.ref}$_.getJSON(OHUB.tracker_url+"?cb=?",a,function(c){OHUB.debug("stat cb")})}};OHUB.clickthru=function(b){OHUB.debug("clickthru()");if(typeof(b.stat)!="object"){OHUB.debug("clickthru passed without stat","warn")}if(typeof(b.url)!="string"){OHUB.debug("clickthru passed without a URL!","warn")}var a=OHUB.clickthru_url+"?u="+encodeURIComponent(b.url)+";";b.stat.t=(typeof(b.stat.t)!="undefined")?b.stat.t:"app";b.stat.b=(typeof(b.stat.b)!="undefined")?b.stat.b:null;b.stat.c=(typeof(b.stat.c)!="undefined")?b.stat.c:null;b.stat.r=(typeof(b.stat.r)!="undefined")?b.stat.r:null;b.stat.f=(typeof(b.stat.f)!="undefined")?b.stat.f:null;b.stat.s=(typeof(b.stat.s)!="undefined")?b.stat.s:null;b.stat.p=(typeof(b.stat.p)!="undefined")?b.stat.p:null;b.stat.v=(typeof(b.stat.v)!="undefined")?b.stat.v:null;b.stat.w=(typeof(b.stat.w)!="undefined")?b.stat.w:null;if(typeof(b.stat.wp)!="undefined"){b.stat.wp.p=(typeof(b.stat.wp.p)!="undefined")?b.stat.wp.p:null;b.stat.wp.s=(typeof(b.stat.wp.s)!="undefined")?b.stat.wp.s:null;b.stat.wp.t=(typeof(b.stat.wp.t)!="undefined")?b.stat.wp.t:null}else{b.stat.wp=null}if(typeof(b.stat.yt)!="undefined"){b.stat.yt.c=(typeof(b.stat.yt.c)!="undefined")?b.stat.yt.c:null;b.stat.yt.p=(typeof(b.stat.yt.p)!="undefined")?b.stat.yt.p:null;b.stat.yt.v=(typeof(b.stat.yt.v)!="undefined")?b.stat.yt.v:null}else{b.stat.yt=null}b.stat.a=(typeof(b.stat.a)!="undefined")?b.stat.a:null;a+="&a="+b.stat.a;a+="&x=1";a+="&t="+b.stat.t;if(b.stat.b!==null){a+="&b="+b.stat.b}if(b.stat.c!==null){a+="&c="+b.stat.c}if(b.stat.r!==null){a+="&r="+b.stat.r}if(b.stat.f!==null){a+="&f="+b.stat.f}if(b.stat.s!==null){a+="&s="+b.stat.s}if(b.stat.v!==null){a+="&v="+b.stat.v}if(b.stat.w!==null){a+="&w="+b.stat.w}if(b.stat.wp!==null){if(b.stat.wp.p!==null){a+="&wp.p="+b.stat.wp.p}if(b.stat.wp.s!==null){a+="&wp.s="+b.stat.wp.s}if(b.stat.wp.t!==null){a+="&wp.t="+b.stat.wp.t}}if(b.stat.yt!==null){if(b.stat.yt.c!==null){a+="&yt.c="+b.stat.yt.c}if(b.stat.yt.p!==null){a+="&yt.p="+b.stat.yt.p}if(b.stat.yt.v!==null){a+="&yt.v="+b.stat.yt.v}}if(b.stat.p!==null){a+="&p="+b.stat.p}return a};OHUB.jquery=function(b,i,h,e){var c=(typeof(i)!="undefined"&&!i)?false:true,a=(typeof(e)!="undefined"&&e)?true:false,g=false;function d(j){if(c&&e){window.$_=j.noConflict()}else{if(c&&!e){window.$_=j}else{if(!c&&e){j.noConflict()}}}}var f="1.8.3";if(typeof(h)!="undefined"&&h!=""){f=h}OHUB.debug("jquery()");if(!OHUB.has_jquery()||jQuery.prototype.jquery!=f){g=OHUB.has_jquery();OHUB.load("http://ajax.googleapis.com/ajax/libs/jquery/"+f+"/jquery.min.js","js",function(){if(parseFloat(jQuery.prototype.jquery)>=1.9&&!OHUB.has_loaded("http://s3.ohub.us/jquery-migrate-1.0.0.min.js",false)){OHUB.load("http://s3.ohub.us/jquery-migrate-1.0.0.min.js","js",function(){d(jQuery);if(typeof(b)=="function"){return b(g)}})}else{d(jQuery);if(typeof(b)=="function"){return b(g)}}})}else{if(parseFloat(jQuery.prototype.jquery)>=1.9&&!OHUB.has_loaded("http://s3.ohub.us/jquery-migrate-1.0.0.min.js",false)){OHUB.debug("jquery v1.9 or greater detected - loading jquery migrate.");OHUB.load("http://s3.ohub.us/jquery-migrate-1.0.0.min.js","js",function(){d(jQuery);if(typeof(b)=="function"){return b(g)}})}else{d(jQuery);if(typeof(b)=="function"){return b(g)}}}};OHUB.setup_cors=function(){OHUB.debug("setup_cors()");if(!OHUB.has_jquery()){return}jQuery.support.cors=$_.support.cors=true;$_.ajaxTransport("+*",function(b,d,c){if((jQuery.browser.msie||jQuery.browser.opera||jQuery.browser.safari)&&window.XDomainRequest){var a;return{send:function(f,e){a=new XDomainRequest();a.open("get",b.url);a.onload=function(){if(this.contentType.match(/\/xml/)){var g=new ActiveXObject("Microsoft.XMLDOM");g.async=false;g.loadXML(this.responseText);e(200,"success",[g])}else{e(200,"success",[this.responseText])}};a.ontimeout=function(){e(408,"error",["The request timed out."])};a.onerror=function(){e(404,"error",["The requested resource could not be found."])};a.send()},abort:function(){if(a){a.abort()}}}}})};OHUB.load=function(a,h,b,k,c){k=(typeof(k)!="undefined")?k:null;c=(typeof(c)!="undefined")?c:false;OHUB.debug("load("+a+" ("+h+"), insert_before="+k+", duplicates_ok="+c+")","log","",false,"color: white; background-color: royalblue;");var d=false;var j=(typeof(h)=="undefined")?"js":h;var l="";var i={};switch(j){case"js":l="script";i={type:"text/javascript",src:a};break;case"css":l="link";i={rel:"stylesheet",type:"text/css",href:a};break;default:return}var g=document.createElement(l);if(g.readyState){g.onreadystatechange=function(){if(g.readyState=="loaded"||g.readyState=="complete"){g.onreadystatechange=null;OHUB.debug("loaded : readyState : ("+a+" ["+h+"])");if(!OHUB.has_loaded(a,c)){OHUB.now_loaded(a)}if(typeof(b)=="function"&&!d){d=true;return b()}}}}else{g.onload=function(){OHUB.debug("loaded : onload : ("+a+" ["+h+"])");if(!OHUB.has_loaded(a,c)){OHUB.now_loaded(a)}if(typeof(b)=="function"&&!d){d=true;return b()}}}for(var f in i){g[f]=i[f]}if(k===null){document.getElementsByTagName("head")[0].appendChild(g)}else{k.parentNode.insertBefore(g,k)}if(j=="css"&&typeof(b)=="function"&&!d){if(!OHUB.has_loaded(a,c)){OHUB.now_loaded(a)}d=true;return b()}};OHUB.now_loaded=function(a){OHUB.debug("now_loaded(url="+a+")");var b="";if(typeof(a)=="undefined"){OHUB.debug("now_loaded() - no url passed!","warn");return}else{var c=a.indexOf("?");if(c!==-1){b=a.substring(0,c)}else{b=a}OHUB.loaded.push(b)}};OHUB.has_loaded=function(b,a){a=(typeof(a)!="undefined")?a:false;OHUB.debug("has_loaded(url="+b+", duplicates_ok="+a+")");if(a){return false}return(OHUB.in_array(b,OHUB.loaded))};OHUB.ready=function(a){OHUB.debug("ready()");if(OHUB.ready.done){return a()}if(OHUB.ready.timer){OHUB.ready.ready.push(a)}else{OHUB.listen(window,"load",OHUB.is_ready);if(a){OHUB.ready.ready=[a]}OHUB.ready.timer=setInterval(OHUB.is_ready,10)}};OHUB.is_ready=function(){if(OHUB.ready.done){return false}if(document&&document.getElementsByTagName&&document.getElementById&&document.body){clearInterval(OHUB.ready.timer);OHUB.ready.timer=null;if(typeof(OHUB.ready.ready)!="undefined"){for(var a=0;a<OHUB.ready.ready.length;a++){OHUB.ready.ready[a]()}OHUB.ready.ready=null}OHUB.ready.done=true;OHUB.debug("is_ready()")}};OHUB.listen=function(d,c,a){OHUB.debug("listen(el="+d+", type="+c+")");if(!a.$$guid){a.$$guid=OHUB.listen.guid++}if(!d.events){d.events={}}var b=d.events[c];if(!b){b=d.events[c]={};if(d["on"+c]){b[0]=d["on"+c]}}b[a.$$guid]=a;d["on"+c]=OHUB.handle_listen};OHUB.listen.guid=1;OHUB.handle_listen=function(c){OHUB.debug("handle_listen()");c=c||window.event;if(typeof(c)=="undefined"){return}var a=this.events[c.type];for(var b in a){this.$$handle_listen=a[b];this.$$handle_listen(c)}};OHUB.parse_querystring=function(f){OHUB.debug("parse_querystring(url="+f+")");var c={};var i,b=/\+/g;var g=/([^&=]+)=?([^&]*)/g;var j=function(a){return decodeURIComponent(a.replace(b," "))};var h=f.substring(f.indexOf("?")+1);while(i=g.exec(h)){c[j(i[1])]=j(i[2])}return c};OHUB.tld=function(d){if(d!==""&&typeof(d)!="undefined"){var g=(d.match(/:\/\/(.[^\/]+)/)[1]).replace("www.","");var f=g.split(".");if(f.length==2){return g}var a=false;for(var e in f){if(e=="."){continue}a=!isNaN(f[e])}if(!a){var c=f[f.length-1];var b=f[f.length-2];g=b+"."+c}return g}else{return d}};OHUB.dim=function(b,a,d){OHUB.debug("dim()");if($_("#OHUB_DIMMER").length===0){OHUB.add_dimmer()}var c=$_("#OHUB_DIMMER");c.fadeTo(b,a,function(){c.data("is_dimmed",true);if(typeof(d)=="function"){d()}})};OHUB.undim=function(a,c){OHUB.debug("undim()");var b=$_("#OHUB_DIMMER");$_(window).unbind("resize.OHUB_dimmer");b.fadeOut(a,function(){b.data("is_dimmed",false);if(typeof(c)=="function"){c()}})};OHUB.add_dimmer=function(){OHUB.debug("add_dimmer()");var b=$_("#OHUB_DIMMER");if(b.length===0){$_("body").prepend('<div id="OHUB_DIMMER" style="display: none;" />');b=$_("#OHUB_DIMMER");var a=OHUB.get_nhz();b.css({position:"fixed",backgroundColor:"#000",zIndex:a,margin:0,left:0,top:0,height:$_(window).height(),width:"100%"});$_(window).unbind("resize.OHUB_dimmer").bind("resize.OHUB_dimmer",function(){var c=$_("#OHUB_DIMMER");if(c.data("is_dimmed")){c.css({height:$_(window).height()})}})}};OHUB.in_array=function(b,a){OHUB.debug("in_array(needle="+b+")");if(!OHUB.is_array(a)){OHUB.debug("in_array() - haystack is not an array! aborting!","warn")}if(typeof(b)!="string"){OHUB.debug("in_array() - needle is not a string! aborting!","warn")}return(String("|"+a.join("|")+"|").indexOf("|"+b+"|")!==-1)};OHUB.is_array=function(a){return(typeof(a)=="object"&&typeof(a.length)=="number")};OHUB.url_context=function(a){this.debug("url_context(url="+a+")");if(typeof(a)!=="undefined"){return a.split("/")[a.split("/").length-1].split(".")[0]}};OHUB.has_jquery=function(){OHUB.debug("has_jquery()");return(typeof(jQuery)=="function")};OHUB.debug=function(out,type,ident,force,style){ident=(typeof(ident)!="undefined"&&ident!=="")?ident:"OHUB.core";force=(typeof(force)!="undefined")?force:false;style=(typeof(style)!="undefined")?style:null;hasfb=(typeof(window.console)=="object"&&typeof(window.console.warn)=="function");if(!OHUB.DEBUG&&!force){return}if(ident=="OHUB.core"&&style===null){style="color: blue;"}try{if(typeof(console)=="object"){if(typeof(console[type])!="function"){type="log"}switch(typeof(out)){case"string":case"function":ident+=": ";switch(type){case"warn":console.warn(ident+out);break;case"info":console.info(ident+out);break;case"error":console.error(ident+out);break;default:if(style===null){console.log(ident+out)}else{if(hasfb){console.log("%c"+ident+out,style)}else{console.log(ident+out)}}break}break;case"object":eval("console.dir({ '"+ident+"': out } );");break}}}catch(e){}};OHUB.CORE=true;